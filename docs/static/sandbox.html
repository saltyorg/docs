<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branch Diff Report - saltyorg/Sandbox</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: #30363d;
            --accent-green: #238636;
            --accent-red: #da3633;
            --diff-add-bg: rgba(46, 160, 67, 0.15);
            --diff-del-bg: rgba(248, 81, 73, 0.15);
            --diff-add-text: #7ee787;
            --diff-del-text: #ffa198;
            --diff-hunk-bg: rgba(56, 139, 253, 0.15);
            --diff-hunk-text: #79c0ff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            padding: 2rem;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
        }
        h1 { font-size: 1.75rem; font-weight: 600; margin-bottom: 0.5rem; }
        .meta { color: var(--text-secondary); font-size: 0.875rem; }
        .meta code { background: var(--bg-tertiary); padding: 0.1rem 0.4rem; border-radius: 3px; }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
        }
        .stat-card h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }
        .stat-card .value { font-size: 1.5rem; font-weight: 600; }
        .stat-card.added .value { color: var(--diff-add-text); }
        .stat-card.removed .value { color: var(--diff-del-text); }
        .stat-card.modified .value { color: var(--diff-hunk-text); }
        .toc {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        .toc h2 { font-size: 1rem; margin-bottom: 0.75rem; }
        .toc-list {
            list-style: none;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.875rem;
        }
        .toc-list li { padding: 0.25rem 0; }
        .toc-list a { color: var(--diff-hunk-text); text-decoration: none; }
        .toc-list a:hover { text-decoration: underline; }
        .badge {
            font-size: 0.7rem;
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            margin-left: 0.5rem;
        }
        .badge.added { background: var(--accent-green); color: white; }
        .badge.removed { background: var(--accent-red); color: white; }
        .badge.modified { background: var(--bg-tertiary); color: var(--text-secondary); }
        .file-section {
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }
        .file-header {
            background: var(--bg-secondary);
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .file-header h3 {
            font-size: 0.875rem;
            font-weight: 600;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
        }
        .diff-content {
            overflow-x: auto;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
            font-size: 0.8rem;
            line-height: 1.4;
        }
        .diff-content pre { margin: 0; padding: 1rem; white-space: pre; }
        .diff-line { display: block; padding: 0 0.5rem; }
        .diff-line.add { background: var(--diff-add-bg); color: var(--diff-add-text); }
        .diff-line.del { background: var(--diff-del-bg); color: var(--diff-del-text); }
        .diff-line.hunk { background: var(--diff-hunk-bg); color: var(--diff-hunk-text); }
        .diff-line.context { color: var(--text-secondary); }
        .collapse-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            margin-left: auto;
        }
        .collapse-btn:hover { background: var(--border-color); }
        .collapsed .diff-content { display: none; }
        footer {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Branch Comparison Report</h1>
            <p class="meta">
                <strong>Repository:</strong> saltyorg/Sandbox<br>
                <strong>Comparing:</strong> <code>master</code> â†’ <code>role-refactor</code><br>
                <strong>Generated:</strong> 2026-01-30 13:08:40
            </p>
        </header>
        
        <div class="summary">
            <div class="stat-card added">
                <h3>Files Added</h3>
                <div class="value">6</div>
            </div>
            <div class="stat-card removed">
                <h3>Files Removed</h3>
                <div class="value">37</div>
            </div>
            <div class="stat-card modified">
                <h3>Files Modified</h3>
                <div class="value">397</div>
            </div>
            <div class="stat-card">
                <h3>Total Changes</h3>
                <div class="value">440</div>
            </div>
        </div>
        
        <div class="toc">
            <h2>Changed Files</h2>
            <ul class="toc-list">
                <li><a href="#file-0">roles/homarr/tasks/subtasks/legacy.yml</a><span class="badge added">added</span></li>
                <li><a href="#file-1">roles/homarr_legacy/defaults/main.yml</a><span class="badge added">added</span></li>
                <li><a href="#file-2">roles/homarr_legacy/tasks/main.yml</a><span class="badge added">added</span></li>
                <li><a href="#file-3">roles/traccar/defaults/main.yml</a><span class="badge added">added</span></li>
                <li><a href="#file-4">roles/traccar/tasks/main.yml</a><span class="badge added">added</span></li>
                <li><a href="#file-5">scripts/saltbox-defaults-linter.py</a><span class="badge added">added</span></li>
                <li><a href="#file-6">defaults/settings.yml.default</a><span class="badge removed">removed</span></li>
                <li><a href="#file-7">roles/alternatrr/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-8">roles/alternatrr/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-9">roles/alternatrr/tasks/main2.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-10">roles/aria2_ng/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-11">roles/aria2_ng/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-12">roles/booksonic/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-13">roles/booksonic/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-14">roles/comicstreamer/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-15">roles/comicstreamer/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-16">roles/docspell/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-17">roles/docspell/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-18">roles/goplaxt/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-19">roles/goplaxt/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-20">roles/maybe_finance/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-21">roles/maybe_finance/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-22">roles/maybe_finance_worker/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-23">roles/maybe_finance_worker/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-24">roles/rdtclient/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-25">roles/rdtclient/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-26">roles/settings/files/settings-updater.py</a><span class="badge removed">removed</span></li>
                <li><a href="#file-27">roles/settings/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-28">roles/settings/tasks/main2.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-29">roles/settings/tasks/subtasks/copy.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-30">roles/settings/tasks/subtasks/finish.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-31">roles/settings/tasks/subtasks/migrator.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-32">roles/settings/tasks/subtasks/migrator/all/migration_01.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-33">roles/settings/tasks/subtasks/start.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-34">roles/settings/tasks/subtasks/updater.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-35">roles/solr/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-36">roles/solr/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-37">roles/teamspeak/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-38">roles/teamspeak/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-39">roles/watchtower/defaults/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-40">roles/watchtower/tasks/main.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-41">roles/watchtower/tasks/main2.yml</a><span class="badge removed">removed</span></li>
                <li><a href="#file-42">scripts/salty-linter.py</a><span class="badge removed">removed</span></li>
                <li><a href="#file-43">.ansible-lint</a><span class="badge modified">modified</span></li>
                <li><a href="#file-44">.github/PULL_REQUEST_TEMPLATE.md</a><span class="badge modified">modified</span></li>
                <li><a href="#file-45">.github/renovate.json</a><span class="badge modified">modified</span></li>
                <li><a href="#file-46">.github/workflows/retry.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-47">.github/workflows/sandbox-os.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-48">.github/workflows/sandbox.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-49">ansible.cfg</a><span class="badge modified">modified</span></li>
                <li><a href="#file-50">roles/a_train/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-51">roles/a_train/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-52">roles/a_train/tasks/subtasks/config.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-53">roles/a_train/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-54">roles/a_train/templates/a-train.toml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-55">roles/actualbudget/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-56">roles/actualbudget/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-57">roles/adguardhome/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-58">roles/adguardhome/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-59">roles/adguardhome/templates/AdGuardHome.yaml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-60">roles/adminer/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-61">roles/adminer/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-62">roles/airdcpp/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-63">roles/airdcpp/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-64">roles/airsonic/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-65">roles/airsonic/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-66">roles/apprise/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-67">roles/apprise/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-68">roles/archivebox/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-69">roles/archivebox/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-70">roles/audiobookshelf/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-71">roles/audiobookshelf/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-72">roles/barcodebuddy/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-73">roles/barcodebuddy/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-74">roles/beets/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-75">roles/beets/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-76">roles/bookstack/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-77">roles/bookstack/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-78">roles/calibre/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-79">roles/calibre/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-80">roles/calibre_web/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-81">roles/calibre_web/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-82">roles/changedetection/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-83">roles/changedetection/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-84">roles/cherry/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-85">roles/cherry/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-86">roles/chrome/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-87">roles/cockpit/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-88">roles/cockpit/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-89">roles/cockpit/tasks/subtasks/package.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-90">roles/cockpit/tasks/subtasks/systemd.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-91">roles/cockpit/tasks/subtasks/vm.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-92">roles/cockpit/templates/cockpit.conf.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-93">roles/cockpit/templates/cockpit.yml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-94">roles/cockpit/templates/listen.conf.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-95">roles/cockpit/templates/override.conf.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-96">roles/code_server/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-97">roles/code_server/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-98">roles/code_server/tasks/subtasks/legacy.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-99">roles/codex/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-100">roles/codex/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-101">roles/comixed/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-102">roles/comixed/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-103">roles/crafty/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-104">roles/crafty/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-105">roles/dashdot/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-106">roles/dashdot/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-107">roles/dashy/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-108">roles/dashy/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-109">roles/deemix/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-110">roles/deemix/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-111">roles/delugevpn/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-112">roles/delugevpn/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-113">roles/discoflix/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-114">roles/discoflix/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-115">roles/dockwatch/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-116">roles/dockwatch/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-117">roles/doplarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-118">roles/doplarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-119">roles/duplicati/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-120">roles/duplicati/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-121">roles/elasticsearch/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-122">roles/elasticsearch/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-123">roles/embystat/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-124">roles/embystat/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-125">roles/epms/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-126">roles/esphome/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-127">roles/esphome/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-128">roles/factorio/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-129">roles/factorio/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-130">roles/filebot/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-131">roles/filebot/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-132">roles/filebrowser/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-133">roles/filebrowser/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-134">roles/filebrowser/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-135">roles/filezilla/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-136">roles/filezilla/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-137">roles/fireflyiii/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-138">roles/fireflyiii/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-139">roles/fireflyiii_importer/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-140">roles/fireflyiii_importer/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-141">roles/firefox/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-142">roles/firefox/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-143">roles/firefox/templates/env.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-144">roles/flaresolverr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-145">roles/flaresolverr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-146">roles/forgejo/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-147">roles/forgejo/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-148">roles/foundry/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-149">roles/foundry/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-150">roles/freshrss/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-151">roles/freshrss/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-152">roles/funkwhale/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-153">roles/funkwhale/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-154">roles/gaps/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-155">roles/gaps/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-156">roles/gitea/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-157">roles/gitea/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-158">roles/glances_web/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-159">roles/glances_web/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-160">roles/glances_web/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-161">roles/goaccess/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-162">roles/goaccess/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-163">roles/gotenberg/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-164">roles/gotify/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-165">roles/gotify/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-166">roles/grocy/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-167">roles/grocy/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-168">roles/guacamole/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-169">roles/guacamole/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-170">roles/handbrake/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-171">roles/handbrake/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-172">roles/healthchecks/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-173">roles/healthchecks/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-174">roles/heimdall/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-175">roles/heimdall/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-176">roles/homarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-177">roles/homarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-178">roles/homeassistant/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-179">roles/homeassistant/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-180">roles/homebox/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-181">roles/homebox/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-182">roles/homepage/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-183">roles/homepage/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-184">roles/homepage/tasks/subtasks/init.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-185">roles/homepage/templates/settings.yaml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-186">roles/immich/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-187">roles/immich/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-188">roles/influxdb/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-189">roles/influxdb2/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-190">roles/influxdb2/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-191">roles/invoiceninjav5/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-192">roles/invoiceninjav5/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-193">roles/it_tools/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-194">roles/it_tools/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-195">roles/jdownloader2/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-196">roles/jdownloader2/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-197">roles/jdownloader2/tasks/subtasks/legacy.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-198">roles/jdownloader2/tasks/subtasks/unzippers.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-199">roles/jellyseerr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-200">roles/jellyseerr/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-201">roles/jellystat/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-202">roles/jellystat/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-203">roles/joplin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-204">roles/joplin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-205">roles/karakeep/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-206">roles/karakeep/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-207">roles/kavita/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-208">roles/kavita/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-209">roles/kcptun_client/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-210">roles/kcptun_server/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-211">roles/kitana/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-212">roles/kitana/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-213">roles/koel/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-214">roles/koel/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-215">roles/kometa/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-216">roles/kometa/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-217">roles/komga/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-218">roles/komga/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-219">roles/krusader/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-220">roles/krusader/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-221">roles/lazylibrarian/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-222">roles/lazylibrarian/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-223">roles/lgsm/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-224">roles/lgsm/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-225">roles/linkding/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-226">roles/linkding/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-227">roles/linkwarden/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-228">roles/linkwarden/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-229">roles/maintainerr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-230">roles/maintainerr/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-231">roles/makemkv/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-232">roles/makemkv/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-233">roles/mealie/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-234">roles/mealie/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-235">roles/medusa/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-236">roles/medusa/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-237">roles/meilisearch/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-238">roles/meilisearch/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-239">roles/membarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-240">roles/membarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-241">roles/membarr/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-242">roles/membarr/templates/config.ini.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-243">roles/minecraft/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-244">roles/minecraft/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-245">roles/minecraft_bedrock/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-246">roles/minecraft_bedrock/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-247">roles/miniflux/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-248">roles/miniflux/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-249">roles/mkvtoolnix/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-250">roles/mkvtoolnix/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-251">roles/monitorr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-252">roles/monitorr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-253">roles/moviematch/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-254">roles/moviematch/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-255">roles/mqtt/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-256">roles/mqtt/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-257">roles/mylar3/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-258">roles/mylar3/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-259">roles/n8n/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-260">roles/n8n/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-261">roles/nabarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-262">roles/nabarr/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-263">roles/navidrome/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-264">roles/navidrome/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-265">roles/nextcloud/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-266">roles/nextcloud/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-267">roles/node_red/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-268">roles/node_red/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-269">roles/notifiarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-270">roles/notifiarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-271">roles/notifiarr/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-272">roles/notifiarr/templates/notifiarr.conf.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-273">roles/olivetin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-274">roles/olivetin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-275">roles/ombi/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-276">roles/ombi/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-277">roles/openobserve/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-278">roles/openobserve/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-279">roles/paperless_ai/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-280">roles/paperless_ai/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-281">roles/paperless_ngx/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-282">roles/paperless_ngx/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-283">roles/pgadmin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-284">roles/pgadmin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-285">roles/photoprism/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-286">roles/photoprism/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-287">roles/phpmyadmin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-288">roles/phpmyadmin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-289">roles/plex_auto_languages/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-290">roles/plex_auto_languages/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-291">roles/plex_auto_languages/templates/config.yaml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-292">roles/plex_dupefinder/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-293">roles/plex_dupefinder/templates/config.json.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-294">roles/plex_dupefinder/templates/plex_dupefinder.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-295">roles/plex_meta_manager/tasks/migration.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-296">roles/plex_patrol/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-297">roles/plex_utills/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-298">roles/plex_utills/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-299">roles/plexshare/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-300">roles/plexshare/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-301">roles/plextraktsync/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-302">roles/plextraktsync/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-303">roles/plextraktsync/tasks/subtasks/pre-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-304">roles/plextraktsync/templates/env.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-305">roles/privatebin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-306">roles/privatebin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-307">roles/profilarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-308">roles/profilarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-309">roles/puddletag/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-310">roles/puddletag/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-311">roles/pufferpanel/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-312">roles/pufferpanel/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-313">roles/pyload/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-314">roles/pyload/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-315">roles/python_plexlibrary/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-316">roles/python_plexlibrary/templates/plexlibrary-cron-helper.sh.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-317">roles/python_plexlibrary/templates/plexlibrary.sh.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-318">roles/qbit_manage/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-319">roles/qbit_manage/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-320">roles/qbittorrentvpn/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-321">roles/qbittorrentvpn/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-322">roles/qbittorrentvpn/tasks/subtasks/post-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-323">roles/qbittorrentvpn/tasks/subtasks/post-install/settings/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-324">roles/qui/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-325">roles/qui/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-326">roles/recyclarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-327">roles/reposilite/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-328">roles/reposilite/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-329">roles/requestrr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-330">roles/requestrr/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-331">roles/resiliosync/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-332">roles/resiliosync/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-333">roles/rflood/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-334">roles/rflood/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-335">roles/rflood/tasks/subtasks/post-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-336">roles/rflood/tasks/subtasks/post-install/settings/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-337">roles/rflood/tasks/subtasks/pre-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-338">roles/rocketchat/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-339">roles/rocketchat/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-340">roles/sabthrottle/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-341">roles/sabthrottle/tasks/subtasks/pre-install.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-342">roles/sabthrottle/templates/config.json.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-343">roles/sanity_check/tasks/subtasks/backup_check.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-344">roles/semaphoreui/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-345">roles/semaphoreui/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-346">roles/speedtest/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-347">roles/speedtest/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-348">roles/sqlitebrowser/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-349">roles/sqlitebrowser/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-350">roles/sshwifty/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-351">roles/sshwifty/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-352">roles/sshwifty/tasks/subtasks/settings.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-353">roles/stash/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-354">roles/stash/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-355">roles/stash/tasks/subtasks/auth.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-356">roles/suwayomi/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-357">roles/suwayomi/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-358">roles/syncthing/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-359">roles/syncthing/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-360">roles/tandoor/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-361">roles/tandoor/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-362">roles/tauticord/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-363">roles/tauticord/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-364">roles/tdarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-365">roles/tdarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-366">roles/tdarr_node/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-367">roles/tdarr_node/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-368">roles/telegraf/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-369">roles/telegraf/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-370">roles/teslamate/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-371">roles/teslamate/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-372">roles/thelounge/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-373">roles/thelounge/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-374">roles/threadfin/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-375">roles/threadfin/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-376">roles/tika/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-377">roles/tqm/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-378">roles/tqm/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-379">roles/tqm/templates/tqm.service.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-380">roles/trackarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-381">roles/trackarr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-382">roles/trackarr/tasks/subtasks/pre-install.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-383">roles/trackarr/templates/config.yaml.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-384">roles/traefik_robotstxt/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-385">roles/traefik_robotstxt/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-386">roles/transmission/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-387">roles/transmission/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-388">roles/transmission/tasks/subtasks/post-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-389">roles/transmission/tasks/subtasks/post-install/settings/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-390">roles/transmission/tasks/subtasks/pre-install/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-391">roles/transmissionvpn/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-392">roles/transmissionvpn/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-393">roles/trilium/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-394">roles/trilium/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-395">roles/tubearchivist/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-396">roles/tubearchivist/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-397">roles/tvheadend/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-398">roles/tvheadend/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-399">roles/unifi/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-400">roles/unifi_network_application/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-401">roles/unifi_network_application/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-402">roles/unmanic/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-403">roles/unmanic/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-404">roles/uptime_kuma/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-405">roles/uptime_kuma/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-406">roles/varken/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-407">roles/varken/tasks/config.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-408">roles/varken/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-409">roles/varken/templates/varken.ini.j2</a><span class="badge modified">modified</span></li>
                <li><a href="#file-410">roles/vaultwarden/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-411">roles/vaultwarden/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-412">roles/vnstat/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-413">roles/vnstat/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-414">roles/watchstate/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-415">roles/watchstate/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-416">roles/wikijs/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-417">roles/wikijs/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-418">roles/wireguard/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-419">roles/wireguard/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-420">roles/wizarr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-421">roles/wizarr/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-422">roles/wizarr/tasks/subtasks/migration.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-423">roles/wordpress/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-424">roles/wordpress/tasks/main2.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-425">roles/wrapperr/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-426">roles/wrapperr/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-427">roles/xbackbone/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-428">roles/xbackbone/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-429">roles/xteve/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-430">roles/xteve/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-431">roles/yacht/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-432">roles/yacht/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-433">roles/your_spotify/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-434">roles/your_spotify/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-435">roles/ytdl_sub/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-436">roles/ytdl_sub/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-437">roles/znc/defaults/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-438">roles/znc/tasks/main.yml</a><span class="badge modified">modified</span></li>
                <li><a href="#file-439">sandbox.yml</a><span class="badge modified">modified</span></li>
            </ul>
            <div style="margin-top: 0.75rem;">
                <button onclick="document.querySelectorAll('.file-section').forEach(s => s.classList.remove('collapsed'))" style="background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; font-size: 0.75rem; margin-right: 0.5rem;">Expand All</button>
                <button onclick="document.querySelectorAll('.file-section').forEach(s => s.classList.add('collapsed'))" style="background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; font-size: 0.75rem;">Collapse All</button>
            </div>
        </div>
        
        <main>
            <section class="file-section collapsed" id="file-0">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>roles/homarr/tasks/subtasks/legacy.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ # Title:            Sandbox: Homarr | Legacy                             #</span><span class="diff-line add">+ # Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line add">+ # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line add">+ # --                                                                     #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ #                   GNU General Public License v3.0                      #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ ---</span><span class="diff-line add">+ - name: Legacy | Check for legacy Homarr config</span><span class="diff-line add">+   ansible.builtin.stat:</span><span class="diff-line add">+     path: &quot;{{ server_appdata_path }}/{{ homarr_name }}/default.json&quot;</span><span class="diff-line add">+   register: homarr_legacy_default_json</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Check for Homarr v1 database</span><span class="diff-line add">+   ansible.builtin.stat:</span><span class="diff-line add">+     path: &quot;{{ server_appdata_path }}/{{ homarr_name }}/db&quot;</span><span class="diff-line add">+   register: homarr_v1_db</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Check legacy destination folder</span><span class="diff-line add">+   ansible.builtin.stat:</span><span class="diff-line add">+     path: &quot;{{ server_appdata_path }}/{{ homarr_name }}-legacy&quot;</span><span class="diff-line add">+   register: homarr_legacy_destination</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Determine if migration is needed</span><span class="diff-line add">+   ansible.builtin.set_fact:</span><span class="diff-line add">+     homarr_legacy_migration_needed: &quot;{{ homarr_legacy_default_json.stat.exists and not homarr_v1_db.stat.exists }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Fail if legacy destination exists</span><span class="diff-line add">+   ansible.builtin.fail:</span><span class="diff-line add">+     msg: &quot;Legacy Homarr migration detected but destination {{ server_appdata_path }}/{{ homarr_name }}-legacy already exists. Resolve manually and rerun.&quot;</span><span class="diff-line add">+   when: homarr_legacy_migration_needed and homarr_legacy_destination.stat.exists</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Migrate legacy Homarr folder</span><span class="diff-line add">+   migrate_folder:</span><span class="diff-line add">+     legacy_path: &quot;{{ server_appdata_path }}/{{ homarr_name }}&quot;</span><span class="diff-line add">+     new_path: &quot;{{ server_appdata_path }}/{{ homarr_name }}-legacy&quot;</span><span class="diff-line add">+     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+     mode: &#x27;0775&#x27;</span><span class="diff-line add">+     recurse: false</span><span class="diff-line add">+   when: homarr_legacy_migration_needed and not homarr_legacy_destination.stat.exists</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Legacy | Migration notice</span><span class="diff-line add">+   ansible.builtin.debug:</span><span class="diff-line add">+     msg: &quot;Legacy Homarr data moved to {{ server_appdata_path }}/{{ homarr_name }}-legacy. Use the homarr_legacy role for config export.&quot;</span><span class="diff-line add">+   when: homarr_legacy_migration_needed and not homarr_legacy_destination.stat.exists</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-1">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>roles/homarr_legacy/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ # Title:            Sandbox: homarr_legacy | Default Variables           #</span><span class="diff-line add">+ # Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line add">+ # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line add">+ # --                                                                     #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ #                   GNU General Public License v3.0                      #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ ---</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Basics</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_name: homarr-legacy</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Docker Socket Proxy</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_role_docker_socket_proxy_envs:</span><span class="diff-line add">+   CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+   POST: &quot;0&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Paths</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_role_paths_folder: &quot;{{ homarr_legacy_name }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_paths_location: &quot;{{ server_appdata_path }}/{{ homarr_legacy_role_paths_folder }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_paths_folders_list:</span><span class="diff-line add">+   - &quot;{{ homarr_legacy_role_paths_location }}&quot;</span><span class="diff-line add">+   - &quot;{{ homarr_legacy_role_paths_location }}/icons&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Web</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_role_web_subdomain: &quot;{{ homarr_legacy_name }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_web_port: &quot;7575&quot;</span><span class="diff-line add">+ homarr_legacy_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr_legacy&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr_legacy&#x27;)</span><span class="diff-line add">+                              if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr_legacy&#x27;) | length &gt; 0)</span><span class="diff-line add">+                              else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr_legacy&#x27;)) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # DNS</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Traefik</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ homarr_legacy_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+ homarr_legacy_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_traefik_enabled: true</span><span class="diff-line add">+ homarr_legacy_role_traefik_api_enabled: false</span><span class="diff-line add">+ homarr_legacy_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Docker</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Container</span><span class="diff-line add">+ homarr_legacy_role_docker_container: &quot;{{ homarr_legacy_name }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Image</span><span class="diff-line add">+ homarr_legacy_role_docker_image_pull: true</span><span class="diff-line add">+ homarr_legacy_role_docker_image_repo: &quot;ghcr.io/ajnart/homarr&quot;</span><span class="diff-line add">+ homarr_legacy_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+ homarr_legacy_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;homarr_legacy&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Envs</span><span class="diff-line add">+ homarr_legacy_role_docker_envs_default:</span><span class="diff-line add">+   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line add">+   BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr_legacy&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+   PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line add">+   DOCKER_HOST: &quot;tcp://{{ homarr_legacy_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line add">+   NODE_TLS_REJECT_UNAUTHORIZED: &quot;0&quot;</span><span class="diff-line add">+ homarr_legacy_role_docker_envs_custom: {}</span><span class="diff-line add">+ homarr_legacy_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;homarr_legacy&#x27;)</span><span class="diff-line add">+                                     | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;homarr_legacy&#x27;)) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Volumes</span><span class="diff-line add">+ homarr_legacy_role_docker_volumes_default:</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homarr_legacy&#x27;) }}:/app/data/configs&quot;</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homarr_legacy&#x27;) }}/icons:/app/public/icons&quot;</span><span class="diff-line add">+ homarr_legacy_role_docker_volumes_custom: []</span><span class="diff-line add">+ homarr_legacy_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;homarr_legacy&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Hostname</span><span class="diff-line add">+ homarr_legacy_role_docker_hostname: &quot;{{ homarr_legacy_name }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Networks</span><span class="diff-line add">+ homarr_legacy_role_docker_networks_alias: &quot;{{ homarr_legacy_name }}&quot;</span><span class="diff-line add">+ homarr_legacy_role_docker_networks_default: []</span><span class="diff-line add">+ homarr_legacy_role_docker_networks_custom: []</span><span class="diff-line add">+ homarr_legacy_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;homarr_legacy&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Restart Policy</span><span class="diff-line add">+ homarr_legacy_role_docker_restart_policy: unless-stopped</span><span class="diff-line add">+ </span><span class="diff-line add">+ # State</span><span class="diff-line add">+ homarr_legacy_role_docker_state: started</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Init</span><span class="diff-line add">+ homarr_legacy_role_docker_init: true</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Dependencies</span><span class="diff-line add">+ homarr_legacy_role_depends_on: &quot;{{ homarr_legacy_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+ homarr_legacy_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+ homarr_legacy_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-2">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>roles/homarr_legacy/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ # Title:            Sandbox: Homarr (Legacy)                             #</span><span class="diff-line add">+ # Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line add">+ # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line add">+ # --                                                                     #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ #                   GNU General Public License v3.0                      #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ ---</span><span class="diff-line add">+ - name: Docker Socket Proxy Role</span><span class="diff-line add">+   ansible.builtin.include_role:</span><span class="diff-line add">+     name: docker_socket_proxy</span><span class="diff-line add">+   vars:</span><span class="diff-line add">+     docker_socket_proxy_name: &quot;{{ homarr_legacy_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+     docker_socket_proxy_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_socket_proxy_envs&#x27;, role=&#x27;homarr_legacy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Add DNS record</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line add">+   vars:</span><span class="diff-line add">+     dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+     dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+     dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Remove existing Docker container</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Create directories</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Create Docker container</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-3">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>roles/traccar/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ # Title:         Sandbox: Traccar | Default Variables                   #</span><span class="diff-line add">+ # Author(s):     codex                                                  #</span><span class="diff-line add">+ # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line add">+ # --                                                                     #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ #                   GNU General Public License v3.0                      #</span><span class="diff-line add">+ ##########################################################################</span><span class="diff-line add">+ ---</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Basics</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_name: traccar</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Settings</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_role_postgres_deploy: true</span><span class="diff-line add">+ traccar_role_postgres_name: &quot;{{ traccar_name }}-postgres&quot;</span><span class="diff-line add">+ # If empty it will fallback to timescaledb role default</span><span class="diff-line add">+ traccar_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+ # If empty it will fallback to timescaledb role default</span><span class="diff-line add">+ traccar_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+ traccar_role_postgres_docker_env_db: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ traccar_role_postgres_docker_image_tag: &quot;pg18-all-amd64&quot;</span><span class="diff-line add">+ traccar_role_postgres_docker_image_repo: &quot;timescale/timescaledb-ha&quot;</span><span class="diff-line add">+ traccar_role_postgres_docker_healthcheck:</span><span class="diff-line add">+   test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;traccar&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;traccar&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;traccar&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;timescaledb&#x27;) }}&quot;]</span><span class="diff-line add">+   start_period: 20s</span><span class="diff-line add">+   interval: 30s</span><span class="diff-line add">+   retries: 5</span><span class="diff-line add">+   timeout: 5s</span><span class="diff-line add">+ traccar_role_postgres_paths_folder: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ traccar_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ traccar_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+ traccar_role_postgres_docker_envs:</span><span class="diff-line add">+   TIMESCALEDB_TELEMETRY: &quot;off&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Paths</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_role_paths_folder: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ traccar_role_paths_location: &quot;{{ server_appdata_path }}/{{ traccar_role_paths_folder }}&quot;</span><span class="diff-line add">+ traccar_role_paths_folders_list:</span><span class="diff-line add">+   - &quot;{{ traccar_role_paths_location }}&quot;</span><span class="diff-line add">+   - &quot;{{ traccar_role_paths_location }}/logs&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Web</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_role_web_subdomain: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ traccar_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+ traccar_role_web_port: &quot;8082&quot;</span><span class="diff-line add">+ traccar_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;traccar&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;traccar&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;traccar&#x27;)) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # DNS</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ traccar_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ traccar_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Traefik</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ traccar_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+ traccar_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+ traccar_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+ traccar_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+ traccar_role_traefik_enabled: true</span><span class="diff-line add">+ traccar_role_traefik_api_enabled: false</span><span class="diff-line add">+ traccar_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ # Docker</span><span class="diff-line add">+ ################################</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Container</span><span class="diff-line add">+ traccar_role_docker_container: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Image</span><span class="diff-line add">+ traccar_role_docker_image_pull: true</span><span class="diff-line add">+ traccar_role_docker_image_repo: &quot;traccar/traccar&quot;</span><span class="diff-line add">+ traccar_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+ traccar_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;traccar&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Ports</span><span class="diff-line add">+ traccar_role_device_ports_range: &quot;5000-5300&quot;</span><span class="diff-line add">+ traccar_role_docker_ports_default:</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;traccar&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_device_ports_range&#x27;, role=&#x27;traccar&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_device_ports_range&#x27;, role=&#x27;traccar&#x27;) }}/tcp&quot;</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_device_ports_range&#x27;, role=&#x27;traccar&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_device_ports_range&#x27;, role=&#x27;traccar&#x27;) }}/udp&quot;</span><span class="diff-line add">+ traccar_role_docker_ports_custom: []</span><span class="diff-line add">+ traccar_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Envs</span><span class="diff-line add">+ traccar_role_docker_envs_default:</span><span class="diff-line add">+   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line add">+   CONFIG_USE_ENVIRONMENT_VARIABLES: &quot;true&quot;</span><span class="diff-line add">+   DATABASE_DRIVER: &quot;org.postgresql.Driver&quot;</span><span class="diff-line add">+   DATABASE_URL: &quot;jdbc:postgresql://{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;traccar&#x27;) }}:5432/{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+   DATABASE_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                   if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;traccar&#x27;) | length &gt; 0)</span><span class="diff-line add">+                   else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;timescaledb&#x27;) }}&quot;</span><span class="diff-line add">+   DATABASE_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;traccar&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;timescaledb&#x27;) }}&quot;</span><span class="diff-line add">+ traccar_role_docker_envs_custom: {}</span><span class="diff-line add">+ traccar_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;traccar&#x27;)) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Volumes</span><span class="diff-line add">+ traccar_role_docker_volumes_default:</span><span class="diff-line add">+   - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;traccar&#x27;) }}/logs:/opt/traccar/logs&quot;</span><span class="diff-line add">+ traccar_role_docker_volumes_custom: []</span><span class="diff-line add">+ traccar_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Hostname</span><span class="diff-line add">+ traccar_role_docker_hostname: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Networks</span><span class="diff-line add">+ traccar_role_docker_networks_alias: &quot;{{ traccar_name }}&quot;</span><span class="diff-line add">+ traccar_role_docker_networks_default: []</span><span class="diff-line add">+ traccar_role_docker_networks_custom: []</span><span class="diff-line add">+ traccar_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Restart Policy</span><span class="diff-line add">+ traccar_role_docker_restart_policy: unless-stopped</span><span class="diff-line add">+ </span><span class="diff-line add">+ # State</span><span class="diff-line add">+ traccar_role_docker_state: started</span><span class="diff-line add">+ </span><span class="diff-line add">+ # Dependencies</span><span class="diff-line add">+ traccar_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+ traccar_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+ traccar_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-4">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>roles/traccar/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ #########################################################################</span><span class="diff-line add">+ # Title:            Sandbox: Traccar                                    #</span><span class="diff-line add">+ # Author(s):        codex                                               #</span><span class="diff-line add">+ # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line add">+ # --                                                                    #</span><span class="diff-line add">+ #########################################################################</span><span class="diff-line add">+ #                   GNU General Public License v3.0                     #</span><span class="diff-line add">+ #########################################################################</span><span class="diff-line add">+ ---</span><span class="diff-line add">+ - name: &quot;Import TimescaleDB Role&quot;</span><span class="diff-line add">+   ansible.builtin.include_role:</span><span class="diff-line add">+     name: timescaledb</span><span class="diff-line add">+   vars:</span><span class="diff-line add">+     timescaledb_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;traccar&#x27;) }}&quot;]</span><span class="diff-line add">+     timescaledb_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+     timescaledb_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_envs&#x27;, role=&#x27;traccar&#x27;) }}&quot;</span><span class="diff-line add">+   when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;traccar&#x27;)</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Add DNS record</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line add">+   vars:</span><span class="diff-line add">+     dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+     dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+     dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Remove existing Docker container</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Create directories</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ - name: Create Docker container</span><span class="diff-line add">+   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-5">
                <div class="file-header">
                    <span class="badge added">added</span>
                    <h3>scripts/saltbox-defaults-linter.py</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line add">+ #!/usr/bin/env python3</span><span class="diff-line add">+ &quot;&quot;&quot;</span><span class="diff-line add">+ Saltbox Role Defaults Linter</span><span class="diff-line add">+ Enforces Saltbox formatting rules for role defaults/main.yml files</span><span class="diff-line add">+ </span><span class="diff-line add">+ Rules:</span><span class="diff-line add">+ 1. Operator Alignment: | and + operators must align with first character after &quot;{{</span><span class="diff-line add">+    - Standard: All operators align with base position (first char after &quot;{{ )</span><span class="diff-line add">+    - Exception: When &#x27;else&#x27; is followed by content on a new line that continues,</span><span class="diff-line add">+      subsequent operators within that else branch align with content after &#x27;else &#x27;</span><span class="diff-line add">+    - Context resets when if/else blocks close (marked by )) or )))</span><span class="diff-line add">+ </span><span class="diff-line add">+ 2. If/Else Alignment: if and else keywords must align vertically within {{ }} brackets</span><span class="diff-line add">+ &quot;&quot;&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ import re</span><span class="diff-line add">+ import sys</span><span class="diff-line add">+ from pathlib import Path</span><span class="diff-line add">+ from typing import List</span><span class="diff-line add">+ </span><span class="diff-line add">+ </span><span class="diff-line add">+ class LintError:</span><span class="diff-line add">+     &quot;&quot;&quot;Represents a single linting error&quot;&quot;&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+     def __init__(self, file: str, line: int, message: str):</span><span class="diff-line add">+         self.file = file</span><span class="diff-line add">+         self.line = line</span><span class="diff-line add">+         self.message = message</span><span class="diff-line add">+ </span><span class="diff-line add">+     def to_github_annotation(self) -&gt; str:</span><span class="diff-line add">+         &quot;&quot;&quot;Format error as GitHub Actions annotation&quot;&quot;&quot;</span><span class="diff-line add">+         return f&quot;::error file={self.file},line={self.line}::{self.message}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+     def __str__(self) -&gt; str:</span><span class="diff-line add">+         return f&quot;{self.file}:{self.line} - {self.message}&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+ </span><span class="diff-line add">+ class DefaultsLinter:</span><span class="diff-line add">+     &quot;&quot;&quot;Lints a single defaults/main.yml file&quot;&quot;&quot;</span><span class="diff-line add">+ </span><span class="diff-line add">+     def __init__(self, file_path: Path):</span><span class="diff-line add">+         self.file_path = file_path</span><span class="diff-line add">+         self.lines = file_path.read_text().splitlines()</span><span class="diff-line add">+         self.errors: List[LintError] = []</span><span class="diff-line add">+ </span><span class="diff-line add">+     def check_operator_alignment(self):</span><span class="diff-line add">+         &quot;&quot;&quot;</span><span class="diff-line add">+         Rule 1: Check | and + operators align with first character after &#x27;{{ &#x27;</span><span class="diff-line add">+ </span><span class="diff-line add">+         Standard alignment - all operators at base position:</span><span class="diff-line add">+             sonarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;sonarr&#x27;)</span><span class="diff-line add">+                                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;sonarr&#x27;)) }}&quot;</span><span class="diff-line add">+                                          ^ Aligns with &#x27;l&#x27; in lookup (position after &quot;{{ )</span><span class="diff-line add">+ </span><span class="diff-line add">+         Multiple operators - all at same base position:</span><span class="diff-line add">+             wikijs_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+                                              ^ All + align with &#x27;d&#x27; in docker_networks_common</span><span class="diff-line add">+ </span><span class="diff-line add">+         Exception - else with continuing content creates new context:</span><span class="diff-line add">+             dozzle_role_docker_commands: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_agent&#x27;, role=&#x27;dozzle&#x27;)</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_default&#x27;, role=&#x27;dozzle&#x27;)</span><span class="diff-line add">+                                           if lookup(&#x27;role_var&#x27;, &#x27;_agent_mode&#x27;, role=&#x27;dozzle&#x27;)</span><span class="diff-line add">+                                           else lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_default&#x27;, role=&#x27;dozzle&#x27;)</span><span class="diff-line add">+                                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_custom&#x27;, role=&#x27;dozzle&#x27;) }}&quot;</span><span class="diff-line add">+                                                ^ This + aligns with &#x27;l&#x27; in lookup after &#x27;else &#x27;, not with base</span><span class="diff-line add">+ </span><span class="diff-line add">+         Inline if/else (no context change):</span><span class="diff-line add">+             traefik_role_docker_labels: &quot;{{ docker_labels_saltbox</span><span class="diff-line add">+                                             | combine((lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_http&#x27;, role=&#x27;traefik&#x27;)</span><span class="diff-line add">+                                                       if traefik_http</span><span class="diff-line add">+                                                       else lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_dns&#x27;, role=&#x27;traefik&#x27;)))</span><span class="diff-line add">+                                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;traefik&#x27;)) }}&quot;</span><span class="diff-line add">+                                             ^ All | remain at base position - inline if/else doesn&#x27;t change context</span><span class="diff-line add">+         &quot;&quot;&quot;</span><span class="diff-line add">+         i = 0</span><span class="diff-line add">+         while i &lt; len(self.lines):</span><span class="diff-line add">+             curr_line = self.lines[i]</span><span class="diff-line add">+ </span><span class="diff-line add">+             # Match variable definitions starting multi-line Jinja expressions</span><span class="diff-line add">+             # Pattern: variable_name: &quot;{{ &lt;content&gt;</span><span class="diff-line add">+             match = re.match(r&#x27;^([a-z_]+): &quot;{{ (.+)&#x27;, curr_line)</span><span class="diff-line add">+ </span><span class="diff-line add">+             # Only process if:</span><span class="diff-line add">+             # 1. Line matches pattern</span><span class="diff-line add">+             # 2. Line doesn&#x27;t end with }} (multi-line expression)</span><span class="diff-line add">+             if match and &#x27;}}&#x27; not in curr_line:</span><span class="diff-line add">+                 var_name = match.group(1)</span><span class="diff-line add">+ </span><span class="diff-line add">+                 # This is the start of a multi-line expression</span><span class="diff-line add">+                 # Track the expected alignment position for continuation lines</span><span class="diff-line add">+                 expected_alignment = len(curr_line.split(&#x27;&quot;{{&#x27;)[0] + &#x27;&quot;{{ &#x27;)</span><span class="diff-line add">+ </span><span class="diff-line add">+                 # Now check all continuation lines until we hit }}</span><span class="diff-line add">+                 j = i + 1</span><span class="diff-line add">+                 # Track alignment context - changes when we encounter &#x27;else&#x27; with content</span><span class="diff-line add">+                 # and resets when if/else blocks close</span><span class="diff-line add">+                 current_alignment = expected_alignment</span><span class="diff-line add">+                 in_else_context = False</span><span class="diff-line add">+ </span><span class="diff-line add">+                 while j &lt; len(self.lines):</span><span class="diff-line add">+                     continuation_line = self.lines[j]</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Check if this line closes an if/else block (ends with )) or }))</span><span class="diff-line add">+                     # This resets alignment context back to base</span><span class="diff-line add">+                     if in_else_context and re.search(r&#x27;\)\)(?:\)|$)&#x27;, continuation_line.rstrip()):</span><span class="diff-line add">+                         current_alignment = expected_alignment</span><span class="diff-line add">+                         in_else_context = False</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Check if this line starts with &#x27;else&#x27; followed by content that continues</span><span class="diff-line add">+                     # This creates a new alignment context for subsequent operators</span><span class="diff-line add">+                     # Pattern: else followed by lookup/variable (not just closing like &#x27;])&#x27;)</span><span class="diff-line add">+                     # BUT: only if the else block doesn&#x27;t close on the same line</span><span class="diff-line add">+                     else_match = re.match(r&#x27;^(\s+)else (lookup|[a-z_]+)&#x27;, continuation_line)</span><span class="diff-line add">+                     if else_match:</span><span class="diff-line add">+                         # Check if this line also closes the if/else block (contains )))</span><span class="diff-line add">+                         # If so, don&#x27;t set a persistent context</span><span class="diff-line add">+                         closes_immediately = re.search(r&#x27;\)\)\)&#x27;, continuation_line)</span><span class="diff-line add">+ </span><span class="diff-line add">+                         if not closes_immediately:</span><span class="diff-line add">+                             # New alignment context: content after &#x27;else &#x27;</span><span class="diff-line add">+                             # Only persists if the line doesn&#x27;t close the block</span><span class="diff-line add">+                             current_alignment = len(else_match.group(1)) + len(&#x27;else &#x27;)</span><span class="diff-line add">+                             in_else_context = True</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Check if this line has an operator</span><span class="diff-line add">+                     op_match = re.match(r&#x27;^(\s+)([|+]) &#x27;, continuation_line)</span><span class="diff-line add">+ </span><span class="diff-line add">+                     if op_match:</span><span class="diff-line add">+                         actual_spaces = len(op_match.group(1))</span><span class="diff-line add">+                         operator = op_match.group(2)</span><span class="diff-line add">+ </span><span class="diff-line add">+                         # Use current alignment context (changes after &#x27;else&#x27;, resets after closing parens)</span><span class="diff-line add">+                         expected_spaces = current_alignment</span><span class="diff-line add">+ </span><span class="diff-line add">+                         if actual_spaces != expected_spaces:</span><span class="diff-line add">+                             diff = actual_spaces - expected_spaces</span><span class="diff-line add">+ </span><span class="diff-line add">+                             self.errors.append(LintError(</span><span class="diff-line add">+                                 file=str(self.file_path),</span><span class="diff-line add">+                                 line=j + 1,  # Convert to 1-indexed</span><span class="diff-line add">+                                 message=f&quot;[operator-alignment] Variable &#x27;{var_name}&#x27;: Operator &#x27;{operator}&#x27; at column {actual_spaces}, expected {expected_spaces} (off by {diff:+d})&quot;</span><span class="diff-line add">+                             ))</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Stop if we&#x27;ve reached the end of the Jinja block</span><span class="diff-line add">+                     if &#x27;}}&#x27; in continuation_line:</span><span class="diff-line add">+                         break</span><span class="diff-line add">+ </span><span class="diff-line add">+                     j += 1</span><span class="diff-line add">+ </span><span class="diff-line add">+                 # Skip ahead past the multi-line block we just processed</span><span class="diff-line add">+                 i = j</span><span class="diff-line add">+ </span><span class="diff-line add">+             i += 1</span><span class="diff-line add">+ </span><span class="diff-line add">+     def check_ifelse_alignment(self):</span><span class="diff-line add">+         &quot;&quot;&quot;</span><span class="diff-line add">+         Rule 2: Check if/else keywords align within same {{ }} brackets</span><span class="diff-line add">+ </span><span class="diff-line add">+         Example:</span><span class="diff-line add">+             variable: &quot;{{ value</span><span class="diff-line add">+                        if condition</span><span class="diff-line add">+                        else other_value }}&quot;</span><span class="diff-line add">+                        ^ if and else must align vertically</span><span class="diff-line add">+         &quot;&quot;&quot;</span><span class="diff-line add">+         in_multiline_jinja = False</span><span class="diff-line add">+         jinja_lines = []</span><span class="diff-line add">+         jinja_start_line = 0</span><span class="diff-line add">+ </span><span class="diff-line add">+         for i, line in enumerate(self.lines, 1):</span><span class="diff-line add">+             # Detect start of multi-line Jinja expression</span><span class="diff-line add">+             if &#x27;&quot;{{&#x27; in line and &#x27;}}&#x27; not in line:</span><span class="diff-line add">+                 in_multiline_jinja = True</span><span class="diff-line add">+                 jinja_lines = [line]</span><span class="diff-line add">+                 jinja_start_line = i</span><span class="diff-line add">+ </span><span class="diff-line add">+             elif in_multiline_jinja:</span><span class="diff-line add">+                 jinja_lines.append(line)</span><span class="diff-line add">+ </span><span class="diff-line add">+                 # Check if we&#x27;ve reached the end of the Jinja block</span><span class="diff-line add">+                 if &#x27;}}&#x27; in line:</span><span class="diff-line add">+                     # Find lines containing &#x27;if&#x27; and &#x27;else&#x27;</span><span class="diff-line add">+                     if_lines = [l for l in jinja_lines if &#x27; if &#x27; in l or l.strip().startswith(&#x27;if &#x27;)]</span><span class="diff-line add">+                     else_lines = [l for l in jinja_lines if &#x27; else &#x27; in l or l.strip().startswith(&#x27;else &#x27;)]</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Only check if both if and else exist in the same block</span><span class="diff-line add">+                     if if_lines and else_lines:</span><span class="diff-line add">+                         # Find indentation of &#x27;if&#x27; and &#x27;else&#x27; keywords</span><span class="diff-line add">+                         if_indent = None</span><span class="diff-line add">+                         else_indent = None</span><span class="diff-line add">+ </span><span class="diff-line add">+                         for l in jinja_lines:</span><span class="diff-line add">+                             if &#x27; if &#x27; in l:</span><span class="diff-line add">+                                 # Calculate column position where &#x27;if&#x27; appears</span><span class="diff-line add">+                                 if_indent = len(l) - len(l.lstrip())</span><span class="diff-line add">+                             if &#x27; else &#x27; in l or l.strip().startswith(&#x27;else &#x27;):</span><span class="diff-line add">+                                 else_indent = len(l) - len(l.lstrip())</span><span class="diff-line add">+ </span><span class="diff-line add">+                         # Check if if and else align</span><span class="diff-line add">+                         if if_indent is not None and else_indent is not None:</span><span class="diff-line add">+                             if if_indent != else_indent:</span><span class="diff-line add">+                                 diff = else_indent - if_indent</span><span class="diff-line add">+                                 self.errors.append(LintError(</span><span class="diff-line add">+                                     file=str(self.file_path),</span><span class="diff-line add">+                                     line=jinja_start_line,</span><span class="diff-line add">+                                     message=f&quot;[ifelse-alignment] &#x27;if&#x27; at column {if_indent} doesn&#x27;t align with &#x27;else&#x27; at column {else_indent} (off by {diff:+d})&quot;</span><span class="diff-line add">+                                 ))</span><span class="diff-line add">+ </span><span class="diff-line add">+                     # Reset state</span><span class="diff-line add">+                     in_multiline_jinja = False</span><span class="diff-line add">+                     jinja_lines = []</span><span class="diff-line add">+ </span><span class="diff-line add">+     def lint(self) -&gt; List[LintError]:</span><span class="diff-line add">+         &quot;&quot;&quot;Run all lint checks and return list of errors&quot;&quot;&quot;</span><span class="diff-line add">+         self.check_operator_alignment()</span><span class="diff-line add">+         self.check_ifelse_alignment()</span><span class="diff-line add">+         return self.errors</span><span class="diff-line add">+ </span><span class="diff-line add">+ </span><span class="diff-line add">+ def main():</span><span class="diff-line add">+     &quot;&quot;&quot;Main entry point for the linter&quot;&quot;&quot;</span><span class="diff-line add">+     if len(sys.argv) &lt; 2:</span><span class="diff-line add">+         print(&quot;Usage: python3 saltbox-defaults-linter.py &lt;roles_directory&gt;&quot;)</span><span class="diff-line add">+         print(&quot;\nExample:&quot;)</span><span class="diff-line add">+         print(&quot;  python3 saltbox-defaults-linter.py roles/&quot;)</span><span class="diff-line add">+         sys.exit(1)</span><span class="diff-line add">+ </span><span class="diff-line add">+     roles_dir = Path(sys.argv[1])</span><span class="diff-line add">+ </span><span class="diff-line add">+     if not roles_dir.exists():</span><span class="diff-line add">+         print(f&quot;Error: Directory &#x27;{roles_dir}&#x27; does not exist&quot;)</span><span class="diff-line add">+         sys.exit(1)</span><span class="diff-line add">+ </span><span class="diff-line add">+     if not roles_dir.is_dir():</span><span class="diff-line add">+         print(f&quot;Error: &#x27;{roles_dir}&#x27; is not a directory&quot;)</span><span class="diff-line add">+         sys.exit(1)</span><span class="diff-line add">+ </span><span class="diff-line add">+     all_errors = []</span><span class="diff-line add">+     files_checked = 0</span><span class="diff-line add">+ </span><span class="diff-line add">+     # Find and lint all defaults/main.yml files</span><span class="diff-line add">+     for defaults_file in sorted(roles_dir.glob(&quot;*/defaults/main.yml&quot;)):</span><span class="diff-line add">+         linter = DefaultsLinter(defaults_file)</span><span class="diff-line add">+         errors = linter.lint()</span><span class="diff-line add">+         all_errors.extend(errors)</span><span class="diff-line add">+         files_checked += 1</span><span class="diff-line add">+ </span><span class="diff-line add">+     # Output results</span><span class="diff-line add">+     if all_errors:</span><span class="diff-line add">+         print(f&quot;âŒ Found {len(all_errors)} formatting error(s) in {files_checked} file(s):\n&quot;)</span><span class="diff-line add">+         for error in all_errors:</span><span class="diff-line add">+             print(error.to_github_annotation())</span><span class="diff-line add">+         print(f&quot;\nTotal: {len(all_errors)} error(s)&quot;)</span><span class="diff-line add">+         sys.exit(1)</span><span class="diff-line add">+     else:</span><span class="diff-line add">+         print(f&quot;âœ… All {files_checked} role defaults files pass formatting checks&quot;)</span><span class="diff-line add">+         sys.exit(0)</span><span class="diff-line add">+ </span><span class="diff-line add">+ </span><span class="diff-line add">+ if __name__ == &quot;__main__&quot;:</span><span class="diff-line add">+     main()</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-6">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>defaults/settings.yml.default</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ---</span><span class="diff-line del">- a_train:</span><span class="diff-line del">-   remotes: [&quot;&quot;]</span><span class="diff-line del">- delugevpn:</span><span class="diff-line del">-   vpn_endpoint: netherlands.ovpn</span><span class="diff-line del">-   vpn_pass: your_vpn_password</span><span class="diff-line del">-   vpn_prov: pia</span><span class="diff-line del">-   vpn_user: your_vpn_username</span><span class="diff-line del">-   vpn_client: wireguard</span><span class="diff-line del">- doplarr:</span><span class="diff-line del">-   discord_token: your_discord_bot_token</span><span class="diff-line del">-   overseerr_url: &quot;http://overseerr:5055&quot;</span><span class="diff-line del">-   overseerr_api:</span><span class="diff-line del">-   radarr_api:</span><span class="diff-line del">-   radarr_url:</span><span class="diff-line del">-   sonarr_api:</span><span class="diff-line del">-   sonarr_url:</span><span class="diff-line del">-   discord_max_results: 25</span><span class="diff-line del">-   discord_role_id:</span><span class="diff-line del">-   discord_requested_msg_style: &quot;:plain&quot;</span><span class="diff-line del">-   sonarr_quality_profile:</span><span class="diff-line del">-   radarr_quality_profile:</span><span class="diff-line del">-   sonarr_language_profile:</span><span class="diff-line del">-   overseer_default_id:</span><span class="diff-line del">-   partial_seasons: &quot;true&quot;</span><span class="diff-line del">-   log_level: &quot;:info&quot;</span><span class="diff-line del">- foundry:</span><span class="diff-line del">-   user: your_foundryvtt_username</span><span class="diff-line del">-   pass: your_foundryvtt_password</span><span class="diff-line del">-   app_key: your_foundryvtt_license</span><span class="diff-line del">- goplaxt:</span><span class="diff-line del">-   trakt_id: ~</span><span class="diff-line del">-   trakt_secret: ~</span><span class="diff-line del">- handbrake:</span><span class="diff-line del">-   handbrake_pass: saltbox</span><span class="diff-line del">- invoiceninja:</span><span class="diff-line del">-   app_key: &#x27;base64:O1S3kAJEDgo92gPkXtxfdCJpoGShgKloUSdcaHMXmoY=&#x27;</span><span class="diff-line del">- membarr:</span><span class="diff-line del">-   discord_token: your_discord_bot_token</span><span class="diff-line del">- moviematch:</span><span class="diff-line del">-   libraries: Movies</span><span class="diff-line del">-   plex_url: http://plex:32400</span><span class="diff-line del">- notifiarr:</span><span class="diff-line del">-   api_key: &quot;api-key-from-notifiarr.com&quot;</span><span class="diff-line del">- qbit_manage:</span><span class="diff-line del">-   qbt_run: &quot;false&quot;</span><span class="diff-line del">-   qbt_schedule: &quot;30&quot;</span><span class="diff-line del">-   qbt_config: &quot;config.yml&quot;</span><span class="diff-line del">-   qbt_logfile: &quot;activity.log&quot;</span><span class="diff-line del">-   qbt_cross_seed: &quot;false&quot;</span><span class="diff-line del">-   qbt_recheck: &quot;false&quot;</span><span class="diff-line del">-   qbt_cat_update: &quot;false&quot;</span><span class="diff-line del">-   qbt_tag_update: &quot;false&quot;</span><span class="diff-line del">-   qbt_rem_unregistered: &quot;false&quot;</span><span class="diff-line del">-   qbt_rem_orphaned: &quot;false&quot;</span><span class="diff-line del">-   qbt_tag_nohardlinks: &quot;false&quot;</span><span class="diff-line del">-   qbt_skip_recycle: &quot;false&quot;</span><span class="diff-line del">-   qbt_dry_run: &quot;true&quot;</span><span class="diff-line del">-   qbt_log_level: &quot;INFO&quot;</span><span class="diff-line del">-   qbt_divider: &quot;=&quot;</span><span class="diff-line del">-   qbt_width: &quot;100&quot;</span><span class="diff-line del">-   qbt_debug: &quot;false&quot;</span><span class="diff-line del">-   qbt_trace: &quot;false&quot;</span><span class="diff-line del">- qbittorrentvpn:</span><span class="diff-line del">-   vpn_pass: your_vpn_password</span><span class="diff-line del">-   vpn_prov: pia</span><span class="diff-line del">-   vpn_user: your_vpn_username</span><span class="diff-line del">-   vpn_client: wireguard</span><span class="diff-line del">- recyclarr:</span><span class="diff-line del">-   cron_schedule: &quot;@daily&quot;</span><span class="diff-line del">-   sleeptime:</span><span class="diff-line del">-   rc_port:</span><span class="diff-line del">-   rc_user:</span><span class="diff-line del">-   rc_pass:</span><span class="diff-line del">-   apprise:</span><span class="diff-line del">- tqm:</span><span class="diff-line del">-   download_client: &quot;qbt&quot;</span><span class="diff-line del">- transmissionvpn:</span><span class="diff-line del">-   vpn_user:</span><span class="diff-line del">-   vpn_pass:</span><span class="diff-line del">-   vpn_prov:</span><span class="diff-line del">- your_spotify:</span><span class="diff-line del">-   public_key:</span><span class="diff-line del">-   secret_key:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-7">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/alternatrr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:         Sandbox: alternatrr | Default Variables                 #</span><span class="diff-line del">- # Author(s):     salty                                                   #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                     #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_instances: [&quot;alternatrr&quot;]</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Settings</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_sonarr_instance: &quot;{{ sonarr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_paths_folder: &quot;{{ alternatrr_name }}&quot;</span><span class="diff-line del">- alternatrr_paths_location: &quot;{{ server_appdata_path }}/{{ alternatrr_paths_folder }}&quot;</span><span class="diff-line del">- alternatrr_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ alternatrr_paths_location }}&quot;</span><span class="diff-line del">-   - &quot;{{ alternatrr_paths_location }}/app&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_web_subdomain: &quot;{{ alternatrr_name }}&quot;</span><span class="diff-line del">- alternatrr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- alternatrr_web_port: &quot;80&quot;</span><span class="diff-line del">- alternatrr_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_subdomain&#x27;, default=alternatrr_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_domain&#x27;, default=alternatrr_web_domain)</span><span class="diff-line del">-                      if (lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_subdomain&#x27;, default=alternatrr_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                      else lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_domain&#x27;, default=alternatrr_web_domain)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_subdomain&#x27;, default=alternatrr_web_subdomain) }}&quot;</span><span class="diff-line del">- alternatrr_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_web_domain&#x27;, default=alternatrr_web_domain) }}&quot;</span><span class="diff-line del">- alternatrr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- alternatrr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">- alternatrr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- alternatrr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- alternatrr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- alternatrr_traefik_enabled: true</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- alternatrr_docker_container: &quot;{{ alternatrr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- alternatrr_docker_image_pull: true</span><span class="diff-line del">- alternatrr_docker_image_repo: &quot;theultimatecoder/alternatrr&quot;</span><span class="diff-line del">- alternatrr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- alternatrr_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_image_repo&#x27;, default=alternatrr_docker_image_repo)</span><span class="diff-line del">-                              + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_image_tag&#x27;, default=alternatrr_docker_image_tag) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- alternatrr_docker_ports_defaults: []</span><span class="diff-line del">- alternatrr_docker_ports_custom: []</span><span class="diff-line del">- alternatrr_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_ports_defaults&#x27;, default=alternatrr_docker_ports_defaults)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_ports_custom&#x27;, default=alternatrr_docker_ports_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- alternatrr_docker_envs_default:</span><span class="diff-line del">-   ConnectionStrings__DefaultConnection: Data Source=/opt/alternatrr/app/alternatrr.db</span><span class="diff-line del">-   ConnectionStrings__sonarr: Data Source=/opt/sonarr/sonarr.db</span><span class="diff-line del">-   Login__Username: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-   Login__Password: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">- alternatrr_docker_envs_custom: {}</span><span class="diff-line del">- alternatrr_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_envs_default&#x27;, default=alternatrr_docker_envs_default)</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_envs_custom&#x27;, default=alternatrr_docker_envs_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- alternatrr_docker_commands_default: []</span><span class="diff-line del">- alternatrr_docker_commands_custom: []</span><span class="diff-line del">- alternatrr_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_commands_default&#x27;, default=alternatrr_docker_commands_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_commands_custom&#x27;, default=alternatrr_docker_commands_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- alternatrr_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ alternatrr_paths_location }}/app:/opt/alternatrr/app&quot;</span><span class="diff-line del">-   - &quot;{{ server_appdata_path + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_sonarr_instance&#x27;, default=alternatrr_sonarr_instance) }}:/opt/sonarr&quot;</span><span class="diff-line del">- alternatrr_docker_volumes_custom: []</span><span class="diff-line del">- alternatrr_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_volumes_default&#x27;, default=alternatrr_docker_volumes_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_volumes_custom&#x27;, default=alternatrr_docker_volumes_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- alternatrr_docker_devices_default: []</span><span class="diff-line del">- alternatrr_docker_devices_custom: []</span><span class="diff-line del">- alternatrr_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_devices_default&#x27;, default=alternatrr_docker_devices_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_devices_custom&#x27;, default=alternatrr_docker_devices_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- alternatrr_docker_hosts_default: {}</span><span class="diff-line del">- alternatrr_docker_hosts_custom: {}</span><span class="diff-line del">- alternatrr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_hosts_default&#x27;, default=alternatrr_docker_hosts_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_hosts_custom&#x27;, default=alternatrr_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- alternatrr_docker_labels_default: {}</span><span class="diff-line del">- alternatrr_docker_labels_custom: {}</span><span class="diff-line del">- alternatrr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_labels_default&#x27;, default=alternatrr_docker_labels_default))</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_labels_custom&#x27;, default=alternatrr_docker_labels_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- alternatrr_docker_hostname: &quot;{{ alternatrr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Network Mode</span><span class="diff-line del">- alternatrr_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">- alternatrr_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_network_mode_default&#x27;, default=alternatrr_docker_network_mode_default) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- alternatrr_docker_networks_alias: &quot;{{ alternatrr_name }}&quot;</span><span class="diff-line del">- alternatrr_docker_networks_default: []</span><span class="diff-line del">- alternatrr_docker_networks_custom: []</span><span class="diff-line del">- alternatrr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_networks_default&#x27;, default=alternatrr_docker_networks_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_networks_custom&#x27;, default=alternatrr_docker_networks_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- alternatrr_docker_capabilities_default: []</span><span class="diff-line del">- alternatrr_docker_capabilities_custom: []</span><span class="diff-line del">- alternatrr_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_capabilities_default&#x27;, default=alternatrr_docker_capabilities_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_capabilities_custom&#x27;, default=alternatrr_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- alternatrr_docker_security_opts_default: []</span><span class="diff-line del">- alternatrr_docker_security_opts_custom: []</span><span class="diff-line del">- alternatrr_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_security_opts_default&#x27;, default=alternatrr_docker_security_opts_default)</span><span class="diff-line del">-                                      + lookup(&#x27;vars&#x27;, alternatrr_name + &#x27;_docker_security_opts_custom&#x27;, default=alternatrr_docker_security_opts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- alternatrr_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- alternatrr_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-8">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/alternatrr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: alternatrr                                 #</span><span class="diff-line del">- # Author(s):        TheUltimateC0der, salty                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Execute Alternatrr roles&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: main2.yml</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     alternatrr_name: &quot;{{ instance }}&quot;</span><span class="diff-line del">-   with_items: &quot;{{ alternatrr_instances }}&quot;</span><span class="diff-line del">-   loop_control:</span><span class="diff-line del">-     loop_var: instance</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-9">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/alternatrr/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: alternatrr                                 #</span><span class="diff-line del">- # Author(s):        TheUltimateC0der, salty                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Set Default Sonarr instance</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     sonarr_name: &quot;{{ sonarr_instances[0] }}&quot;</span><span class="diff-line del">-   when: not sonarr_name is defined</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-10">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/aria2_ng/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Aria2 + AriaNG webui | Default Variables    #</span><span class="diff-line del">- # Author(s):        JigSawFr                                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- aria2_ng_name: aria</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- aria2_ng_paths_folder: &quot;{{ aria2_ng_name }}&quot;</span><span class="diff-line del">- aria2_ng_paths_location: &quot;{{ server_appdata_path }}/{{ aria2_ng_paths_folder }}&quot;</span><span class="diff-line del">- aria2_ng_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ aria2_ng_paths_folder }}&quot;</span><span class="diff-line del">- aria2_ng_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ aria2_ng_paths_location }}&quot;</span><span class="diff-line del">-   - &quot;{{ aria2_ng_paths_downloads_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- aria2_ng_web_subdomain: &quot;{{ aria2_ng_name }}&quot;</span><span class="diff-line del">- aria2_ng_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- aria2_ng_web_port: &quot;8080&quot;</span><span class="diff-line del">- aria2_ng_web_url: &quot;{{ &#x27;https://&#x27; + (aria2_ng_web_subdomain + &#x27;.&#x27; + aria2_ng_web_domain</span><span class="diff-line del">-                    if (aria2_ng_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else aria2_ng_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- aria2_ng_dns_record: &quot;{{ aria2_ng_web_subdomain }}&quot;</span><span class="diff-line del">- aria2_ng_dns_zone: &quot;{{ aria2_ng_web_domain }}&quot;</span><span class="diff-line del">- aria2_ng_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- aria2_ng_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">- aria2_ng_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- aria2_ng_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- aria2_ng_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- aria2_ng_traefik_enabled: true</span><span class="diff-line del">- # Insecure until we have a way to generate an app token</span><span class="diff-line del">- aria2_ng_traefik_api_enabled: false</span><span class="diff-line del">- aria2_ng_traefik_api_endpoint: &quot;PathPrefix(`/jsonrpc`)&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- aria2_ng_docker_container: &quot;{{ aria2_ng_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- aria2_ng_docker_image_pull: true</span><span class="diff-line del">- aria2_ng_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- aria2_ng_docker_image: &quot;hurlenko/aria2-ariang:{{ aria2_ng_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- aria2_ng_docker_ports_defaults: []</span><span class="diff-line del">- aria2_ng_docker_ports_custom: []</span><span class="diff-line del">- aria2_ng_docker_ports: &quot;{{ aria2_ng_docker_ports_defaults</span><span class="diff-line del">-                            + aria2_ng_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- aria2_ng_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-   # RPC_SECRET: &quot;{{ aria2_ng_secret_key.stdout }}&quot;</span><span class="diff-line del">-   # EMBED_RPC_SECRET: &quot;true&quot;</span><span class="diff-line del">-   ARIA2RPCPORT: &quot;443&quot;</span><span class="diff-line del">- aria2_ng_docker_envs_custom: {}</span><span class="diff-line del">- aria2_ng_docker_envs: &quot;{{ aria2_ng_docker_envs_default</span><span class="diff-line del">-                           | combine(aria2_ng_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- aria2_ng_docker_commands_default: []</span><span class="diff-line del">- aria2_ng_docker_commands_custom: []</span><span class="diff-line del">- aria2_ng_docker_commands: &quot;{{ aria2_ng_docker_commands_default</span><span class="diff-line del">-                               + aria2_ng_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- aria2_ng_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ aria2_ng_paths_location }}:/aria2/conf&quot;</span><span class="diff-line del">-   - &quot;{{ aria2_ng_paths_downloads_location }}:/aria2/data&quot;</span><span class="diff-line del">- aria2_ng_docker_volumes_custom: []</span><span class="diff-line del">- aria2_ng_docker_volumes: &quot;{{ aria2_ng_docker_volumes_default</span><span class="diff-line del">-                              + aria2_ng_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- aria2_ng_docker_devices_default: []</span><span class="diff-line del">- aria2_ng_docker_devices_custom: []</span><span class="diff-line del">- aria2_ng_docker_devices: &quot;{{ aria2_ng_docker_devices_default</span><span class="diff-line del">-                              + aria2_ng_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- aria2_ng_docker_hosts_default: {}</span><span class="diff-line del">- aria2_ng_docker_hosts_custom: {}</span><span class="diff-line del">- aria2_ng_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(aria2_ng_docker_hosts_default)</span><span class="diff-line del">-                            | combine(aria2_ng_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- aria2_ng_docker_labels_default: {}</span><span class="diff-line del">- aria2_ng_docker_labels_custom: {}</span><span class="diff-line del">- aria2_ng_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(aria2_ng_docker_labels_default)</span><span class="diff-line del">-                             | combine(aria2_ng_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- aria2_ng_docker_hostname: &quot;{{ aria2_ng_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- aria2_ng_docker_networks_alias: &quot;{{ aria2_ng_name }}&quot;</span><span class="diff-line del">- aria2_ng_docker_networks_default: []</span><span class="diff-line del">- aria2_ng_docker_networks_custom: []</span><span class="diff-line del">- aria2_ng_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + aria2_ng_docker_networks_default</span><span class="diff-line del">-                               + aria2_ng_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- aria2_ng_docker_capabilities_default: []</span><span class="diff-line del">- aria2_ng_docker_capabilities_custom: []</span><span class="diff-line del">- aria2_ng_docker_capabilities: &quot;{{ aria2_ng_docker_capabilities_default</span><span class="diff-line del">-                                   + aria2_ng_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- aria2_ng_docker_security_opts_default: []</span><span class="diff-line del">- aria2_ng_docker_security_opts_custom: []</span><span class="diff-line del">- aria2_ng_docker_security_opts: &quot;{{ aria2_ng_docker_security_opts_default</span><span class="diff-line del">-                                    + aria2_ng_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- aria2_ng_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- aria2_ng_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-11">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/aria2_ng/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Aria2 + AriaNG webui                       #</span><span class="diff-line del">- # Author(s):        JigSawFr                                            #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Repository: https://github.com/hurlenko/aria2-ariang-docker</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # - name: &quot;Generate Secret Key for RPC&quot;</span><span class="diff-line del">- #   ansible.builtin.shell: &quot;openssl rand -hex 20&quot;</span><span class="diff-line del">- #   register: aria2_ng_secret_key</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Print Tweaking Info</span><span class="diff-line del">-   ansible.builtin.debug:</span><span class="diff-line del">-     msg: &quot;For custom docker envs, please visit: https://github.com/hurlenko/aria2-ariang-docker&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-12">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/booksonic/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Booksonic | Default Variables                  #</span><span class="diff-line del">- # Author(s):     salty                                                   #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                     #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- booksonic_name: booksonic</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- booksonic_paths_folder: &quot;{{ booksonic_name }}&quot;</span><span class="diff-line del">- booksonic_paths_location: &quot;{{ server_appdata_path }}/{{ booksonic_paths_folder }}&quot;</span><span class="diff-line del">- booksonic_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ booksonic_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- booksonic_web_subdomain: &quot;{{ booksonic_name }}&quot;</span><span class="diff-line del">- booksonic_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- booksonic_web_port: &quot;4040&quot;</span><span class="diff-line del">- booksonic_web_url: &quot;{{ &#x27;https://&#x27; + (booksonic_web_subdomain + &#x27;.&#x27; + booksonic_web_domain</span><span class="diff-line del">-                     if (booksonic_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else booksonic_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- booksonic_dns_record: &quot;{{ booksonic_web_subdomain }}&quot;</span><span class="diff-line del">- booksonic_dns_zone: &quot;{{ booksonic_web_domain }}&quot;</span><span class="diff-line del">- booksonic_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- booksonic_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">- booksonic_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- booksonic_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- booksonic_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- booksonic_traefik_enabled: true</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- booksonic_docker_container: &quot;{{ booksonic_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- booksonic_docker_image_pull: true</span><span class="diff-line del">- booksonic_docker_image_tag: &quot;2201.1.0&quot;</span><span class="diff-line del">- booksonic_docker_image: &quot;lscr.io/linuxserver/booksonic-air:{{ booksonic_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- booksonic_docker_ports_defaults: []</span><span class="diff-line del">- booksonic_docker_ports_custom: []</span><span class="diff-line del">- booksonic_docker_ports: &quot;{{ booksonic_docker_ports_defaults</span><span class="diff-line del">-                             + booksonic_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- booksonic_docker_envs_default:</span><span class="diff-line del">-   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   JAVA_OPTS: &quot;-Dserver.use-forward-headers=true&quot;</span><span class="diff-line del">- booksonic_docker_envs_custom: {}</span><span class="diff-line del">- booksonic_docker_envs: &quot;{{ booksonic_docker_envs_default</span><span class="diff-line del">-                            | combine(booksonic_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- booksonic_docker_commands_default: []</span><span class="diff-line del">- booksonic_docker_commands_custom: []</span><span class="diff-line del">- booksonic_docker_commands: &quot;{{ booksonic_docker_commands_default</span><span class="diff-line del">-                                + booksonic_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- booksonic_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ booksonic_paths_location }}:/config&quot;</span><span class="diff-line del">-   - &quot;/mnt/unionfs/Media/Audiobooks:/audiobooks&quot;</span><span class="diff-line del">-   - &quot;/mnt/unionfs/Media/Podcasts:/podcasts&quot;</span><span class="diff-line del">-   - &quot;/mnt/unionfs/Media:/othermedia&quot;</span><span class="diff-line del">- booksonic_docker_volumes_custom: []</span><span class="diff-line del">- booksonic_docker_volumes: &quot;{{ booksonic_docker_volumes_default</span><span class="diff-line del">-                               + booksonic_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- booksonic_docker_devices_default: []</span><span class="diff-line del">- booksonic_docker_devices_custom: []</span><span class="diff-line del">- booksonic_docker_devices: &quot;{{ booksonic_docker_devices_default</span><span class="diff-line del">-                               + booksonic_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- booksonic_docker_hosts_default: {}</span><span class="diff-line del">- booksonic_docker_hosts_custom: {}</span><span class="diff-line del">- booksonic_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(booksonic_docker_hosts_default)</span><span class="diff-line del">-                             | combine(booksonic_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- booksonic_docker_labels_default: {}</span><span class="diff-line del">- booksonic_docker_labels_custom: {}</span><span class="diff-line del">- booksonic_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(booksonic_docker_labels_default)</span><span class="diff-line del">-                              | combine(booksonic_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- booksonic_docker_hostname: &quot;{{ booksonic_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- booksonic_docker_networks_alias: &quot;{{ booksonic_name }}&quot;</span><span class="diff-line del">- booksonic_docker_networks_default: []</span><span class="diff-line del">- booksonic_docker_networks_custom: []</span><span class="diff-line del">- booksonic_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + booksonic_docker_networks_default</span><span class="diff-line del">-                                + booksonic_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- booksonic_docker_capabilities_default: []</span><span class="diff-line del">- booksonic_docker_capabilities_custom: []</span><span class="diff-line del">- booksonic_docker_capabilities: &quot;{{ booksonic_docker_capabilities_default</span><span class="diff-line del">-                                    + booksonic_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- booksonic_docker_security_opts_default: []</span><span class="diff-line del">- booksonic_docker_security_opts_custom: []</span><span class="diff-line del">- booksonic_docker_security_opts: &quot;{{ booksonic_docker_security_opts_default</span><span class="diff-line del">-                                     + booksonic_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- booksonic_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- booksonic_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-13">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/booksonic/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Booksonic                                  #</span><span class="diff-line del">- # Author(s):        moarbytes, muplah, salty                            #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-14">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/comicstreamer/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: comicstreamer                              #</span><span class="diff-line del">- # Author(s):        theotocopulitos, kowalski                           #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # Docker Image(s):  kalinon/comicstreamer                               #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- comicstreamer_name: comicstreamer</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- comicstreamer_paths_folder: &quot;{{ comicstreamer_name }}&quot;</span><span class="diff-line del">- comicstreamer_paths_location: &quot;{{ server_appdata_path }}/{{ comicstreamer_paths_folder }}&quot;</span><span class="diff-line del">- comicstreamer_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ comicstreamer_paths_location }}&quot;</span><span class="diff-line del">-   - &quot;/mnt/local/Media/Comics&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- comicstreamer_web_subdomain: &quot;{{ comicstreamer_name }}&quot;</span><span class="diff-line del">- comicstreamer_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- comicstreamer_web_port: &quot;32500&quot;</span><span class="diff-line del">- comicstreamer_web_url: &quot;{{ &#x27;https://&#x27; + (comicstreamer_web_subdomain + &#x27;.&#x27; + comicstreamer_web_domain</span><span class="diff-line del">-                         if (comicstreamer_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                         else comicstreamer_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- comicstreamer_dns_record: &quot;{{ comicstreamer_web_subdomain }}&quot;</span><span class="diff-line del">- comicstreamer_dns_zone: &quot;{{ comicstreamer_web_domain }}&quot;</span><span class="diff-line del">- comicstreamer_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- comicstreamer_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">- comicstreamer_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- comicstreamer_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- comicstreamer_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- comicstreamer_traefik_enabled: true</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- comicstreamer_docker_container: &quot;{{ comicstreamer_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- comicstreamer_docker_image_pull: true</span><span class="diff-line del">- comicstreamer_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- comicstreamer_docker_image: &quot;kalinon/comicstreamer:{{ comicstreamer_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- comicstreamer_docker_ports_defaults: []</span><span class="diff-line del">- comicstreamer_docker_ports_custom: []</span><span class="diff-line del">- comicstreamer_docker_ports: &quot;{{ comicstreamer_docker_ports_defaults</span><span class="diff-line del">-                                 + comicstreamer_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- comicstreamer_docker_envs_default:</span><span class="diff-line del">- comicstreamer_docker_envs_custom: {}</span><span class="diff-line del">- comicstreamer_docker_envs: &quot;{{ comicstreamer_docker_envs_default</span><span class="diff-line del">-                                | combine(comicstreamer_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- comicstreamer_docker_commands_default: []</span><span class="diff-line del">- comicstreamer_docker_commands_custom: []</span><span class="diff-line del">- comicstreamer_docker_commands: &quot;{{ comicstreamer_docker_commands_default</span><span class="diff-line del">-                                    + comicstreamer_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- comicstreamer_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ comicstreamer_paths_location }}:/config&quot;</span><span class="diff-line del">-   - &quot;/mnt/unionfs/Media/Comics:/comics&quot;</span><span class="diff-line del">- comicstreamer_docker_volumes_custom: []</span><span class="diff-line del">- comicstreamer_docker_volumes: &quot;{{ comicstreamer_docker_volumes_default</span><span class="diff-line del">-                                   + comicstreamer_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- comicstreamer_docker_devices_default: []</span><span class="diff-line del">- comicstreamer_docker_devices_custom: []</span><span class="diff-line del">- comicstreamer_docker_devices: &quot;{{ comicstreamer_docker_devices_default</span><span class="diff-line del">-                                   + comicstreamer_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- comicstreamer_docker_hosts_default: {}</span><span class="diff-line del">- comicstreamer_docker_hosts_custom: {}</span><span class="diff-line del">- comicstreamer_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                 | combine(comicstreamer_docker_hosts_default)</span><span class="diff-line del">-                                 | combine(comicstreamer_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- comicstreamer_docker_labels_default: {}</span><span class="diff-line del">- comicstreamer_docker_labels_custom: {}</span><span class="diff-line del">- comicstreamer_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                  | combine(comicstreamer_docker_labels_default)</span><span class="diff-line del">-                                  | combine(comicstreamer_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- comicstreamer_docker_hostname: &quot;{{ comicstreamer_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- comicstreamer_docker_networks_alias: &quot;{{ comicstreamer_name }}&quot;</span><span class="diff-line del">- comicstreamer_docker_networks_default: []</span><span class="diff-line del">- comicstreamer_docker_networks_custom: []</span><span class="diff-line del">- comicstreamer_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                    + comicstreamer_docker_networks_default</span><span class="diff-line del">-                                    + comicstreamer_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- comicstreamer_docker_capabilities_default: []</span><span class="diff-line del">- comicstreamer_docker_capabilities_custom: []</span><span class="diff-line del">- comicstreamer_docker_capabilities: &quot;{{ comicstreamer_docker_capabilities_default</span><span class="diff-line del">-                                        + comicstreamer_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- comicstreamer_docker_security_opts_default: []</span><span class="diff-line del">- comicstreamer_docker_security_opts_custom: []</span><span class="diff-line del">- comicstreamer_docker_security_opts: &quot;{{ comicstreamer_docker_security_opts_default</span><span class="diff-line del">-                                         + comicstreamer_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- comicstreamer_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- comicstreamer_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-15">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/comicstreamer/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: comicstreamer                              #</span><span class="diff-line del">- # Author(s):        theotocopulitos, kowalski                           #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # Docker Image(s):  kalinon/comicstreamer                               #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-16">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/docspell/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: docspell | Default Variables                #</span><span class="diff-line del">- # Author(s):        JigSawFr                                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # URL:              https://github.com/eikek/docspell                    #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- docspell_name: docspell</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- docspell_paths_folder: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">- docspell_paths_location: &quot;{{ server_appdata_path }}/{{ docspell_paths_folder }}/server&quot;</span><span class="diff-line del">- docspell_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ docspell_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- docspell_web_subdomain: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">- docspell_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- docspell_web_port: &quot;7880&quot;</span><span class="diff-line del">- docspell_web_url: &quot;{{ &#x27;https://&#x27; + (docspell_web_subdomain + &#x27;.&#x27; + docspell_web_domain</span><span class="diff-line del">-                    if (docspell_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else docspell_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- docspell_dns_record: &quot;{{ docspell_web_subdomain }}&quot;</span><span class="diff-line del">- docspell_dns_zone: &quot;{{ docspell_web_domain }}&quot;</span><span class="diff-line del">- docspell_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- docspell_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">- docspell_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- docspell_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- docspell_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- docspell_traefik_enabled: true</span><span class="diff-line del">- docspell_traefik_api_enabled: true</span><span class="diff-line del">- docspell_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- docspell_docker_container: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- docspell_docker_image_pull: true</span><span class="diff-line del">- docspell_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- docspell_docker_image: &quot;docspell/restserver:{{ docspell_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- docspell_docker_ports_defaults: []</span><span class="diff-line del">- docspell_docker_ports_custom: []</span><span class="diff-line del">- docspell_docker_ports: &quot;{{ docspell_docker_ports_defaults</span><span class="diff-line del">-                            + docspell_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- docspell_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_INTERNAL__URL: &quot;http://{{ docspell_name }}:{{ docspell_web_port }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_ADMIN__ENDPOINT_SECRET: &quot;{{ docspell_admin_key.stdout }}&quot;</span><span class="diff-line del">-   # DOCSPELL_SERVER_AUTH_SERVER__SECRET: &quot;&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_JDBC_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_JDBC_URL: &quot;jdbc:mariadb://{{ docspell_name }}-mariadb:3306/{{ docspell_name }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_JDBC_USER: &quot;root&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BIND_ADDRESS: &quot;0.0.0.0&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_FULL__TEXT__SEARCH_ENABLED: &quot;true&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_FULL__TEXT__SEARCH_SOLR_URL: &quot;http://{{ docspell_name }}-solr:{{ solr_docker_env_port }}/solr/{{ docspell_name }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_INTEGRATION__ENDPOINT_ENABLED: &quot;true&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__HEADER_ENABLED: &quot;true&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_INTEGRATION__ENDPOINT_HTTP__HEADER_HEADER__VALUE: &quot;{{ docspell_integration_key.stdout }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_SIGNUP_MODE: &quot;open&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_SIGNUP_NEW__INVITE__PASSWORD: &quot;{{ docspell_register_key.stdout }}&quot;</span><span class="diff-line del">-   DOCSPELL_SERVER_BACKEND_ADDONS_ENABLED: &quot;false&quot;</span><span class="diff-line del">- docspell_docker_envs_custom: {}</span><span class="diff-line del">- docspell_docker_envs: &quot;{{ docspell_docker_envs_default</span><span class="diff-line del">-                           | combine(docspell_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- docspell_docker_commands_default: []</span><span class="diff-line del">- docspell_docker_commands_custom: []</span><span class="diff-line del">- docspell_docker_commands: &quot;{{ docspell_docker_commands_default</span><span class="diff-line del">-                               + docspell_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- docspell_docker_volumes_default: []</span><span class="diff-line del">- docspell_docker_volumes_custom: []</span><span class="diff-line del">- docspell_docker_volumes: &quot;{{ docspell_docker_volumes_default</span><span class="diff-line del">-                              + docspell_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- docspell_docker_devices_default: []</span><span class="diff-line del">- docspell_docker_devices_custom: []</span><span class="diff-line del">- docspell_docker_devices: &quot;{{ docspell_docker_devices_default</span><span class="diff-line del">-                              + docspell_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- docspell_docker_hosts_default: {}</span><span class="diff-line del">- docspell_docker_hosts_custom: {}</span><span class="diff-line del">- docspell_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(docspell_docker_hosts_default)</span><span class="diff-line del">-                            | combine(docspell_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- docspell_docker_labels_default: {}</span><span class="diff-line del">- docspell_docker_labels_custom: {}</span><span class="diff-line del">- docspell_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(docspell_docker_labels_default)</span><span class="diff-line del">-                             | combine(docspell_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- docspell_docker_hostname: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- docspell_docker_networks_alias: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">- docspell_docker_networks_default: []</span><span class="diff-line del">- docspell_docker_networks_custom: []</span><span class="diff-line del">- docspell_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + docspell_docker_networks_default</span><span class="diff-line del">-                               + docspell_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- docspell_docker_capabilities_default: []</span><span class="diff-line del">- docspell_docker_capabilities_custom: []</span><span class="diff-line del">- docspell_docker_capabilities: &quot;{{ docspell_docker_capabilities_default</span><span class="diff-line del">-                                   + docspell_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- docspell_docker_security_opts_default: []</span><span class="diff-line del">- docspell_docker_security_opts_custom: []</span><span class="diff-line del">- docspell_docker_security_opts: &quot;{{ docspell_docker_security_opts_default</span><span class="diff-line del">-                                    + docspell_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- docspell_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- docspell_docker_state: started</span><span class="diff-line del">- </span><span class="diff-line del">- # Dependencies</span><span class="diff-line del">- docspell_depends_on: &quot;{{ docspell_name }}-mariadb&quot;</span><span class="diff-line del">- docspell_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">- docspell_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-17">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/docspell/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: docspell                                   #</span><span class="diff-line del">- # Author(s):        JigSawFr                                            #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # URL:              https://github.com/eikek/docspell                   #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Check if db folder exists</span><span class="diff-line del">-   ansible.builtin.stat:</span><span class="diff-line del">-     path: &quot;{{ server_appdata_path }}/{{ docspell_paths_folder }}/mariadb&quot;</span><span class="diff-line del">-   register: stat_docspell_db_folder</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove legacy MariaDB Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     var_prefix: &quot;{{ docspell_name }}_mariadb&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: MariaDB Role</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: mariadb</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     mariadb_instances: [&quot;{{ docspell_name }}-mariadb&quot;]</span><span class="diff-line del">-     mariadb_paths_folder: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">-     mariadb_paths_location: &quot;{{ server_appdata_path }}/{{ docspell_paths_folder }}/mariadb&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create docspell database</span><span class="diff-line del">-   community.mysql.mysql_db:</span><span class="diff-line del">-     name: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">-     login_host: &quot;{{ docspell_name }}-mariadb&quot;</span><span class="diff-line del">-     login_user: &quot;root&quot;</span><span class="diff-line del">-     login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line del">-     state: present</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove legacy Solr Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     var_prefix: &quot;{{ docspell_name }}_solr&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Solr Role</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: solr</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     solr_name: &quot;{{ docspell_name }}-solr&quot;</span><span class="diff-line del">-     solr_docker_env_core_name: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">-     solr_paths_folder: &quot;{{ docspell_name }}&quot;</span><span class="diff-line del">-     solr_paths_location: &quot;{{ server_appdata_path }}/{{ solr_paths_folder }}/solr&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Generate Secret Key for registration&quot;</span><span class="diff-line del">-   ansible.builtin.shell: &quot;openssl rand -hex 20&quot;</span><span class="diff-line del">-   register: docspell_register_key</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Generate Secret Key for integration endpoint&quot;</span><span class="diff-line del">-   ansible.builtin.shell: &quot;openssl rand -hex 30&quot;</span><span class="diff-line del">-   register: docspell_integration_key</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Generate Secret Key for admin endpoint&quot;</span><span class="diff-line del">-   ansible.builtin.shell: &quot;openssl rand -hex 30&quot;</span><span class="diff-line del">-   register: docspell_admin_key</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container (docspell-server)</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove legacy docspell-worker Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     var_prefix: &quot;{{ docspell_name }}_joex&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container (docspell-worker)</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     docspell_docker_container: &quot;{{ docspell_name }}-joex&quot;</span><span class="diff-line del">-     docspell_docker_image: &quot;docspell/joex:latest&quot;</span><span class="diff-line del">-     docspell_web_port: &quot;7878&quot;</span><span class="diff-line del">-     docspell_docker_envs:</span><span class="diff-line del">-       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_APP__ID: &quot;joex&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_PERIODIC__SCHEDULER_NAME: &quot;joex&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_SCHEDULER_NAME: &quot;joex&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_BASE__URL: &quot;http://{{ docspell_docker_container }}:{{ docspell_web_port }}&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_BIND_ADDRESS: &quot;0.0.0.0&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_FULL__TEXT__SEARCH_ENABLED: &quot;true&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_FULL__TEXT__SEARCH_SOLR_URL: &quot;http://{{ docspell_name }}-solr:{{ solr_docker_env_port }}/solr/{{ docspell_name }}&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_JDBC_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_JDBC_URL: &quot;jdbc:mariadb://{{ docspell_name }}-mariadb:3306/{{ docspell_name }}&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_JDBC_USER: &quot;root&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_ADDONS_EXECUTOR__CONFIG_RUNNER: &quot;docker,trivial&quot;</span><span class="diff-line del">-       DOCSPELL_JOEX_CONVERT_HTML__CONVERTER: &quot;weasyprint&quot;</span><span class="diff-line del">-     docspell_docker_labels: &quot;{{ omit }}&quot;</span><span class="diff-line del">-     docspell_docker_volumes:</span><span class="diff-line del">-       - /tmp:/tmp</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-18">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/goplaxt/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: GoPlaxt                                     #</span><span class="diff-line del">- # Author(s):        EnorMOZ, kowalski                                    #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- goplaxt_name: goplaxt</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- goplaxt_paths_folder: &quot;{{ goplaxt_name }}&quot;</span><span class="diff-line del">- goplaxt_paths_location: &quot;{{ server_appdata_path }}/{{ goplaxt_paths_folder }}&quot;</span><span class="diff-line del">- goplaxt_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ goplaxt_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- goplaxt_web_subdomain: &quot;{{ goplaxt_name }}&quot;</span><span class="diff-line del">- goplaxt_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- goplaxt_web_port: &quot;8000&quot;</span><span class="diff-line del">- goplaxt_web_url: &quot;{{ &#x27;https://&#x27; + (goplaxt_web_subdomain + &#x27;.&#x27; + goplaxt_web_domain</span><span class="diff-line del">-                   if (goplaxt_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else goplaxt_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- goplaxt_dns_record: &quot;{{ goplaxt_web_subdomain }}&quot;</span><span class="diff-line del">- goplaxt_dns_zone: &quot;{{ goplaxt_web_domain }}&quot;</span><span class="diff-line del">- goplaxt_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- goplaxt_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">- goplaxt_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- goplaxt_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- goplaxt_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- goplaxt_traefik_enabled: true</span><span class="diff-line del">- goplaxt_traefik_api_enabled: false</span><span class="diff-line del">- goplaxt_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- goplaxt_docker_container: &quot;{{ goplaxt_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- goplaxt_docker_image_pull: true</span><span class="diff-line del">- goplaxt_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- goplaxt_docker_image: &quot;xanderstrike/goplaxt:{{ goplaxt_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- goplaxt_docker_ports_defaults: []</span><span class="diff-line del">- goplaxt_docker_ports_custom: []</span><span class="diff-line del">- goplaxt_docker_ports: &quot;{{ goplaxt_docker_ports_defaults</span><span class="diff-line del">-                           + goplaxt_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- goplaxt_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   TRAKT_ID: &quot;{{ goplaxt.trakt_id }}&quot;</span><span class="diff-line del">-   TRAKT_SECRET: &quot;{{ goplaxt.trakt_secret }}&quot;</span><span class="diff-line del">-   REDIRECT_URI: &quot;{{ goplaxt_web_url }}&quot;</span><span class="diff-line del">- goplaxt_docker_envs_custom: {}</span><span class="diff-line del">- goplaxt_docker_envs: &quot;{{ goplaxt_docker_envs_default</span><span class="diff-line del">-                          | combine(goplaxt_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- goplaxt_docker_commands_default: []</span><span class="diff-line del">- goplaxt_docker_commands_custom: []</span><span class="diff-line del">- goplaxt_docker_commands: &quot;{{ goplaxt_docker_commands_default</span><span class="diff-line del">-                              + goplaxt_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- goplaxt_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ goplaxt_paths_location }}:/app/keystore&quot;</span><span class="diff-line del">- goplaxt_docker_volumes_custom: []</span><span class="diff-line del">- goplaxt_docker_volumes: &quot;{{ goplaxt_docker_volumes_default</span><span class="diff-line del">-                             + goplaxt_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- goplaxt_docker_devices_default: []</span><span class="diff-line del">- goplaxt_docker_devices_custom: []</span><span class="diff-line del">- goplaxt_docker_devices: &quot;{{ goplaxt_docker_devices_default</span><span class="diff-line del">-                             + goplaxt_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- goplaxt_docker_hosts_default: {}</span><span class="diff-line del">- goplaxt_docker_hosts_custom: {}</span><span class="diff-line del">- goplaxt_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(goplaxt_docker_hosts_default)</span><span class="diff-line del">-                           | combine(goplaxt_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- goplaxt_docker_labels_default: {}</span><span class="diff-line del">- goplaxt_docker_labels_custom: {}</span><span class="diff-line del">- goplaxt_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(goplaxt_docker_labels_default)</span><span class="diff-line del">-                            | combine(goplaxt_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- goplaxt_docker_hostname: &quot;{{ goplaxt_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- goplaxt_docker_networks_alias: &quot;{{ goplaxt_name }}&quot;</span><span class="diff-line del">- goplaxt_docker_networks_default: []</span><span class="diff-line del">- goplaxt_docker_networks_custom: []</span><span class="diff-line del">- goplaxt_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + goplaxt_docker_networks_default</span><span class="diff-line del">-                              + goplaxt_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- goplaxt_docker_capabilities_default: []</span><span class="diff-line del">- goplaxt_docker_capabilities_custom: []</span><span class="diff-line del">- goplaxt_docker_capabilities: &quot;{{ goplaxt_docker_capabilities_default</span><span class="diff-line del">-                                  + goplaxt_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- goplaxt_docker_security_opts_default: []</span><span class="diff-line del">- goplaxt_docker_security_opts_custom: []</span><span class="diff-line del">- goplaxt_docker_security_opts: &quot;{{ goplaxt_docker_security_opts_default</span><span class="diff-line del">-                                   + goplaxt_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- goplaxt_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- goplaxt_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-19">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/goplaxt/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: GoPlaxt                                     #</span><span class="diff-line del">- # Author(s):        EnorMOZ, kowalski                                    #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-20">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/maybe_finance/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Maybe Finance                              #</span><span class="diff-line del">- # Author(s):        cartermcalister                                     #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_name: maybe-finance</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Settings</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_postgres_name: &quot;{{ maybe_finance_name }}-postgres&quot;</span><span class="diff-line del">- maybe_finance_postgres_docker_env_db: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- maybe_finance_postgres_docker_image_tag: &quot;16&quot;</span><span class="diff-line del">- maybe_finance_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">- maybe_finance_postgres_paths_folder: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- maybe_finance_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ maybe_finance_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_paths_folder: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- maybe_finance_paths_location: &quot;{{ server_appdata_path }}/{{ maybe_finance_paths_folder }}&quot;</span><span class="diff-line del">- maybe_finance_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ maybe_finance_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_web_subdomain: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- maybe_finance_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- maybe_finance_web_port: &quot;3000&quot;</span><span class="diff-line del">- maybe_finance_web_url: &quot;{{ &#x27;https://&#x27; + (maybe_finance_web_subdomain + &#x27;.&#x27; + maybe_finance_web_domain</span><span class="diff-line del">-                          if (maybe_finance_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                          else maybe_finance_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_dns_record: &quot;{{ maybe_finance_web_subdomain }}&quot;</span><span class="diff-line del">- maybe_finance_dns_zone: &quot;{{ maybe_finance_web_domain }}&quot;</span><span class="diff-line del">- maybe_finance_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">- maybe_finance_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- maybe_finance_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- maybe_finance_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- maybe_finance_traefik_enabled: true</span><span class="diff-line del">- maybe_finance_traefik_api_enabled: false</span><span class="diff-line del">- maybe_finance_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- maybe_finance_docker_container: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- maybe_finance_docker_image_pull: true</span><span class="diff-line del">- maybe_finance_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- maybe_finance_docker_image: &quot;ghcr.io/maybe-finance/maybe:{{ maybe_finance_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- maybe_finance_docker_ports_defaults: []</span><span class="diff-line del">- maybe_finance_docker_ports_custom: []</span><span class="diff-line del">- maybe_finance_docker_ports: &quot;{{ maybe_finance_docker_ports_defaults</span><span class="diff-line del">-                             + maybe_finance_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- maybe_finance_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-   SELF_HOSTED: &quot;true&quot;</span><span class="diff-line del">-   RAILS_FORCE_SSL: &quot;false&quot;</span><span class="diff-line del">-   RAILS_ASSUME_SSL: &quot;false&quot;</span><span class="diff-line del">-   GOOD_JOB_EXECUTION_MODE: &quot;async&quot;</span><span class="diff-line del">-   SECRET_KEY_BASE: &quot;{{ maybe_finance_saltbox_facts.facts.secret_key_base }}&quot;</span><span class="diff-line del">-   DB_USERNAME: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-   DB_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-   DB_HOST: &quot;{{ maybe_finance_postgres_name }}&quot;</span><span class="diff-line del">-   DB_PORT: &quot;5432&quot;</span><span class="diff-line del">-   POSTGRES_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-   REDIS_URL: &quot;redis://{{ maybe_finance_name }}-redis:6379/1&quot;</span><span class="diff-line del">-   POSTGRES_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">- maybe_finance_docker_envs_custom: {}</span><span class="diff-line del">- maybe_finance_docker_envs: &quot;{{ maybe_finance_docker_envs_default</span><span class="diff-line del">-                            | combine(maybe_finance_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- maybe_finance_docker_commands_default: []</span><span class="diff-line del">- maybe_finance_docker_commands_custom: []</span><span class="diff-line del">- maybe_finance_docker_commands: &quot;{{ maybe_finance_docker_commands_default</span><span class="diff-line del">-                                + maybe_finance_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- maybe_finance_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ maybe_finance_paths_location }}:/rails/storage&quot;</span><span class="diff-line del">- maybe_finance_docker_volumes_custom: []</span><span class="diff-line del">- maybe_finance_docker_volumes: &quot;{{ maybe_finance_docker_volumes_default</span><span class="diff-line del">-                               + maybe_finance_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- maybe_finance_docker_devices_default: []</span><span class="diff-line del">- maybe_finance_docker_devices_custom: []</span><span class="diff-line del">- maybe_finance_docker_devices: &quot;{{ maybe_finance_docker_devices_default</span><span class="diff-line del">-                               + maybe_finance_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- maybe_finance_docker_hosts_default: {}</span><span class="diff-line del">- maybe_finance_docker_hosts_custom: {}</span><span class="diff-line del">- maybe_finance_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(maybe_finance_docker_hosts_default)</span><span class="diff-line del">-                             | combine(maybe_finance_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- maybe_finance_docker_labels_default: {}</span><span class="diff-line del">- maybe_finance_docker_labels_custom: {}</span><span class="diff-line del">- maybe_finance_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(maybe_finance_docker_labels_default)</span><span class="diff-line del">-                              | combine(maybe_finance_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- maybe_finance_docker_hostname: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- maybe_finance_docker_networks_alias: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">- maybe_finance_docker_networks_default: []</span><span class="diff-line del">- maybe_finance_docker_networks_custom: []</span><span class="diff-line del">- maybe_finance_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + maybe_finance_docker_networks_default</span><span class="diff-line del">-                                + maybe_finance_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- maybe_finance_docker_capabilities_default: []</span><span class="diff-line del">- maybe_finance_docker_capabilities_custom: []</span><span class="diff-line del">- maybe_finance_docker_capabilities: &quot;{{ maybe_finance_docker_capabilities_default</span><span class="diff-line del">-                                    + maybe_finance_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- maybe_finance_docker_security_opts_default: []</span><span class="diff-line del">- maybe_finance_docker_security_opts_custom: []</span><span class="diff-line del">- maybe_finance_docker_security_opts: &quot;{{ maybe_finance_docker_security_opts_default</span><span class="diff-line del">-                                     + maybe_finance_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- maybe_finance_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- maybe_finance_docker_state: started</span><span class="diff-line del">- </span><span class="diff-line del">- # Dependencies</span><span class="diff-line del">- maybe_finance_depends_on: &quot;{{ maybe_finance_postgres_name }}&quot;</span><span class="diff-line del">- maybe_finance_depends_on_delay: &quot;5&quot;</span><span class="diff-line del">- maybe_finance_depends_on_healthchecks: &quot;true&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-21">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/maybe_finance/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: maybe_finance                              #</span><span class="diff-line del">- # Author(s):        cartermcalister                                     #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-   loop:</span><span class="diff-line del">-     - &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">-     - &quot;{{ maybe_finance_name }}-worker&quot;</span><span class="diff-line del">-     - &quot;{{ maybe_finance_name }}-redis&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Generate Secret Key Base</span><span class="diff-line del">-   community.docker.docker_container:</span><span class="diff-line del">-     name: maybe_finance-secret-key</span><span class="diff-line del">-     image: &quot;{{ maybe_finance_docker_image }}&quot;</span><span class="diff-line del">-     command: &quot;sh -c &#x27;head -c 32 /dev/urandom | base64&#x27;&quot;</span><span class="diff-line del">-     detach: no</span><span class="diff-line del">-     networks:</span><span class="diff-line del">-       - name: saltbox</span><span class="diff-line del">-     cleanup: yes</span><span class="diff-line del">-     state: started</span><span class="diff-line del">-     container_default_behavior: compatibility</span><span class="diff-line del">-     tls_hostname: localhost</span><span class="diff-line del">-     pull: true</span><span class="diff-line del">-   register: maybe_finance_generated_secret_key</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Save maybe_finance Secret Key Base Saltbox facts&quot;</span><span class="diff-line del">-   saltbox_facts:</span><span class="diff-line del">-     role: &quot;maybe_finance&quot;</span><span class="diff-line del">-     instance: &quot;maybe_finance&quot;</span><span class="diff-line del">-     keys:</span><span class="diff-line del">-       secret_key_base: &quot;{{ maybe_finance_generated_secret_key.container.Output }}&quot;</span><span class="diff-line del">-     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-     group: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-   register: maybe_finance_saltbox_facts</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Import Redis Role</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: redis</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     redis_instances: [&quot;{{ maybe_finance_name }}-redis&quot;]</span><span class="diff-line del">-     redis_paths_folder: &quot;{{ maybe_finance_name }}&quot;</span><span class="diff-line del">-     redis_paths_location: &quot;{{ server_appdata_path }}/{{ redis_paths_folder }}/redis&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Import PostgreSQL Role</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: postgres</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     postgres_instances: [&quot;{{ maybe_finance_postgres_name }}&quot;]</span><span class="diff-line del">-     postgres_docker_env_db: &quot;{{ maybe_finance_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-     postgres_docker_image_tag: &quot;{{ maybe_finance_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-     postgres_docker_image_repo: &quot;{{ maybe_finance_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-     postgres_paths_folder: &quot;{{ maybe_finance_postgres_paths_folder }}&quot;</span><span class="diff-line del">-     postgres_paths_location: &quot;{{ maybe_finance_postgres_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Import Authentik Worker Role&quot;</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: maybe_finance_worker</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-22">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/maybe_finance_worker/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Maybe Finance Worker                       #</span><span class="diff-line del">- # Author(s):        cartermcalister                                     #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_worker_name: maybe-finance-worker</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- maybe_finance_worker_paths_folder: &quot;{{ maybe_finance_worker_name }}&quot;</span><span class="diff-line del">- maybe_finance_worker_paths_location: &quot;{{ server_appdata_path }}/{{ maybe_finance_worker_paths_folder }}&quot;</span><span class="diff-line del">- maybe_finance_worker_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ maybe_finance_worker_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- maybe_finance_worker_docker_container: &quot;{{ maybe_finance_worker_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- maybe_finance_worker_docker_image_pull: true</span><span class="diff-line del">- maybe_finance_worker_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- maybe_finance_worker_docker_image: &quot;ghcr.io/maybe-finance/maybe:{{ maybe_finance_worker_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- maybe_finance_worker_docker_ports_defaults: []</span><span class="diff-line del">- maybe_finance_worker_docker_ports_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_ports: &quot;{{ maybe_finance_worker_docker_ports_defaults</span><span class="diff-line del">-                             + maybe_finance_worker_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- maybe_finance_worker_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-   SELF_HOSTED: &quot;true&quot;</span><span class="diff-line del">-   RAILS_FORCE_SSL: &quot;false&quot;</span><span class="diff-line del">-   RAILS_ASSUME_SSL: &quot;false&quot;</span><span class="diff-line del">-   GOOD_JOB_EXECUTION_MODE: &quot;async&quot;</span><span class="diff-line del">-   SECRET_KEY_BASE: &quot;{{ maybe_finance_saltbox_facts.facts.secret_key_base }}&quot;</span><span class="diff-line del">-   DB_USERNAME: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-   DB_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-   DB_HOST: &quot;{{ maybe_finance_postgres_name }}&quot;</span><span class="diff-line del">-   DB_PORT: &quot;5432&quot;</span><span class="diff-line del">-   POSTGRES_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-   REDIS_URL: &quot;redis://{{ maybe_finance_name }}-redis:6379/1&quot;</span><span class="diff-line del">-   POSTGRES_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">- maybe_finance_worker_docker_envs_custom: {}</span><span class="diff-line del">- maybe_finance_worker_docker_envs: &quot;{{ maybe_finance_worker_docker_envs_default</span><span class="diff-line del">-                            | combine(maybe_finance_worker_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- maybe_finance_worker_docker_commands_default:</span><span class="diff-line del">-   - &quot;bundle exec sidekiq&quot;</span><span class="diff-line del">- maybe_finance_worker_docker_commands_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_commands: &quot;{{ maybe_finance_worker_docker_commands_default</span><span class="diff-line del">-                                + maybe_finance_worker_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- maybe_finance_worker_docker_volumes_default: []</span><span class="diff-line del">- maybe_finance_worker_docker_volumes_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_volumes: &quot;{{ maybe_finance_worker_docker_volumes_default</span><span class="diff-line del">-                               + maybe_finance_worker_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- maybe_finance_worker_docker_devices_default: []</span><span class="diff-line del">- maybe_finance_worker_docker_devices_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_devices: &quot;{{ maybe_finance_worker_docker_devices_default</span><span class="diff-line del">-                               + maybe_finance_worker_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- maybe_finance_worker_docker_hosts_default: {}</span><span class="diff-line del">- maybe_finance_worker_docker_hosts_custom: {}</span><span class="diff-line del">- maybe_finance_worker_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(maybe_finance_worker_docker_hosts_default)</span><span class="diff-line del">-                             | combine(maybe_finance_worker_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- maybe_finance_worker_docker_labels_default: {}</span><span class="diff-line del">- maybe_finance_worker_docker_labels_custom: {}</span><span class="diff-line del">- maybe_finance_worker_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(maybe_finance_worker_docker_labels_default)</span><span class="diff-line del">-                              | combine(maybe_finance_worker_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- maybe_finance_worker_docker_hostname: &quot;{{ maybe_finance_worker_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- maybe_finance_worker_docker_networks_alias: &quot;{{ maybe_finance_worker_name }}&quot;</span><span class="diff-line del">- maybe_finance_worker_docker_networks_default: []</span><span class="diff-line del">- maybe_finance_worker_docker_networks_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + maybe_finance_worker_docker_networks_default</span><span class="diff-line del">-                                + maybe_finance_worker_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- maybe_finance_worker_docker_capabilities_default: []</span><span class="diff-line del">- maybe_finance_worker_docker_capabilities_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_capabilities: &quot;{{ maybe_finance_worker_docker_capabilities_default</span><span class="diff-line del">-                                    + maybe_finance_worker_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- maybe_finance_worker_docker_security_opts_default: []</span><span class="diff-line del">- maybe_finance_worker_docker_security_opts_custom: []</span><span class="diff-line del">- maybe_finance_worker_docker_security_opts: &quot;{{ maybe_finance_worker_docker_security_opts_default</span><span class="diff-line del">-                                     + maybe_finance_worker_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- maybe_finance_worker_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- maybe_finance_worker_docker_state: started</span><span class="diff-line del">- </span><span class="diff-line del">- # Dependencies</span><span class="diff-line del">- maybe_finance_worker_depends_on: &quot;{{ maybe_finance_worker_postgres_name }}&quot;</span><span class="diff-line del">- maybe_finance_worker_depends_on_delay: &quot;5&quot;</span><span class="diff-line del">- maybe_finance_worker_depends_on_healthchecks: &quot;true&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-23">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/maybe_finance_worker/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: maybe_finance_worker                       #</span><span class="diff-line del">- # Author(s):        cartermcalister                                     #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-24">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/rdtclient/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:         Sandbox: rdtclient                                      #</span><span class="diff-line del">- # Author(s):     kxzaon, salty                                           #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                     #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- rdtclient_name: rdtclient</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- rdtclient_paths_folder: &quot;{{ rdtclient_name }}&quot;</span><span class="diff-line del">- rdtclient_paths_location: &quot;{{ server_appdata_path }}/{{ rdtclient_paths_folder }}&quot;</span><span class="diff-line del">- rdtclient_paths_config_location: &quot;{{ rdtclient_paths_location }}/config&quot;</span><span class="diff-line del">- rdtclient_paths_db_location: &quot;{{ rdtclient_paths_location }}/db&quot;</span><span class="diff-line del">- rdtclient_paths_downloads_location: &quot;/mnt/unionfs/downloads/torrents/rdtclient&quot;</span><span class="diff-line del">- rdtclient_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_location }}&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_config_location }}&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_db_location }}&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_downloads_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- rdtclient_web_subdomain: &quot;{{ rdtclient_name }}&quot;</span><span class="diff-line del">- rdtclient_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- rdtclient_web_port: &quot;6500&quot;</span><span class="diff-line del">- rdtclient_web_url: &quot;{{ &#x27;https://&#x27; + (rdtclient_web_subdomain + &#x27;.&#x27; + rdtclient_web_domain</span><span class="diff-line del">-                     if (rdtclient_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else rdtclient_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- rdtclient_dns_record: &quot;{{ rdtclient_web_subdomain }}&quot;</span><span class="diff-line del">- rdtclient_dns_zone: &quot;{{ rdtclient_web_domain }}&quot;</span><span class="diff-line del">- rdtclient_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- rdtclient_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">- rdtclient_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- rdtclient_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- rdtclient_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- rdtclient_traefik_enabled: true</span><span class="diff-line del">- rdtclient_traefik_api_enabled: false</span><span class="diff-line del">- rdtclient_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- rdtclient_docker_container: &quot;{{ rdtclient_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- rdtclient_docker_image_pull: true</span><span class="diff-line del">- rdtclient_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- rdtclient_docker_image: &quot;rogerfar/rdtclient:{{ rdtclient_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- rdtclient_docker_ports_defaults: []</span><span class="diff-line del">- rdtclient_docker_ports_custom: []</span><span class="diff-line del">- rdtclient_docker_ports: &quot;{{ rdtclient_docker_ports_defaults</span><span class="diff-line del">-                             + rdtclient_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- rdtclient_docker_envs_default:</span><span class="diff-line del">-   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">- rdtclient_docker_envs_custom: {}</span><span class="diff-line del">- rdtclient_docker_envs: &quot;{{ rdtclient_docker_envs_default</span><span class="diff-line del">-                            | combine(rdtclient_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- rdtclient_docker_commands_default: []</span><span class="diff-line del">- rdtclient_docker_commands_custom: []</span><span class="diff-line del">- rdtclient_docker_commands: &quot;{{ rdtclient_docker_commands_default</span><span class="diff-line del">-                                + rdtclient_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- rdtclient_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_location }}:/data&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_config_location }}:/data/config&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_db_location }}:/data/db&quot;</span><span class="diff-line del">-   - &quot;{{ rdtclient_paths_downloads_location }}:/data/downloads&quot;</span><span class="diff-line del">- rdtclient_docker_volumes_custom: []</span><span class="diff-line del">- rdtclient_docker_volumes: &quot;{{ rdtclient_docker_volumes_default</span><span class="diff-line del">-                               + rdtclient_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- rdtclient_docker_devices_default: []</span><span class="diff-line del">- rdtclient_docker_devices_custom: []</span><span class="diff-line del">- rdtclient_docker_devices: &quot;{{ rdtclient_docker_devices_default</span><span class="diff-line del">-                               + rdtclient_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- rdtclient_docker_hosts_default: {}</span><span class="diff-line del">- rdtclient_docker_hosts_custom: {}</span><span class="diff-line del">- rdtclient_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(rdtclient_docker_hosts_default)</span><span class="diff-line del">-                             | combine(rdtclient_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- rdtclient_docker_labels_default: {}</span><span class="diff-line del">- rdtclient_docker_labels_custom: {}</span><span class="diff-line del">- rdtclient_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(rdtclient_docker_labels_default)</span><span class="diff-line del">-                              | combine(rdtclient_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- rdtclient_docker_hostname: &quot;{{ rdtclient_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- rdtclient_docker_networks_alias: &quot;{{ rdtclient_name }}&quot;</span><span class="diff-line del">- rdtclient_docker_networks_default: []</span><span class="diff-line del">- rdtclient_docker_networks_custom: []</span><span class="diff-line del">- rdtclient_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + rdtclient_docker_networks_default</span><span class="diff-line del">-                                + rdtclient_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- rdtclient_docker_capabilities_default: []</span><span class="diff-line del">- rdtclient_docker_capabilities_custom: []</span><span class="diff-line del">- rdtclient_docker_capabilities: &quot;{{ rdtclient_docker_capabilities_default</span><span class="diff-line del">-                                    + rdtclient_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- rdtclient_docker_security_opts_default: []</span><span class="diff-line del">- rdtclient_docker_security_opts_custom: []</span><span class="diff-line del">- rdtclient_docker_security_opts: &quot;{{ rdtclient_docker_security_opts_default</span><span class="diff-line del">-                                     + rdtclient_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- rdtclient_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- rdtclient_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-25">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/rdtclient/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: rdtclient                                  #</span><span class="diff-line del">- # Author(s):        kxzaon, salty                                       #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-26">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/files/settings-updater.py</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #!/srv/ansible/venv/bin/python3</span><span class="diff-line del">- &quot;&quot;&quot;</span><span class="diff-line del">- </span><span class="diff-line del">-     #########################################################################</span><span class="diff-line del">-     # Title:         Settings Updater Script                                #</span><span class="diff-line del">-     # Author(s):     l3uddz, salty                                          #</span><span class="diff-line del">-     # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">-     # Description:   Adds variables to settings.yml.                        #</span><span class="diff-line del">-     # --                                                                    #</span><span class="diff-line del">-     #########################################################################</span><span class="diff-line del">-     #                   GNU General Public License v3.0                     #</span><span class="diff-line del">-     #########################################################################</span><span class="diff-line del">- </span><span class="diff-line del">- &quot;&quot;&quot;</span><span class="diff-line del">- import logging</span><span class="diff-line del">- import os</span><span class="diff-line del">- import sys</span><span class="diff-line del">- from logging.handlers import RotatingFileHandler</span><span class="diff-line del">- </span><span class="diff-line del">- from ruamel.yaml import YAML</span><span class="diff-line del">- from ruamel.yaml.comments import CommentedMap</span><span class="diff-line del">- </span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- # INIT</span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- log = None</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- def init_logging(playbook_path):</span><span class="diff-line del">-     # log settings</span><span class="diff-line del">-     log_format = &#x27;%(asctime)s - %(levelname)-10s - %(name)-35s - %(funcName)-35s - %(message)s&#x27;</span><span class="diff-line del">-     log_file_path = os.path.join(playbook_path, &quot;settings-updater.log&quot;)</span><span class="diff-line del">-     log_level = logging.DEBUG</span><span class="diff-line del">- </span><span class="diff-line del">-     # init root_logger</span><span class="diff-line del">-     log_formatter = logging.Formatter(log_format)</span><span class="diff-line del">-     root_logger = logging.getLogger()</span><span class="diff-line del">-     root_logger.setLevel(log_level)</span><span class="diff-line del">- </span><span class="diff-line del">-     # init console_logger</span><span class="diff-line del">-     console_handler = logging.StreamHandler(sys.stdout)</span><span class="diff-line del">-     console_handler.setFormatter(log_formatter)</span><span class="diff-line del">-     root_logger.addHandler(console_handler)</span><span class="diff-line del">- </span><span class="diff-line del">-     # init file_logger</span><span class="diff-line del">-     file_handler = RotatingFileHandler(</span><span class="diff-line del">-         log_file_path,</span><span class="diff-line del">-         maxBytes=1024 * 1024 * 5,</span><span class="diff-line del">-         backupCount=5</span><span class="diff-line del">-     )</span><span class="diff-line del">-     file_handler.setFormatter(log_formatter)</span><span class="diff-line del">-     root_logger.addHandler(file_handler)</span><span class="diff-line del">- </span><span class="diff-line del">-     # Set chosen logging level</span><span class="diff-line del">-     root_logger.setLevel(log_level)</span><span class="diff-line del">- </span><span class="diff-line del">-     # Get logger</span><span class="diff-line del">-     return root_logger.getChild(&quot;settings-updater&quot;)</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- # UPDATER</span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- </span><span class="diff-line del">- def load_settings(file_to_load):</span><span class="diff-line del">-     yaml_instance = YAML()</span><span class="diff-line del">-     yaml_instance.preserve_quotes = True</span><span class="diff-line del">- </span><span class="diff-line del">-     settings = None</span><span class="diff-line del">-     try:</span><span class="diff-line del">-         with open(file_to_load, &quot;r&quot;) as f:</span><span class="diff-line del">-             settings = yaml_instance.load(f)</span><span class="diff-line del">-     except Exception:</span><span class="diff-line del">-         log.exception(&quot;Exception loading %s: &quot;, file_to_load)</span><span class="diff-line del">-     return settings</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- def dump_settings(settings, file_to_dump):</span><span class="diff-line del">-     dumped = False</span><span class="diff-line del">-     try:</span><span class="diff-line del">-         yaml_instance = YAML()</span><span class="diff-line del">-         yaml_instance.preserve_quotes = True</span><span class="diff-line del">-         with open(file_to_dump, &#x27;w&#x27;) as fp:</span><span class="diff-line del">-             yaml_instance.dump(settings, fp)</span><span class="diff-line del">-         dumped = True</span><span class="diff-line del">-     except Exception:</span><span class="diff-line del">-         log.exception(&quot;Exception dumping upgraded %s: &quot;, file_to_dump)</span><span class="diff-line del">-     return dumped</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- def upgrade_settings(defaults, current, key=None):</span><span class="diff-line del">-     upgraded = False</span><span class="diff-line del">-     res = CommentedMap()</span><span class="diff-line del">-     for k, v in defaults.items():</span><span class="diff-line del">-         if k not in current:</span><span class="diff-line del">-             res[k] = v</span><span class="diff-line del">-             upgraded = True</span><span class="diff-line del">-             log.info(&quot;Added field: \&#x27;%s%s\&#x27;.&quot;, k, &#x27;&#x27; if not key else &#x27; to \&#x27;%s\&#x27;.&#x27; % key)</span><span class="diff-line del">-         else:</span><span class="diff-line del">-             res[k] = current[k]</span><span class="diff-line del">- </span><span class="diff-line del">-         if hasattr(v, &#x27;items&#x27;):</span><span class="diff-line del">-             if k in current:</span><span class="diff-line del">-                 sub_upgrade, res[k] = upgrade_settings(v, current[k], k)</span><span class="diff-line del">-                 if sub_upgrade:</span><span class="diff-line del">-                     upgraded = True</span><span class="diff-line del">-             else:</span><span class="diff-line del">-                 res[k] = v</span><span class="diff-line del">-                 upgraded = True</span><span class="diff-line del">- </span><span class="diff-line del">-     return upgraded, res</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- # MAIN</span><span class="diff-line del">- ############################################################</span><span class="diff-line del">- </span><span class="diff-line del">- if __name__ == &quot;__main__&quot;:</span><span class="diff-line del">-     # get playbook dir</span><span class="diff-line del">-     if not len(sys.argv) &gt;= 4:</span><span class="diff-line del">-         print(&quot;3 arguments must be supplied, playbook_dir default_settings current_settings&quot;)</span><span class="diff-line del">-         sys.exit(1)</span><span class="diff-line del">-     playbook_dir = sys.argv[1]</span><span class="diff-line del">-     default_file = sys.argv[2]</span><span class="diff-line del">-     current_file = sys.argv[3]</span><span class="diff-line del">- </span><span class="diff-line del">-     # init logging</span><span class="diff-line del">-     log = init_logging(playbook_dir)</span><span class="diff-line del">- </span><span class="diff-line del">-     # load settings</span><span class="diff-line del">-     default_settings = load_settings(os.path.join(playbook_dir, default_file))</span><span class="diff-line del">-     if not default_settings:</span><span class="diff-line del">-         log.error(&quot;Failed loading \&#x27;%s\&#x27;. Aborting...&quot;, default_file)</span><span class="diff-line del">-         sys.exit(1)</span><span class="diff-line del">- </span><span class="diff-line del">-     current_settings = load_settings(os.path.join(playbook_dir, current_file))</span><span class="diff-line del">-     if not current_settings:</span><span class="diff-line del">-         log.error(&quot;Failed loading \&#x27;%s\&#x27;. Aborting...&quot;, current_file)</span><span class="diff-line del">-         sys.exit(1)</span><span class="diff-line del">- </span><span class="diff-line del">-     # compare/upgrade settings</span><span class="diff-line del">-     did_upgrade, upgraded_settings = upgrade_settings(default_settings, current_settings)</span><span class="diff-line del">-     if not did_upgrade:</span><span class="diff-line del">-         log.info(&quot;There were no settings changes to apply.&quot;)</span><span class="diff-line del">-         sys.exit(0)</span><span class="diff-line del">-     else:</span><span class="diff-line del">-         if not dump_settings(upgraded_settings, os.path.join(playbook_dir, current_file)):</span><span class="diff-line del">-             log.error(&quot;Failed dumping updated \&#x27;%s\&#x27;.&quot;, current_file)</span><span class="diff-line del">-             sys.exit(1)</span><span class="diff-line del">-         log.info(&quot;Successfully upgraded: \&#x27;%s\&#x27;.&quot;, current_file)</span><span class="diff-line del">-         sys.exit(2)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-27">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings Role                                 #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Settings | Start&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;subtasks/start.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Settings | Main 2&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;main2.yml&quot;</span><span class="diff-line del">-   loop: &quot;{{ config_files }}&quot;</span><span class="diff-line del">-   loop_control:</span><span class="diff-line del">-     loop_var: outer_item</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Settings | Finish&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;subtasks/finish.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-28">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Main 2                             #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Settings | Copy&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;subtasks/copy.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     file: &quot;{{ outer_item }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Settings | Migrator&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;subtasks/migrator.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     file: &quot;{{ outer_item }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Settings | Updater&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;subtasks/updater.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     file: &quot;{{ outer_item }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-29">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/copy.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Copy                               #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- # Check for config files and import they are missing</span><span class="diff-line del">- - name: &quot;Copy | Check if &#x27;{{ file }}&#x27; exists&quot;</span><span class="diff-line del">-   ansible.builtin.stat:</span><span class="diff-line del">-     path: &quot;{{ playbook_dir }}/{{ file }}&quot;</span><span class="diff-line del">-   register: file0</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Copy | Copy &#x27;{{ file }}.default&#x27; to &#x27;{{ file }}&#x27;&quot;</span><span class="diff-line del">-   ansible.builtin.copy:</span><span class="diff-line del">-     src: &quot;{{ playbook_dir }}/defaults/{{ file }}.default&quot;</span><span class="diff-line del">-     dest: &quot;{{ playbook_dir }}/{{ file }}&quot;</span><span class="diff-line del">-     owner: &quot;{{ sandbox_yml.stat.uid }}&quot;</span><span class="diff-line del">-     group: &quot;{{ sandbox_yml.stat.gid }}&quot;</span><span class="diff-line del">-     mode: &quot;0664&quot;</span><span class="diff-line del">-   when: not file0.stat.exists</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-30">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/finish.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Finish                             #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Finish | Check &#x27;settings-updater.py&#x27; for new settings&quot;</span><span class="diff-line del">-   ansible.builtin.debug: # noqa jinja[invalid]</span><span class="diff-line del">-     msg:</span><span class="diff-line del">-       - &quot;The &#x27;settings_updater.py&#x27; script updated the following</span><span class="diff-line del">-           file{{ &#x27;s&#x27; if (files_updated_successfully | length &gt; 1) else &#x27;&#x27; }}: &#x27;{{ files_updated_successfully | join(&#x27;, &#x27;) | trim }}&#x27;&quot;</span><span class="diff-line del">-       - &quot;Please check {{ &#x27;these files&#x27; if (files_updated_successfully | length &gt; 1) else &#x27;this file&#x27; }} for the newly added settings&quot;</span><span class="diff-line del">-       - &quot;You can also review the log file: &#x27;settings-updater.log&#x27;&quot;</span><span class="diff-line del">-   when:</span><span class="diff-line del">-     - files_updated_successfully | length &gt; 0</span><span class="diff-line del">- </span><span class="diff-line del">- # Exit playbook When necessary</span><span class="diff-line del">- - name: Finish | Exit Tasks</span><span class="diff-line del">-   when: exit_is_necessary</span><span class="diff-line del">-   block:</span><span class="diff-line del">-     - name: &quot;Finish | Check &#x27;settings-updater.py&#x27; run status for errors&quot;</span><span class="diff-line del">-       ansible.builtin.debug:</span><span class="diff-line del">-         msg:</span><span class="diff-line del">-           - &quot;The &#x27;settings_updater.py&#x27; script exited with an error when updating the following</span><span class="diff-line del">-               file{{ &#x27;s&#x27; if (files_updated_unsuccessfully | length &gt; 1) else &#x27;&#x27; }}: &#x27;{{ files_updated_unsuccessfully | join(&#x27;, &#x27;) | trim }}&#x27;&quot;</span><span class="diff-line del">-           - &quot;Please check &#x27;settings-updater.log&#x27; for details&quot;</span><span class="diff-line del">-       when: files_updated_unsuccessfully | length &gt; 0</span><span class="diff-line del">- </span><span class="diff-line del">-     - name: &quot;Finish | Exit so that user can check updated config files&quot;</span><span class="diff-line del">-       ansible.builtin.debug:</span><span class="diff-line del">-         msg: &quot;Sandbox Installer will now exit.&quot;</span><span class="diff-line del">- </span><span class="diff-line del">-     - name: &quot;Finish | Exit&quot;</span><span class="diff-line del">-       ansible.builtin.meta: end_play</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-31">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/migrator.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Migrator                           #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Migrator | Migrations for all config files</span><span class="diff-line del">-   block:</span><span class="diff-line del">-     - name: Migrator | All | Migration 01</span><span class="diff-line del">-       ansible.builtin.include_tasks: &quot;migrator/all/migration_01.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-32">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/migrator/all/migration_01.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ########################################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Migrator | All | Migration 01                     #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                                     #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                                   #</span><span class="diff-line del">- # --                                                                                   #</span><span class="diff-line del">- ########################################################################################</span><span class="diff-line del">- #                            GNU General Public License v3.0                           #</span><span class="diff-line del">- ########################################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Migrator | All | &#x27;{{ file }}&#x27; | Migration 01 | Add single space after colon (if needed)</span><span class="diff-line del">-   ansible.builtin.replace:</span><span class="diff-line del">-     path: &quot;{{ playbook_dir }}/{{ file }}&quot;</span><span class="diff-line del">-     regexp: &#x27;(:)[ \t]*(.*)&#x27;</span><span class="diff-line del">-     replace: &#x27;\1 \2&#x27;</span><span class="diff-line del">-     owner: &quot;{{ sandbox_yml.stat.uid }}&quot;</span><span class="diff-line del">-     group: &quot;{{ sandbox_yml.stat.gid }}&quot;</span><span class="diff-line del">-     mode: &quot;0664&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Migrator | All | &#x27;{{ file }}&#x27; | Migration 01 | Re-import Variables</span><span class="diff-line del">-   ansible.builtin.include_vars: &quot;{{ playbook_dir }}/{{ file }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-33">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/start.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Start                              #</span><span class="diff-line del">- # Author(s):     desimaniac, salty                                      #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Start | Install yyq&quot;</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: yyq</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Start | Get &#x27;sandbox.yml&#x27; info&quot;</span><span class="diff-line del">-   ansible.builtin.stat:</span><span class="diff-line del">-     path: &quot;{{ playbook_dir }}/sandbox.yml&quot;</span><span class="diff-line del">-   register: sandbox_yml</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Start | Create list of config files&quot;</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     config_files:</span><span class="diff-line del">-       - &quot;settings.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Start | Initialize vars with empty lists</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     files_updated_successfully: []</span><span class="diff-line del">-     files_updated_unsuccessfully: []</span><span class="diff-line del">-     exit_is_necessary: false</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Start | Check if &#x27;settings-updater.log&#x27; exists&quot;</span><span class="diff-line del">-   ansible.builtin.stat:</span><span class="diff-line del">-     path: &quot;{{ playbook_dir }}/settings-updater.log&quot;</span><span class="diff-line del">-   register: settings_updater_log</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Start | Reset ownership of &#x27;settings-updater.log&#x27;&quot;</span><span class="diff-line del">-   ansible.builtin.file:</span><span class="diff-line del">-     path: &quot;{{ playbook_dir }}/settings-updater.log&quot;</span><span class="diff-line del">-     state: file</span><span class="diff-line del">-     owner: &quot;{{ sandbox_yml.stat.uid }}&quot;</span><span class="diff-line del">-     group: &quot;{{ sandbox_yml.stat.gid }}&quot;</span><span class="diff-line del">-     mode: &quot;0664&quot;</span><span class="diff-line del">-   when: (settings_updater_log.stat.exists)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-34">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/settings/tasks/subtasks/updater.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Settings | Updater                            #</span><span class="diff-line del">- # Author(s):     desimaniac, l3uddz, salty                              #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Updater | Run &#x27;settings-updater.py&#x27; for &#x27;{{ file }}&#x27;&quot;</span><span class="diff-line del">-   ansible.builtin.script: &quot;&#x27;roles/settings/files/settings-updater.py&#x27; &#x27;{{ playbook_dir }}&#x27; &#x27;defaults/{{ file }}.default&#x27; &#x27;{{ file }}&#x27;&quot;</span><span class="diff-line del">-   become: true</span><span class="diff-line del">-   become_user: &quot;{{ sandbox_yml.stat.pw_name }}&quot;</span><span class="diff-line del">-   register: settings_updater</span><span class="diff-line del">-   ignore_errors: true</span><span class="diff-line del">-   changed_when: false</span><span class="diff-line del">-   failed_when: settings_updater.rc == 1</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Updater | Build &#x27;files_updated_successfully&#x27; list</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     files_updated_successfully: &quot;{{ files_updated_successfully + [file] }}&quot;</span><span class="diff-line del">-   when: settings_updater.rc == 2</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Updater | Build &#x27;files_updated_unsuccessfully&#x27; list</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     files_updated_unsuccessfully: &quot;{{ files_updated_unsuccessfully + [file] }}&quot;</span><span class="diff-line del">-   when: settings_updater.rc == 1</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Updater | Set &#x27;exit_is_necessary&#x27; variable</span><span class="diff-line del">-   ansible.builtin.set_fact:</span><span class="diff-line del">-     exit_is_necessary: true</span><span class="diff-line del">-   when: (settings_updater.rc == 2)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-35">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/solr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: solr | Default Variables                    #</span><span class="diff-line del">- # Author(s):        JigSawFr                                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # URL:              https://github.com/apache/solr                       #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- solr_name: solr</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Settings</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # solr_docker_env_password: &quot;solr147&quot;</span><span class="diff-line del">- solr_docker_env_port: &quot;8983&quot;</span><span class="diff-line del">- solr_docker_env_core_name: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- solr_paths_folder: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">- solr_paths_location: &quot;{{ server_appdata_path }}/{{ solr_paths_folder }}&quot;</span><span class="diff-line del">- solr_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ solr_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- solr_docker_container: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- solr_docker_image_pull: true</span><span class="diff-line del">- solr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- solr_docker_image: &quot;solr:{{ solr_docker_image_tag }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- solr_docker_ports_defaults: []</span><span class="diff-line del">- solr_docker_ports_custom: []</span><span class="diff-line del">- solr_docker_ports: &quot;{{ solr_docker_ports_defaults</span><span class="diff-line del">-                        + solr_docker_ports_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- solr_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   SOLR_HOST: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">-   # SOLR_UID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-   # SOLR_GID: &quot;{{ gid }}&quot;</span><span class="diff-line del">- solr_docker_envs_custom: {}</span><span class="diff-line del">- solr_docker_envs: &quot;{{ solr_docker_envs_default</span><span class="diff-line del">-                       | combine(solr_docker_envs_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- solr_docker_commands_default:</span><span class="diff-line del">-   - &quot;solr-precreate {{ solr_docker_env_core_name }}&quot;</span><span class="diff-line del">- solr_docker_commands_custom: []</span><span class="diff-line del">- solr_docker_commands: &quot;{{ solr_docker_commands_default</span><span class="diff-line del">-                           + solr_docker_commands_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- solr_docker_volumes_default: []</span><span class="diff-line del">- #  - &quot;{{ solr_paths_location }}:/var/solr/data&quot;</span><span class="diff-line del">- solr_docker_volumes_custom: []</span><span class="diff-line del">- solr_docker_volumes: &quot;{{ solr_docker_volumes_default</span><span class="diff-line del">-                          + solr_docker_volumes_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- solr_docker_devices_default: []</span><span class="diff-line del">- solr_docker_devices_custom: []</span><span class="diff-line del">- solr_docker_devices: &quot;{{ solr_docker_devices_default</span><span class="diff-line del">-                          + solr_docker_devices_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- solr_docker_hosts_default: {}</span><span class="diff-line del">- solr_docker_hosts_custom: {}</span><span class="diff-line del">- solr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(solr_docker_hosts_default)</span><span class="diff-line del">-                        | combine(solr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- solr_docker_labels_default: {}</span><span class="diff-line del">- solr_docker_labels_custom: {}</span><span class="diff-line del">- solr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(solr_docker_labels_default)</span><span class="diff-line del">-                         | combine(solr_docker_labels_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- solr_docker_hostname: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- solr_docker_networks_alias: &quot;{{ solr_name }}&quot;</span><span class="diff-line del">- solr_docker_networks_default: []</span><span class="diff-line del">- solr_docker_networks_custom: []</span><span class="diff-line del">- solr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + solr_docker_networks_default</span><span class="diff-line del">-                           + solr_docker_networks_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- solr_docker_capabilities_default: []</span><span class="diff-line del">- solr_docker_capabilities_custom: []</span><span class="diff-line del">- solr_docker_capabilities: &quot;{{ solr_docker_capabilities_default</span><span class="diff-line del">-                               + solr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- solr_docker_security_opts_default: []</span><span class="diff-line del">- solr_docker_security_opts_custom: []</span><span class="diff-line del">- solr_docker_security_opts: &quot;{{ solr_docker_security_opts_default</span><span class="diff-line del">-                                + solr_docker_security_opts_custom }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- solr_docker_restart_policy: always</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- solr_docker_state: started</span><span class="diff-line del">- </span><span class="diff-line del">- # User</span><span class="diff-line del">- # solr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-36">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/solr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Gotenberg                                   #</span><span class="diff-line del">- # Author(s):        JigSawFr                                             #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-37">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/teamspeak/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Teamspeak | Default Variables                  #</span><span class="diff-line del">- # Author(s):     salty                                                   #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                     #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_name: &quot;teamspeak&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_paths_folder: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">- teamspeak_paths_location: &quot;{{ server_appdata_path }}/{{ teamspeak_paths_folder }}&quot;</span><span class="diff-line del">- teamspeak_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ teamspeak_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_web_subdomain: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">- teamspeak_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_web_subdomain&#x27;, default=teamspeak_web_subdomain) }}&quot;</span><span class="diff-line del">- teamspeak_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_web_domain&#x27;, default=teamspeak_web_domain) }}&quot;</span><span class="diff-line del">- teamspeak_dns_proxy: false</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Ports</span><span class="diff-line del">- ################################</span><span class="diff-line del">- teamspeak_docker_ports_9987: &quot;{{ port_lookup_voice.meta.port</span><span class="diff-line del">-                               if (port_lookup_voice.meta.port is defined) and (port_lookup_voice.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                               else &#x27;9987&#x27; }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_docker_ports_10011: &quot;{{ port_lookup_webquery.meta.port</span><span class="diff-line del">-                                if (port_lookup_webquery.meta.port is defined) and (port_lookup_webquery.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                                else &#x27;10011&#x27; }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- teamspeak_docker_ports_30033: &quot;{{ port_lookup_file.meta.port</span><span class="diff-line del">-                                if (port_lookup_file.meta.port is defined) and (port_lookup_file.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                                else &#x27;30033&#x27; }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- teamspeak_docker_container: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- teamspeak_docker_image_pull: true</span><span class="diff-line del">- teamspeak_docker_image_repo: &quot;teamspeak&quot;</span><span class="diff-line del">- teamspeak_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- teamspeak_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_image_repo&#x27;, default=teamspeak_docker_image_repo)</span><span class="diff-line del">-                             + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_image_tag&#x27;, default=teamspeak_docker_image_tag) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Ports</span><span class="diff-line del">- teamspeak_docker_ports_defaults:</span><span class="diff-line del">-   - &quot;{{ teamspeak_docker_ports_9987 }}:9987/udp&quot;</span><span class="diff-line del">-   - &quot;{{ teamspeak_docker_ports_10011 }}:10011&quot;</span><span class="diff-line del">-   - &quot;{{ teamspeak_docker_ports_30033 }}:30033&quot;</span><span class="diff-line del">- teamspeak_docker_ports_custom: []</span><span class="diff-line del">- teamspeak_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_ports_defaults&#x27;, default=teamspeak_docker_ports_defaults)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_ports_custom&#x27;, default=teamspeak_docker_ports_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- teamspeak_docker_envs_default:</span><span class="diff-line del">-   TS3SERVER_DB_PLUGIN: &quot;ts3db_mariadb&quot;</span><span class="diff-line del">-   TS3SERVER_DB_SQLCREATEPATH: &quot;create_mariadb&quot;</span><span class="diff-line del">-   TS3SERVER_DB_HOST: &quot;mariadb&quot;</span><span class="diff-line del">-   TS3SERVER_DB_USER: &quot;root&quot;</span><span class="diff-line del">-   TS3SERVER_DB_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line del">-   TS3SERVER_DB_NAME: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">-   TS3SERVER_DB_WAITUNTILREADY: &quot;30&quot;</span><span class="diff-line del">-   TS3SERVER_LICENSE: &quot;accept&quot;</span><span class="diff-line del">- teamspeak_docker_envs_custom: {}</span><span class="diff-line del">- teamspeak_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_envs_default&#x27;, default=teamspeak_docker_envs_default)</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_envs_custom&#x27;, default=teamspeak_docker_envs_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- teamspeak_docker_commands_default: []</span><span class="diff-line del">- teamspeak_docker_commands_custom: []</span><span class="diff-line del">- teamspeak_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_commands_default&#x27;, default=teamspeak_docker_commands_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_commands_custom&#x27;, default=teamspeak_docker_commands_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- teamspeak_docker_volumes_default:</span><span class="diff-line del">-   - &quot;{{ teamspeak_paths_location }}:/var/ts3server&quot;</span><span class="diff-line del">- teamspeak_docker_volumes_custom: []</span><span class="diff-line del">- teamspeak_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_volumes_default&#x27;, default=teamspeak_docker_volumes_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_volumes_custom&#x27;, default=teamspeak_docker_volumes_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- teamspeak_docker_devices_default: []</span><span class="diff-line del">- teamspeak_docker_devices_custom: []</span><span class="diff-line del">- teamspeak_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_devices_default&#x27;, default=teamspeak_docker_devices_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_devices_custom&#x27;, default=teamspeak_docker_devices_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- teamspeak_docker_hosts_default: {}</span><span class="diff-line del">- teamspeak_docker_hosts_custom: {}</span><span class="diff-line del">- teamspeak_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_hosts_default&#x27;, default=teamspeak_docker_hosts_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_hosts_custom&#x27;, default=teamspeak_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- teamspeak_docker_labels_default: {}</span><span class="diff-line del">- teamspeak_docker_labels_custom: {}</span><span class="diff-line del">- teamspeak_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_labels_default&#x27;, default=teamspeak_docker_labels_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_labels_custom&#x27;, default=teamspeak_docker_labels_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- teamspeak_docker_hostname: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- teamspeak_docker_networks_alias: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">- teamspeak_docker_networks_default: []</span><span class="diff-line del">- teamspeak_docker_networks_custom: []</span><span class="diff-line del">- teamspeak_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_networks_default&#x27;, default=teamspeak_docker_networks_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_networks_custom&#x27;, default=teamspeak_docker_networks_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- teamspeak_docker_capabilities_default: []</span><span class="diff-line del">- teamspeak_docker_capabilities_custom: []</span><span class="diff-line del">- teamspeak_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_capabilities_default&#x27;, default=teamspeak_docker_capabilities_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_capabilities_custom&#x27;, default=teamspeak_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- teamspeak_docker_security_opts_default: []</span><span class="diff-line del">- teamspeak_docker_security_opts_custom: []</span><span class="diff-line del">- teamspeak_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_security_opts_default&#x27;, default=teamspeak_docker_security_opts_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, teamspeak_name + &#x27;_docker_security_opts_custom&#x27;, default=teamspeak_docker_security_opts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- teamspeak_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- teamspeak_docker_state: started</span><span class="diff-line del">- </span><span class="diff-line del">- # Dependencies</span><span class="diff-line del">- teamspeak_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">- teamspeak_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">- teamspeak_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-38">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/teamspeak/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Teamspeak                                  #</span><span class="diff-line del">- # Author(s):        salty                                               #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: MariaDB Role</span><span class="diff-line del">-   ansible.builtin.include_role:</span><span class="diff-line del">-     name: mariadb</span><span class="diff-line del">- </span><span class="diff-line del">- - name: MariaDB | Create {{ teamspeak_name }} database</span><span class="diff-line del">-   community.mysql.mysql_db:</span><span class="diff-line del">-     name: &quot;{{ teamspeak_name }}&quot;</span><span class="diff-line del">-     login_host: &quot;mariadb&quot;</span><span class="diff-line del">-     login_user: &quot;root&quot;</span><span class="diff-line del">-     login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line del">-     state: present</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Get next available port within the range of &#x27;9987-9997&#x27; # noqa fqcn[action]</span><span class="diff-line del">-   find_open_port:</span><span class="diff-line del">-     low_bound: 9987</span><span class="diff-line del">-     high_bound: 9997</span><span class="diff-line del">-     protocol: udp</span><span class="diff-line del">-   register: port_lookup_voice</span><span class="diff-line del">-   ignore_errors: true</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Get next available port within the range of &#x27;10011-10021&#x27; # noqa fqcn[action]</span><span class="diff-line del">-   find_open_port:</span><span class="diff-line del">-     low_bound: 10011</span><span class="diff-line del">-     high_bound: 10021</span><span class="diff-line del">-     protocol: tcp</span><span class="diff-line del">-   register: port_lookup_webquery</span><span class="diff-line del">-   ignore_errors: true</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Get next available port within the range of &#x27;30033-30043&#x27; # noqa fqcn[action]</span><span class="diff-line del">-   find_open_port:</span><span class="diff-line del">-     low_bound: 30033</span><span class="diff-line del">-     high_bound: 30043</span><span class="diff-line del">-     protocol: tcp</span><span class="diff-line del">-   register: port_lookup_file</span><span class="diff-line del">-   ignore_errors: true</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Add SRV record</span><span class="diff-line del">-   community.general.cloudflare_dns:</span><span class="diff-line del">-     account_api_key: &quot;{{ cloudflare.api }}&quot;</span><span class="diff-line del">-     account_email: &quot;{{ cloudflare.email }}&quot;</span><span class="diff-line del">-     port: &quot;{{ teamspeak_docker_ports_9987 }}&quot;</span><span class="diff-line del">-     priority: 10</span><span class="diff-line del">-     proto: udp</span><span class="diff-line del">-     proxied: false</span><span class="diff-line del">-     record: &quot;{{ _dns_tasker_record }}&quot;</span><span class="diff-line del">-     service: &quot;ts3&quot;</span><span class="diff-line del">-     solo: true</span><span class="diff-line del">-     state: present</span><span class="diff-line del">-     type: SRV</span><span class="diff-line del">-     value: &quot;{{ _dns_tasker_record }}.{{ _dns_tasker_zone }}&quot;</span><span class="diff-line del">-     weight: 20</span><span class="diff-line del">-     zone: &quot;{{ _dns_tasker_zone }}&quot;</span><span class="diff-line del">-   when: cloudflare_is_enabled</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Port Information</span><span class="diff-line del">-   ansible.builtin.debug:</span><span class="diff-line del">-     msg:</span><span class="diff-line del">-       - &quot;Voice port is: {{ teamspeak_docker_ports_9987 }}&quot;</span><span class="diff-line del">-       - &quot;Web Query port is: {{ teamspeak_docker_ports_10011 }}&quot;</span><span class="diff-line del">-       - &quot;File port is: {{ teamspeak_docker_ports_30033 }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-39">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/watchtower/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- # Title:            Sandbox: Watchtower Role | Default Variables         #</span><span class="diff-line del">- # Author(s):        l3uddz, salty, owine                                 #</span><span class="diff-line del">- # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line del">- # --                                                                     #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                      #</span><span class="diff-line del">- ##########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Basics</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_instances: [&quot;watchtower&quot;]</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Settings</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_metrics_enable: false</span><span class="diff-line del">- watchtower_metrics_external: false</span><span class="diff-line del">- watchtower_poll_interval: &quot;43200&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Paths</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_paths_folder: &quot;{{ watchtower_name }}&quot;</span><span class="diff-line del">- watchtower_paths_location: &quot;{{ server_appdata_path }}/{{ watchtower_paths_folder }}&quot;</span><span class="diff-line del">- watchtower_paths_folders_list:</span><span class="diff-line del">-   - &quot;{{ watchtower_paths_location }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Web</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_web_subdomain: &quot;{{ watchtower_name }}&quot;</span><span class="diff-line del">- watchtower_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">- watchtower_web_port: &quot;8080&quot;</span><span class="diff-line del">- watchtower_host: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_web_subdomain&#x27;, default=watchtower_web_subdomain)</span><span class="diff-line del">-                              + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_web_domain&#x27;, default=watchtower_web_domain) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # DNS</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_web_subdomain&#x27;, default=watchtower_web_subdomain) }}&quot;</span><span class="diff-line del">- watchtower_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_web_domain&#x27;, default=watchtower_web_domain) }}&quot;</span><span class="diff-line del">- watchtower_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Traefik</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- watchtower_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">- watchtower_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">- watchtower_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">- watchtower_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">- watchtower_traefik_enabled: &quot;{{ true if (watchtower_metrics_enable and watchtower_metrics_externa) else false }}&quot;</span><span class="diff-line del">- watchtower_traefik_api_enabled: false</span><span class="diff-line del">- watchtower_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- ################################</span><span class="diff-line del">- # Docker</span><span class="diff-line del">- ################################</span><span class="diff-line del">- </span><span class="diff-line del">- # Container</span><span class="diff-line del">- watchtower_docker_container: &quot;{{ watchtower_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Image</span><span class="diff-line del">- watchtower_docker_image_pull: true</span><span class="diff-line del">- watchtower_docker_image_repo: &quot;containrrr/watchtower&quot;</span><span class="diff-line del">- watchtower_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">- watchtower_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_image_repo&#x27;, default=watchtower_docker_image_repo)</span><span class="diff-line del">-                              + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_image_tag&#x27;, default=watchtower_docker_image_tag) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Envs</span><span class="diff-line del">- watchtower_docker_envs_default:</span><span class="diff-line del">-   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-   WATCHTOWER_CLEANUP: &quot;true&quot;</span><span class="diff-line del">-   WATCHTOWER_POLL_INTERVAL: &quot;{{ watchtower_poll_interval }}&quot;</span><span class="diff-line del">-   WATCHTOWER_HTTP_API_METRICS: &quot;{{ &#x27;true&#x27; if watchtower_metrics_enable else omit }}&quot;</span><span class="diff-line del">- watchtower_docker_envs_custom: {}</span><span class="diff-line del">- watchtower_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_envs_default&#x27;, default=watchtower_docker_envs_default)</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_envs_custom&#x27;, default=watchtower_docker_envs_custom)) }}&quot;</span><span class="diff-line del">- watchtower_docker_env_file: &quot;{{ watchtower_paths_location + &#x27;/watchtower.env&#x27; if watchtower_env.stat.exists else omit }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Commands</span><span class="diff-line del">- watchtower_docker_commands_default: []</span><span class="diff-line del">- watchtower_docker_commands_custom: []</span><span class="diff-line del">- watchtower_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_commands_default&#x27;, default=watchtower_docker_commands_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_commands_custom&#x27;, default=watchtower_docker_commands_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- </span><span class="diff-line del">- # Volumes</span><span class="diff-line del">- watchtower_docker_volumes_default:</span><span class="diff-line del">-   - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="diff-line del">- watchtower_docker_volumes_custom: []</span><span class="diff-line del">- watchtower_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_volumes_default&#x27;, default=watchtower_docker_volumes_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_volumes_custom&#x27;, default=watchtower_docker_volumes_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Devices</span><span class="diff-line del">- watchtower_docker_devices_default: []</span><span class="diff-line del">- watchtower_docker_devices_custom: []</span><span class="diff-line del">- watchtower_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_devices_default&#x27;, default=watchtower_docker_devices_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_devices_custom&#x27;, default=watchtower_docker_devices_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hosts</span><span class="diff-line del">- watchtower_docker_hosts_default: {}</span><span class="diff-line del">- watchtower_docker_hosts_custom: {}</span><span class="diff-line del">- watchtower_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_hosts_default&#x27;, default=watchtower_docker_hosts_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_hosts_custom&#x27;, default=watchtower_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Labels</span><span class="diff-line del">- watchtower_docker_labels_default: {}</span><span class="diff-line del">- watchtower_docker_labels_custom: {}</span><span class="diff-line del">- watchtower_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_labels_default&#x27;, default=watchtower_docker_labels_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_labels_custom&#x27;, default=watchtower_docker_labels_custom)) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Hostname</span><span class="diff-line del">- watchtower_docker_hostname: &quot;{{ watchtower_name }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Network Mode</span><span class="diff-line del">- watchtower_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">- watchtower_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_network_mode_default&#x27;, default=watchtower_docker_network_mode_default) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Networks</span><span class="diff-line del">- watchtower_docker_networks_alias: &quot;{{ watchtower_name }}&quot;</span><span class="diff-line del">- watchtower_docker_networks_default: []</span><span class="diff-line del">- watchtower_docker_networks_custom: []</span><span class="diff-line del">- watchtower_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_networks_default&#x27;, default=watchtower_docker_networks_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_networks_custom&#x27;, default=watchtower_docker_networks_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Capabilities</span><span class="diff-line del">- watchtower_docker_capabilities_default: []</span><span class="diff-line del">- watchtower_docker_capabilities_custom: []</span><span class="diff-line del">- watchtower_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_capabilities_default&#x27;, default=watchtower_docker_capabilities_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_capabilities_custom&#x27;, default=watchtower_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Security Opts</span><span class="diff-line del">- watchtower_docker_security_opts_default: []</span><span class="diff-line del">- watchtower_docker_security_opts_custom: []</span><span class="diff-line del">- watchtower_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_security_opts_default&#x27;, default=watchtower_docker_security_opts_default)</span><span class="diff-line del">-                                      + lookup(&#x27;vars&#x27;, watchtower_name + &#x27;_docker_security_opts_custom&#x27;, default=watchtower_docker_security_opts_custom) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- # Restart Policy</span><span class="diff-line del">- watchtower_docker_restart_policy: unless-stopped</span><span class="diff-line del">- </span><span class="diff-line del">- # State</span><span class="diff-line del">- watchtower_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-40">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/watchtower/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Watchower Role                                #</span><span class="diff-line del">- # Author(s):     l3uddz, salty, owine                                   #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: &quot;Execute Watchtower roles&quot;</span><span class="diff-line del">-   ansible.builtin.include_tasks: main2.yml</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     watchtower_name: &quot;{{ instance }}&quot;</span><span class="diff-line del">-   with_items: &quot;{{ watchtower_instances }}&quot;</span><span class="diff-line del">-   loop_control:</span><span class="diff-line del">-     loop_var: instance</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-41">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>roles/watchtower/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- # Title:         Sandbox: Watchower Role                                #</span><span class="diff-line del">- # Author(s):     l3uddz, salty, owine                                   #</span><span class="diff-line del">- # URL:           https://github.com/saltyorg/Sandbox                    #</span><span class="diff-line del">- # --                                                                    #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- #                   GNU General Public License v3.0                     #</span><span class="diff-line del">- #########################################################################</span><span class="diff-line del">- ---</span><span class="diff-line del">- - name: Add DNS record</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-   vars:</span><span class="diff-line del">-     dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-     dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-     dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Remove existing Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create directories</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line del">- </span><span class="diff-line del">- - name: &quot;Check if watchtower.env file exists&quot;</span><span class="diff-line del">-   ansible.builtin.stat:</span><span class="diff-line del">-     path: &quot;{{ watchtower_paths_location }}/watchtower.env&quot;</span><span class="diff-line del">-   register: watchtower_env</span><span class="diff-line del">- </span><span class="diff-line del">- - name: Create Docker container</span><span class="diff-line del">-   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-42">
                <div class="file-header">
                    <span class="badge removed">removed</span>
                    <h3>scripts/salty-linter.py</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line del">- import os</span><span class="diff-line del">- import sys</span><span class="diff-line del">- </span><span class="diff-line del">- def lint_ansible_defaults(content, file_path):</span><span class="diff-line del">-     errors = []</span><span class="diff-line del">-     lines = content.split(&#x27;\n&#x27;)</span><span class="diff-line del">-     </span><span class="diff-line del">-     multi_line_jinja_start = None</span><span class="diff-line del">-     within_multi_line_jinja = False</span><span class="diff-line del">- </span><span class="diff-line del">-     for line_no, line in enumerate(lines, start=1):</span><span class="diff-line del">-         stripped_line = line.strip()</span><span class="diff-line del">- </span><span class="diff-line del">-         if stripped_line == &#x27;---&#x27;:</span><span class="diff-line del">-             continue</span><span class="diff-line del">- </span><span class="diff-line del">-         if &#x27;{{&#x27; in stripped_line and not within_multi_line_jinja:</span><span class="diff-line del">-             multi_line_jinja_start = line.find(&#x27;{{&#x27;)</span><span class="diff-line del">-             within_multi_line_jinja = &#x27;}}&#x27; not in stripped_line</span><span class="diff-line del">- </span><span class="diff-line del">-         elif within_multi_line_jinja:</span><span class="diff-line del">-             if &#x27;if&#x27; in stripped_line or &#x27;else&#x27; in stripped_line:</span><span class="diff-line del">-                 if line.find(&#x27;if&#x27;) &lt; multi_line_jinja_start and line.find(&#x27;else&#x27;) &lt; multi_line_jinja_start:</span><span class="diff-line del">-                     message = f&quot;&#x27;if/else&#x27; within Jinja expression should align with the start.&quot;</span><span class="diff-line del">-                     errors.append((line_no, message))</span><span class="diff-line del">- </span><span class="diff-line del">-             if &#x27;}}&#x27; in stripped_line:</span><span class="diff-line del">-                 within_multi_line_jinja = False</span><span class="diff-line del">- </span><span class="diff-line del">-         if &#x27;}}&#x27; in stripped_line and within_multi_line_jinja:</span><span class="diff-line del">-             within_multi_line_jinja = False</span><span class="diff-line del">- </span><span class="diff-line del">-     for error in errors:</span><span class="diff-line del">-         line_no, message = error</span><span class="diff-line del">-         print(f&quot;::warning file={file_path},line={line_no},endLine={line_no},title=Salty Lint Error::{message}&quot;)</span><span class="diff-line del">- </span><span class="diff-line del">-     return len(errors) &gt; 0</span><span class="diff-line del">- </span><span class="diff-line del">- def crawl_and_lint_ansible_roles(roles_dir):</span><span class="diff-line del">-     errors_found = False</span><span class="diff-line del">- </span><span class="diff-line del">-     if not os.path.exists(roles_dir):</span><span class="diff-line del">-         print(&quot;Roles directory does not exist.&quot;)</span><span class="diff-line del">-         return</span><span class="diff-line del">- </span><span class="diff-line del">-     for role_name in os.listdir(roles_dir):</span><span class="diff-line del">-         defaults_main_path = os.path.join(roles_dir, role_name, &quot;defaults&quot;, &quot;main.yml&quot;)</span><span class="diff-line del">-         if os.path.isfile(defaults_main_path):</span><span class="diff-line del">-             with open(defaults_main_path, &#x27;r&#x27;) as file:</span><span class="diff-line del">-                 content = file.read()</span><span class="diff-line del">-                 if lint_ansible_defaults(content, defaults_main_path):</span><span class="diff-line del">-                     errors_found = True</span><span class="diff-line del">- </span><span class="diff-line del">-     sys.exit(1 if errors_found else 0)</span><span class="diff-line del">- </span><span class="diff-line del">- if len(sys.argv) &lt; 2:</span><span class="diff-line del">-     print(&quot;Usage: python script.py /path/to/your/ansible/roles&quot;)</span><span class="diff-line del">-     sys.exit(1)</span><span class="diff-line del">- </span><span class="diff-line del">- roles_directory_path = sys.argv[1]</span><span class="diff-line del">- crawl_and_lint_ansible_roles(roles_directory_path)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-43">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.ansible-lint</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -5,27 +5,24 @@</span><span class="diff-line context">   - bin/</span><span class="diff-line context">   - defaults/</span><span class="diff-line context"> </span><span class="diff-line del">-offline: False</span><span class="diff-line add">+offline: false</span><span class="diff-line context"> </span><span class="diff-line context"> mock_roles:</span><span class="diff-line context">   - pre_tasks</span><span class="diff-line context">   - user_check</span><span class="diff-line context"> </span><span class="diff-line context"> skip_list:</span><span class="diff-line del">-  - braces</span><span class="diff-line del">-  - git-latest</span><span class="diff-line del">-  - no-changed-when</span><span class="diff-line del">-  - ignore-errors</span><span class="diff-line del">-  - risky-shell-pipe</span><span class="diff-line del">-  - package-latest</span><span class="diff-line del">-  - no-handler</span><span class="diff-line context">   - command-instead-of-module</span><span class="diff-line context">   - command-instead-of-shell</span><span class="diff-line del">-  - deprecated-command-syntax</span><span class="diff-line del">-  - yaml[line-length]</span><span class="diff-line del">-  - yaml[truthy]</span><span class="diff-line del">-  - schema[tasks]</span><span class="diff-line add">+  - ignore-errors</span><span class="diff-line add">+  - latest[git]</span><span class="diff-line context">   - name[casing]</span><span class="diff-line context">   - name[template]</span><span class="diff-line add">+  - no-changed-when</span><span class="diff-line add">+  - no-handler</span><span class="diff-line add">+  - package-latest</span><span class="diff-line add">+  - risky-shell-pipe</span><span class="diff-line add">+  - schema[playbook]</span><span class="diff-line add">+  - schema[tasks]</span><span class="diff-line context">   - var-naming[no-role-prefix]</span><span class="diff-line del">-  - schema[playbook]</span><span class="diff-line add">+  - yaml[line-length]</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-44">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.github/PULL_REQUEST_TEMPLATE.md</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,18 +1,33 @@</span><span class="diff-line context"> # Description</span><span class="diff-line context"> </span><span class="diff-line del">-For new roles please include a brief description of what this app does, or what the purpose of this role is. Include a link to the docker container used, the projects home page and a link to the documentation if it exists.</span><span class="diff-line add">+For new roles please include:</span><span class="diff-line context"> </span><span class="diff-line del">-It would be greatly appreciated if you create a sandbox documentation page yourself and do a PR into the [docs repo](https://github.com/saltyorg/docs).  You, as the person creating the role, have presumably used the thing and are presumably familiar with any setup steps required.  Anyone else here would need to research that.</span><span class="diff-line add">+- [ ] Official full name of the app:</span><span class="diff-line add">+- [ ] Summary of what the app is:</span><span class="diff-line add">+</span><span class="diff-line add">+    &gt; a/an/the ...</span><span class="diff-line add">+</span><span class="diff-line add">+- [ ] Link to Docker Compose sample:</span><span class="diff-line add">+- [ ] Link to homepage:</span><span class="diff-line add">+- [ ] Link to releases page:</span><span class="diff-line add">+- [ ] Link to documentation:</span><span class="diff-line add">+- [ ] Link to primary community space (Discord server, GitHub Discussions, forum...):</span><span class="diff-line add">+- [ ] This role does not require Saltbox-specific configuration instructions (the upstream documentation is sufficient)</span><span class="diff-line add">+- [x] I have decided to ignore these checkboxes and don&#x27;t want this merged after all.</span><span class="diff-line add">+</span><span class="diff-line add">+It would be greatly appreciated if you create a sandbox documentation page yourself and do a PR into the [docs repo](https://github.com/saltyorg/docs). You, as the person creating the role, have presumably used the thing and are presumably familiar with any setup steps required. Anyone else here would need to research that.</span><span class="diff-line add">+</span><span class="diff-line add">+- [ ] I will create documentation after the role is merged.</span><span class="diff-line context"> </span><span class="diff-line context"> For existing roles, please include a summary of the change and which issue is fixed if any. Please also include relevant motivation and context. List any dependencies that are required for this change.</span><span class="diff-line context"> </span><span class="diff-line context"> # How Has This Been Tested?</span><span class="diff-line context"> </span><span class="diff-line del">-Please describe the tests that you ran to verify your changes. Please also note any relevant details for your test configuration.  You can use the checkboxes below or delete them as you wish.</span><span class="diff-line add">+Please describe the tests that you ran to verify your changes. Please also note any relevant details for your test configuration. You can use the checkboxes below or delete them as you wish.</span><span class="diff-line context"> </span><span class="diff-line context"> - [ ] This is not a test I performed</span><span class="diff-line context"> - [ ] I did not read the paragraph above this before checking this box</span><span class="diff-line context"> - [ ] I have now checked three boxes without reading any of the text</span><span class="diff-line del">-- [ ] I have decided to leave these meaningless checkboxes in my pull request as a demonstration that I did not read to the end.</span><span class="diff-line add">+- [x] I have decided to leave these meaningless checkboxes in my pull request as a demonstration that I did not read to the end.</span><span class="diff-line context"> </span><span class="diff-line context"> Please do not leave those four checkboxes in your pull request without editing their contents.</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-45">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.github/renovate.json</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -13,7 +13,7 @@</span><span class="diff-line context">     },</span><span class="diff-line context">     &quot;baseBranches&quot;: [</span><span class="diff-line context">         &quot;$default&quot;,</span><span class="diff-line del">-        &quot;role-refactor&quot;</span><span class="diff-line add">+        &quot;role-factor&quot;</span><span class="diff-line context">     ], </span><span class="diff-line context">     &quot;labels&quot;: [</span><span class="diff-line context">         &quot;dependencies&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-46">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.github/workflows/retry.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,7 +12,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> jobs:</span><span class="diff-line context">   rerun:</span><span class="diff-line del">-    runs-on: ubuntu-latest</span><span class="diff-line add">+    runs-on: ubuntu-24.04</span><span class="diff-line context">     if: ${{ github.event.workflow_run.conclusion == &#x27;failure&#x27; }}</span><span class="diff-line context">     steps:</span><span class="diff-line context">       - name: Check attempt count</span><span class="diff-line hunk">@@ -30,8 +30,30 @@</span><span class="diff-line context">             echo &quot;attempt_allowed=false&quot; &gt;&gt; $GITHUB_OUTPUT</span><span class="diff-line context">           fi</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Check for lint failures</span><span class="diff-line add">+        id: check_lint</span><span class="diff-line add">+        if: steps.check_attempts.outputs.attempt_allowed == &#x27;true&#x27;</span><span class="diff-line add">+        env:</span><span class="diff-line add">+          GH_TOKEN: ${{ github.token }}</span><span class="diff-line add">+          GH_REPO: ${{ github.repository }}</span><span class="diff-line add">+        run: |</span><span class="diff-line add">+          failed_jobs=$(gh run view ${{ github.event.workflow_run.id }} --json jobs -q &#x27;.jobs[] | select(.conclusion == &quot;failure&quot;) | .name&#x27;)</span><span class="diff-line add">+</span><span class="diff-line add">+          if echo &quot;$failed_jobs&quot; | grep -qE &#x27;^(ansible-lint|defaults-lint)$&#x27;; then</span><span class="diff-line add">+            echo &quot;Lint job failed - skipping retry&quot;</span><span class="diff-line add">+            echo &quot;skip_retry=true&quot; &gt;&gt; $GITHUB_OUTPUT</span><span class="diff-line add">+          else</span><span class="diff-line add">+            echo &quot;No lint failures detected&quot;</span><span class="diff-line add">+            echo &quot;skip_retry=false&quot; &gt;&gt; $GITHUB_OUTPUT</span><span class="diff-line add">+          fi</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Sleep for 60 seconds</span><span class="diff-line add">+        if: steps.check_attempts.outputs.attempt_allowed == &#x27;true&#x27; &amp;&amp; steps.check_lint.outputs.skip_retry != &#x27;true&#x27;</span><span class="diff-line add">+        run: sleep 60s</span><span class="diff-line add">+        shell: bash</span><span class="diff-line add">+</span><span class="diff-line context">       - name: rerun ${{ github.event.workflow_run.id }}</span><span class="diff-line del">-        if: steps.check_attempts.outputs.attempt_allowed == &#x27;true&#x27;</span><span class="diff-line add">+        if: steps.check_attempts.outputs.attempt_allowed == &#x27;true&#x27; &amp;&amp; steps.check_lint.outputs.skip_retry != &#x27;true&#x27;</span><span class="diff-line context">         env:</span><span class="diff-line context">           GH_REPO: ${{ github.repository }}</span><span class="diff-line context">           GH_TOKEN: ${{ github.token }}</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-47">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.github/workflows/sandbox-os.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,6 +17,7 @@</span><span class="diff-line context">         with:</span><span class="diff-line context">           repository: saltyorg/Saltbox</span><span class="diff-line context">           path: saltbox</span><span class="diff-line add">+          ref: role-refactor  # Remove branch once we move to master</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Create Directories</span><span class="diff-line context">         run: sudo mkdir -p /srv/git</span><span class="diff-line hunk">@@ -29,7 +30,7 @@</span><span class="diff-line context"> </span><span class="diff-line context">       - uses: actions/setup-python@v6</span><span class="diff-line context">         with:</span><span class="diff-line del">-          python-version: &#x27;3.13&#x27;</span><span class="diff-line add">+          python-version: &#x27;3.14&#x27;</span><span class="diff-line context">           cache: &#x27;pip&#x27;</span><span class="diff-line context">           cache-dependency-path: &#x27;saltbox/requirements/requirements-saltbox.txt&#x27;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -40,8 +41,18 @@</span><span class="diff-line context">         working-directory: ${{ github.workspace }}/sandbox</span><span class="diff-line context">         run: ansible-lint</span><span class="diff-line context"> </span><span class="diff-line del">-      - name: Run salty linter</span><span class="diff-line del">-        run: python3 ./sandbox/scripts/salty-linter.py ./roles</span><span class="diff-line add">+  defaults-lint:</span><span class="diff-line add">+    if: github.event_name == &#x27;pull_request&#x27; || !(github.event_name == &#x27;push&#x27; &amp;&amp; github.actor == &#x27;renovate[bot]&#x27;)</span><span class="diff-line add">+    runs-on: ubuntu-24.04</span><span class="diff-line add">+    steps:</span><span class="diff-line add">+      - uses: actions/checkout@v6</span><span class="diff-line add">+</span><span class="diff-line add">+      - uses: actions/setup-python@v6</span><span class="diff-line add">+        with:</span><span class="diff-line add">+          python-version: &#x27;3.14&#x27;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run Defaults Linter</span><span class="diff-line add">+        run: python3 scripts/saltbox-defaults-linter.py roles/</span><span class="diff-line context"> </span><span class="diff-line context">   check-entries:</span><span class="diff-line context">     if: github.event_name == &#x27;pull_request&#x27; || !(github.event_name == &#x27;push&#x27; &amp;&amp; github.actor == &#x27;renovate[bot]&#x27;)</span><span class="diff-line hunk">@@ -62,12 +73,12 @@</span><span class="diff-line context">       - id: set-matrix</span><span class="diff-line context">         run: |</span><span class="diff-line context">           ROLES=$(awk &#x27;/# Apps Start/{flag=1;next}/# Apps End/{flag=0}flag&#x27; sandbox.yml | awk &#x27;!/#/&#x27; | awk -F&#x27;[][]&#x27; &#x27;{print $2}&#x27; | tr &#x27;\n&#x27; &#x27;,&#x27; | sed &#x27;s/,*$//&#x27; | awk -F&#x27;,&#x27; &#x27;{ for( i=1; i&lt;=NF; i++ ) print $i }&#x27; | awk &#x27;{ gsub(/ /,&quot;&quot;); print }&#x27;| sort -u | awk -vORS=, &#x27;{ print $1 }&#x27; | sed &#x27;s/,$/\n/&#x27;)</span><span class="diff-line del">-          echo &quot;matrix={\&quot;roles\&quot;:[$ROLES],\&quot;os\&quot;:[\&quot;20.04\&quot;,\&quot;22.04\&quot;,\&quot;24.04\&quot;]}&quot; &gt;&gt; $GITHUB_OUTPUT</span><span class="diff-line add">+          echo &quot;matrix={\&quot;roles\&quot;:[$ROLES],\&quot;os\&quot;:[\&quot;22.04\&quot;,\&quot;24.04\&quot;]}&quot; &gt;&gt; $GITHUB_OUTPUT</span><span class="diff-line context"> </span><span class="diff-line context">   install:</span><span class="diff-line context">     name: &#x27;${{ matrix.roles }}-${{ matrix.os }}&#x27;</span><span class="diff-line context">     runs-on: ubuntu-${{ matrix.os }}</span><span class="diff-line del">-    needs: [ansible-lint, find-roles]</span><span class="diff-line add">+    needs: [ansible-lint, defaults-lint, find-roles]</span><span class="diff-line context">     strategy:</span><span class="diff-line context">       matrix: ${{ fromJson(needs.find-roles.outputs.matrix) }}</span><span class="diff-line context">       fail-fast: false</span><span class="diff-line hunk">@@ -91,36 +102,47 @@</span><span class="diff-line context">           /usr/local/bin/sb version</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Install Dependencies</span><span class="diff-line del">-        run: /usr/local/bin/sb setup -v &amp;&amp; /srv/ansible/venv/bin/ansible --version</span><span class="diff-line add">+        run: /usr/local/bin/sb setup -v -b role-refactor &amp;&amp; /srv/ansible/venv/bin/ansible --version # Remove branch flag once we move to master</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Chown /srv/git</span><span class="diff-line context">         run: sudo chown -R runner:runner /srv/git</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Print pip dependencies</span><span class="diff-line add">+        run: cat /srv/git/saltbox/requirements/requirements-saltbox.txt</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Edit accounts.yml</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sed -i &#x27;s/seed/runner/g&#x27; accounts.yml</span><span class="diff-line del">-</span><span class="diff-line del">-      - name: Create, chown and chmod /tmp/ansible</span><span class="diff-line del">-        run: sudo mkdir /tmp/ansible &amp;&amp; sudo chown -R runner:runner /tmp/ansible &amp;&amp; chmod 0777 /tmp/ansible</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Syntax Check</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sudo ansible-playbook saltbox.yml --syntax-check</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Create basic vars file</span><span class="diff-line add">+        run: |</span><span class="diff-line add">+          echo &quot;continuous_integration: true&quot; &gt; /tmp/vars.yml</span><span class="diff-line add">+          echo &quot;server_appdata_path: /opt2&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line add">+          sudo mkdir -p /opt2</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Create CI vars file</span><span class="diff-line context">         if: github.repository == &#x27;saltyorg/Sandbox&#x27; &amp;&amp; github.event.repository.fork == false</span><span class="diff-line context">         run: |</span><span class="diff-line del">-          echo &quot;continuous_integration: true&quot; &gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;dockerhub:&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;  token: ${{ secrets.DOCKERHUB_TOKEN }}&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;  user: ${{ secrets.DOCKERHUB_USERNAME }}&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Install Saltbox Preinstall</span><span class="diff-line add">+        run: cd /srv/git/saltbox &amp;&amp; sudo /srv/ansible/venv/bin/ansible-playbook saltbox.yml --tags &quot;preinstall&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run saltbox.fact</span><span class="diff-line add">+        run: /srv/git/saltbox/ansible_facts.d/saltbox.fact</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Install Saltbox Core</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sudo ansible-playbook saltbox.yml --tags &quot;core&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-      - name: Copy default configuration</span><span class="diff-line del">-        run: cp -n defaults/settings.yml.default settings.yml</span><span class="diff-line del">-</span><span class="diff-line context">       - name: Install ${{ matrix.roles }}</span><span class="diff-line context">         run: sudo ansible-playbook sandbox.yml --tags &quot;${{ matrix.roles }}&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run Tree on app data folder</span><span class="diff-line add">+        run: sudo tree -aug /opt2</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Inspect all Docker containers</span><span class="diff-line context">         run: |</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-48">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>.github/workflows/sandbox.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -30,6 +30,7 @@</span><span class="diff-line context">         with:</span><span class="diff-line context">           repository: saltyorg/Saltbox</span><span class="diff-line context">           path: saltbox</span><span class="diff-line add">+          ref: role-refactor  # Remove branch once we move to master</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Create Directories</span><span class="diff-line context">         run: sudo mkdir -p /srv/git</span><span class="diff-line hunk">@@ -42,7 +43,7 @@</span><span class="diff-line context"> </span><span class="diff-line context">       - uses: actions/setup-python@v6</span><span class="diff-line context">         with:</span><span class="diff-line del">-          python-version: &#x27;3.13&#x27;</span><span class="diff-line add">+          python-version: &#x27;3.14&#x27;</span><span class="diff-line context">           cache: &#x27;pip&#x27;</span><span class="diff-line context">           cache-dependency-path: &#x27;saltbox/requirements/requirements-saltbox.txt&#x27;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -53,8 +54,18 @@</span><span class="diff-line context">         working-directory: ${{ github.workspace }}/sandbox</span><span class="diff-line context">         run: ansible-lint</span><span class="diff-line context"> </span><span class="diff-line del">-      - name: Run salty linter</span><span class="diff-line del">-        run: python3 ./sandbox/scripts/salty-linter.py ./roles</span><span class="diff-line add">+  defaults-lint:</span><span class="diff-line add">+    if: github.event_name == &#x27;pull_request&#x27; || !(github.event_name == &#x27;push&#x27; &amp;&amp; github.actor == &#x27;renovate[bot]&#x27;)</span><span class="diff-line add">+    runs-on: ubuntu-24.04</span><span class="diff-line add">+    steps:</span><span class="diff-line add">+      - uses: actions/checkout@v6</span><span class="diff-line add">+</span><span class="diff-line add">+      - uses: actions/setup-python@v6</span><span class="diff-line add">+        with:</span><span class="diff-line add">+          python-version: &#x27;3.14&#x27;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run Defaults Linter</span><span class="diff-line add">+        run: python3 scripts/saltbox-defaults-linter.py roles/</span><span class="diff-line context"> </span><span class="diff-line context">   check-entries:</span><span class="diff-line context">     if: github.event_name == &#x27;pull_request&#x27; || !(github.event_name == &#x27;push&#x27; &amp;&amp; github.actor == &#x27;renovate[bot]&#x27;)</span><span class="diff-line hunk">@@ -77,7 +88,7 @@</span><span class="diff-line context"> </span><span class="diff-line context">   install:</span><span class="diff-line context">     name: &#x27;${{ matrix.roles }}&#x27;</span><span class="diff-line del">-    needs: [ansible-lint, check-entries, find-roles]</span><span class="diff-line add">+    needs: [ansible-lint, defaults-lint, check-entries, find-roles]</span><span class="diff-line context">     runs-on: ubuntu-24.04</span><span class="diff-line context">     strategy:</span><span class="diff-line context">       matrix: ${{ fromJson(needs.find-roles.outputs.matrix) }}</span><span class="diff-line hunk">@@ -102,36 +113,47 @@</span><span class="diff-line context">           /usr/local/bin/sb version</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Install Dependencies</span><span class="diff-line del">-        run: /usr/local/bin/sb setup -v &amp;&amp; /srv/ansible/venv/bin/ansible --version</span><span class="diff-line add">+        run: /usr/local/bin/sb setup -v -b role-refactor &amp;&amp; /srv/ansible/venv/bin/ansible --version # Remove branch flag once we move to master</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Chown /srv/git</span><span class="diff-line context">         run: sudo chown -R runner:runner /srv/git</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Print pip dependencies</span><span class="diff-line add">+        run: cat /srv/git/saltbox/requirements/requirements-saltbox.txt</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Edit accounts.yml</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sed -i &#x27;s/seed/runner/g&#x27; accounts.yml</span><span class="diff-line del">-</span><span class="diff-line del">-      - name: Create, chown and chmod /tmp/ansible</span><span class="diff-line del">-        run: sudo mkdir /tmp/ansible &amp;&amp; sudo chown -R runner:runner /tmp/ansible &amp;&amp; chmod 0777 /tmp/ansible</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Syntax Check</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sudo ansible-playbook saltbox.yml --syntax-check</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Create basic vars file</span><span class="diff-line add">+        run: |</span><span class="diff-line add">+          echo &quot;continuous_integration: true&quot; &gt; /tmp/vars.yml</span><span class="diff-line add">+          echo &quot;server_appdata_path: /opt2&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line add">+          sudo mkdir -p /opt2</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Create CI vars file</span><span class="diff-line context">         if: github.repository == &#x27;saltyorg/Sandbox&#x27; &amp;&amp; github.event.repository.fork == false</span><span class="diff-line context">         run: |</span><span class="diff-line del">-          echo &quot;continuous_integration: true&quot; &gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;dockerhub:&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;  token: ${{ secrets.DOCKERHUB_TOKEN }}&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context">           echo &quot;  user: ${{ secrets.DOCKERHUB_USERNAME }}&quot; &gt;&gt; /tmp/vars.yml</span><span class="diff-line context"> </span><span class="diff-line add">+      - name: Install Saltbox Preinstall</span><span class="diff-line add">+        run: cd /srv/git/saltbox &amp;&amp; sudo /srv/ansible/venv/bin/ansible-playbook saltbox.yml --tags &quot;preinstall&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run saltbox.fact</span><span class="diff-line add">+        run: /srv/git/saltbox/ansible_facts.d/saltbox.fact</span><span class="diff-line add">+</span><span class="diff-line context">       - name: Install Saltbox Core</span><span class="diff-line context">         run: cd /srv/git/saltbox &amp;&amp; sudo ansible-playbook saltbox.yml --tags &quot;core&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-      - name: Copy default configuration</span><span class="diff-line del">-        run: cp -n defaults/settings.yml.default settings.yml</span><span class="diff-line del">-</span><span class="diff-line context">       - name: Install ${{ matrix.roles }}</span><span class="diff-line context">         run: sudo ansible-playbook sandbox.yml --tags &quot;${{ matrix.roles }}&quot; --skip-tags &quot;settings&quot; --extra-vars &quot;@/tmp/vars.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+      - name: Run Tree on app data folder</span><span class="diff-line add">+        run: sudo tree -aug /opt2</span><span class="diff-line context"> </span><span class="diff-line context">       - name: Inspect all Docker containers</span><span class="diff-line context">         run: |</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-49">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>ansible.cfg</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -2,6 +2,7 @@</span><span class="diff-line context"> inventory = /srv/git/saltbox/inventories/local</span><span class="diff-line context"> roles_path = roles:/srv/git/saltbox/roles:/srv/git/saltbox/resources/roles</span><span class="diff-line context"> filter_plugins = /srv/git/saltbox/filter_plugins</span><span class="diff-line add">+lookup_plugins = /srv/git/saltbox/lookup_plugins</span><span class="diff-line context"> library = /srv/git/saltbox/library</span><span class="diff-line context"> log_path = ./sandbox.log</span><span class="diff-line context"> callbacks_enabled = profile_tasks</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-50">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/a_train/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,97 +14,66 @@</span><span class="diff-line context"> a_train_name: a-train</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+a_train_role_remotes: [&quot;&quot;]</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-a_train_paths_folder: &quot;{{ a_train_name }}&quot;</span><span class="diff-line del">-a_train_paths_location: &quot;{{ server_appdata_path }}/{{ a_train_paths_folder }}&quot;</span><span class="diff-line del">-a_train_paths_config_location: &quot;{{ a_train_paths_location }}/a-train.toml&quot;</span><span class="diff-line del">-a_train_paths_sa_location: &quot;{{ a_train_paths_location }}/account.json&quot;</span><span class="diff-line del">-a_train_paths_rclone_config_location: &quot;/home/{{ user.name }}/.config/rclone/rclone.conf&quot;</span><span class="diff-line del">-a_train_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ a_train_paths_location }}&quot;</span><span class="diff-line add">+a_train_role_paths_folder: &quot;{{ a_train_name }}&quot;</span><span class="diff-line add">+a_train_role_paths_location: &quot;{{ server_appdata_path }}/{{ a_train_role_paths_folder }}&quot;</span><span class="diff-line add">+a_train_role_paths_config_location: &quot;{{ a_train_role_paths_location }}/a-train.toml&quot;</span><span class="diff-line add">+a_train_role_paths_sa_location: &quot;{{ a_train_role_paths_location }}/account.json&quot;</span><span class="diff-line add">+a_train_role_paths_rclone_config_location: &quot;/home/{{ user.name }}/.config/rclone/rclone.conf&quot;</span><span class="diff-line add">+a_train_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ a_train_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-a_train_docker_container: &quot;{{ a_train_name }}&quot;</span><span class="diff-line add">+a_train_role_docker_container: &quot;{{ a_train_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-a_train_docker_image_pull: true</span><span class="diff-line del">-a_train_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-a_train_docker_image: &quot;ghcr.io/m-rots/a-train:{{ a_train_docker_image_tag }}&quot;</span><span class="diff-line add">+a_train_role_docker_image_pull: true</span><span class="diff-line add">+a_train_role_docker_image_repo: &quot;ghcr.io/m-rots/a-train&quot;</span><span class="diff-line add">+a_train_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+a_train_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;a_train&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-a_train_docker_envs_default:</span><span class="diff-line add">+a_train_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-a_train_docker_envs_custom: {}</span><span class="diff-line del">-a_train_docker_envs: &quot;{{ a_train_docker_envs_default</span><span class="diff-line del">-                         | combine(a_train_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-a_train_docker_commands_default: []</span><span class="diff-line del">-a_train_docker_commands_custom: []</span><span class="diff-line del">-a_train_docker_commands: &quot;{{ a_train_docker_commands_default</span><span class="diff-line del">-                             + a_train_docker_commands_custom }}&quot;</span><span class="diff-line add">+a_train_role_docker_envs_custom: {}</span><span class="diff-line add">+a_train_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;a_train&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;a_train&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-a_train_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ a_train_paths_location }}:/data&quot;</span><span class="diff-line del">-a_train_docker_volumes_custom: []</span><span class="diff-line del">-a_train_docker_volumes: &quot;{{ a_train_docker_volumes_default</span><span class="diff-line del">-                            + a_train_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-a_train_docker_devices_default: []</span><span class="diff-line del">-a_train_docker_devices_custom: []</span><span class="diff-line del">-a_train_docker_devices: &quot;{{ a_train_docker_devices_default</span><span class="diff-line del">-                            + a_train_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-a_train_docker_hosts_default: {}</span><span class="diff-line del">-a_train_docker_hosts_custom: {}</span><span class="diff-line del">-a_train_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(a_train_docker_hosts_default)</span><span class="diff-line del">-                          | combine(a_train_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-a_train_docker_labels_default: {}</span><span class="diff-line del">-a_train_docker_labels_custom: {}</span><span class="diff-line del">-a_train_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(a_train_docker_labels_default)</span><span class="diff-line del">-                           | combine(a_train_docker_labels_custom) }}&quot;</span><span class="diff-line add">+a_train_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;a_train&#x27;) }}:/data&quot;</span><span class="diff-line add">+a_train_role_docker_volumes_custom: []</span><span class="diff-line add">+a_train_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;a_train&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-a_train_docker_hostname: &quot;{{ a_train_name }}&quot;</span><span class="diff-line add">+a_train_role_docker_hostname: &quot;{{ a_train_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-a_train_docker_networks_alias: &quot;{{ a_train_name }}&quot;</span><span class="diff-line del">-a_train_docker_networks_default: []</span><span class="diff-line del">-a_train_docker_networks_custom: []</span><span class="diff-line del">-a_train_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + a_train_docker_networks_default</span><span class="diff-line del">-                             + a_train_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-a_train_docker_capabilities_default: []</span><span class="diff-line del">-a_train_docker_capabilities_custom: []</span><span class="diff-line del">-a_train_docker_capabilities: &quot;{{ a_train_docker_capabilities_default</span><span class="diff-line del">-                                 + a_train_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-a_train_docker_security_opts_default: []</span><span class="diff-line del">-a_train_docker_security_opts_custom: []</span><span class="diff-line del">-a_train_docker_security_opts: &quot;{{ a_train_docker_security_opts_default</span><span class="diff-line del">-                                  + a_train_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+a_train_role_docker_networks_alias: &quot;{{ a_train_name }}&quot;</span><span class="diff-line add">+a_train_role_docker_networks_default: []</span><span class="diff-line add">+a_train_role_docker_networks_custom: []</span><span class="diff-line add">+a_train_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;a_train&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-a_train_docker_restart_policy: unless-stopped</span><span class="diff-line add">+a_train_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-a_train_docker_state: started</span><span class="diff-line add">+a_train_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-a_train_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+a_train_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-51">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/a_train/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,7 +16,7 @@</span><span class="diff-line context"> - name: Set Default Autoscan instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     autoscan_name: &quot;{{ autoscan_instances[0] }}&quot;</span><span class="diff-line del">-  when: not autoscan_name is defined</span><span class="diff-line add">+  when: (not autoscan_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import Settings task</span><span class="diff-line context">   ansible.builtin.import_tasks: &quot;subtasks/settings.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-52">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/a_train/tasks/subtasks/config.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,15 +7,17 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-</span><span class="diff-line context"> - name: Get remote types from rclone config</span><span class="diff-line del">-  ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;type&#x27;, section=item, file=a_train_paths_rclone_config_location) }}&quot;</span><span class="diff-line del">-  with_items: &quot;{{ a_train.remotes }}&quot;</span><span class="diff-line add">+  ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;type&#x27;, section=item, file=lookup(&#x27;role_var&#x27;, &#x27;_paths_rclone_config_location&#x27;, role=&#x27;a_train&#x27;)) }}&quot;</span><span class="diff-line add">+  with_items: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_remotes&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context">   register: remote_type</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Set variable for remote types</span><span class="diff-line add">+- name: Set variable for remote types along with empty default variables</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     remote_type_var: &quot;{{ remote_type.results | map(attribute=&#x27;stdout&#x27;) }}&quot;</span><span class="diff-line add">+    drive_id: []</span><span class="diff-line add">+    union_id: []</span><span class="diff-line add">+    td_id_var: []</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Fail if remote type is crypt</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line hunk">@@ -30,7 +32,7 @@</span><span class="diff-line context">         drive_remotes: &quot;{{ remote_type.results | selectattr(&#x27;stdout&#x27;, &#x27;==&#x27;, &#x27;drive&#x27;) | map(attribute=&#x27;item&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Get the ID of the teamdrives</span><span class="diff-line del">-      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;team_drive&#x27;, section=item, file=a_train_paths_rclone_config_location) }}&quot;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;team_drive&#x27;, section=item, file=lookup(&#x27;role_var&#x27;, &#x27;_paths_rclone_config_location&#x27;, role=&#x27;a_train&#x27;)) }}&quot;</span><span class="diff-line context">       register: drive_id_var</span><span class="diff-line context">       loop: &quot;{{ drive_remotes }}&quot;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -46,27 +48,27 @@</span><span class="diff-line context">         union_remotes: &quot;{{ remote_type.results | selectattr(&#x27;stdout&#x27;, &#x27;==&#x27;, &#x27;union&#x27;) | map(attribute=&#x27;item&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Get the upstreams</span><span class="diff-line del">-      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;upstreams&#x27;, section=item, file=a_train_paths_rclone_config_location) }}&quot;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;upstreams&#x27;, section=item, file=lookup(&#x27;role_var&#x27;, &#x27;_paths_rclone_config_location&#x27;, role=&#x27;a_train&#x27;)) }}&quot;</span><span class="diff-line context">       with_items: &quot;{{ union_remotes }}&quot;</span><span class="diff-line context">       register: union_upstreams_var</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Set variable for upstreams</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line del">-        union_upstreams: &quot;{{ union_upstreams_var.results[0].stdout.split(separator) | replace(&#x27;:&#x27;, &#x27;&#x27;) }}&quot;</span><span class="diff-line add">+        union_upstreams: &quot;{{ union_upstreams_var.results[0].stdout.split(separator) | map(&#x27;replace&#x27;, &#x27;:&#x27;, &#x27;&#x27;) }}&quot;</span><span class="diff-line context">       vars:</span><span class="diff-line context">         separator: &#x27;: &#x27;</span><span class="diff-line context">       when: &#x27;&quot;: &quot; in union_upstreams_var.results[0].stdout&#x27;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Set variable for upstreams when root folder is specified</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line del">-        union_upstreams: &quot;{{ union_upstreams_var.results[0].stdout.split(separator) | replace(&#x27;:&#x27;, &#x27;&#x27;) | replace(secret_slash, &#x27;&#x27;) }}&quot;</span><span class="diff-line add">+        union_upstreams: &quot;{{ union_upstreams_var.results[0].stdout.split(separator) | map(&#x27;replace&#x27;, &#x27;:&#x27;, &#x27;&#x27;) | map(&#x27;replace&#x27;, secret_slash, &#x27;&#x27;) }}&quot;</span><span class="diff-line context">       vars:</span><span class="diff-line context">         separator: &#x27;/ &#x27;</span><span class="diff-line context">         secret_slash: &#x27;/&#x27;</span><span class="diff-line context">       when: &#x27;&quot;/&quot; in union_upstreams_var.results[0].stdout&#x27;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Get the ID of the teamdrives</span><span class="diff-line del">-      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;team_drive&#x27;, section=item, file=a_train_paths_rclone_config_location) }}&quot;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;echo {{ lookup(&#x27;ini&#x27;, &#x27;team_drive&#x27;, section=item, file=lookup(&#x27;role_var&#x27;, &#x27;_paths_rclone_config_location&#x27;, role=&#x27;a_train&#x27;)) }}&quot;</span><span class="diff-line context">       register: union_id_var</span><span class="diff-line context">       loop: &quot;{{ union_upstreams }}&quot;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -76,10 +78,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Merge teamdrive ID of both union and drive remotes</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    td_id_var: &quot;{{ td_id_var | default([]) + item }}&quot;</span><span class="diff-line del">-  loop:</span><span class="diff-line del">-    - &quot;{{ drive_id | default([]) }}&quot;</span><span class="diff-line del">-    - &quot;{{ union_id | default([]) }}&quot;</span><span class="diff-line add">+    td_id_var: &quot;{{ drive_id + union_id }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set variable for merged ID of teamdrives</span><span class="diff-line context">   ansible.builtin.set_fact:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-53">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/a_train/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,37 +7,36 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-</span><span class="diff-line del">-- name: Settings | Check if `{{ a_train_paths_sa_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_sa_location&#x27;, role=&#x27;a_train&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ a_train_paths_sa_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_sa_location&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context">   register: a_train_sa</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | Check if `{{ a_train_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;a_train&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ a_train_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context">   register: a_train_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Fail when &#x27;account.json&#x27; is `not present`&quot;</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You need to setup your service account file. Create a service account, add it to the team drives you wish to monitor and copy the json file as &#x27;account.json&#x27; to `{{ a_train_paths_location }}`&quot;</span><span class="diff-line del">-  when: (not a_train_sa.stat.exists) and (not continuous_integration)</span><span class="diff-line add">+    msg: &quot;You need to setup your service account file. Create a service account, add it to the team drives you wish to monitor and copy the json file as &#x27;account.json&#x27; to `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;a_train&#x27;) }}`&quot;</span><span class="diff-line add">+  when: (not continuous_integration) and (not a_train_sa.stat.exists)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Fail when remotes are `not added`&quot;</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You need to add remotes you wish to monitor in the settings file.&quot;</span><span class="diff-line del">-  when: (&quot;&quot; in a_train.remotes) and (not a_train_config.stat.exists) and (not continuous_integration)</span><span class="diff-line add">+    msg: &quot;You need to add remotes you wish to monitor in a_train_role_remotes using the inventory.&quot;</span><span class="diff-line add">+  when: (not continuous_integration) and (not a_train_config.stat.exists) and (&quot;&quot; in lookup(&#x27;role_var&#x27;, &#x27;_remotes&#x27;, role=&#x27;a_train&#x27;))</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ a_train_paths_config_location | basename }}` tasks</span><span class="diff-line del">-  when: (not a_train_config.stat.exists) and (not continuous_integration)</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;a_train&#x27;) | basename }}` tasks</span><span class="diff-line add">+  when: (not continuous_integration) and (not a_train_config.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Import Settings task</span><span class="diff-line context">       ansible.builtin.import_tasks: &quot;config.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Settings | Import default `{{ a_train_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;a_train&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: a-train.toml.j2</span><span class="diff-line del">-        dest: &quot;{{ a_train_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;a_train&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-54">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/a_train/templates/a-train.toml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,7 +1,7 @@</span><span class="diff-line context"> # a-train.toml</span><span class="diff-line context"> [autoscan]</span><span class="diff-line context"> # Replace the URL with your Autoscan URL.</span><span class="diff-line del">-url = &quot;{{ &#x27;http://&#x27; + autoscan_docker_networks_alias + &#x27;:&#x27; + autoscan_web_port }}&quot;</span><span class="diff-line add">+url = &quot;{{ &#x27;http://&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_alias&#x27;, role=&#x27;autoscan&#x27;) + &#x27;:&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;autoscan&#x27;) }}&quot;</span><span class="diff-line context"> username = &quot;{{ user.name }}&quot;</span><span class="diff-line context"> password = &quot;{{ user.pass }}&quot;</span><span class="diff-line context"> </span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-55">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/actualbudget/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,134 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-actualbudget_paths_folder: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line del">-actualbudget_paths_location: &quot;{{ server_appdata_path }}/{{ actualbudget_paths_folder }}&quot;</span><span class="diff-line del">-actualbudget_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ actualbudget_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ actualbudget_paths_location }}/server-files&quot;</span><span class="diff-line del">-  - &quot;{{ actualbudget_paths_location }}/user-files&quot;</span><span class="diff-line add">+actualbudget_role_paths_folder: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line add">+actualbudget_role_paths_location: &quot;{{ server_appdata_path }}/{{ actualbudget_role_paths_folder }}&quot;</span><span class="diff-line add">+actualbudget_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ actualbudget_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ actualbudget_role_paths_location }}/server-files&quot;</span><span class="diff-line add">+  - &quot;{{ actualbudget_role_paths_location }}/user-files&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-actualbudget_web_subdomain: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line del">-actualbudget_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-actualbudget_web_port: &quot;5006&quot;</span><span class="diff-line del">-actualbudget_web_url: &quot;{{ &#x27;https://&#x27; + (actualbudget_web_subdomain + &#x27;.&#x27; + actualbudget_web_domain</span><span class="diff-line del">-                       if (actualbudget_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else actualbudget_web_domain) }}&quot;</span><span class="diff-line add">+actualbudget_role_web_subdomain: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line add">+actualbudget_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+actualbudget_role_web_port: &quot;5006&quot;</span><span class="diff-line add">+actualbudget_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;actualbudget&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;actualbudget&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;actualbudget&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;actualbudget&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-actualbudget_dns_record: &quot;{{ actualbudget_web_subdomain }}&quot;</span><span class="diff-line del">-actualbudget_dns_zone: &quot;{{ actualbudget_web_domain }}&quot;</span><span class="diff-line del">-actualbudget_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+actualbudget_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;actualbudget&#x27;) }}&quot;</span><span class="diff-line add">+actualbudget_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;actualbudget&#x27;) }}&quot;</span><span class="diff-line add">+actualbudget_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-actualbudget_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-actualbudget_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-actualbudget_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-actualbudget_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-actualbudget_traefik_enabled: true</span><span class="diff-line del">-actualbudget_traefik_api_enabled: false</span><span class="diff-line del">-actualbudget_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+actualbudget_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+actualbudget_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+actualbudget_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+actualbudget_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+actualbudget_role_traefik_enabled: true</span><span class="diff-line add">+actualbudget_role_traefik_api_enabled: false</span><span class="diff-line add">+actualbudget_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-actualbudget_docker_container: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_container: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-actualbudget_docker_image_pull: true</span><span class="diff-line del">-actualbudget_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-actualbudget_docker_image: &quot;actualbudget/actual-server:{{ actualbudget_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-actualbudget_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ actualbudget_web_port }}&quot;</span><span class="diff-line del">-actualbudget_docker_ports_custom: []</span><span class="diff-line del">-actualbudget_docker_ports: &quot;{{ actualbudget_docker_ports_defaults</span><span class="diff-line del">-                               + actualbudget_docker_ports_custom</span><span class="diff-line del">-                            if (not reverse_proxy_is_enabled)</span><span class="diff-line del">-                            else actualbudget_docker_ports_custom }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_image_pull: true</span><span class="diff-line add">+actualbudget_role_docker_image_repo: &quot;actualbudget/actual-server&quot;</span><span class="diff-line add">+actualbudget_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+actualbudget_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;actualbudget&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;actualbudget&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-actualbudget_docker_envs_default:</span><span class="diff-line add">+actualbudget_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-actualbudget_docker_envs_custom: {}</span><span class="diff-line del">-actualbudget_docker_envs: &quot;{{ actualbudget_docker_envs_default</span><span class="diff-line del">-                              | combine(actualbudget_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-actualbudget_docker_commands_default: []</span><span class="diff-line del">-actualbudget_docker_commands_custom: []</span><span class="diff-line del">-actualbudget_docker_commands: &quot;{{ actualbudget_docker_commands_default</span><span class="diff-line del">-                                  + actualbudget_docker_commands_custom }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_envs_custom: {}</span><span class="diff-line add">+actualbudget_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;actualbudget&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;actualbudget&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-actualbudget_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ actualbudget_paths_location }}:/data&quot;</span><span class="diff-line add">+actualbudget_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;actualbudget&#x27;) }}:/data&quot;</span><span class="diff-line context">   - &quot;/etc/localtime:/etc/localtime:ro&quot;</span><span class="diff-line del">-actualbudget_docker_volumes_custom: []</span><span class="diff-line del">-actualbudget_docker_volumes: &quot;{{ actualbudget_docker_volumes_default</span><span class="diff-line del">-                                 + actualbudget_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-actualbudget_docker_devices_default: []</span><span class="diff-line del">-actualbudget_docker_devices_custom: []</span><span class="diff-line del">-actualbudget_docker_devices: &quot;{{ actualbudget_docker_devices_default</span><span class="diff-line del">-                                 + actualbudget_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-actualbudget_docker_hosts_default: []</span><span class="diff-line del">-actualbudget_docker_hosts_custom: []</span><span class="diff-line del">-actualbudget_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(actualbudget_docker_hosts_default)</span><span class="diff-line del">-                               | combine(actualbudget_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-actualbudget_docker_labels_default: {}</span><span class="diff-line del">-actualbudget_docker_labels_custom: {}</span><span class="diff-line del">-actualbudget_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(actualbudget_docker_labels_default)</span><span class="diff-line del">-                                | combine(actualbudget_docker_labels_custom) }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_volumes_custom: []</span><span class="diff-line add">+actualbudget_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;actualbudget&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;actualbudget&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-actualbudget_docker_hostname: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_hostname: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-actualbudget_docker_networks_alias: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line del">-actualbudget_docker_networks_default: []</span><span class="diff-line del">-actualbudget_docker_networks_custom: []</span><span class="diff-line del">-actualbudget_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + actualbudget_docker_networks_default</span><span class="diff-line del">-                                  + actualbudget_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-actualbudget_docker_capabilities_default: []</span><span class="diff-line del">-actualbudget_docker_capabilities_custom: []</span><span class="diff-line del">-actualbudget_docker_capabilities: &quot;{{ actualbudget_docker_capabilities_default</span><span class="diff-line del">-                                      + actualbudget_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-actualbudget_docker_security_opts_default: []</span><span class="diff-line del">-actualbudget_docker_security_opts_custom: []</span><span class="diff-line del">-actualbudget_docker_security_opts: &quot;{{ actualbudget_docker_security_opts_default</span><span class="diff-line del">-                                       + actualbudget_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_networks_alias: &quot;{{ actualbudget_name }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_networks_default: []</span><span class="diff-line add">+actualbudget_role_docker_networks_custom: []</span><span class="diff-line add">+actualbudget_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;actualbudget&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;actualbudget&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-actualbudget_docker_restart_policy: unless-stopped</span><span class="diff-line add">+actualbudget_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-actualbudget_docker_state: started</span><span class="diff-line add">+actualbudget_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-actualbudget_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+actualbudget_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-56">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/actualbudget/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-57">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/adguardhome/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,132 +17,90 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adguardhome_paths_folder: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line del">-adguardhome_paths_location: &quot;{{ server_appdata_path }}/{{ adguardhome_paths_folder }}&quot;</span><span class="diff-line del">-adguardhome_config_path: &quot;{{ adguardhome_paths_location }}/conf/AdGuardHome.yaml&quot;</span><span class="diff-line del">-adguardhome_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/conf&quot;</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/work&quot;</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/work/data&quot;</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/work/data/filters&quot;</span><span class="diff-line add">+adguardhome_role_paths_folder: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line add">+adguardhome_role_paths_location: &quot;{{ server_appdata_path }}/{{ adguardhome_role_paths_folder }}&quot;</span><span class="diff-line add">+adguardhome_role_paths_config_path: &quot;{{ adguardhome_role_paths_location }}/conf/AdGuardHome.yaml&quot;</span><span class="diff-line add">+adguardhome_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ adguardhome_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ adguardhome_role_paths_location }}/conf&quot;</span><span class="diff-line add">+  - &quot;{{ adguardhome_role_paths_location }}/work&quot;</span><span class="diff-line add">+  - &quot;{{ adguardhome_role_paths_location }}/work/data&quot;</span><span class="diff-line add">+  - &quot;{{ adguardhome_role_paths_location }}/work/data/filters&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adguardhome_web_subdomain: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line del">-adguardhome_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-adguardhome_web_port: &quot;3000&quot;</span><span class="diff-line del">-adguardhome_web_url: &quot;{{ &#x27;https://&#x27; + (adguardhome_web_subdomain + &#x27;.&#x27; + adguardhome_web_domain</span><span class="diff-line del">-                      if (adguardhome_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else adguardhome_web_domain) }}&quot;</span><span class="diff-line add">+adguardhome_role_web_subdomain: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line add">+adguardhome_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+adguardhome_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+adguardhome_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adguardhome&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adguardhome&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adguardhome&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adguardhome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adguardhome_dns_record: &quot;{{ adguardhome_web_subdomain }}&quot;</span><span class="diff-line del">-adguardhome_dns_zone: &quot;{{ adguardhome_web_domain }}&quot;</span><span class="diff-line del">-adguardhome_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+adguardhome_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line add">+adguardhome_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line add">+adguardhome_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adguardhome_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-adguardhome_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-adguardhome_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-adguardhome_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-adguardhome_traefik_enabled: true</span><span class="diff-line del">-adguardhome_traefik_api_enabled: true</span><span class="diff-line del">-adguardhome_traefik_api_endpoint: &quot;PathPrefix(`/dns-query`)&quot;</span><span class="diff-line add">+adguardhome_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+adguardhome_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+adguardhome_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+adguardhome_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+adguardhome_role_traefik_enabled: true</span><span class="diff-line add">+adguardhome_role_traefik_api_enabled: true</span><span class="diff-line add">+adguardhome_role_traefik_api_endpoint: &quot;PathPrefix(`/dns-query`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-adguardhome_docker_container: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_container: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-adguardhome_docker_image_pull: true</span><span class="diff-line del">-adguardhome_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-adguardhome_docker_image: &quot;adguard/adguardhome:{{ adguardhome_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-adguardhome_docker_ports_defaults: []</span><span class="diff-line del">-adguardhome_docker_ports_custom: []</span><span class="diff-line del">-adguardhome_docker_ports: &quot;{{ adguardhome_docker_ports_defaults</span><span class="diff-line del">-                              + adguardhome_docker_ports_custom }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_image_pull: true</span><span class="diff-line add">+adguardhome_role_docker_image_repo: &quot;adguard/adguardhome&quot;</span><span class="diff-line add">+adguardhome_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+adguardhome_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;adguardhome&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-adguardhome_docker_envs_default:</span><span class="diff-line add">+adguardhome_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-adguardhome_docker_envs_custom: {}</span><span class="diff-line del">-adguardhome_docker_envs: &quot;{{ adguardhome_docker_envs_default</span><span class="diff-line del">-                             | combine(adguardhome_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-adguardhome_docker_commands_default: []</span><span class="diff-line del">-adguardhome_docker_commands_custom: []</span><span class="diff-line del">-adguardhome_docker_commands: &quot;{{ adguardhome_docker_commands_default</span><span class="diff-line del">-                                 + adguardhome_docker_commands_custom }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_envs_custom: {}</span><span class="diff-line add">+adguardhome_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;adguardhome&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;adguardhome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-adguardhome_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/work:/opt/adguardhome/work&quot;</span><span class="diff-line del">-  - &quot;{{ adguardhome_paths_location }}/conf:/opt/adguardhome/conf&quot;</span><span class="diff-line del">-adguardhome_docker_volumes_custom: []</span><span class="diff-line del">-adguardhome_docker_volumes: &quot;{{ adguardhome_docker_volumes_default }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-adguardhome_docker_devices_default: []</span><span class="diff-line del">-adguardhome_docker_devices_custom: []</span><span class="diff-line del">-adguardhome_docker_devices: &quot;{{ adguardhome_docker_devices_default</span><span class="diff-line del">-                                + adguardhome_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-adguardhome_docker_hosts_default: {}</span><span class="diff-line del">-adguardhome_docker_hosts_custom: {}</span><span class="diff-line del">-adguardhome_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(adguardhome_docker_hosts_default)</span><span class="diff-line del">-                              | combine(adguardhome_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-adguardhome_docker_labels_default: {}</span><span class="diff-line del">-adguardhome_docker_labels_custom: {}</span><span class="diff-line del">-adguardhome_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(adguardhome_docker_labels_default)</span><span class="diff-line del">-                               | combine(adguardhome_docker_labels_custom) }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;adguardhome&#x27;) }}/work:/opt/adguardhome/work&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;adguardhome&#x27;) }}/conf:/opt/adguardhome/conf&quot;</span><span class="diff-line add">+adguardhome_role_docker_volumes_custom: []</span><span class="diff-line add">+adguardhome_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;adguardhome&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-adguardhome_docker_hostname: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_hostname: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-adguardhome_docker_networks_alias: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line del">-adguardhome_docker_networks_default: []</span><span class="diff-line del">-adguardhome_docker_networks_custom: []</span><span class="diff-line del">-adguardhome_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + adguardhome_docker_networks_default</span><span class="diff-line del">-                                 + adguardhome_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-adguardhome_docker_capabilities_default: []</span><span class="diff-line del">-adguardhome_docker_capabilities_custom: []</span><span class="diff-line del">-adguardhome_docker_capabilities: &quot;{{ adguardhome_docker_capabilities_default</span><span class="diff-line del">-                                     + adguardhome_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-adguardhome_docker_security_opts_default: []</span><span class="diff-line del">-adguardhome_docker_security_opts_custom: []</span><span class="diff-line del">-adguardhome_docker_security_opts: &quot;{{ adguardhome_docker_security_opts_default</span><span class="diff-line del">-                                      + adguardhome_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_networks_alias: &quot;{{ adguardhome_name }}&quot;</span><span class="diff-line add">+adguardhome_role_docker_networks_default: []</span><span class="diff-line add">+adguardhome_role_docker_networks_custom: []</span><span class="diff-line add">+adguardhome_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;adguardhome&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-adguardhome_docker_restart_policy: unless-stopped</span><span class="diff-line add">+adguardhome_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-adguardhome_docker_state: started</span><span class="diff-line add">+adguardhome_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-58">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/adguardhome/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Settings | Check if AdGuardHome.yaml exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ adguardhome_config_path }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_path&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line context">   register: adguardhome_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Settings | New AdGuardHome.yaml tasks&quot;</span><span class="diff-line hunk">@@ -31,7 +31,7 @@</span><span class="diff-line context">     - name: &quot;Settings | Import AdGuardHome.yaml.j2&quot;</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: AdGuardHome.yaml.j2</span><span class="diff-line del">-        dest: &#x27;{{ adguardhome_config_path }}&#x27;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_path&#x27;, role=&#x27;adguardhome&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-59">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/adguardhome/templates/AdGuardHome.yaml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -70,7 +70,7 @@</span><span class="diff-line context">   local_ptr_upstreams: []</span><span class="diff-line context"> tls:</span><span class="diff-line context">   enabled: true</span><span class="diff-line del">-  server_name: {{ adguardhome_web_subdomain }}.{{ adguardhome_web_domain }}</span><span class="diff-line add">+  server_name: {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adguardhome&#x27;) }}.{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adguardhome&#x27;) }}</span><span class="diff-line context">   force_https: false</span><span class="diff-line context">   port_https: 0</span><span class="diff-line context">   port_dns_over_tls: 0</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-60">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/adminer/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,113 +17,64 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adminer_web_subdomain: &quot;{{ adminer_name }}&quot;</span><span class="diff-line del">-adminer_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-adminer_web_port: &quot;8080&quot;</span><span class="diff-line del">-adminer_web_url: &quot;{{ &#x27;https://&#x27; + (adminer_web_subdomain + &#x27;.&#x27; + adminer_web_domain</span><span class="diff-line del">-                  if (adminer_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else adminer_web_domain) }}&quot;</span><span class="diff-line add">+adminer_role_web_subdomain: &quot;{{ adminer_name }}&quot;</span><span class="diff-line add">+adminer_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+adminer_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+adminer_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adminer&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adminer&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adminer&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adminer&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adminer_dns_record: &quot;{{ adminer_web_subdomain }}&quot;</span><span class="diff-line del">-adminer_dns_zone: &quot;{{ adminer_web_domain }}&quot;</span><span class="diff-line del">-adminer_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+adminer_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;adminer&#x27;) }}&quot;</span><span class="diff-line add">+adminer_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;adminer&#x27;) }}&quot;</span><span class="diff-line add">+adminer_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-adminer_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-adminer_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-adminer_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-adminer_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-adminer_traefik_enabled: true</span><span class="diff-line add">+adminer_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+adminer_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+adminer_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+adminer_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+adminer_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-adminer_docker_container: &quot;{{ adminer_name }}&quot;</span><span class="diff-line add">+adminer_role_docker_container: &quot;{{ adminer_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-adminer_docker_image_pull: true</span><span class="diff-line del">-adminer_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-adminer_docker_image: &quot;adminer:{{ adminer_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-adminer_docker_ports_defaults: []</span><span class="diff-line del">-adminer_docker_ports_custom: []</span><span class="diff-line del">-adminer_docker_ports: &quot;{{ adminer_docker_ports_defaults</span><span class="diff-line del">-                          + adminer_docker_ports_custom }}&quot;</span><span class="diff-line add">+adminer_role_docker_image_pull: true</span><span class="diff-line add">+adminer_role_docker_image_repo: &quot;adminer&quot;</span><span class="diff-line add">+adminer_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+adminer_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;adminer&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;adminer&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-adminer_docker_envs_default:</span><span class="diff-line add">+adminer_role_docker_envs_default:</span><span class="diff-line context">   ADMINER_DEFAULT_SERVER: &quot;mysql&quot;</span><span class="diff-line del">-adminer_docker_envs_custom: {}</span><span class="diff-line del">-adminer_docker_envs: &quot;{{ adminer_docker_envs_default</span><span class="diff-line del">-                         | combine(adminer_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-adminer_docker_commands_default: []</span><span class="diff-line del">-adminer_docker_commands_custom: []</span><span class="diff-line del">-adminer_docker_commands: &quot;{{ adminer_docker_commands_default</span><span class="diff-line del">-                             + adminer_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-adminer_docker_volumes_default: []</span><span class="diff-line del">-adminer_docker_volumes_custom: []</span><span class="diff-line del">-adminer_docker_volumes: &quot;{{ adminer_docker_volumes_default</span><span class="diff-line del">-                            + adminer_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-adminer_docker_devices_default: []</span><span class="diff-line del">-adminer_docker_devices_custom: []</span><span class="diff-line del">-adminer_docker_devices: &quot;{{ adminer_docker_devices_default</span><span class="diff-line del">-                            + adminer_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-adminer_docker_hosts_default: {}</span><span class="diff-line del">-adminer_docker_hosts_custom: {}</span><span class="diff-line del">-adminer_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(adminer_docker_hosts_default)</span><span class="diff-line del">-                          | combine(adminer_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-adminer_docker_labels_default: {}</span><span class="diff-line del">-adminer_docker_labels_custom: {}</span><span class="diff-line del">-adminer_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(adminer_docker_labels_default)</span><span class="diff-line del">-                           | combine(adminer_docker_labels_custom) }}&quot;</span><span class="diff-line add">+adminer_role_docker_envs_custom: {}</span><span class="diff-line add">+adminer_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;adminer&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;adminer&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-adminer_docker_hostname: &quot;{{ adminer_name }}&quot;</span><span class="diff-line add">+adminer_role_docker_hostname: &quot;{{ adminer_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-adminer_docker_networks_alias: &quot;{{ adminer_name }}&quot;</span><span class="diff-line del">-adminer_docker_networks_default: []</span><span class="diff-line del">-adminer_docker_networks_custom: []</span><span class="diff-line del">-adminer_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + adminer_docker_networks_default</span><span class="diff-line del">-                             + adminer_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-adminer_docker_capabilities_default: []</span><span class="diff-line del">-adminer_docker_capabilities_custom: []</span><span class="diff-line del">-adminer_docker_capabilities: &quot;{{ adminer_docker_capabilities_default</span><span class="diff-line del">-                                 + adminer_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-adminer_docker_security_opts_default: []</span><span class="diff-line del">-adminer_docker_security_opts_custom: []</span><span class="diff-line del">-adminer_docker_security_opts: &quot;{{ adminer_docker_security_opts_default</span><span class="diff-line del">-                                  + adminer_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+adminer_role_docker_networks_alias: &quot;{{ adminer_name }}&quot;</span><span class="diff-line add">+adminer_role_docker_networks_default: []</span><span class="diff-line add">+adminer_role_docker_networks_custom: []</span><span class="diff-line add">+adminer_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;adminer&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;adminer&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-adminer_docker_restart_policy: unless-stopped</span><span class="diff-line add">+adminer_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-adminer_docker_state: started</span><span class="diff-line add">+adminer_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-61">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/adminer/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-62">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/airdcpp/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,138 +17,101 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airdcpp_paths_folder: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line del">-airdcpp_paths_location: &quot;{{ server_appdata_path }}/{{ airdcpp_paths_folder }}&quot;</span><span class="diff-line del">-airdcpp_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ airdcpp_paths_location }}&quot;</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp/Movies</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp/TV</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp/4K</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp/4K/Movies</span><span class="diff-line del">-  - /mnt/local/downloads/airdcpp/4K/TV</span><span class="diff-line add">+airdcpp_role_paths_folder: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line add">+airdcpp_role_paths_location: &quot;{{ server_appdata_path }}/{{ airdcpp_role_paths_folder }}&quot;</span><span class="diff-line add">+airdcpp_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ airdcpp_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp/Movies&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp/TV&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp/4K&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp/4K/Movies&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/airdcpp/4K/TV&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airdcpp_web_subdomain: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line del">-airdcpp_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-airdcpp_web_port: &quot;5600&quot;</span><span class="diff-line del">-airdcpp_web_url: &quot;{{ &#x27;https://&#x27; + (airdcpp_web_subdomain + &#x27;.&#x27; + airdcpp_web_domain</span><span class="diff-line del">-                  if (airdcpp_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else airdcpp_web_domain) }}&quot;</span><span class="diff-line add">+airdcpp_role_web_subdomain: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line add">+airdcpp_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+airdcpp_role_web_port: &quot;5600&quot;</span><span class="diff-line add">+airdcpp_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airdcpp&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airdcpp&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airdcpp&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airdcpp&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airdcpp_dns_record: &quot;{{ airdcpp_web_subdomain }}&quot;</span><span class="diff-line del">-airdcpp_dns_zone: &quot;{{ airdcpp_web_domain }}&quot;</span><span class="diff-line del">-airdcpp_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+airdcpp_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line add">+airdcpp_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line add">+airdcpp_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airdcpp_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-airdcpp_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-airdcpp_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-airdcpp_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-airdcpp_traefik_enabled: true</span><span class="diff-line del">-airdcpp_traefik_api_enabled: false</span><span class="diff-line del">-airdcpp_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+airdcpp_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+airdcpp_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+airdcpp_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+airdcpp_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+airdcpp_role_traefik_enabled: true</span><span class="diff-line add">+airdcpp_role_traefik_api_enabled: false</span><span class="diff-line add">+airdcpp_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-airdcpp_docker_container: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_container: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-airdcpp_docker_image_pull: true</span><span class="diff-line del">-airdcpp_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-airdcpp_docker_image: &quot;gangefors/airdcpp-webclient:{{ airdcpp_docker_image_tag }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_image_pull: true</span><span class="diff-line add">+airdcpp_role_docker_image_repo: &quot;gangefors/airdcpp-webclient&quot;</span><span class="diff-line add">+airdcpp_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+airdcpp_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;airdcpp&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-airdcpp_docker_ports_defaults:</span><span class="diff-line add">+airdcpp_role_docker_ports_default:</span><span class="diff-line context">   - &quot;21248:21248&quot;</span><span class="diff-line context">   - &quot;21248:21248/udp&quot;</span><span class="diff-line context">   - &quot;21249:21249&quot;</span><span class="diff-line del">-airdcpp_docker_ports_custom: []</span><span class="diff-line del">-airdcpp_docker_ports: &quot;{{ airdcpp_docker_ports_defaults</span><span class="diff-line del">-                          + airdcpp_docker_ports_custom }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_ports_custom: []</span><span class="diff-line add">+airdcpp_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;airdcpp&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-airdcpp_docker_envs_default:</span><span class="diff-line add">+airdcpp_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-airdcpp_docker_envs_custom: {}</span><span class="diff-line del">-airdcpp_docker_envs: &quot;{{ airdcpp_docker_envs_default</span><span class="diff-line del">-                         | combine(airdcpp_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-airdcpp_docker_commands_default: []</span><span class="diff-line del">-airdcpp_docker_commands_custom: []</span><span class="diff-line del">-airdcpp_docker_commands: &quot;{{ airdcpp_docker_commands_default</span><span class="diff-line del">-                             + airdcpp_docker_commands_custom }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_envs_custom: {}</span><span class="diff-line add">+airdcpp_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;airdcpp&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;airdcpp&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-airdcpp_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ airdcpp_paths_location }}:/.airdcpp&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/airdcpp:/Downloads&quot;</span><span class="diff-line del">-airdcpp_docker_volumes_custom: []</span><span class="diff-line del">-airdcpp_docker_volumes: &quot;{{ airdcpp_docker_volumes_default</span><span class="diff-line del">-                            + airdcpp_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-airdcpp_docker_devices_default: []</span><span class="diff-line del">-airdcpp_docker_devices_custom: []</span><span class="diff-line del">-airdcpp_docker_devices: &quot;{{ airdcpp_docker_devices_default</span><span class="diff-line del">-                            + airdcpp_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-airdcpp_docker_hosts_default: {}</span><span class="diff-line del">-airdcpp_docker_hosts_custom: {}</span><span class="diff-line del">-airdcpp_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(airdcpp_docker_hosts_default)</span><span class="diff-line del">-                          | combine(airdcpp_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-airdcpp_docker_labels_default: {}</span><span class="diff-line del">-airdcpp_docker_labels_custom: {}</span><span class="diff-line del">-airdcpp_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(airdcpp_docker_labels_default)</span><span class="diff-line del">-                           | combine(airdcpp_docker_labels_custom) }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airdcpp&#x27;) }}:/.airdcpp&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/downloads/airdcpp:/Downloads&quot;</span><span class="diff-line add">+airdcpp_role_docker_volumes_custom: []</span><span class="diff-line add">+airdcpp_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;airdcpp&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-airdcpp_docker_hostname: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_hostname: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-airdcpp_docker_networks_alias: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line del">-airdcpp_docker_networks_default: []</span><span class="diff-line del">-airdcpp_docker_networks_custom: []</span><span class="diff-line del">-airdcpp_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + airdcpp_docker_networks_default</span><span class="diff-line del">-                             + airdcpp_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-airdcpp_docker_capabilities_default: []</span><span class="diff-line del">-airdcpp_docker_capabilities_custom: []</span><span class="diff-line del">-airdcpp_docker_capabilities: &quot;{{ airdcpp_docker_capabilities_default</span><span class="diff-line del">-                                 + airdcpp_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-airdcpp_docker_security_opts_default: []</span><span class="diff-line del">-airdcpp_docker_security_opts_custom: []</span><span class="diff-line del">-airdcpp_docker_security_opts: &quot;{{ airdcpp_docker_security_opts_default</span><span class="diff-line del">-                                  + airdcpp_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_networks_alias: &quot;{{ airdcpp_name }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_networks_default: []</span><span class="diff-line add">+airdcpp_role_docker_networks_custom: []</span><span class="diff-line add">+airdcpp_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;airdcpp&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;airdcpp&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-airdcpp_docker_restart_policy: unless-stopped</span><span class="diff-line add">+airdcpp_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-airdcpp_docker_state: started</span><span class="diff-line add">+airdcpp_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-airdcpp_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+airdcpp_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-63">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/airdcpp/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,18 +22,18 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check WebServer.xml exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/airdcpp/WebServer.xml&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airdcpp&#x27;) }}/WebServer.xml&quot;</span><span class="diff-line context">   register: webserver_xml</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check DCPlusPlus.xml exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/airdcpp/DCPlusPlus.xml&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airdcpp&#x27;) }}/DCPlusPlus.xml&quot;</span><span class="diff-line context">   register: dcplusplus_xml</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import default &#x27;WebServer.xml&#x27;</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     src: WebServer.xml</span><span class="diff-line del">-    dest: /opt/airdcpp/WebServer.xml</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airdcpp&#x27;) }}/WebServer.xml&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -43,7 +43,7 @@</span><span class="diff-line context"> - name: Import default &#x27;DCPlusPlus.xml&#x27;</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     src: DCPlusPlus.xml</span><span class="diff-line del">-    dest: /opt/airdcpp/DCPlusPlus.xml</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airdcpp&#x27;) }}/DCPlusPlus.xml&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-64">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/airsonic/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airsonic_paths_folder: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line del">-airsonic_paths_location: &quot;{{ server_appdata_path }}/{{ airsonic_paths_folder }}&quot;</span><span class="diff-line del">-airsonic_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ airsonic_paths_location }}&quot;</span><span class="diff-line add">+airsonic_role_paths_folder: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line add">+airsonic_role_paths_location: &quot;{{ server_appdata_path }}/{{ airsonic_role_paths_folder }}&quot;</span><span class="diff-line add">+airsonic_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ airsonic_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airsonic_web_subdomain: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line del">-airsonic_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-airsonic_web_port: &quot;4040&quot;</span><span class="diff-line del">-airsonic_web_url: &quot;{{ &#x27;https://&#x27; + (airsonic_web_subdomain + &#x27;.&#x27; + airsonic_web_domain</span><span class="diff-line del">-                   if (airsonic_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else airsonic_web_domain) }}&quot;</span><span class="diff-line add">+airsonic_role_web_subdomain: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line add">+airsonic_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+airsonic_role_web_port: &quot;4040&quot;</span><span class="diff-line add">+airsonic_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airsonic&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airsonic&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airsonic&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airsonic&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airsonic_dns_record: &quot;{{ airsonic_web_subdomain }}&quot;</span><span class="diff-line del">-airsonic_dns_zone: &quot;{{ airsonic_web_domain }}&quot;</span><span class="diff-line del">-airsonic_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+airsonic_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;airsonic&#x27;) }}&quot;</span><span class="diff-line add">+airsonic_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;airsonic&#x27;) }}&quot;</span><span class="diff-line add">+airsonic_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-airsonic_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-airsonic_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-airsonic_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-airsonic_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-airsonic_traefik_enabled: true</span><span class="diff-line del">-airsonic_traefik_api_enabled: false</span><span class="diff-line del">-airsonic_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+airsonic_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+airsonic_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+airsonic_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+airsonic_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+airsonic_role_traefik_enabled: true</span><span class="diff-line add">+airsonic_role_traefik_api_enabled: false</span><span class="diff-line add">+airsonic_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-airsonic_docker_container: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line add">+airsonic_role_docker_container: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-airsonic_docker_image_pull: true</span><span class="diff-line del">-airsonic_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-airsonic_docker_image: &quot;lscr.io/linuxserver/airsonic-advanced:{{ airsonic_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-airsonic_docker_ports_defaults: []</span><span class="diff-line del">-airsonic_docker_ports_custom: []</span><span class="diff-line del">-airsonic_docker_ports: &quot;{{ airsonic_docker_ports_defaults</span><span class="diff-line del">-                           + airsonic_docker_ports_custom }}&quot;</span><span class="diff-line add">+airsonic_role_docker_image_pull: true</span><span class="diff-line add">+airsonic_role_docker_image_repo: &quot;lscr.io/linuxserver/airsonic-advanced&quot;</span><span class="diff-line add">+airsonic_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+airsonic_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;airsonic&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;airsonic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-airsonic_docker_envs_default:</span><span class="diff-line add">+airsonic_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   JAVA_OPTS: &quot;-Dserver.use-forward-headers=true&quot;</span><span class="diff-line del">-airsonic_docker_envs_custom: {}</span><span class="diff-line del">-airsonic_docker_envs: &quot;{{ airsonic_docker_envs_default</span><span class="diff-line del">-                          | combine(airsonic_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-airsonic_docker_commands_default: []</span><span class="diff-line del">-airsonic_docker_commands_custom: []</span><span class="diff-line del">-airsonic_docker_commands: &quot;{{ airsonic_docker_commands_default</span><span class="diff-line del">-                              + airsonic_docker_commands_custom }}&quot;</span><span class="diff-line add">+airsonic_role_docker_envs_custom: {}</span><span class="diff-line add">+airsonic_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;airsonic&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;airsonic&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-airsonic_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ airsonic_paths_location }}:/config&quot;</span><span class="diff-line del">-airsonic_docker_volumes_custom: []</span><span class="diff-line del">-airsonic_docker_volumes: &quot;{{ airsonic_docker_volumes_default</span><span class="diff-line del">-                             + airsonic_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-airsonic_docker_devices_default: []</span><span class="diff-line del">-airsonic_docker_devices_custom: []</span><span class="diff-line del">-airsonic_docker_devices: &quot;{{ airsonic_docker_devices_default</span><span class="diff-line del">-                             + airsonic_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-airsonic_docker_hosts_default: {}</span><span class="diff-line del">-airsonic_docker_hosts_custom: {}</span><span class="diff-line del">-airsonic_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(airsonic_docker_hosts_default)</span><span class="diff-line del">-                           | combine(airsonic_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-airsonic_docker_labels_default: {}</span><span class="diff-line del">-airsonic_docker_labels_custom: {}</span><span class="diff-line del">-airsonic_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(airsonic_docker_labels_default)</span><span class="diff-line del">-                            | combine(airsonic_docker_labels_custom) }}&quot;</span><span class="diff-line add">+airsonic_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;airsonic&#x27;) }}:/config&quot;</span><span class="diff-line add">+airsonic_role_docker_volumes_custom: []</span><span class="diff-line add">+airsonic_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;airsonic&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;airsonic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-airsonic_docker_hostname: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line add">+airsonic_role_docker_hostname: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-airsonic_docker_networks_alias: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line del">-airsonic_docker_networks_default: []</span><span class="diff-line del">-airsonic_docker_networks_custom: []</span><span class="diff-line del">-airsonic_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + airsonic_docker_networks_default</span><span class="diff-line del">-                              + airsonic_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-airsonic_docker_capabilities_default: []</span><span class="diff-line del">-airsonic_docker_capabilities_custom: []</span><span class="diff-line del">-airsonic_docker_capabilities: &quot;{{ airsonic_docker_capabilities_default</span><span class="diff-line del">-                                  + airsonic_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-airsonic_docker_security_opts_default: []</span><span class="diff-line del">-airsonic_docker_security_opts_custom: []</span><span class="diff-line del">-airsonic_docker_security_opts: &quot;{{ airsonic_docker_security_opts_default</span><span class="diff-line del">-                                   + airsonic_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+airsonic_role_docker_networks_alias: &quot;{{ airsonic_name }}&quot;</span><span class="diff-line add">+airsonic_role_docker_networks_default: []</span><span class="diff-line add">+airsonic_role_docker_networks_custom: []</span><span class="diff-line add">+airsonic_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;airsonic&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;airsonic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-airsonic_docker_restart_policy: unless-stopped</span><span class="diff-line add">+airsonic_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-airsonic_docker_state: started</span><span class="diff-line add">+airsonic_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-65">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/airsonic/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-66">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/apprise/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,82 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-apprise_paths_folder: &quot;{{ apprise_name }}&quot;</span><span class="diff-line del">-apprise_paths_location: &quot;{{ server_appdata_path }}/{{ apprise_paths_folder }}&quot;</span><span class="diff-line del">-apprise_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ apprise_paths_location }}&quot;</span><span class="diff-line add">+apprise_role_paths_folder: &quot;{{ apprise_name }}&quot;</span><span class="diff-line add">+apprise_role_paths_location: &quot;{{ server_appdata_path }}/{{ apprise_role_paths_folder }}&quot;</span><span class="diff-line add">+apprise_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ apprise_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-apprise_web_subdomain: &quot;{{ apprise_name }}&quot;</span><span class="diff-line del">-apprise_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-apprise_web_port: &quot;8000&quot;</span><span class="diff-line del">-apprise_web_url: &quot;{{ &#x27;https://&#x27; + (apprise_web_subdomain + &#x27;.&#x27; + apprise_web_domain</span><span class="diff-line del">-                  if (apprise_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else apprise_web_domain) }}&quot;</span><span class="diff-line add">+apprise_role_web_subdomain: &quot;{{ apprise_name }}&quot;</span><span class="diff-line add">+apprise_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+apprise_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+apprise_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;apprise&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;apprise&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;apprise&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;apprise&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-apprise_dns_record: &quot;{{ apprise_web_subdomain }}&quot;</span><span class="diff-line del">-apprise_dns_zone: &quot;{{ apprise_web_domain }}&quot;</span><span class="diff-line del">-apprise_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+apprise_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;apprise&#x27;) }}&quot;</span><span class="diff-line add">+apprise_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;apprise&#x27;) }}&quot;</span><span class="diff-line add">+apprise_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-apprise_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-apprise_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-apprise_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-apprise_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-apprise_traefik_enabled: true</span><span class="diff-line add">+apprise_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+apprise_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+apprise_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+apprise_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+apprise_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-apprise_docker_container: &quot;{{ apprise_name }}&quot;</span><span class="diff-line add">+apprise_role_docker_container: &quot;{{ apprise_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-apprise_docker_image_pull: true</span><span class="diff-line del">-apprise_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-apprise_docker_image: &quot;lscr.io/linuxserver/apprise-api:{{ apprise_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-apprise_docker_ports_defaults: []</span><span class="diff-line del">-apprise_docker_ports_custom: []</span><span class="diff-line del">-apprise_docker_ports: &quot;{{ apprise_docker_ports_defaults</span><span class="diff-line del">-                          + apprise_docker_ports_custom }}&quot;</span><span class="diff-line add">+apprise_role_docker_image_pull: true</span><span class="diff-line add">+apprise_role_docker_image_repo: &quot;lscr.io/linuxserver/apprise-api&quot;</span><span class="diff-line add">+apprise_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+apprise_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;apprise&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;apprise&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-apprise_docker_envs_default:</span><span class="diff-line add">+apprise_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-apprise_docker_envs_custom: {}</span><span class="diff-line del">-apprise_docker_envs: &quot;{{ apprise_docker_envs_default</span><span class="diff-line del">-                         | combine(apprise_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-apprise_docker_commands_default: []</span><span class="diff-line del">-apprise_docker_commands_custom: []</span><span class="diff-line del">-apprise_docker_commands: &quot;{{ apprise_docker_commands_default</span><span class="diff-line del">-                             + apprise_docker_commands_custom }}&quot;</span><span class="diff-line add">+apprise_role_docker_envs_custom: {}</span><span class="diff-line add">+apprise_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;apprise&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;apprise&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-apprise_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ apprise_paths_location }}:/config&quot;</span><span class="diff-line del">-apprise_docker_volumes_custom: []</span><span class="diff-line del">-apprise_docker_volumes: &quot;{{ apprise_docker_volumes_default</span><span class="diff-line del">-                            + apprise_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-apprise_docker_devices_default: []</span><span class="diff-line del">-apprise_docker_devices_custom: []</span><span class="diff-line del">-apprise_docker_devices: &quot;{{ apprise_docker_devices_default</span><span class="diff-line del">-                            + apprise_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-apprise_docker_hosts_default: {}</span><span class="diff-line del">-apprise_docker_hosts_custom: {}</span><span class="diff-line del">-apprise_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(apprise_docker_hosts_default)</span><span class="diff-line del">-                          | combine(apprise_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-apprise_docker_labels_default: {}</span><span class="diff-line del">-apprise_docker_labels_custom: {}</span><span class="diff-line del">-apprise_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(apprise_docker_labels_default)</span><span class="diff-line del">-                           | combine(apprise_docker_labels_custom) }}&quot;</span><span class="diff-line add">+apprise_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;apprise&#x27;) }}:/config&quot;</span><span class="diff-line add">+apprise_role_docker_volumes_custom: []</span><span class="diff-line add">+apprise_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;apprise&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;apprise&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-apprise_docker_hostname: &quot;{{ apprise_name }}&quot;</span><span class="diff-line add">+apprise_role_docker_hostname: &quot;{{ apprise_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-apprise_docker_networks_alias: &quot;{{ apprise_name }}&quot;</span><span class="diff-line del">-apprise_docker_networks_default: []</span><span class="diff-line del">-apprise_docker_networks_custom: []</span><span class="diff-line del">-apprise_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + apprise_docker_networks_default</span><span class="diff-line del">-                             + apprise_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-apprise_docker_capabilities_default: []</span><span class="diff-line del">-apprise_docker_capabilities_custom: []</span><span class="diff-line del">-apprise_docker_capabilities: &quot;{{ apprise_docker_capabilities_default</span><span class="diff-line del">-                                 + apprise_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-apprise_docker_security_opts_default: []</span><span class="diff-line del">-apprise_docker_security_opts_custom: []</span><span class="diff-line del">-apprise_docker_security_opts: &quot;{{ apprise_docker_security_opts_default</span><span class="diff-line del">-                                  + apprise_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+apprise_role_docker_networks_alias: &quot;{{ apprise_name }}&quot;</span><span class="diff-line add">+apprise_role_docker_networks_default: []</span><span class="diff-line add">+apprise_role_docker_networks_custom: []</span><span class="diff-line add">+apprise_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;apprise&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;apprise&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-apprise_docker_restart_policy: unless-stopped</span><span class="diff-line add">+apprise_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-apprise_docker_state: started</span><span class="diff-line add">+apprise_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-67">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/apprise/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-68">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/archivebox/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,82 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-archivebox_paths_folder: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line del">-archivebox_paths_location: &quot;{{ server_appdata_path }}/{{ archivebox_paths_folder }}&quot;</span><span class="diff-line del">-archivebox_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ archivebox_paths_location }}&quot;</span><span class="diff-line add">+archivebox_role_paths_folder: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line add">+archivebox_role_paths_location: &quot;{{ server_appdata_path }}/{{ archivebox_role_paths_folder }}&quot;</span><span class="diff-line add">+archivebox_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ archivebox_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-archivebox_web_subdomain: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line del">-archivebox_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-archivebox_web_port: &quot;8000&quot;</span><span class="diff-line del">-archivebox_web_url: &quot;{{ &#x27;https://&#x27; + (archivebox_web_subdomain + &#x27;.&#x27; + archivebox_web_domain</span><span class="diff-line del">-                     if (archivebox_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else archivebox_web_domain) }}&quot;</span><span class="diff-line add">+archivebox_role_web_subdomain: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line add">+archivebox_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+archivebox_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+archivebox_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;archivebox&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;archivebox&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;archivebox&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;archivebox&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-archivebox_dns_record: &quot;{{ archivebox_web_subdomain }}&quot;</span><span class="diff-line del">-archivebox_dns_zone: &quot;{{ archivebox_web_domain }}&quot;</span><span class="diff-line del">-archivebox_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+archivebox_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;archivebox&#x27;) }}&quot;</span><span class="diff-line add">+archivebox_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;archivebox&#x27;) }}&quot;</span><span class="diff-line add">+archivebox_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-archivebox_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-archivebox_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-archivebox_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-archivebox_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-archivebox_traefik_enabled: true</span><span class="diff-line add">+archivebox_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+archivebox_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+archivebox_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+archivebox_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+archivebox_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-archivebox_docker_container: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line add">+archivebox_role_docker_container: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-archivebox_docker_image_pull: true</span><span class="diff-line del">-archivebox_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-archivebox_docker_image: &quot;archivebox/archivebox:{{ archivebox_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-archivebox_docker_ports_defaults: []</span><span class="diff-line del">-archivebox_docker_ports_custom: []</span><span class="diff-line del">-archivebox_docker_ports: &quot;{{ archivebox_docker_ports_defaults</span><span class="diff-line del">-                             + archivebox_docker_ports_custom }}&quot;</span><span class="diff-line add">+archivebox_role_docker_image_pull: true</span><span class="diff-line add">+archivebox_role_docker_image_repo: &quot;archivebox/archivebox&quot;</span><span class="diff-line add">+archivebox_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+archivebox_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;archivebox&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;archivebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-archivebox_docker_envs_default:</span><span class="diff-line add">+archivebox_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-archivebox_docker_envs_custom: {}</span><span class="diff-line del">-archivebox_docker_envs: &quot;{{ archivebox_docker_envs_default</span><span class="diff-line del">-                            | combine(archivebox_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-archivebox_docker_commands_default: []</span><span class="diff-line del">-archivebox_docker_commands_custom: []</span><span class="diff-line del">-archivebox_docker_commands: &quot;{{ archivebox_docker_commands_default</span><span class="diff-line del">-                                + archivebox_docker_commands_custom }}&quot;</span><span class="diff-line add">+archivebox_role_docker_envs_custom: {}</span><span class="diff-line add">+archivebox_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;archivebox&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;archivebox&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-archivebox_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ archivebox_paths_location }}:/data&quot;</span><span class="diff-line del">-archivebox_docker_volumes_custom: []</span><span class="diff-line del">-archivebox_docker_volumes: &quot;{{ archivebox_docker_volumes_default</span><span class="diff-line del">-                               + archivebox_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-archivebox_docker_devices_default: []</span><span class="diff-line del">-archivebox_docker_devices_custom: []</span><span class="diff-line del">-archivebox_docker_devices: &quot;{{ archivebox_docker_devices_default</span><span class="diff-line del">-                               + archivebox_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-archivebox_docker_hosts_default: {}</span><span class="diff-line del">-archivebox_docker_hosts_custom: {}</span><span class="diff-line del">-archivebox_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(archivebox_docker_hosts_default)</span><span class="diff-line del">-                             | combine(archivebox_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-archivebox_docker_labels_default: {}</span><span class="diff-line del">-archivebox_docker_labels_custom: {}</span><span class="diff-line del">-archivebox_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(archivebox_docker_labels_default)</span><span class="diff-line del">-                              | combine(archivebox_docker_labels_custom) }}&quot;</span><span class="diff-line add">+archivebox_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;archivebox&#x27;) }}:/data&quot;</span><span class="diff-line add">+archivebox_role_docker_volumes_custom: []</span><span class="diff-line add">+archivebox_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;archivebox&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;archivebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-archivebox_docker_hostname: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line add">+archivebox_role_docker_hostname: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-archivebox_docker_networks_alias: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line del">-archivebox_docker_networks_default: []</span><span class="diff-line del">-archivebox_docker_networks_custom: []</span><span class="diff-line del">-archivebox_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + archivebox_docker_networks_default</span><span class="diff-line del">-                                + archivebox_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-archivebox_docker_capabilities_default: []</span><span class="diff-line del">-archivebox_docker_capabilities_custom: []</span><span class="diff-line del">-archivebox_docker_capabilities: &quot;{{ archivebox_docker_capabilities_default</span><span class="diff-line del">-                                    + archivebox_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-archivebox_docker_security_opts_default: []</span><span class="diff-line del">-archivebox_docker_security_opts_custom: []</span><span class="diff-line del">-archivebox_docker_security_opts: &quot;{{ archivebox_docker_security_opts_default</span><span class="diff-line del">-                                     + archivebox_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+archivebox_role_docker_networks_alias: &quot;{{ archivebox_name }}&quot;</span><span class="diff-line add">+archivebox_role_docker_networks_default: []</span><span class="diff-line add">+archivebox_role_docker_networks_custom: []</span><span class="diff-line add">+archivebox_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;archivebox&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;archivebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-archivebox_docker_restart_policy: unless-stopped</span><span class="diff-line add">+archivebox_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-archivebox_docker_state: started</span><span class="diff-line add">+archivebox_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-69">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/archivebox/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-70">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/audiobookshelf/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,136 +17,91 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-audiobookshelf_paths_folder: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line del">-audiobookshelf_paths_location: &quot;{{ server_appdata_path }}/{{ audiobookshelf_paths_folder }}&quot;</span><span class="diff-line del">-audiobookshelf_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ audiobookshelf_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ audiobookshelf_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ audiobookshelf_paths_location }}/metadata&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/Media/Audiobooks&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/Media/Podcasts&quot;</span><span class="diff-line del">-audiobookshelf_paths_recursive: true</span><span class="diff-line add">+audiobookshelf_role_paths_folder: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line add">+audiobookshelf_role_paths_location: &quot;{{ server_appdata_path }}/{{ audiobookshelf_role_paths_folder }}&quot;</span><span class="diff-line add">+audiobookshelf_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ audiobookshelf_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ audiobookshelf_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ audiobookshelf_role_paths_location }}/metadata&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Audiobooks&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Podcasts&quot;</span><span class="diff-line add">+audiobookshelf_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-audiobookshelf_web_subdomain: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line del">-audiobookshelf_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-audiobookshelf_web_port: &quot;80&quot;</span><span class="diff-line del">-audiobookshelf_web_url: &quot;{{ &#x27;https://&#x27; + (audiobookshelf_web_subdomain + &#x27;.&#x27; + audiobookshelf_web_domain</span><span class="diff-line del">-                         if (audiobookshelf_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                         else audiobookshelf_web_domain) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_web_subdomain: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line add">+audiobookshelf_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+audiobookshelf_role_web_port: &quot;80&quot;</span><span class="diff-line add">+audiobookshelf_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;audiobookshelf&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;audiobookshelf&#x27;)</span><span class="diff-line add">+                              if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;audiobookshelf&#x27;) | length &gt; 0)</span><span class="diff-line add">+                              else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;audiobookshelf&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-audiobookshelf_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_web_subdomain&#x27;, default=audiobookshelf_web_subdomain) }}&quot;</span><span class="diff-line del">-audiobookshelf_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_web_domain&#x27;, default=audiobookshelf_web_domain) }}&quot;</span><span class="diff-line del">-audiobookshelf_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+audiobookshelf_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;audiobookshelf&#x27;) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;audiobookshelf&#x27;) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-audiobookshelf_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-audiobookshelf_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-audiobookshelf_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-audiobookshelf_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-audiobookshelf_traefik_enabled: true</span><span class="diff-line add">+audiobookshelf_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+audiobookshelf_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+audiobookshelf_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+audiobookshelf_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+audiobookshelf_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-audiobookshelf_docker_container: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_container: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-audiobookshelf_docker_image_pull: true</span><span class="diff-line del">-audiobookshelf_docker_image_repo: &quot;ghcr.io/advplyr/audiobookshelf&quot;</span><span class="diff-line del">-audiobookshelf_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-audiobookshelf_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_image_repo&#x27;, default=audiobookshelf_docker_image_repo)</span><span class="diff-line del">-                                 + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_image_tag&#x27;, default=audiobookshelf_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-audiobookshelf_docker_ports_defaults: []</span><span class="diff-line del">-audiobookshelf_docker_ports_custom: []</span><span class="diff-line del">-audiobookshelf_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_ports_defaults&#x27;, default=audiobookshelf_docker_ports_defaults)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_ports_custom&#x27;, default=audiobookshelf_docker_ports_custom) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_image_pull: true</span><span class="diff-line add">+audiobookshelf_role_docker_image_repo: &quot;ghcr.io/advplyr/audiobookshelf&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;audiobookshelf&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;audiobookshelf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-audiobookshelf_docker_envs_default:</span><span class="diff-line add">+audiobookshelf_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-audiobookshelf_docker_envs_custom: {}</span><span class="diff-line del">-audiobookshelf_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_envs_default&#x27;, default=audiobookshelf_docker_envs_default)</span><span class="diff-line del">-                                | combine(lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_envs_custom&#x27;, default=audiobookshelf_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-audiobookshelf_docker_commands_default: []</span><span class="diff-line del">-audiobookshelf_docker_commands_custom: []</span><span class="diff-line del">-audiobookshelf_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_commands_default&#x27;, default=audiobookshelf_docker_commands_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_commands_custom&#x27;, default=audiobookshelf_docker_commands_custom) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_envs_custom: {}</span><span class="diff-line add">+audiobookshelf_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;audiobookshelf&#x27;)</span><span class="diff-line add">+                                     | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;audiobookshelf&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-audiobookshelf_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ audiobookshelf_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ audiobookshelf_paths_location }}/metadata:/metadata&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;audiobookshelf&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;audiobookshelf&#x27;) }}/metadata:/metadata&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Audiobooks:/audiobooks&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Podcasts:/podcasts&quot;</span><span class="diff-line del">-audiobookshelf_docker_volumes_custom: []</span><span class="diff-line del">-audiobookshelf_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_volumes_default&#x27;, default=audiobookshelf_docker_volumes_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_volumes_custom&#x27;, default=audiobookshelf_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-audiobookshelf_docker_devices_default: []</span><span class="diff-line del">-audiobookshelf_docker_devices_custom: []</span><span class="diff-line del">-audiobookshelf_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_devices_default&#x27;, default=audiobookshelf_docker_devices_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_devices_custom&#x27;, default=audiobookshelf_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-audiobookshelf_docker_hosts_default: {}</span><span class="diff-line del">-audiobookshelf_docker_hosts_custom: {}</span><span class="diff-line del">-audiobookshelf_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                 | combine(lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_hosts_default&#x27;, default=audiobookshelf_docker_hosts_default))</span><span class="diff-line del">-                                 | combine(lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_hosts_custom&#x27;, default=audiobookshelf_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-audiobookshelf_docker_labels_default: {}</span><span class="diff-line del">-audiobookshelf_docker_labels_custom: {}</span><span class="diff-line del">-audiobookshelf_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                  | combine(lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_labels_default&#x27;, default=audiobookshelf_docker_labels_default))</span><span class="diff-line del">-                                  | combine(lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_labels_custom&#x27;, default=audiobookshelf_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_volumes_custom: []</span><span class="diff-line add">+audiobookshelf_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;audiobookshelf&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;audiobookshelf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-audiobookshelf_docker_hostname: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_hostname: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-audiobookshelf_docker_networks_alias: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line del">-audiobookshelf_docker_networks_default: []</span><span class="diff-line del">-audiobookshelf_docker_networks_custom: []</span><span class="diff-line del">-audiobookshelf_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_networks_default&#x27;, default=audiobookshelf_docker_networks_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_networks_custom&#x27;, default=audiobookshelf_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-audiobookshelf_docker_capabilities_default: []</span><span class="diff-line del">-audiobookshelf_docker_capabilities_custom: []</span><span class="diff-line del">-audiobookshelf_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_capabilities_default&#x27;, default=audiobookshelf_docker_capabilities_default)</span><span class="diff-line del">-                                        + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_capabilities_custom&#x27;, default=audiobookshelf_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-audiobookshelf_docker_security_opts_default: []</span><span class="diff-line del">-audiobookshelf_docker_security_opts_custom: []</span><span class="diff-line del">-audiobookshelf_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_security_opts_default&#x27;, default=audiobookshelf_docker_security_opts_default)</span><span class="diff-line del">-                                         + lookup(&#x27;vars&#x27;, audiobookshelf_name + &#x27;_docker_security_opts_custom&#x27;, default=audiobookshelf_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_networks_alias: &quot;{{ audiobookshelf_name }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_networks_default: []</span><span class="diff-line add">+audiobookshelf_role_docker_networks_custom: []</span><span class="diff-line add">+audiobookshelf_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;audiobookshelf&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;audiobookshelf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-audiobookshelf_docker_restart_policy: unless-stopped</span><span class="diff-line add">+audiobookshelf_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-audiobookshelf_docker_state: started</span><span class="diff-line add">+audiobookshelf_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-audiobookshelf_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+audiobookshelf_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-71">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/audiobookshelf/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-72">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/barcodebuddy/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,82 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-barcodebuddy_paths_folder: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line del">-barcodebuddy_paths_location: &quot;{{ server_appdata_path }}/{{ barcodebuddy_paths_folder }}&quot;</span><span class="diff-line del">-barcodebuddy_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ barcodebuddy_paths_location }}&quot;</span><span class="diff-line add">+barcodebuddy_role_paths_folder: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line add">+barcodebuddy_role_paths_location: &quot;{{ server_appdata_path }}/{{ barcodebuddy_role_paths_folder }}&quot;</span><span class="diff-line add">+barcodebuddy_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ barcodebuddy_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-barcodebuddy_web_subdomain: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line del">-barcodebuddy_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-barcodebuddy_web_port: &quot;80&quot;</span><span class="diff-line del">-barcodebuddy_web_url: &quot;{{ &#x27;https://&#x27; + (barcodebuddy_web_subdomain + &#x27;.&#x27; + barcodebuddy_web_domain</span><span class="diff-line del">-                       if (barcodebuddy_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else barcodebuddy_web_domain) }}&quot;</span><span class="diff-line add">+barcodebuddy_role_web_subdomain: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line add">+barcodebuddy_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+barcodebuddy_role_web_port: &quot;80&quot;</span><span class="diff-line add">+barcodebuddy_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;barcodebuddy&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;barcodebuddy&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;barcodebuddy&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;barcodebuddy&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-barcodebuddy_dns_record: &quot;{{ barcodebuddy_web_subdomain }}&quot;</span><span class="diff-line del">-barcodebuddy_dns_zone: &quot;{{ barcodebuddy_web_domain }}&quot;</span><span class="diff-line del">-barcodebuddy_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+barcodebuddy_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;barcodebuddy&#x27;) }}&quot;</span><span class="diff-line add">+barcodebuddy_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;barcodebuddy&#x27;) }}&quot;</span><span class="diff-line add">+barcodebuddy_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-barcodebuddy_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-barcodebuddy_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-barcodebuddy_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-barcodebuddy_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-barcodebuddy_traefik_enabled: true</span><span class="diff-line add">+barcodebuddy_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+barcodebuddy_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+barcodebuddy_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+barcodebuddy_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+barcodebuddy_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-barcodebuddy_docker_container: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_container: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-barcodebuddy_docker_image_pull: true</span><span class="diff-line del">-barcodebuddy_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-barcodebuddy_docker_image: &quot;f0rc3/barcodebuddy:{{ barcodebuddy_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-barcodebuddy_docker_ports_defaults: []</span><span class="diff-line del">-barcodebuddy_docker_ports_custom: []</span><span class="diff-line del">-barcodebuddy_docker_ports: &quot;{{ barcodebuddy_docker_ports_defaults</span><span class="diff-line del">-                               + barcodebuddy_docker_ports_custom }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_image_pull: true</span><span class="diff-line add">+barcodebuddy_role_docker_image_repo: &quot;f0rc3/barcodebuddy&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;barcodebuddy&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;barcodebuddy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-barcodebuddy_docker_envs_default:</span><span class="diff-line add">+barcodebuddy_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-barcodebuddy_docker_envs_custom: {}</span><span class="diff-line del">-barcodebuddy_docker_envs: &quot;{{ barcodebuddy_docker_envs_default</span><span class="diff-line del">-                              | combine(barcodebuddy_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-barcodebuddy_docker_commands_default: []</span><span class="diff-line del">-barcodebuddy_docker_commands_custom: []</span><span class="diff-line del">-barcodebuddy_docker_commands: &quot;{{ barcodebuddy_docker_commands_default</span><span class="diff-line del">-                                  + barcodebuddy_docker_commands_custom }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_envs_custom: {}</span><span class="diff-line add">+barcodebuddy_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;barcodebuddy&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;barcodebuddy&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-barcodebuddy_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ barcodebuddy_paths_location }}:/config&quot;</span><span class="diff-line del">-barcodebuddy_docker_volumes_custom: []</span><span class="diff-line del">-barcodebuddy_docker_volumes: &quot;{{ barcodebuddy_docker_volumes_default</span><span class="diff-line del">-                                 + barcodebuddy_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-barcodebuddy_docker_devices_default: []</span><span class="diff-line del">-barcodebuddy_docker_devices_custom: []</span><span class="diff-line del">-barcodebuddy_docker_devices: &quot;{{ barcodebuddy_docker_devices_default</span><span class="diff-line del">-                                 + barcodebuddy_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-barcodebuddy_docker_hosts_default: {}</span><span class="diff-line del">-barcodebuddy_docker_hosts_custom: {}</span><span class="diff-line del">-barcodebuddy_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(barcodebuddy_docker_hosts_default)</span><span class="diff-line del">-                               | combine(barcodebuddy_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-barcodebuddy_docker_labels_default: {}</span><span class="diff-line del">-barcodebuddy_docker_labels_custom: {}</span><span class="diff-line del">-barcodebuddy_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(barcodebuddy_docker_labels_default)</span><span class="diff-line del">-                                | combine(barcodebuddy_docker_labels_custom) }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;barcodebuddy&#x27;) }}:/config&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_volumes_custom: []</span><span class="diff-line add">+barcodebuddy_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;barcodebuddy&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;barcodebuddy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-barcodebuddy_docker_hostname: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_hostname: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-barcodebuddy_docker_networks_alias: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line del">-barcodebuddy_docker_networks_default: []</span><span class="diff-line del">-barcodebuddy_docker_networks_custom: []</span><span class="diff-line del">-barcodebuddy_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + barcodebuddy_docker_networks_default</span><span class="diff-line del">-                                  + barcodebuddy_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-barcodebuddy_docker_capabilities_default: []</span><span class="diff-line del">-barcodebuddy_docker_capabilities_custom: []</span><span class="diff-line del">-barcodebuddy_docker_capabilities: &quot;{{ barcodebuddy_docker_capabilities_default</span><span class="diff-line del">-                                      + barcodebuddy_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-barcodebuddy_docker_security_opts_default: []</span><span class="diff-line del">-barcodebuddy_docker_security_opts_custom: []</span><span class="diff-line del">-barcodebuddy_docker_security_opts: &quot;{{ barcodebuddy_docker_security_opts_default</span><span class="diff-line del">-                                       + barcodebuddy_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_networks_alias: &quot;{{ barcodebuddy_name }}&quot;</span><span class="diff-line add">+barcodebuddy_role_docker_networks_default: []</span><span class="diff-line add">+barcodebuddy_role_docker_networks_custom: []</span><span class="diff-line add">+barcodebuddy_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;barcodebuddy&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;barcodebuddy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-barcodebuddy_docker_restart_policy: unless-stopped</span><span class="diff-line add">+barcodebuddy_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-barcodebuddy_docker_state: started</span><span class="diff-line add">+barcodebuddy_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-73">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/barcodebuddy/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-74">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/beets/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-beets_paths_folder: &quot;{{ beets_name }}&quot;</span><span class="diff-line del">-beets_paths_location: &quot;{{ server_appdata_path }}/{{ beets_paths_folder }}&quot;</span><span class="diff-line del">-beets_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ beets_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/music&quot;</span><span class="diff-line add">+beets_role_paths_folder: &quot;{{ beets_name }}&quot;</span><span class="diff-line add">+beets_role_paths_location: &quot;{{ server_appdata_path }}/{{ beets_role_paths_folder }}&quot;</span><span class="diff-line add">+beets_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ beets_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/music&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-beets_web_subdomain: &quot;{{ beets_name }}&quot;</span><span class="diff-line del">-beets_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-beets_web_port: &quot;8337&quot;</span><span class="diff-line del">-beets_web_url: &quot;{{ &#x27;https://&#x27; + (beets_web_subdomain + &#x27;.&#x27; + beets_web_domain</span><span class="diff-line del">-                if (beets_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else beets_web_domain) }}&quot;</span><span class="diff-line add">+beets_role_web_subdomain: &quot;{{ beets_name }}&quot;</span><span class="diff-line add">+beets_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+beets_role_web_port: &quot;8337&quot;</span><span class="diff-line add">+beets_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;beets&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;beets&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;beets&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;beets&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-beets_dns_record: &quot;{{ beets_web_subdomain }}&quot;</span><span class="diff-line del">-beets_dns_zone: &quot;{{ beets_web_domain }}&quot;</span><span class="diff-line del">-beets_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+beets_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;beets&#x27;) }}&quot;</span><span class="diff-line add">+beets_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;beets&#x27;) }}&quot;</span><span class="diff-line add">+beets_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-beets_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-beets_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-beets_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-beets_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-beets_traefik_enabled: true</span><span class="diff-line add">+beets_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+beets_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+beets_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+beets_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+beets_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-beets_docker_container: &quot;{{ beets_name }}&quot;</span><span class="diff-line add">+beets_role_docker_container: &quot;{{ beets_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-beets_docker_image_pull: true</span><span class="diff-line del">-beets_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-beets_docker_image: &quot;lscr.io/linuxserver/beets:{{ beets_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-beets_docker_ports_defaults: []</span><span class="diff-line del">-beets_docker_ports_custom: []</span><span class="diff-line del">-beets_docker_ports: &quot;{{ beets_docker_ports_defaults</span><span class="diff-line del">-                        + beets_docker_ports_custom }}&quot;</span><span class="diff-line add">+beets_role_docker_image_pull: true</span><span class="diff-line add">+beets_role_docker_image_repo: &quot;lscr.io/linuxserver/beets&quot;</span><span class="diff-line add">+beets_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+beets_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;beets&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;beets&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-beets_docker_envs_default:</span><span class="diff-line add">+beets_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-beets_docker_envs_custom: {}</span><span class="diff-line del">-beets_docker_envs: &quot;{{ beets_docker_envs_default</span><span class="diff-line del">-                       | combine(beets_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-beets_docker_commands_default: []</span><span class="diff-line del">-beets_docker_commands_custom: []</span><span class="diff-line del">-beets_docker_commands: &quot;{{ beets_docker_commands_default</span><span class="diff-line del">-                           + beets_docker_commands_custom }}&quot;</span><span class="diff-line add">+beets_role_docker_envs_custom: {}</span><span class="diff-line add">+beets_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;beets&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;beets&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-beets_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ beets_paths_location }}:/config&quot;</span><span class="diff-line add">+beets_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;beets&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Music:/music&quot;</span><span class="diff-line del">-beets_docker_volumes_custom: []</span><span class="diff-line del">-beets_docker_volumes: &quot;{{ beets_docker_volumes_default</span><span class="diff-line del">-                          + beets_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-beets_docker_devices_default: []</span><span class="diff-line del">-beets_docker_devices_custom: []</span><span class="diff-line del">-beets_docker_devices: &quot;{{ beets_docker_devices_default</span><span class="diff-line del">-                          + beets_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-beets_docker_hosts_default: {}</span><span class="diff-line del">-beets_docker_hosts_custom: {}</span><span class="diff-line del">-beets_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(beets_docker_hosts_default)</span><span class="diff-line del">-                        | combine(beets_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-beets_docker_labels_default: {}</span><span class="diff-line del">-beets_docker_labels_custom: {}</span><span class="diff-line del">-beets_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(beets_docker_labels_default)</span><span class="diff-line del">-                         | combine(beets_docker_labels_custom) }}&quot;</span><span class="diff-line add">+beets_role_docker_volumes_custom: []</span><span class="diff-line add">+beets_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;beets&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;beets&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-beets_docker_hostname: &quot;{{ beets_name }}&quot;</span><span class="diff-line add">+beets_role_docker_hostname: &quot;{{ beets_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-beets_docker_networks_alias: &quot;{{ beets_name }}&quot;</span><span class="diff-line del">-beets_docker_networks_default: []</span><span class="diff-line del">-beets_docker_networks_custom: []</span><span class="diff-line del">-beets_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + beets_docker_networks_default</span><span class="diff-line del">-                           + beets_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-beets_docker_capabilities_default: []</span><span class="diff-line del">-beets_docker_capabilities_custom: []</span><span class="diff-line del">-beets_docker_capabilities: &quot;{{ beets_docker_capabilities_default</span><span class="diff-line del">-                               + beets_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-beets_docker_security_opts_default: []</span><span class="diff-line del">-beets_docker_security_opts_custom: []</span><span class="diff-line del">-beets_docker_security_opts: &quot;{{ beets_docker_security_opts_default</span><span class="diff-line del">-                                + beets_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+beets_role_docker_networks_alias: &quot;{{ beets_name }}&quot;</span><span class="diff-line add">+beets_role_docker_networks_default: []</span><span class="diff-line add">+beets_role_docker_networks_custom: []</span><span class="diff-line add">+beets_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;beets&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;beets&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-beets_docker_restart_policy: unless-stopped</span><span class="diff-line add">+beets_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-beets_docker_state: started</span><span class="diff-line add">+beets_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-75">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/beets/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -28,12 +28,12 @@</span><span class="diff-line context">     name: &quot;Beets Import&quot;</span><span class="diff-line context">     user: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     special_time: hourly</span><span class="diff-line del">-    job: &quot;docker exec -u abc {{ lookup(&#x27;vars&#x27;, role_name + &#x27;_name&#x27;) }} /bin/bash -c &#x27;beet import -q /downloads&#x27;&quot;</span><span class="diff-line add">+    job: &quot;docker exec -u abc {{ lookup(&#x27;role_var&#x27;, &#x27;_docker_container&#x27;, role=&#x27;beets&#x27;) }} /bin/bash -c &#x27;beet import -q /downloads&#x27;&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Wait for config.yaml to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;/opt/{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_name&#x27;) }}/config.yaml&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;beets&#x27;) }}/config.yaml&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Stop Docker container</span><span class="diff-line hunk">@@ -41,7 +41,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set filename length</span><span class="diff-line context">   ansible.builtin.lineinfile:</span><span class="diff-line del">-    path: &quot;/opt/{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_name&#x27;) }}/config.yaml&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;beets&#x27;) }}/config.yaml&quot;</span><span class="diff-line context">     line: &quot;max_filename_length: 255&quot;</span><span class="diff-line context">     insertafter: per_disc*</span><span class="diff-line context">     state: present</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-76">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/bookstack/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,137 +17,94 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-bookstack_paths_folder: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line del">-bookstack_paths_location: &quot;{{ server_appdata_path }}/{{ bookstack_paths_folder }}&quot;</span><span class="diff-line del">-bookstack_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ bookstack_paths_location }}&quot;</span><span class="diff-line add">+bookstack_role_paths_folder: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line add">+bookstack_role_paths_location: &quot;{{ server_appdata_path }}/{{ bookstack_role_paths_folder }}&quot;</span><span class="diff-line add">+bookstack_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ bookstack_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-bookstack_web_subdomain: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line del">-bookstack_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-bookstack_web_port: &quot;80&quot;</span><span class="diff-line del">-bookstack_web_url: &quot;{{ &#x27;https://&#x27; + (bookstack_web_subdomain + &#x27;.&#x27; + bookstack_web_domain</span><span class="diff-line del">-                    if (bookstack_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else bookstack_web_domain) }}&quot;</span><span class="diff-line add">+bookstack_role_web_subdomain: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line add">+bookstack_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+bookstack_role_web_port: &quot;80&quot;</span><span class="diff-line add">+bookstack_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;bookstack&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;bookstack&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;bookstack&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;bookstack&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-bookstack_dns_record: &quot;{{ bookstack_web_subdomain }}&quot;</span><span class="diff-line del">-bookstack_dns_zone: &quot;{{ bookstack_web_domain }}&quot;</span><span class="diff-line del">-bookstack_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+bookstack_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line add">+bookstack_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line add">+bookstack_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-bookstack_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-bookstack_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-bookstack_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-bookstack_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-bookstack_traefik_enabled: true</span><span class="diff-line add">+bookstack_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+bookstack_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+bookstack_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+bookstack_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+bookstack_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-bookstack_docker_container: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line add">+bookstack_role_docker_container: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-bookstack_docker_image_pull: true</span><span class="diff-line del">-bookstack_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-bookstack_docker_image: &quot;lscr.io/linuxserver/bookstack:{{ bookstack_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-bookstack_docker_ports_defaults: []</span><span class="diff-line del">-bookstack_docker_ports_custom: []</span><span class="diff-line del">-bookstack_docker_ports: &quot;{{ bookstack_docker_ports_defaults</span><span class="diff-line del">-                            + bookstack_docker_ports_custom }}&quot;</span><span class="diff-line add">+bookstack_role_docker_image_pull: true</span><span class="diff-line add">+bookstack_role_docker_image_repo: &quot;lscr.io/linuxserver/bookstack&quot;</span><span class="diff-line add">+bookstack_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+bookstack_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;bookstack&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-bookstack_docker_envs_default:</span><span class="diff-line add">+bookstack_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   APP_KEY: &quot;{{ bookstack_saltbox_facts.facts.app_key }}&quot;</span><span class="diff-line del">-  APP_URL: &quot;https://{{ bookstack_web_subdomain + &#x27;.&#x27; + bookstack_web_domain }}&quot;</span><span class="diff-line add">+  APP_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line context">   DB_HOST: &quot;mariadb&quot;</span><span class="diff-line context">   DB_PORT: &quot;3306&quot;</span><span class="diff-line context">   DB_USERNAME: &quot;root&quot;</span><span class="diff-line del">-  DB_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+  DB_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">   DB_DATABASE: bookstackapp</span><span class="diff-line del">-bookstack_docker_envs_custom: {}</span><span class="diff-line del">-bookstack_docker_envs: &quot;{{ bookstack_docker_envs_default</span><span class="diff-line del">-                           | combine(bookstack_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-bookstack_docker_commands_default: []</span><span class="diff-line del">-bookstack_docker_commands_custom: []</span><span class="diff-line del">-bookstack_docker_commands: &quot;{{ bookstack_docker_commands_default</span><span class="diff-line del">-                               + bookstack_docker_commands_custom }}&quot;</span><span class="diff-line add">+bookstack_role_docker_envs_custom: {}</span><span class="diff-line add">+bookstack_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;bookstack&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;bookstack&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-bookstack_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ bookstack_paths_location }}:/config&quot;</span><span class="diff-line del">-bookstack_docker_volumes_custom: []</span><span class="diff-line del">-bookstack_docker_volumes: &quot;{{ bookstack_docker_volumes_default</span><span class="diff-line del">-                              + bookstack_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-bookstack_docker_devices_default: []</span><span class="diff-line del">-bookstack_docker_devices_custom: []</span><span class="diff-line del">-bookstack_docker_devices: &quot;{{ bookstack_docker_devices_default</span><span class="diff-line del">-                              + bookstack_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-bookstack_docker_hosts_default: {}</span><span class="diff-line del">-bookstack_docker_hosts_custom: {}</span><span class="diff-line del">-bookstack_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(bookstack_docker_hosts_default)</span><span class="diff-line del">-                            | combine(bookstack_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-bookstack_docker_labels_default: {}</span><span class="diff-line del">-bookstack_docker_labels_custom: {}</span><span class="diff-line del">-bookstack_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(bookstack_docker_labels_default)</span><span class="diff-line del">-                             | combine(bookstack_docker_labels_custom) }}&quot;</span><span class="diff-line add">+bookstack_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;bookstack&#x27;) }}:/config&quot;</span><span class="diff-line add">+bookstack_role_docker_volumes_custom: []</span><span class="diff-line add">+bookstack_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;bookstack&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-bookstack_docker_hostname: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line add">+bookstack_role_docker_hostname: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-bookstack_docker_networks_alias: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line del">-bookstack_docker_networks_default: []</span><span class="diff-line del">-bookstack_docker_networks_custom: []</span><span class="diff-line del">-bookstack_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + bookstack_docker_networks_default</span><span class="diff-line del">-                               + bookstack_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-bookstack_docker_capabilities_default: []</span><span class="diff-line del">-bookstack_docker_capabilities_custom: []</span><span class="diff-line del">-bookstack_docker_capabilities: &quot;{{ bookstack_docker_capabilities_default</span><span class="diff-line del">-                                   + bookstack_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-bookstack_docker_security_opts_default: []</span><span class="diff-line del">-bookstack_docker_security_opts_custom: []</span><span class="diff-line del">-bookstack_docker_security_opts: &quot;{{ bookstack_docker_security_opts_default</span><span class="diff-line del">-                                    + bookstack_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+bookstack_role_docker_networks_alias: &quot;{{ bookstack_name }}&quot;</span><span class="diff-line add">+bookstack_role_docker_networks_default: []</span><span class="diff-line add">+bookstack_role_docker_networks_custom: []</span><span class="diff-line add">+bookstack_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;bookstack&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-bookstack_docker_restart_policy: unless-stopped</span><span class="diff-line add">+bookstack_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-bookstack_docker_state: started</span><span class="diff-line add">+bookstack_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-bookstack_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-bookstack_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-bookstack_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+bookstack_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+bookstack_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+bookstack_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-77">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/bookstack/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,13 +10,13 @@</span><span class="diff-line context"> - name: Bookstack | Generate App Key</span><span class="diff-line context">   community.docker.docker_container:</span><span class="diff-line context">     name: bookstack-app-key</span><span class="diff-line del">-    image: &quot;{{ bookstack_docker_image }}&quot;</span><span class="diff-line add">+    image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image&#x27;, role=&#x27;bookstack&#x27;) }}&quot;</span><span class="diff-line context">     command: &quot;appkey&quot;</span><span class="diff-line del">-    detach: no</span><span class="diff-line add">+    detach: false</span><span class="diff-line context">     entrypoint: &quot;/bin/bash&quot;</span><span class="diff-line context">     networks:</span><span class="diff-line context">       - name: saltbox</span><span class="diff-line del">-    cleanup: yes</span><span class="diff-line add">+    cleanup: true</span><span class="diff-line context">     state: started</span><span class="diff-line context">     container_default_behavior: compatibility</span><span class="diff-line context">     tls_hostname: localhost</span><span class="diff-line hunk">@@ -31,14 +31,15 @@</span><span class="diff-line context">       app_key: &quot;{{ bookstack_generated_app_key.container.Output }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: bookstack_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line hunk">@@ -49,7 +50,7 @@</span><span class="diff-line context">     name: &quot;bookstackapp&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-78">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/calibre/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,171 +17,133 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_paths_folder: &quot;{{ calibre_name }}&quot;</span><span class="diff-line del">-calibre_paths_location: &quot;{{ server_appdata_path }}/{{ calibre_paths_folder }}&quot;</span><span class="diff-line del">-calibre_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ calibre_paths_location }}&quot;</span><span class="diff-line del">-  - /mnt/local/Media/Books</span><span class="diff-line add">+calibre_role_paths_folder: &quot;{{ calibre_name }}&quot;</span><span class="diff-line add">+calibre_role_paths_location: &quot;{{ server_appdata_path }}/{{ calibre_role_paths_folder }}&quot;</span><span class="diff-line add">+calibre_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ calibre_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Books&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web_subdomain: &quot;{{ calibre_name }}&quot;</span><span class="diff-line del">-calibre_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-calibre_web_port: &quot;8080&quot;</span><span class="diff-line del">-calibre_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_subdomain&#x27;, default=calibre_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_domain&#x27;, default=calibre_web_domain)</span><span class="diff-line del">-                  if (lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_subdomain&#x27;, default=calibre_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                  else lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_domain&#x27;, default=calibre_web_domain)) }}&quot;</span><span class="diff-line add">+calibre_role_web_subdomain: &quot;{{ calibre_name }}&quot;</span><span class="diff-line add">+calibre_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+calibre_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+calibre_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web2_subdomain: &quot;{{ calibre_name }}books&quot;</span><span class="diff-line del">-calibre_web2_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-calibre_web2_port: &quot;8081&quot;</span><span class="diff-line del">-calibre_web2_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_subdomain&#x27;, default=calibre_web2_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_domain&#x27;, default=calibre_web2_domain)</span><span class="diff-line del">-                       if (lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_subdomain&#x27;, default=calibre_web2_subdomain) | length &gt; 0)</span><span class="diff-line del">-                       else lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_domain&#x27;, default=calibre_web2_domain)) }}&quot;</span><span class="diff-line add">+calibre_role_web2_subdomain: &quot;{{ calibre_name }}books&quot;</span><span class="diff-line add">+calibre_role_web2_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+calibre_role_web2_port: &quot;8081&quot;</span><span class="diff-line add">+calibre_role_web2_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web2_subdomain&#x27;, role=&#x27;calibre&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web2_domain&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                 if (lookup(&#x27;role_var&#x27;, &#x27;_web2_subdomain&#x27;, role=&#x27;calibre&#x27;) | length &gt; 0)</span><span class="diff-line add">+                                 else lookup(&#x27;role_var&#x27;, &#x27;_web2_domain&#x27;, role=&#x27;calibre&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_subdomain&#x27;, default=calibre_web_subdomain) }}&quot;</span><span class="diff-line del">-calibre_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web_domain&#x27;, default=calibre_web_domain) }}&quot;</span><span class="diff-line del">-calibre_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">-calibre_dns2_record: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_subdomain&#x27;, default=calibre_web2_subdomain) }}&quot;</span><span class="diff-line del">-calibre_dns2_zone: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_domain&#x27;, default=calibre_web2_domain) }}&quot;</span><span class="diff-line del">-calibre_dns2_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+calibre_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line add">+calibre_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line add">+calibre_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line add">+calibre_role_dns2_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web2_subdomain&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line add">+calibre_role_dns2_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web2_domain&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line add">+calibre_role_dns2_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-calibre_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-calibre_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-calibre_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-calibre_traefik_enabled: true</span><span class="diff-line del">-calibre_books_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-calibre_books_traefik_middleware_default: &quot;{{ traefik_default_middleware</span><span class="diff-line del">-                                              + (&#x27;,&#x27; + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_books_traefik_sso_middleware&#x27;, default=calibre_books_traefik_sso_middleware)</span><span class="diff-line del">-                                                if (lookup(&#x27;vars&#x27;, calibre_name + &#x27;_books_traefik_sso_middleware&#x27;, default=calibre_books_traefik_sso_middleware) | length &gt; 0)</span><span class="diff-line del">-                                                else &#x27;&#x27;) }}&quot;</span><span class="diff-line del">-calibre_books_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-calibre_books_traefik_middleware: &quot;{{ calibre_books_traefik_middleware_default</span><span class="diff-line del">-                                      + (&#x27;,&#x27; + calibre_books_traefik_middleware_custom</span><span class="diff-line del">-                                        if (not calibre_books_traefik_middleware_custom.startswith(&#x27;,&#x27;) and calibre_books_traefik_middleware_custom | length &gt; 0)</span><span class="diff-line del">-                                        else calibre_books_traefik_middleware_custom) }}&quot;</span><span class="diff-line del">-calibre_books_traefik_router: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_web2_subdomain&#x27;, default=calibre_web2_subdomain) }}&quot;</span><span class="diff-line add">+calibre_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+calibre_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+calibre_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+calibre_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+calibre_role_traefik_enabled: true</span><span class="diff-line add">+calibre_role_books_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+calibre_role_books_traefik_middleware_default: &quot;{{ traefik_default_middleware</span><span class="diff-line add">+                                                   + (&#x27;,&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_sso_middleware&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                                     if (lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_sso_middleware&#x27;, role=&#x27;calibre&#x27;) | length &gt; 0)</span><span class="diff-line add">+                                                     else &#x27;&#x27;) }}&quot;</span><span class="diff-line add">+calibre_role_books_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+calibre_role_books_traefik_middleware: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_middleware_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                           + (&#x27;,&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_middleware_custom&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                             if (not lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_middleware_custom&#x27;, role=&#x27;calibre&#x27;).startswith(&#x27;,&#x27;) and lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_middleware_custom&#x27;, role=&#x27;calibre&#x27;) | length &gt; 0)</span><span class="diff-line add">+                                             else lookup(&#x27;role_var&#x27;, &#x27;_books_traefik_middleware_custom&#x27;, role=&#x27;calibre&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-calibre_docker_container: &quot;{{ calibre_name }}&quot;</span><span class="diff-line add">+calibre_role_docker_container: &quot;{{ calibre_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-calibre_docker_image_pull: true</span><span class="diff-line del">-calibre_docker_image_repo: &quot;lscr.io/linuxserver/calibre&quot;</span><span class="diff-line del">-calibre_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-calibre_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_image_repo&#x27;, default=calibre_docker_image_repo)</span><span class="diff-line del">-                          + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_image_tag&#x27;, default=calibre_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-calibre_docker_ports_defaults: []</span><span class="diff-line del">-calibre_docker_ports_custom: []</span><span class="diff-line del">-calibre_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_ports_defaults&#x27;, default=calibre_docker_ports_defaults)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_ports_custom&#x27;, default=calibre_docker_ports_custom) }}&quot;</span><span class="diff-line add">+calibre_role_docker_image_pull: true</span><span class="diff-line add">+calibre_role_docker_image_repo: &quot;lscr.io/linuxserver/calibre&quot;</span><span class="diff-line add">+calibre_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+calibre_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;calibre&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-calibre_docker_envs_default:</span><span class="diff-line add">+calibre_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   CUSTOM_USER: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   LIBRARYINTERNALPATH: &quot;/library&quot;</span><span class="diff-line del">-calibre_docker_envs_custom: {}</span><span class="diff-line del">-calibre_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_envs_default&#x27;, default=calibre_docker_envs_default)</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_envs_custom&#x27;, default=calibre_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-calibre_docker_commands_default: []</span><span class="diff-line del">-calibre_docker_commands_custom: []</span><span class="diff-line del">-calibre_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_commands_default&#x27;, default=calibre_docker_commands_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_commands_custom&#x27;, default=calibre_docker_commands_custom) }}&quot;</span><span class="diff-line add">+calibre_role_docker_envs_custom: {}</span><span class="diff-line add">+calibre_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;calibre&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-calibre_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ calibre_paths_location }}:/config&quot;</span><span class="diff-line add">+calibre_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;calibre&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Books:/library&quot;</span><span class="diff-line del">-calibre_docker_volumes_custom: []</span><span class="diff-line del">-calibre_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_volumes_default&#x27;, default=calibre_docker_volumes_default)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_volumes_custom&#x27;, default=calibre_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-calibre_docker_devices_default: []</span><span class="diff-line del">-calibre_docker_devices_custom: []</span><span class="diff-line del">-calibre_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_devices_default&#x27;, default=calibre_docker_devices_default)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_devices_custom&#x27;, default=calibre_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-calibre_docker_hosts_default: {}</span><span class="diff-line del">-calibre_docker_hosts_custom: {}</span><span class="diff-line del">-calibre_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_hosts_default&#x27;, default=calibre_docker_hosts_default))</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_hosts_custom&#x27;, default=calibre_docker_hosts_custom)) }}&quot;</span><span class="diff-line add">+calibre_role_docker_volumes_custom: []</span><span class="diff-line add">+calibre_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Labels</span><span class="diff-line del">-calibre_docker_labels_default:</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}-http.entrypoints&quot;: &quot;web&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}-http.service&quot;: &quot;{{ lookup(&quot;vars&quot;, calibre_name + &quot;_web2_subdomain&quot;, default=calibre_web2_subdomain) }}&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}-http.rule&quot;: &quot;Host(`{{ lookup(&quot;vars&quot;, calibre_name + &quot;_web2_subdomain&quot;, default=calibre_web2_subdomain) + &quot;.&quot; + lookup(&quot;vars&quot;, calibre_name + &quot;_web2_domain&quot;, default=calibre_web2_domain) }}`)&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}-http.middlewares&quot;: &quot;{{ traefik_default_middleware_http }}&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}-http.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.entrypoints&quot;: &quot;websecure&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.service&quot;: &quot;{{ lookup(&quot;vars&quot;, calibre_name + &quot;_web2_subdomain&quot;, default=calibre_web2_subdomain) }}&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.rule&quot;: &quot;Host(`{{ lookup(&quot;vars&quot;, calibre_name + &quot;_web2_subdomain&quot;, default=calibre_web2_subdomain) + &quot;.&quot; + lookup(&quot;vars&quot;, calibre_name + &quot;_web2_domain&quot;, default=calibre_web2_domain) }}`)&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.middlewares&quot;: &quot;{{ calibre_books_traefik_middleware }}&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.tls.options&quot;: &quot;securetls@file&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.tls.certresolver&quot;: &quot;{{ calibre_traefik_certresolver }}&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ calibre_books_traefik_router }}.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.services.{{ calibre_books_traefik_router }}.loadbalancer.server.port&quot;: &quot;{{ calibre_web2_port }}&quot; }&#x27;</span><span class="diff-line del">-calibre_docker_labels_custom: {}</span><span class="diff-line del">-calibre_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_labels_default&#x27;, default=calibre_docker_labels_default))</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_labels_custom&#x27;, default=calibre_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+calibre_role_docker_labels_default:</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}-http.entrypoints&quot;: &quot;web&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}-http.service&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}-http.rule&quot;: &quot;Host(`{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) + &quot;.&quot; + lookup(&quot;role_var&quot;, &quot;_web2_domain&quot;, role=&quot;calibre&quot;) }}`)&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}-http.middlewares&quot;: &quot;{{ traefik_default_middleware_http }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}-http.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.entrypoints&quot;: &quot;websecure&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.service&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.rule&quot;: &quot;Host(`{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) + &quot;.&quot; + lookup(&quot;role_var&quot;, &quot;_web2_domain&quot;, role=&quot;calibre&quot;) }}`)&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.middlewares&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_books_traefik_middleware&quot;, role=&quot;calibre&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.tls.options&quot;: &quot;securetls@file&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.tls.certresolver&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_traefik_certresolver&quot;, role=&quot;calibre&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.services.{{ lookup(&quot;role_var&quot;, &quot;_web2_subdomain&quot;, role=&quot;calibre&quot;) }}.loadbalancer.server.port&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_web2_port&quot;, role=&quot;calibre&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+calibre_role_docker_labels_custom: {}</span><span class="diff-line add">+calibre_role_docker_labels: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;calibre&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-calibre_docker_hostname: &quot;{{ calibre_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-calibre_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-calibre_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_network_mode_default&#x27;, default=calibre_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+calibre_role_docker_hostname: &quot;{{ calibre_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-calibre_docker_networks_alias: &quot;{{ calibre_name }}&quot;</span><span class="diff-line del">-calibre_docker_networks_default: []</span><span class="diff-line del">-calibre_docker_networks_custom: []</span><span class="diff-line del">-calibre_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_networks_default&#x27;, default=calibre_docker_networks_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_networks_custom&#x27;, default=calibre_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-calibre_docker_capabilities_default: []</span><span class="diff-line del">-calibre_docker_capabilities_custom: []</span><span class="diff-line del">-calibre_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_capabilities_default&#x27;, default=calibre_docker_capabilities_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_capabilities_custom&#x27;, default=calibre_docker_capabilities_custom) }}&quot;</span><span class="diff-line add">+calibre_role_docker_networks_alias: &quot;{{ calibre_name }}&quot;</span><span class="diff-line add">+calibre_role_docker_networks_default: []</span><span class="diff-line add">+calibre_role_docker_networks_custom: []</span><span class="diff-line add">+calibre_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Security Opts</span><span class="diff-line del">-calibre_docker_security_opts_default:</span><span class="diff-line add">+calibre_role_docker_security_opts_default:</span><span class="diff-line context">   - seccomp=unconfined</span><span class="diff-line del">-calibre_docker_security_opts_custom: []</span><span class="diff-line del">-calibre_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_security_opts_default&#x27;, default=calibre_docker_security_opts_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, calibre_name + &#x27;_docker_security_opts_custom&#x27;, default=calibre_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+calibre_role_docker_security_opts_custom: []</span><span class="diff-line add">+calibre_role_docker_security_opts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_security_opts_default&#x27;, role=&#x27;calibre&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_security_opts_custom&#x27;, role=&#x27;calibre&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-calibre_docker_restart_policy: unless-stopped</span><span class="diff-line add">+calibre_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-calibre_docker_state: started</span><span class="diff-line add">+calibre_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-79">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/calibre/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,16 +10,16 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns2_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns2_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns2_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns2_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns2_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns2_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-80">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/calibre_web/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,150 +17,110 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web_paths_folder: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line del">-calibre_web_paths_location: &quot;{{ server_appdata_path }}/{{ calibre_web_paths_folder }}&quot;</span><span class="diff-line del">-calibre_web_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ calibre_web_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ calibre_web_paths_location }}/cache&quot;</span><span class="diff-line add">+calibre_web_role_paths_folder: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line add">+calibre_web_role_paths_location: &quot;{{ server_appdata_path }}/{{ calibre_web_role_paths_folder }}&quot;</span><span class="diff-line add">+calibre_web_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ calibre_web_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ calibre_web_role_paths_location }}/cache&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web_web_subdomain: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line del">-calibre_web_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-calibre_web_web_port: &quot;8083&quot;</span><span class="diff-line del">-calibre_web_web_url: &quot;{{ &#x27;https://&#x27; + (calibre_web_web_subdomain + &#x27;.&#x27; + calibre_web_web_domain</span><span class="diff-line del">-                      if (calibre_web_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else calibre_web_web_domain) }}&quot;</span><span class="diff-line add">+calibre_web_role_web_subdomain: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line add">+calibre_web_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+calibre_web_role_web_port: &quot;8083&quot;</span><span class="diff-line add">+calibre_web_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre_web&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre_web&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre_web&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre_web&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web_dns_record: &quot;{{ calibre_web_web_subdomain }}&quot;</span><span class="diff-line del">-calibre_web_dns_zone: &quot;{{ calibre_web_web_domain }}&quot;</span><span class="diff-line del">-calibre_web_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+calibre_web_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line add">+calibre_web_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line add">+calibre_web_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-calibre_web_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-calibre_web_traefik_middleware_default: &quot;{{ traefik_default_middleware }},kobo-sync-headers&quot;</span><span class="diff-line del">-calibre_web_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-calibre_web_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-calibre_web_traefik_enabled: true</span><span class="diff-line add">+calibre_web_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+calibre_web_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }},kobo-sync-headers&quot;</span><span class="diff-line add">+calibre_web_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+calibre_web_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+calibre_web_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line del">-# THEME</span><span class="diff-line add">+# Theme</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Options can be found at https://github.com/themepark-dev/theme.park</span><span class="diff-line del">-calibre_web_themepark_enabled: false</span><span class="diff-line del">-calibre_web_themepark_theme: &quot;{{ global_themepark_theme }}&quot;</span><span class="diff-line del">-calibre_web_themepark_domain: &quot;{{ global_themepark_domain }}&quot;</span><span class="diff-line add">+calibre_web_role_themepark_enabled: false</span><span class="diff-line add">+calibre_web_role_themepark_theme: &quot;{{ global_themepark_theme }}&quot;</span><span class="diff-line add">+calibre_web_role_themepark_domain: &quot;{{ global_themepark_domain }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-calibre_web_docker_container: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_container: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-calibre_web_docker_image_pull: true</span><span class="diff-line del">-calibre_web_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-calibre_web_docker_image: &quot;lscr.io/linuxserver/calibre-web:{{ calibre_web_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-calibre_web_docker_ports_defaults: []</span><span class="diff-line del">-calibre_web_docker_ports_custom: []</span><span class="diff-line del">-calibre_web_docker_ports: &quot;{{ calibre_web_docker_ports_defaults</span><span class="diff-line del">-                              + calibre_web_docker_ports_custom }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_image_pull: true</span><span class="diff-line add">+calibre_web_role_docker_image_repo: &quot;lscr.io/linuxserver/calibre-web&quot;</span><span class="diff-line add">+calibre_web_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+calibre_web_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;calibre_web&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-calibre_web_docker_envs_default:</span><span class="diff-line add">+calibre_web_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   CACHE_DIR: &quot;/cache/&quot;</span><span class="diff-line context">   USE_CONFIG_DIR: &quot;true&quot;</span><span class="diff-line context">   DOCKER_MODS: linuxserver/mods:universal-calibre</span><span class="diff-line del">-calibre_web_docker_envs_custom: {}</span><span class="diff-line del">-calibre_web_docker_envs_theme:</span><span class="diff-line add">+calibre_web_role_docker_envs_theme:</span><span class="diff-line context">   DOCKER_MODS: &quot;linuxserver/mods:universal-calibre|ghcr.io/themepark-dev/theme.park:calibre-web&quot;</span><span class="diff-line del">-  TP_DOMAIN: &quot;{{ calibre_web_themepark_domain }}&quot;</span><span class="diff-line del">-  TP_THEME: &quot;{{ calibre_web_themepark_theme }}&quot;</span><span class="diff-line del">-calibre_web_docker_envs: &quot;{{ calibre_web_docker_envs_default</span><span class="diff-line del">-                             | combine(calibre_web_docker_envs_custom)</span><span class="diff-line del">-                          if not (calibre_web_themepark_enabled)</span><span class="diff-line del">-                          else calibre_web_docker_envs_default</span><span class="diff-line del">-                             | combine(calibre_web_docker_envs_custom)</span><span class="diff-line del">-                             | combine(calibre_web_docker_envs_theme) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-calibre_web_docker_commands_default: []</span><span class="diff-line del">-calibre_web_docker_commands_custom: []</span><span class="diff-line del">-calibre_web_docker_commands: &quot;{{ calibre_web_docker_commands_default</span><span class="diff-line del">-                                 + calibre_web_docker_commands_custom }}&quot;</span><span class="diff-line add">+  TP_DOMAIN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_themepark_domain&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line add">+  TP_THEME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_themepark_theme&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_envs_custom: {}</span><span class="diff-line add">+calibre_web_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;calibre_web&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_theme&#x27;, role=&#x27;calibre_web&#x27;) if lookup(&#x27;role_var&#x27;, &#x27;_themepark_enabled&#x27;, role=&#x27;calibre_web&#x27;) else {})</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;calibre_web&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-calibre_web_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ calibre_web_paths_location }}:/calibre-web&quot;</span><span class="diff-line del">-  - &quot;{{ calibre_web_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ calibre_web_paths_location }}/cache:/cache&quot;</span><span class="diff-line add">+calibre_web_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;calibre_web&#x27;) }}:/calibre-web&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;calibre_web&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;calibre_web&#x27;) }}/cache:/cache&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Books:/books&quot;</span><span class="diff-line del">-calibre_web_docker_volumes_custom: []</span><span class="diff-line del">-calibre_web_docker_volumes: &quot;{{ calibre_web_docker_volumes_default</span><span class="diff-line del">-                                + calibre_web_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-calibre_web_docker_devices_default: []</span><span class="diff-line del">-calibre_web_docker_devices_custom: []</span><span class="diff-line del">-calibre_web_docker_devices: &quot;{{ calibre_web_docker_devices_default</span><span class="diff-line del">-                                + calibre_web_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-calibre_web_docker_hosts_default: {}</span><span class="diff-line del">-calibre_web_docker_hosts_custom: {}</span><span class="diff-line del">-calibre_web_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(calibre_web_docker_hosts_default)</span><span class="diff-line del">-                              | combine(calibre_web_docker_hosts_custom) }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_volumes_custom: []</span><span class="diff-line add">+calibre_web_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;calibre_web&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Labels</span><span class="diff-line del">-calibre_web_docker_labels_default:</span><span class="diff-line add">+calibre_web_role_docker_labels_default:</span><span class="diff-line context">   traefik.http.middlewares.kobo-sync-headers.headers.customrequestheaders.X-Scheme: &quot;https&quot;</span><span class="diff-line del">-calibre_web_docker_labels_custom: {}</span><span class="diff-line del">-calibre_web_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(calibre_web_docker_labels_default)</span><span class="diff-line del">-                               | combine(calibre_web_docker_labels_custom) }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_labels_custom: {}</span><span class="diff-line add">+calibre_web_role_docker_labels: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_default&#x27;, role=&#x27;calibre_web&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;calibre_web&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-calibre_web_docker_hostname: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_hostname: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-calibre_web_docker_networks_alias: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line del">-calibre_web_docker_networks_default: []</span><span class="diff-line del">-calibre_web_docker_networks_custom: []</span><span class="diff-line del">-calibre_web_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + calibre_web_docker_networks_default</span><span class="diff-line del">-                                 + calibre_web_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-calibre_web_docker_capabilities_default: []</span><span class="diff-line del">-calibre_web_docker_capabilities_custom: []</span><span class="diff-line del">-calibre_web_docker_capabilities: &quot;{{ calibre_web_docker_capabilities_default</span><span class="diff-line del">-                                     + calibre_web_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-calibre_web_docker_security_opts_default: []</span><span class="diff-line del">-calibre_web_docker_security_opts_custom: []</span><span class="diff-line del">-calibre_web_docker_security_opts: &quot;{{ calibre_web_docker_security_opts_default</span><span class="diff-line del">-                                      + calibre_web_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_networks_alias: &quot;{{ calibre_web_name }}&quot;</span><span class="diff-line add">+calibre_web_role_docker_networks_default: []</span><span class="diff-line add">+calibre_web_role_docker_networks_custom: []</span><span class="diff-line add">+calibre_web_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;calibre_web&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;calibre_web&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-calibre_web_docker_restart_policy: unless-stopped</span><span class="diff-line add">+calibre_web_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-calibre_web_docker_state: started</span><span class="diff-line add">+calibre_web_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-81">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/calibre_web/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-82">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/changedetection/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-changedetection_paths_folder: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line del">-changedetection_paths_location: &quot;{{ server_appdata_path }}/{{ changedetection_paths_folder }}&quot;</span><span class="diff-line del">-changedetection_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ changedetection_paths_location }}&quot;</span><span class="diff-line add">+changedetection_role_paths_folder: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line add">+changedetection_role_paths_location: &quot;{{ server_appdata_path }}/{{ changedetection_role_paths_folder }}&quot;</span><span class="diff-line add">+changedetection_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ changedetection_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-changedetection_web_subdomain: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line del">-changedetection_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-changedetection_web_port: &quot;5000&quot;</span><span class="diff-line del">-changedetection_web_url: &quot;{{ &#x27;https://&#x27; + (changedetection_web_subdomain + &#x27;.&#x27; + changedetection_web_domain</span><span class="diff-line del">-                          if (changedetection_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                          else changedetection_web_domain) }}&quot;</span><span class="diff-line add">+changedetection_role_web_subdomain: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line add">+changedetection_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+changedetection_role_web_port: &quot;5000&quot;</span><span class="diff-line add">+changedetection_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;changedetection&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;changedetection&#x27;)</span><span class="diff-line add">+                               if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;changedetection&#x27;) | length &gt; 0)</span><span class="diff-line add">+                               else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;changedetection&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-changedetection_dns_record: &quot;{{ changedetection_web_subdomain }}&quot;</span><span class="diff-line del">-changedetection_dns_zone: &quot;{{ changedetection_web_domain }}&quot;</span><span class="diff-line del">-changedetection_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+changedetection_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line add">+changedetection_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line add">+changedetection_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-changedetection_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-changedetection_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-changedetection_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-changedetection_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-changedetection_traefik_enabled: true</span><span class="diff-line del">-changedetection_traefik_api_enabled: true</span><span class="diff-line del">-changedetection_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+changedetection_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+changedetection_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+changedetection_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+changedetection_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+changedetection_role_traefik_enabled: true</span><span class="diff-line add">+changedetection_role_traefik_api_enabled: true</span><span class="diff-line add">+changedetection_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-changedetection_docker_container: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line add">+changedetection_role_docker_container: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-changedetection_docker_image_pull: true</span><span class="diff-line del">-changedetection_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-changedetection_docker_image: &quot;lscr.io/linuxserver/changedetection.io:{{ changedetection_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-changedetection_docker_ports_defaults: []</span><span class="diff-line del">-changedetection_docker_ports_custom: []</span><span class="diff-line del">-changedetection_docker_ports: &quot;{{ changedetection_docker_ports_defaults</span><span class="diff-line del">-                                  + changedetection_docker_ports_custom }}&quot;</span><span class="diff-line add">+changedetection_role_docker_image_pull: true</span><span class="diff-line add">+changedetection_role_docker_image_repo: &quot;lscr.io/linuxserver/changedetection.io&quot;</span><span class="diff-line add">+changedetection_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+changedetection_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;changedetection&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-changedetection_docker_envs_default:</span><span class="diff-line add">+changedetection_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  BASE_URL: &quot;{{ changedetection_web_url }}&quot;</span><span class="diff-line del">-changedetection_docker_envs_custom: {}</span><span class="diff-line del">-changedetection_docker_envs: &quot;{{ changedetection_docker_envs_default</span><span class="diff-line del">-                                 | combine(changedetection_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-changedetection_docker_commands_default: []</span><span class="diff-line del">-changedetection_docker_commands_custom: []</span><span class="diff-line del">-changedetection_docker_commands: &quot;{{ changedetection_docker_commands_default</span><span class="diff-line del">-                                     + changedetection_docker_commands_custom }}&quot;</span><span class="diff-line add">+  BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line add">+changedetection_role_docker_envs_custom: {}</span><span class="diff-line add">+changedetection_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;changedetection&#x27;)</span><span class="diff-line add">+                                      | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;changedetection&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-changedetection_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ changedetection_paths_location }}:/config&quot;</span><span class="diff-line del">-changedetection_docker_volumes_custom: []</span><span class="diff-line del">-changedetection_docker_volumes: &quot;{{ changedetection_docker_volumes_default</span><span class="diff-line del">-                                    + changedetection_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-changedetection_docker_devices_default: []</span><span class="diff-line del">-changedetection_docker_devices_custom: []</span><span class="diff-line del">-changedetection_docker_devices: &quot;{{ changedetection_docker_devices_default</span><span class="diff-line del">-                                    + changedetection_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-changedetection_docker_hosts_default: {}</span><span class="diff-line del">-changedetection_docker_hosts_custom: {}</span><span class="diff-line del">-changedetection_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                  | combine(changedetection_docker_hosts_default)</span><span class="diff-line del">-                                  | combine(changedetection_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-changedetection_docker_labels_default: {}</span><span class="diff-line del">-changedetection_docker_labels_custom: {}</span><span class="diff-line del">-changedetection_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                   | combine(changedetection_docker_labels_default)</span><span class="diff-line del">-                                   | combine(changedetection_docker_labels_custom) }}&quot;</span><span class="diff-line add">+changedetection_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;changedetection&#x27;) }}:/config&quot;</span><span class="diff-line add">+changedetection_role_docker_volumes_custom: []</span><span class="diff-line add">+changedetection_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;changedetection&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-changedetection_docker_hostname: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line add">+changedetection_role_docker_hostname: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-changedetection_docker_networks_alias: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line del">-changedetection_docker_networks_default: []</span><span class="diff-line del">-changedetection_docker_networks_custom: []</span><span class="diff-line del">-changedetection_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                     + changedetection_docker_networks_default</span><span class="diff-line del">-                                     + changedetection_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-changedetection_docker_capabilities_default: []</span><span class="diff-line del">-changedetection_docker_capabilities_custom: []</span><span class="diff-line del">-changedetection_docker_capabilities: &quot;{{ changedetection_docker_capabilities_default</span><span class="diff-line del">-                                         + changedetection_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-changedetection_docker_security_opts_default: []</span><span class="diff-line del">-changedetection_docker_security_opts_custom: []</span><span class="diff-line del">-changedetection_docker_security_opts: &quot;{{ changedetection_docker_security_opts_default</span><span class="diff-line del">-                                          + changedetection_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+changedetection_role_docker_networks_alias: &quot;{{ changedetection_name }}&quot;</span><span class="diff-line add">+changedetection_role_docker_networks_default: []</span><span class="diff-line add">+changedetection_role_docker_networks_custom: []</span><span class="diff-line add">+changedetection_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                          + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;changedetection&#x27;)</span><span class="diff-line add">+                                          + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;changedetection&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-changedetection_docker_restart_policy: unless-stopped</span><span class="diff-line add">+changedetection_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-changedetection_docker_state: started</span><span class="diff-line add">+changedetection_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-83">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/changedetection/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-84">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cherry/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,133 +17,90 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cherry_paths_folder: &quot;{{ cherry_name }}&quot;</span><span class="diff-line del">-cherry_paths_location: &quot;{{ server_appdata_path }}/{{ cherry_paths_folder }}&quot;</span><span class="diff-line del">-cherry_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ cherry_paths_location }}&quot;</span><span class="diff-line add">+cherry_role_paths_folder: &quot;{{ cherry_name }}&quot;</span><span class="diff-line add">+cherry_role_paths_location: &quot;{{ server_appdata_path }}/{{ cherry_role_paths_folder }}&quot;</span><span class="diff-line add">+cherry_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ cherry_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cherry_web_subdomain: &quot;{{ cherry_name }}&quot;</span><span class="diff-line del">-cherry_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-cherry_web_port: &quot;8000&quot;</span><span class="diff-line del">-charry_web_url: &quot;{{ &#x27;https://&#x27; + (charry_web_subdomain + &#x27;.&#x27; + charry_web_domain</span><span class="diff-line del">-                 if (charry_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else charry_web_domain) }}&quot;</span><span class="diff-line add">+cherry_role_web_subdomain: &quot;{{ cherry_name }}&quot;</span><span class="diff-line add">+cherry_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+cherry_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+cherry_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cherry&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cherry&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cherry&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cherry&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cherry_dns_record: &quot;{{ cherry_web_subdomain }}&quot;</span><span class="diff-line del">-cherry_dns_zone: &quot;{{ cherry_web_domain }}&quot;</span><span class="diff-line del">-cherry_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+cherry_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cherry&#x27;) }}&quot;</span><span class="diff-line add">+cherry_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cherry&#x27;) }}&quot;</span><span class="diff-line add">+cherry_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cherry_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-cherry_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-cherry_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-cherry_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-cherry_traefik_enabled: true</span><span class="diff-line del">-cherry_traefik_api_enabled: true</span><span class="diff-line del">-cherry_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+cherry_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+cherry_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+cherry_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+cherry_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+cherry_role_traefik_enabled: true</span><span class="diff-line add">+cherry_role_traefik_api_enabled: true</span><span class="diff-line add">+cherry_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-cherry_docker_container: &quot;{{ cherry_name }}&quot;</span><span class="diff-line add">+cherry_role_docker_container: &quot;{{ cherry_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-cherry_docker_image_pull: true</span><span class="diff-line del">-cherry_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-cherry_docker_image: &quot;haishanh/cherry:{{ cherry_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-cherry_docker_ports_defaults: []</span><span class="diff-line del">-cherry_docker_ports_custom: []</span><span class="diff-line del">-cherry_docker_ports: &quot;{{ cherry_docker_ports_defaults</span><span class="diff-line del">-                         + cherry_docker_ports_custom }}&quot;</span><span class="diff-line add">+cherry_role_docker_image_pull: true</span><span class="diff-line add">+cherry_role_docker_image_repo: &quot;haishanh/cherry&quot;</span><span class="diff-line add">+cherry_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+cherry_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;cherry&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;cherry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-cherry_docker_envs_default:</span><span class="diff-line add">+cherry_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   JWT_SECRET: &quot;{{ cherry_secret_key.stdout }}&quot;</span><span class="diff-line context">   ENABLE_HTTP_REMOTE_USER: &quot;1&quot;</span><span class="diff-line del">-cherry_docker_envs_custom: {}</span><span class="diff-line del">-cherry_docker_envs: &quot;{{ cherry_docker_envs_default</span><span class="diff-line del">-                        | combine(cherry_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-cherry_docker_commands_default: []</span><span class="diff-line del">-cherry_docker_commands_custom: []</span><span class="diff-line del">-cherry_docker_commands: &quot;{{ cherry_docker_commands_default</span><span class="diff-line del">-                            + cherry_docker_commands_custom }}&quot;</span><span class="diff-line add">+cherry_role_docker_envs_custom: {}</span><span class="diff-line add">+cherry_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;cherry&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;cherry&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-cherry_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ cherry_paths_location }}:/data&quot;</span><span class="diff-line del">-cherry_docker_volumes_custom: []</span><span class="diff-line del">-cherry_docker_volumes: &quot;{{ cherry_docker_volumes_default</span><span class="diff-line del">-                           + cherry_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-cherry_docker_devices_default: []</span><span class="diff-line del">-cherry_docker_devices_custom: []</span><span class="diff-line del">-cherry_docker_devices: &quot;{{ cherry_docker_devices_default</span><span class="diff-line del">-                           + cherry_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-cherry_docker_hosts_default: {}</span><span class="diff-line del">-cherry_docker_hosts_custom: {}</span><span class="diff-line del">-cherry_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(cherry_docker_hosts_default)</span><span class="diff-line del">-                         | combine(cherry_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-cherry_docker_labels_default: {}</span><span class="diff-line del">-cherry_docker_labels_custom: {}</span><span class="diff-line del">-cherry_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(cherry_docker_labels_default)</span><span class="diff-line del">-                          | combine(cherry_docker_labels_custom) }}&quot;</span><span class="diff-line add">+cherry_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;cherry&#x27;) }}:/data&quot;</span><span class="diff-line add">+cherry_role_docker_volumes_custom: []</span><span class="diff-line add">+cherry_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;cherry&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;cherry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-cherry_docker_hostname: &quot;{{ cherry_name }}&quot;</span><span class="diff-line add">+cherry_role_docker_hostname: &quot;{{ cherry_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-cherry_docker_networks_alias: &quot;{{ cherry_name }}&quot;</span><span class="diff-line del">-cherry_docker_networks_default: []</span><span class="diff-line del">-cherry_docker_networks_custom: []</span><span class="diff-line del">-cherry_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + cherry_docker_networks_default</span><span class="diff-line del">-                            + cherry_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-cherry_docker_capabilities_default: []</span><span class="diff-line del">-cherry_docker_capabilities_custom: []</span><span class="diff-line del">-cherry_docker_capabilities: &quot;{{ cherry_docker_capabilities_default</span><span class="diff-line del">-                                + cherry_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-cherry_docker_security_opts_default: []</span><span class="diff-line del">-cherry_docker_security_opts_custom: []</span><span class="diff-line del">-cherry_docker_security_opts: &quot;{{ cherry_docker_security_opts_default</span><span class="diff-line del">-                                 + cherry_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+cherry_role_docker_networks_alias: &quot;{{ cherry_name }}&quot;</span><span class="diff-line add">+cherry_role_docker_networks_default: []</span><span class="diff-line add">+cherry_role_docker_networks_custom: []</span><span class="diff-line add">+cherry_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;cherry&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;cherry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-cherry_docker_restart_policy: unless-stopped</span><span class="diff-line add">+cherry_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-cherry_docker_state: started</span><span class="diff-line add">+cherry_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Healthcheck</span><span class="diff-line del">-cherry_docker_healthcheck:</span><span class="diff-line add">+cherry_role_docker_healthcheck:</span><span class="diff-line context">   test: [&quot;NONE&quot;]</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-85">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cherry/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -15,9 +15,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-86">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/chrome/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,102 +17,58 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-chrome_paths_folder: &quot;{{ chrome_name }}&quot;</span><span class="diff-line del">-chrome_paths_location: &quot;{{ server_appdata_path }}/{{ chrome_paths_folder }}&quot;</span><span class="diff-line del">-chrome_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ chrome_paths_location }}&quot;</span><span class="diff-line add">+chrome_role_paths_folder: &quot;{{ chrome_name }}&quot;</span><span class="diff-line add">+chrome_role_paths_location: &quot;{{ server_appdata_path }}/{{ chrome_role_paths_folder }}&quot;</span><span class="diff-line add">+chrome_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ chrome_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-chrome_docker_container: &quot;{{ chrome_name }}&quot;</span><span class="diff-line add">+chrome_role_docker_container: &quot;{{ chrome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-chrome_docker_image_pull: true</span><span class="diff-line del">-chrome_docker_image: &quot;gcr.io/zenika-hub/alpine-chrome&quot;</span><span class="diff-line del">-chrome_docker_image_tag: &quot;123&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-chrome_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;9222:9222&quot;</span><span class="diff-line del">-chrome_docker_ports_custom: []</span><span class="diff-line del">-chrome_docker_ports: &quot;{{ chrome_docker_ports_defaults</span><span class="diff-line del">-                          + chrome_docker_ports_custom }}&quot;</span><span class="diff-line add">+chrome_role_docker_image_pull: true</span><span class="diff-line add">+chrome_role_docker_image_repo: &quot;gcr.io/zenika-hub/alpine-chrome&quot;</span><span class="diff-line add">+chrome_role_docker_image_tag: &quot;124&quot;</span><span class="diff-line add">+chrome_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;chrome&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;chrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-chrome_docker_envs_default:</span><span class="diff-line add">+chrome_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-chrome_docker_envs_custom: {}</span><span class="diff-line del">-chrome_docker_envs: &quot;{{ chrome_docker_envs_default</span><span class="diff-line del">-                         | combine(chrome_docker_envs_custom) }}&quot;</span><span class="diff-line add">+chrome_role_docker_envs_custom: {}</span><span class="diff-line add">+chrome_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;chrome&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;chrome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Commands</span><span class="diff-line del">-chrome_docker_commands_default:</span><span class="diff-line add">+chrome_role_docker_commands_default:</span><span class="diff-line context">   - &quot;--no-sandbox&quot;</span><span class="diff-line context">   - &quot;--disable-gpu&quot;</span><span class="diff-line context">   - &quot;--disable-dev-shm-usage&quot;</span><span class="diff-line context">   - &quot;--remote-debugging-address=0.0.0.0&quot;</span><span class="diff-line context">   - &quot;--remote-debugging-port=9222&quot;</span><span class="diff-line context">   - &quot;--hide-scrollbars&quot;</span><span class="diff-line del">-chrome_docker_commands_custom: []</span><span class="diff-line del">-chrome_docker_commands: &quot;{{ chrome_docker_commands_default</span><span class="diff-line del">-                             + chrome_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-chrome_docker_volumes_default: []</span><span class="diff-line del">-chrome_docker_volumes_custom: []</span><span class="diff-line del">-chrome_docker_volumes: &quot;{{ chrome_docker_volumes_default</span><span class="diff-line del">-                            + chrome_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-chrome_docker_devices_default: []</span><span class="diff-line del">-chrome_docker_devices_custom: []</span><span class="diff-line del">-chrome_docker_devices: &quot;{{ chrome_docker_devices_default</span><span class="diff-line del">-                            + chrome_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-chrome_docker_hosts_default: {}</span><span class="diff-line del">-chrome_docker_hosts_custom: {}</span><span class="diff-line del">-chrome_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(chrome_docker_hosts_default)</span><span class="diff-line del">-                          | combine(chrome_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-chrome_docker_labels_default: {}</span><span class="diff-line del">-chrome_docker_labels_custom: {}</span><span class="diff-line del">-chrome_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(chrome_docker_labels_default)</span><span class="diff-line del">-                           | combine(chrome_docker_labels_custom) }}&quot;</span><span class="diff-line add">+chrome_role_docker_commands_custom: []</span><span class="diff-line add">+chrome_role_docker_commands: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_default&#x27;, role=&#x27;chrome&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_custom&#x27;, role=&#x27;chrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-chrome_docker_hostname: &quot;{{ chrome_name }}&quot;</span><span class="diff-line add">+chrome_role_docker_hostname: &quot;{{ chrome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-chrome_docker_networks_alias: &quot;{{ chrome_name }}&quot;</span><span class="diff-line del">-chrome_docker_networks_default: []</span><span class="diff-line del">-chrome_docker_networks_custom: []</span><span class="diff-line del">-chrome_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + chrome_docker_networks_default</span><span class="diff-line del">-                             + chrome_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-chrome_docker_capabilities_default: []</span><span class="diff-line del">-chrome_docker_capabilities_custom: []</span><span class="diff-line del">-chrome_docker_capabilities: &quot;{{ chrome_docker_capabilities_default</span><span class="diff-line del">-                                 + chrome_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-chrome_docker_security_opts_default: []</span><span class="diff-line del">-chrome_docker_security_opts_custom: []</span><span class="diff-line del">-chrome_docker_security_opts: &quot;{{ chrome_docker_security_opts_default</span><span class="diff-line del">-                                  + chrome_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+chrome_role_docker_networks_alias: &quot;{{ chrome_name }}&quot;</span><span class="diff-line add">+chrome_role_docker_networks_default: []</span><span class="diff-line add">+chrome_role_docker_networks_custom: []</span><span class="diff-line add">+chrome_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;chrome&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;chrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-chrome_docker_restart_policy: unless-stopped</span><span class="diff-line add">+chrome_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-chrome_docker_state: started</span><span class="diff-line add">+chrome_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-87">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,23 +17,22 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cockpit_traefik_enabled: true</span><span class="diff-line del">-cockpit_vm_enabled: false</span><span class="diff-line del">-cockpit_service_after: docker.service</span><span class="diff-line del">-put_cockpit_dpkg_into_hold: true</span><span class="diff-line del">-put_cockpit_machines_dpkg_into_hold: true</span><span class="diff-line add">+cockpit_role_vm_enabled: false</span><span class="diff-line add">+cockpit_role_service_after: docker.service</span><span class="diff-line add">+cockpit_role_put_dpkg_into_hold: true</span><span class="diff-line add">+cockpit_role_put_machines_dpkg_into_hold: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cockpit_paths_socket_location: &quot;/etc/systemd/system/cockpit.socket.d/listen.conf&quot;</span><span class="diff-line del">-cockpit_paths_socket_override_location: &quot;/etc/systemd/system/cockpit.socket.d/override.conf&quot;</span><span class="diff-line del">-cockpit_paths_config_location: &quot;/etc/cockpit/cockpit.conf&quot;</span><span class="diff-line del">-cockpit_paths_traefik_location: &quot;/opt/traefik/cockpit.yml&quot;</span><span class="diff-line del">-cockpit_paths_service_location: &quot;/lib/systemd/system/cockpit.service&quot;</span><span class="diff-line del">-cockpit_paths_override_location: &quot;/etc/systemd/system/cockpit.service.d/override.conf&quot;</span><span class="diff-line del">-cockpit_paths_folders_list:</span><span class="diff-line add">+cockpit_role_paths_socket_location: &quot;/etc/systemd/system/cockpit.socket.d/listen.conf&quot;</span><span class="diff-line add">+cockpit_role_paths_socket_override_location: &quot;/etc/systemd/system/cockpit.socket.d/override.conf&quot;</span><span class="diff-line add">+cockpit_role_paths_config_location: &quot;/etc/cockpit/cockpit.conf&quot;</span><span class="diff-line add">+cockpit_role_paths_traefik_location: &quot;{{ server_appdata_path }}/traefik/cockpit.yml&quot;</span><span class="diff-line add">+cockpit_role_paths_service_location: &quot;/lib/systemd/system/cockpit.service&quot;</span><span class="diff-line add">+cockpit_role_paths_override_location: &quot;/etc/systemd/system/cockpit.service.d/override.conf&quot;</span><span class="diff-line add">+cockpit_role_paths_folders_list:</span><span class="diff-line context">   - &quot;/etc/systemd/system/cockpit.socket.d&quot;</span><span class="diff-line context">   - &quot;/etc/systemd/system/cockpit.service.d&quot;</span><span class="diff-line context">   - &quot;/etc/cockpit&quot;</span><span class="diff-line hunk">@@ -42,27 +41,28 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cockpit_web_subdomain: &quot;{{ cockpit_name }}&quot;</span><span class="diff-line del">-cockpit_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-cockpit_web_port: &quot;1337&quot;</span><span class="diff-line del">-cockpit_web_url: &quot;{{ &#x27;https://&#x27; + (cockpit_web_subdomain + &#x27;.&#x27; + cockpit_web_domain</span><span class="diff-line del">-                  if (cockpit_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else cockpit_web_domain) }}&quot;</span><span class="diff-line add">+cockpit_role_web_subdomain: &quot;{{ cockpit_name }}&quot;</span><span class="diff-line add">+cockpit_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+cockpit_role_web_port: &quot;1337&quot;</span><span class="diff-line add">+cockpit_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cockpit&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cockpit&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cockpit&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cockpit_dns_record: &quot;{{ cockpit_web_subdomain }}&quot;</span><span class="diff-line del">-cockpit_dns_zone: &quot;{{ cockpit_web_domain }}&quot;</span><span class="diff-line del">-cockpit_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+cockpit_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line add">+cockpit_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line add">+cockpit_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-cockpit_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-cockpit_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-cockpit_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-cockpit_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-cockpit_traefik_api_enabled: false</span><span class="diff-line add">+cockpit_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+cockpit_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+cockpit_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+cockpit_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+cockpit_role_traefik_enabled: true</span><span class="diff-line add">+cockpit_role_traefik_api_enabled: false</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-88">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,14 +10,14 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line del">-  when: cockpit_traefik_enabled</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_traefik_enabled&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if &#x27;cockpit_socket&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ cockpit_paths_socket_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_socket_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">   register: cockpit_socket</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Stop existing &#x27;cockpit_socket&#x27;</span><span class="diff-line hunk">@@ -28,7 +28,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if &#x27;cockpit_service&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ cockpit_paths_service_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_service_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">   register: cockpit_service</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Stop existing &#x27;cockpit_service&#x27;</span><span class="diff-line hunk">@@ -39,14 +39,14 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if &#x27;cockpit_traefik&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ cockpit_paths_traefik_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_traefik_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">   register: cockpit_traefik</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove cockpit_traefik template</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ cockpit_paths_traefik_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_traefik_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     state: absent</span><span class="diff-line del">-  when: not cockpit_traefik_enabled</span><span class="diff-line add">+  when: (not lookup(&#x27;role_var&#x27;, &#x27;_traefik_enabled&#x27;, role=&#x27;cockpit&#x27;))</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line hunk">@@ -54,12 +54,12 @@</span><span class="diff-line context"> - name: Import &#x27;cockpit_traefik&#x27; Traefik Template</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: cockpit.yml.j2</span><span class="diff-line del">-    dest: &quot;{{ cockpit_paths_traefik_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_traefik_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     mode: &quot;664&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     force: true</span><span class="diff-line del">-  when: cockpit_traefik_enabled</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_traefik_enabled&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Import Systemd Tasks&quot;</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;subtasks/systemd.yml&quot;</span><span class="diff-line hunk">@@ -69,10 +69,10 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Import VM Tasks&quot;</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;subtasks/vm.yml&quot;</span><span class="diff-line del">-  when: cockpit_vm_enabled</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_vm_enabled&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Systemd services</span><span class="diff-line del">-  when: not continuous_integration</span><span class="diff-line add">+  when: (not continuous_integration)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Reload systemd</span><span class="diff-line context">       ansible.builtin.systemd_service:</span><span class="diff-line hunk">@@ -82,10 +82,10 @@</span><span class="diff-line context">       ansible.builtin.systemd:</span><span class="diff-line context">         name: cockpit.socket</span><span class="diff-line context">         state: started</span><span class="diff-line del">-        enabled: yes</span><span class="diff-line add">+        enabled: true</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Load &#x27;cockpit_service&#x27;</span><span class="diff-line context">       ansible.builtin.systemd:</span><span class="diff-line context">         name: cockpit.service</span><span class="diff-line context">         state: started</span><span class="diff-line del">-        enabled: yes</span><span class="diff-line add">+        enabled: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-89">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/tasks/subtasks/package.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,19 +14,19 @@</span><span class="diff-line context">   ansible.builtin.dpkg_selections:</span><span class="diff-line context">     name: &quot;cockpit&quot;</span><span class="diff-line context">     selection: install</span><span class="diff-line del">-  when: (&quot;cockpit&quot; in ansible_facts.packages)</span><span class="diff-line add">+  when: (&quot;cockpit&quot; in ansible_facts[&#x27;packages&#x27;])</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Package | Install &#x27;cockpit&#x27; from backports</span><span class="diff-line context">   ansible.builtin.apt:</span><span class="diff-line context">     name: &quot;cockpit&quot;</span><span class="diff-line del">-    default_release: &quot;{{ ansible_distribution_release }}-backports&quot;</span><span class="diff-line add">+    default_release: &quot;{{ ansible_facts[&#x27;distribution_release&#x27;] }}-backports&quot;</span><span class="diff-line context">     state: latest</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Package | Put &#x27;cockpit&#x27; into hold</span><span class="diff-line context">   ansible.builtin.dpkg_selections:</span><span class="diff-line context">     name: &quot;cockpit&quot;</span><span class="diff-line context">     selection: hold</span><span class="diff-line del">-  when: put_cockpit_dpkg_into_hold</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_put_dpkg_into_hold&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Package | Get &#x27;cockpit&#x27; version</span><span class="diff-line context">   ansible.builtin.command: &quot;cockpit-bridge --version&quot;</span><span class="diff-line hunk">@@ -37,4 +37,4 @@</span><span class="diff-line context"> - name: Package | Display &#x27;cockpit&#x27; version</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line context">     msg: &quot;Cockpit version {{ cockpit_version.stdout.split()[1] }} installed.&quot;</span><span class="diff-line del">-  when: cockpit_version is defined and cockpit_version.stdout is defined</span><span class="diff-line add">+  when: (cockpit_version is defined) and (cockpit_version.stdout is defined)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-90">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/tasks/subtasks/systemd.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,7 +10,7 @@</span><span class="diff-line context"> - name: System | Import &#x27;cockpit_config&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: cockpit.conf.j2</span><span class="diff-line del">-    dest: &quot;{{ cockpit_paths_config_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     owner: root</span><span class="diff-line context">     group: root</span><span class="diff-line hunk">@@ -19,7 +19,7 @@</span><span class="diff-line context"> - name: System | Import &#x27;cockpit_socket&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: listen.conf.j2</span><span class="diff-line del">-    dest: &quot;{{ cockpit_paths_socket_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_socket_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     owner: root</span><span class="diff-line context">     group: root</span><span class="diff-line hunk">@@ -28,7 +28,7 @@</span><span class="diff-line context"> - name: System | Import &#x27;socket_override&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: override.conf.j2</span><span class="diff-line del">-    dest: &quot;{{ cockpit_paths_socket_override_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_socket_override_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     owner: root</span><span class="diff-line context">     group: root</span><span class="diff-line hunk">@@ -37,7 +37,7 @@</span><span class="diff-line context"> - name: System | Import &#x27;service_override&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: override.conf.j2</span><span class="diff-line del">-    dest: &quot;{{ cockpit_paths_override_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_override_location&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     owner: root</span><span class="diff-line context">     group: root</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-91">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/tasks/subtasks/vm.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,19 +14,19 @@</span><span class="diff-line context">   ansible.builtin.dpkg_selections:</span><span class="diff-line context">     name: &quot;cockpit-machines&quot;</span><span class="diff-line context">     selection: install</span><span class="diff-line del">-  when: (&quot;cockpit-machines&quot; in ansible_facts.packages)</span><span class="diff-line add">+  when: (&quot;cockpit-machines&quot; in ansible_facts[&#x27;packages&#x27;])</span><span class="diff-line context"> </span><span class="diff-line context"> - name: VM | Install &#x27;cockpit-machines&#x27; from backports</span><span class="diff-line context">   ansible.builtin.apt:</span><span class="diff-line context">     name: &quot;cockpit-machines&quot;</span><span class="diff-line del">-    default_release: &quot;{{ ansible_distribution_release }}-backports&quot;</span><span class="diff-line add">+    default_release: &quot;{{ ansible_facts[&#x27;distribution_release&#x27;] }}-backports&quot;</span><span class="diff-line context">     state: latest</span><span class="diff-line context"> </span><span class="diff-line context"> - name: VM | Put &#x27;cockpit-machines&#x27; into hold</span><span class="diff-line context">   ansible.builtin.dpkg_selections:</span><span class="diff-line context">     name: &quot;cockpit-machines&quot;</span><span class="diff-line context">     selection: hold</span><span class="diff-line del">-  when: put_cockpit_machines_dpkg_into_hold</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_put_machines_dpkg_into_hold&#x27;, role=&#x27;cockpit&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: VM | Install necessary packages for Cockpit Machines</span><span class="diff-line context">   ansible.builtin.package:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-92">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/templates/cockpit.conf.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,5 +1,5 @@</span><span class="diff-line context"> [WebService]</span><span class="diff-line del">-Origins = {{ cockpit_web_url }}</span><span class="diff-line add">+Origins = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;cockpit&#x27;) }}</span><span class="diff-line context"> ProtocolHeader = X-Forwarded-Proto</span><span class="diff-line context"> ForwardedForHeader = X-Forwarded-For</span><span class="diff-line context"> AllowUnencrypted = true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-93">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/templates/cockpit.yml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,10 +16,10 @@</span><span class="diff-line context">       service: &quot;{{ cockpit_name }}&quot;</span><span class="diff-line context">       tls:</span><span class="diff-line context">         options: securetls@file</span><span class="diff-line del">-        certResolver: {{ cockpit_traefik_certresolver }}</span><span class="diff-line add">+        certResolver: {{ lookup(&#x27;role_var&#x27;, &#x27;_traefik_certresolver&#x27;, role=&#x27;cockpit&#x27;) }}</span><span class="diff-line context"> </span><span class="diff-line context">   services:</span><span class="diff-line context">     {{ cockpit_name }}:</span><span class="diff-line context">       loadBalancer:</span><span class="diff-line context">         servers:</span><span class="diff-line del">-          - url: &quot;http://172.19.0.1:{{ cockpit_web_port }}&quot;</span><span class="diff-line add">+          - url: &quot;http://172.19.0.1:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;cockpit&#x27;) }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-94">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/templates/listen.conf.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,4 +1,4 @@</span><span class="diff-line context"> [Socket]</span><span class="diff-line context"> ListenStream=</span><span class="diff-line del">-ListenStream=172.19.0.1:{{ cockpit_web_port }}</span><span class="diff-line add">+ListenStream=172.19.0.1:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;cockpit&#x27;) }}</span><span class="diff-line context"> FreeBind=yes</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-95">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/cockpit/templates/override.conf.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,5 +9,5 @@</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> </span><span class="diff-line context"> [Unit]</span><span class="diff-line del">-After={{ cockpit_service_after }}</span><span class="diff-line del">-Requires={{ cockpit_service_after }}</span><span class="diff-line add">+After={{ lookup(&#x27;role_var&#x27;, &#x27;_service_after&#x27;, role=&#x27;cockpit&#x27;) }}</span><span class="diff-line add">+Requires={{ lookup(&#x27;role_var&#x27;, &#x27;_service_after&#x27;, role=&#x27;cockpit&#x27;) }}</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-96">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/code_server/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,135 +17,92 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-code_server_paths_folder: &quot;{{ code_server_name }}&quot;</span><span class="diff-line del">-code_server_paths_location: &quot;{{ server_appdata_path }}/{{ code_server_paths_folder }}&quot;</span><span class="diff-line del">-code_server_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/project&quot;</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/.config&quot;</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/.local&quot;</span><span class="diff-line add">+code_server_role_paths_folder: &quot;{{ code_server_name }}&quot;</span><span class="diff-line add">+code_server_role_paths_location: &quot;{{ server_appdata_path }}/{{ code_server_role_paths_folder }}&quot;</span><span class="diff-line add">+code_server_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ code_server_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ code_server_role_paths_location }}/project&quot;</span><span class="diff-line add">+  - &quot;{{ code_server_role_paths_location }}/.config&quot;</span><span class="diff-line add">+  - &quot;{{ code_server_role_paths_location }}/.local&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-code_server_web_subdomain: &quot;{{ code_server_name }}&quot;</span><span class="diff-line del">-code_server_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-code_server_web_port: &quot;8080&quot;</span><span class="diff-line del">-code_server_web_url: &quot;{{ &#x27;https://&#x27; + (code_server_web_subdomain + &#x27;.&#x27; + code_server_web_domain</span><span class="diff-line del">-                      if (code_server_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else code_server_web_domain) }}&quot;</span><span class="diff-line add">+code_server_role_web_subdomain: &quot;{{ code_server_name }}&quot;</span><span class="diff-line add">+code_server_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+code_server_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+code_server_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;code_server&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;code_server&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;code_server&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;code_server&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-code_server_dns_record: &quot;{{ code_server_web_subdomain }}&quot;</span><span class="diff-line del">-code_server_dns_zone: &quot;{{ code_server_web_domain }}&quot;</span><span class="diff-line del">-code_server_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+code_server_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line add">+code_server_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line add">+code_server_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-code_server_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-code_server_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-code_server_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-code_server_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-code_server_traefik_enabled: true</span><span class="diff-line add">+code_server_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+code_server_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+code_server_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+code_server_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+code_server_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-code_server_docker_container: &quot;{{ code_server_name }}&quot;</span><span class="diff-line add">+code_server_role_docker_container: &quot;{{ code_server_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-code_server_docker_image_pull: true</span><span class="diff-line del">-code_server_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-code_server_docker_image: &quot;codercom/code-server:{{ code_server_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-code_server_docker_ports_defaults: []</span><span class="diff-line del">-code_server_docker_ports_custom: []</span><span class="diff-line del">-code_server_docker_ports: &quot;{{ code_server_docker_ports_defaults</span><span class="diff-line del">-                              + code_server_docker_ports_custom }}&quot;</span><span class="diff-line add">+code_server_role_docker_image_pull: true</span><span class="diff-line add">+code_server_role_docker_image_repo: &quot;codercom/code-server&quot;</span><span class="diff-line add">+code_server_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+code_server_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;code_server&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-code_server_docker_envs_default:</span><span class="diff-line add">+code_server_role_docker_envs_default:</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   DOCKER_USER: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-code_server_docker_envs_custom: {}</span><span class="diff-line del">-code_server_docker_envs: &quot;{{ code_server_docker_envs_default</span><span class="diff-line del">-                             | combine(code_server_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-code_server_docker_commands_default: []</span><span class="diff-line del">-code_server_docker_commands_custom: []</span><span class="diff-line del">-code_server_docker_commands: &quot;{{ code_server_docker_commands_default</span><span class="diff-line del">-                                 + code_server_docker_commands_custom }}&quot;</span><span class="diff-line add">+code_server_role_docker_envs_custom: {}</span><span class="diff-line add">+code_server_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;code_server&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;code_server&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-code_server_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/project:/home/coder/project&quot;</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/.config:/home/coder/.config&quot;</span><span class="diff-line del">-  - &quot;{{ code_server_paths_location }}/.local:/home/coder/.local&quot;</span><span class="diff-line add">+code_server_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}/project:/home/coder/project&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}/.config:/home/coder/.config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}/.local:/home/coder/.local&quot;</span><span class="diff-line context">   - &quot;{{ server_appdata_path }}:/host_opt&quot;</span><span class="diff-line del">-code_server_docker_volumes_custom: []</span><span class="diff-line del">-code_server_docker_volumes: &quot;{{ code_server_docker_volumes_default</span><span class="diff-line del">-                                + code_server_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-code_server_docker_devices_default: []</span><span class="diff-line del">-code_server_docker_devices_custom: []</span><span class="diff-line del">-code_server_docker_devices: &quot;{{ code_server_docker_devices_default</span><span class="diff-line del">-                                + code_server_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-code_server_docker_hosts_default: {}</span><span class="diff-line del">-code_server_docker_hosts_custom: {}</span><span class="diff-line del">-code_server_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(code_server_docker_hosts_default)</span><span class="diff-line del">-                              | combine(code_server_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-code_server_docker_labels_default: {}</span><span class="diff-line del">-code_server_docker_labels_custom: {}</span><span class="diff-line del">-code_server_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(code_server_docker_labels_default)</span><span class="diff-line del">-                               | combine(code_server_docker_labels_custom) }}&quot;</span><span class="diff-line add">+code_server_role_docker_volumes_custom: []</span><span class="diff-line add">+code_server_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;code_server&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-code_server_docker_hostname: &quot;{{ code_server_name }}&quot;</span><span class="diff-line add">+code_server_role_docker_hostname: &quot;{{ code_server_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-code_server_docker_networks_alias: &quot;{{ code_server_name }}&quot;</span><span class="diff-line del">-code_server_docker_networks_default: []</span><span class="diff-line del">-code_server_docker_networks_custom: []</span><span class="diff-line del">-code_server_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + code_server_docker_networks_default</span><span class="diff-line del">-                                 + code_server_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-code_server_docker_capabilities_default: []</span><span class="diff-line del">-code_server_docker_capabilities_custom: []</span><span class="diff-line del">-code_server_docker_capabilities: &quot;{{ code_server_docker_capabilities_default</span><span class="diff-line del">-                                     + code_server_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-code_server_docker_security_opts_default: []</span><span class="diff-line del">-code_server_docker_security_opts_custom: []</span><span class="diff-line del">-code_server_docker_security_opts: &quot;{{ code_server_docker_security_opts_default</span><span class="diff-line del">-                                      + code_server_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+code_server_role_docker_networks_alias: &quot;{{ code_server_name }}&quot;</span><span class="diff-line add">+code_server_role_docker_networks_default: []</span><span class="diff-line add">+code_server_role_docker_networks_custom: []</span><span class="diff-line add">+code_server_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;code_server&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-code_server_docker_restart_policy: unless-stopped</span><span class="diff-line add">+code_server_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-code_server_docker_state: started</span><span class="diff-line add">+code_server_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-code_server_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+code_server_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-97">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/code_server/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,9 +14,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-98">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/code_server/tasks/subtasks/legacy.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,24 +7,24 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Legacy | Check if &#x27;/opt/coder&#x27; folder exists</span><span class="diff-line add">+- name: Legacy | Check if &#x27;{{ server_appdata_path }}/coder&#x27; folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/coder&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/coder&quot;</span><span class="diff-line context">   register: code_server_oldfolder</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Legacy | Check if {{ code_server_paths_location }} folder exists</span><span class="diff-line add">+- name: Legacy | Check if {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }} folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ code_server_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context">   register: code_server_newfolder</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Fail when &#x27;/opt/coder&#x27; does not exist&quot;</span><span class="diff-line add">+- name: &quot;Legacy | Fail when &#x27;{{ server_appdata_path }}/coder&#x27; does not exist&quot;</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;A migration has been attempted, but the /opt/coder folder is missing. If you have already run the migration once, you don&#x27;t need to pass the -e &#x27;code_server_migrate_coder=true&#x27; argument anymore. If this is your first time running the migration but you&#x27;re using a custom folder, move the folder manually to &#x27;/opt/code-server&#x27;, remove the old &#x27;coder&#x27; subdomain then run the tag normally.&quot;</span><span class="diff-line add">+    msg: &quot;A migration has been attempted, but the {{ server_appdata_path }}/coder folder is missing. If you have already run the migration once, you don&#x27;t need to pass the -e &#x27;code_server_migrate_coder=true&#x27; argument anymore. If this is your first time running the migration but you&#x27;re using a custom folder, move the folder manually to &#x27;{{ server_appdata_path }}/code-server&#x27;, remove the old &#x27;coder&#x27; subdomain then run the tag normally.&quot;</span><span class="diff-line context">   when: (not code_server_oldfolder.stat.exists)</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Fail when {{ code_server_paths_location }} already exists&quot;</span><span class="diff-line add">+- name: &quot;Legacy | Fail when {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }} already exists&quot;</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;A migration has been attempted, but the {{ code_server_paths_location }} folder already exists. If you have already run the migration once, you don&#x27;t need to pass the -e &#x27;code_server_migrate_coder=true&#x27; argument anymore. If this is your first time running the migration, then you have created a folder manually or have already a container using the {{ code_server_paths_location }} folder. In order for the migration to actually run, an &#x27;/opt/coder&#x27; folder must exists, while {{ code_server_paths_location }} must not.&quot;</span><span class="diff-line add">+    msg: &quot;A migration has been attempted, but the {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }} folder already exists. If you have already run the migration once, you don&#x27;t need to pass the -e &#x27;code_server_migrate_coder=true&#x27; argument anymore. If this is your first time running the migration, then you have created a folder manually or have already a container using the {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }} folder. In order for the migration to actually run, an &#x27;{{ server_appdata_path }}/coder&#x27; folder must exists, while {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }} must not.&quot;</span><span class="diff-line context">   when: (code_server_newfolder.stat.exists)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Legacy | Delete old DNS record</span><span class="diff-line hunk">@@ -40,11 +40,11 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Legacy | Move opt folder &#x27;coder&#x27; to &#x27;code-server&#x27;</span><span class="diff-line context">   ansible.builtin.shell: |</span><span class="diff-line del">-    mv /opt/coder &quot;{{ code_server_paths_location }}&quot;</span><span class="diff-line add">+    mv {{ server_appdata_path }}/coder &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Legacy | Set permissions on &#x27;code_server&#x27;</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ code_server_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;code_server&#x27;) }}&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-99">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/codex/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,5 +1,5 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line del">-# Title:            Sandbox: Codex            | Default Variables        #</span><span class="diff-line add">+# Title:            Sandbox: Codex | Default Variables                   #</span><span class="diff-line context"> # Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line context"> # --                                                                     #</span><span class="diff-line hunk">@@ -17,130 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-codex_paths_folder: &quot;{{ codex_name }}&quot;</span><span class="diff-line del">-codex_paths_location: &quot;{{ server_appdata_path }}/{{ codex_paths_folder }}&quot;</span><span class="diff-line del">-codex_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ codex_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ codex_paths_location }}/config&quot;</span><span class="diff-line add">+codex_role_paths_folder: &quot;{{ codex_name }}&quot;</span><span class="diff-line add">+codex_role_paths_location: &quot;{{ server_appdata_path }}/{{ codex_role_paths_folder }}&quot;</span><span class="diff-line add">+codex_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ codex_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ codex_role_paths_location }}/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-codex_web_subdomain: &quot;{{ codex_name }}&quot;</span><span class="diff-line del">-codex_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-codex_web_port: &quot;9810&quot;</span><span class="diff-line del">-codex_web_url: &quot;{{ &#x27;https://&#x27; + (codex_web_subdomain + &#x27;.&#x27; + codex_web_domain</span><span class="diff-line del">-                if (codex_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else codex_web_domain) }}&quot;</span><span class="diff-line add">+codex_role_web_subdomain: &quot;{{ codex_name }}&quot;</span><span class="diff-line add">+codex_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+codex_role_web_port: &quot;9810&quot;</span><span class="diff-line add">+codex_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;codex&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;codex&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;codex&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;codex&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-codex_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_web_subdomain&#x27;, default=codex_web_subdomain) }}&quot;</span><span class="diff-line del">-codex_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_web_domain&#x27;, default=codex_web_domain) }}&quot;</span><span class="diff-line del">-codex_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+codex_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;codex&#x27;) }}&quot;</span><span class="diff-line add">+codex_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;codex&#x27;) }}&quot;</span><span class="diff-line add">+codex_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-codex_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-codex_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-codex_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-codex_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-codex_traefik_enabled: true</span><span class="diff-line del">-codex_traefik_api_enabled: false</span><span class="diff-line del">-codex_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+codex_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+codex_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+codex_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+codex_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+codex_role_traefik_enabled: true</span><span class="diff-line add">+codex_role_traefik_api_enabled: false</span><span class="diff-line add">+codex_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-codex_docker_container: &quot;{{ codex_name }}&quot;</span><span class="diff-line add">+codex_role_docker_container: &quot;{{ codex_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-codex_docker_image_pull: true</span><span class="diff-line del">-codex_docker_image_repo: &quot;docker.io/ajslater/codex&quot;</span><span class="diff-line del">-codex_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-codex_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_image_repo&#x27;, default=codex_docker_image_repo)</span><span class="diff-line del">-                        + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_image_tag&#x27;, default=codex_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-codex_docker_ports_defaults: []</span><span class="diff-line del">-codex_docker_ports_custom: []</span><span class="diff-line del">-codex_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_ports_defaults&#x27;, default=codex_docker_ports_defaults)</span><span class="diff-line del">-                        + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_ports_custom&#x27;, default=codex_docker_ports_custom) }}&quot;</span><span class="diff-line add">+codex_role_docker_image_pull: true</span><span class="diff-line add">+codex_role_docker_image_repo: &quot;docker.io/ajslater/codex&quot;</span><span class="diff-line add">+codex_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+codex_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;codex&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;codex&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-codex_docker_envs_default:</span><span class="diff-line add">+codex_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-codex_docker_envs_custom: {}</span><span class="diff-line del">-codex_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_envs_default&#x27;, default=codex_docker_envs_default)</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_envs_custom&#x27;, default=codex_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-codex_docker_commands_default: []</span><span class="diff-line del">-codex_docker_commands_custom: []</span><span class="diff-line del">-codex_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_commands_default&#x27;, default=codex_docker_commands_default)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_docker_commands_custom&#x27;, default=codex_docker_commands_custom) }}&quot;</span><span class="diff-line add">+codex_role_docker_envs_custom: {}</span><span class="diff-line add">+codex_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;codex&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;codex&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-codex_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ codex_paths_location }}:/config&quot;</span><span class="diff-line del">-codex_docker_volumes_custom: []</span><span class="diff-line del">-codex_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_volumes_default&#x27;, default=codex_docker_volumes_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_volumes_custom&#x27;, default=codex_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-codex_docker_devices_default: []</span><span class="diff-line del">-codex_docker_devices_custom: []</span><span class="diff-line del">-codex_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_devices_default&#x27;, default=codex_docker_devices_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_devices_custom&#x27;, default=codex_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-codex_docker_hosts_default: {}</span><span class="diff-line del">-codex_docker_hosts_custom: {}</span><span class="diff-line del">-codex_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_hosts_default&#x27;, default=codex_docker_hosts_default))</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_hosts_custom&#x27;, default=codex_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-codex_docker_labels_default: {}</span><span class="diff-line del">-codex_docker_labels_custom: {}</span><span class="diff-line del">-codex_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_labels_default&#x27;, default=codex_docker_labels_default))</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_labels_custom&#x27;, default=codex_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+codex_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;codex&#x27;) }}:/config&quot;</span><span class="diff-line add">+codex_role_docker_volumes_custom: []</span><span class="diff-line add">+codex_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;codex&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;codex&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-codex_docker_hostname: &quot;{{ codex_name }}&quot;</span><span class="diff-line add">+codex_role_docker_hostname: &quot;{{ codex_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-codex_docker_networks_alias: &quot;{{ codex_name }}&quot;</span><span class="diff-line del">-codex_docker_networks_default: []</span><span class="diff-line del">-codex_docker_networks_custom: []</span><span class="diff-line del">-codex_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_networks_default&#x27;, default=codex_docker_networks_default)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_networks_custom&#x27;, default=codex_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-codex_docker_capabilities_default: []</span><span class="diff-line del">-codex_docker_capabilities_custom: []</span><span class="diff-line del">-codex_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_capabilities_default&#x27;, default=codex_docker_capabilities_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_capabilities_custom&#x27;, default=codex_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-codex_docker_security_opts_default: []</span><span class="diff-line del">-codex_docker_security_opts_custom: []</span><span class="diff-line del">-codex_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_security_opts_default&#x27;, default=codex_docker_security_opts_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, codex_name + &#x27;_docker_security_opts_custom&#x27;, default=codex_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+codex_role_docker_networks_alias: &quot;{{ codex_name }}&quot;</span><span class="diff-line add">+codex_role_docker_networks_default: []</span><span class="diff-line add">+codex_role_docker_networks_custom: []</span><span class="diff-line add">+codex_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;codex&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;codex&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-codex_docker_restart_policy: unless-stopped</span><span class="diff-line add">+codex_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-codex_docker_state: started</span><span class="diff-line add">+codex_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-100">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/codex/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-101">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/comixed/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,124 +18,75 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-comixed_paths_folder: &quot;{{ comixed_name }}&quot;</span><span class="diff-line del">-comixed_paths_location: &quot;{{ server_appdata_path }}/{{ comixed_paths_folder }}&quot;</span><span class="diff-line del">-comixed_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ comixed_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/Media/Comics&quot;</span><span class="diff-line add">+comixed_role_paths_folder: &quot;{{ comixed_name }}&quot;</span><span class="diff-line add">+comixed_role_paths_location: &quot;{{ server_appdata_path }}/{{ comixed_role_paths_folder }}&quot;</span><span class="diff-line add">+comixed_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ comixed_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Comics&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-comixed_web_subdomain: &quot;{{ comixed_name }}&quot;</span><span class="diff-line del">-comixed_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-comixed_web_port: &quot;7171&quot;</span><span class="diff-line del">-comixed_web_url: &quot;{{ &#x27;https://&#x27; + (comixed_web_subdomain + &#x27;.&#x27; + comixed_web_domain</span><span class="diff-line del">-                  if (comixed_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else comixed_web_domain) }}&quot;</span><span class="diff-line add">+comixed_role_web_subdomain: &quot;{{ comixed_name }}&quot;</span><span class="diff-line add">+comixed_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+comixed_role_web_port: &quot;7171&quot;</span><span class="diff-line add">+comixed_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;comixed&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;comixed&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;comixed&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;comixed&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-comixed_dns_record: &quot;{{ comixed_web_subdomain }}&quot;</span><span class="diff-line del">-comixed_dns_zone: &quot;{{ comixed_web_domain }}&quot;</span><span class="diff-line del">-comixed_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+comixed_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;comixed&#x27;) }}&quot;</span><span class="diff-line add">+comixed_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;comixed&#x27;) }}&quot;</span><span class="diff-line add">+comixed_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-comixed_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-comixed_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-comixed_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-comixed_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-comixed_traefik_enabled: true</span><span class="diff-line add">+comixed_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+comixed_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+comixed_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+comixed_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+comixed_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-comixed_docker_container: &quot;{{ comixed_name }}&quot;</span><span class="diff-line add">+comixed_role_docker_container: &quot;{{ comixed_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-comixed_docker_image_pull: true</span><span class="diff-line del">-comixed_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-comixed_docker_image: &quot;comixed/comixed:{{ comixed_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-comixed_docker_ports_defaults: []</span><span class="diff-line del">-comixed_docker_ports_custom: []</span><span class="diff-line del">-comixed_docker_ports: &quot;{{ comixed_docker_ports_defaults</span><span class="diff-line del">-                          + comixed_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-comixed_docker_envs_default: {}</span><span class="diff-line del">-comixed_docker_envs_custom: {}</span><span class="diff-line del">-comixed_docker_envs: &quot;{{ comixed_docker_envs_default</span><span class="diff-line del">-                         | combine(comixed_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-comixed_docker_commands_default: []</span><span class="diff-line del">-comixed_docker_commands_custom: []</span><span class="diff-line del">-comixed_docker_commands: &quot;{{ comixed_docker_commands_default</span><span class="diff-line del">-                             + comixed_docker_commands_custom }}&quot;</span><span class="diff-line add">+comixed_role_docker_image_pull: true</span><span class="diff-line add">+comixed_role_docker_image_repo: &quot;comixed/comixed&quot;</span><span class="diff-line add">+comixed_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+comixed_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;comixed&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;comixed&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-comixed_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ comixed_paths_location }}:/root/.comixed&quot;</span><span class="diff-line add">+comixed_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;comixed&#x27;) }}:/root/.comixed&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Comics:/comic_dir&quot;</span><span class="diff-line del">-comixed_docker_volumes_custom: []</span><span class="diff-line del">-comixed_docker_volumes: &quot;{{ comixed_docker_volumes_default</span><span class="diff-line del">-                            + comixed_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-comixed_docker_devices_default: []</span><span class="diff-line del">-comixed_docker_devices_custom: []</span><span class="diff-line del">-comixed_docker_devices: &quot;{{ comixed_docker_devices_default</span><span class="diff-line del">-                            + comixed_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-comixed_docker_hosts_default: {}</span><span class="diff-line del">-comixed_docker_hosts_custom: {}</span><span class="diff-line del">-comixed_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(comixed_docker_hosts_default)</span><span class="diff-line del">-                          | combine(comixed_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-comixed_docker_labels_default: {}</span><span class="diff-line del">-comixed_docker_labels_custom: {}</span><span class="diff-line del">-comixed_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(comixed_docker_labels_default)</span><span class="diff-line del">-                           | combine(comixed_docker_labels_custom) }}&quot;</span><span class="diff-line add">+comixed_role_docker_volumes_custom: []</span><span class="diff-line add">+comixed_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;comixed&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;comixed&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-comixed_docker_hostname: &quot;{{ comixed_name }}&quot;</span><span class="diff-line add">+comixed_role_docker_hostname: &quot;{{ comixed_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-comixed_docker_networks_alias: &quot;{{ comixed_name }}&quot;</span><span class="diff-line del">-comixed_docker_networks_default: []</span><span class="diff-line del">-comixed_docker_networks_custom: []</span><span class="diff-line del">-comixed_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + comixed_docker_networks_default</span><span class="diff-line del">-                             + comixed_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-comixed_docker_capabilities_default: []</span><span class="diff-line del">-comixed_docker_capabilities_custom: []</span><span class="diff-line del">-comixed_docker_capabilities: &quot;{{ comixed_docker_capabilities_default</span><span class="diff-line del">-                                 + comixed_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-comixed_docker_security_opts_default: []</span><span class="diff-line del">-comixed_docker_security_opts_custom: []</span><span class="diff-line del">-comixed_docker_security_opts: &quot;{{ comixed_docker_security_opts_default</span><span class="diff-line del">-                                  + comixed_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+comixed_role_docker_networks_alias: &quot;{{ comixed_name }}&quot;</span><span class="diff-line add">+comixed_role_docker_networks_default: []</span><span class="diff-line add">+comixed_role_docker_networks_custom: []</span><span class="diff-line add">+comixed_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;comixed&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;comixed&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-comixed_docker_restart_policy: unless-stopped</span><span class="diff-line add">+comixed_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-comixed_docker_state: started</span><span class="diff-line add">+comixed_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-102">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/comixed/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-103">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/crafty/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,163 +17,132 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-crafty_paths_folder: &quot;{{ crafty_name }}&quot;</span><span class="diff-line del">-crafty_paths_group: &quot;root&quot;</span><span class="diff-line del">-crafty_paths_location: &quot;{{ server_appdata_path }}/{{ crafty_paths_folder }}&quot;</span><span class="diff-line del">-crafty_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/backups&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/logs&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/servers&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/import&quot;</span><span class="diff-line del">-crafty_paths_recurse: true</span><span class="diff-line add">+crafty_role_paths_folder: &quot;{{ crafty_name }}&quot;</span><span class="diff-line add">+crafty_role_paths_group: &quot;root&quot;</span><span class="diff-line add">+crafty_role_paths_location: &quot;{{ server_appdata_path }}/{{ crafty_role_paths_folder }}&quot;</span><span class="diff-line add">+crafty_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}/backups&quot;</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}/logs&quot;</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}/servers&quot;</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ crafty_role_paths_location }}/import&quot;</span><span class="diff-line add">+crafty_role_paths_recurse: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-crafty_web_subdomain: &quot;{{ crafty_name }}&quot;</span><span class="diff-line del">-crafty_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-crafty_web_port: &quot;8443&quot;</span><span class="diff-line del">-crafty_web_scheme: &quot;https&quot;</span><span class="diff-line del">-crafty_web_serverstransport: &quot;skipverify@file&quot;</span><span class="diff-line del">-crafty_web_url: &quot;{{ &#x27;https://&#x27; + (crafty_web_subdomain + &#x27;.&#x27; + crafty_web_domain</span><span class="diff-line del">-                 if (crafty_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else crafty_web_domain) }}&quot;</span><span class="diff-line add">+crafty_role_web_subdomain: &quot;{{ crafty_name }}&quot;</span><span class="diff-line add">+crafty_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+crafty_role_web_port: &quot;8443&quot;</span><span class="diff-line add">+crafty_role_web_scheme: &quot;https&quot;</span><span class="diff-line add">+crafty_role_web_serverstransport: &quot;skipverify@file&quot;</span><span class="diff-line add">+crafty_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;crafty&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;crafty&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;crafty&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-crafty_dynmap_web_subdomain: &quot;{{ crafty_name }}-map&quot;</span><span class="diff-line del">-crafty_dynmap_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-crafty_dynmap_web_port: &quot;8123&quot;</span><span class="diff-line del">-crafty_dynmap_host: &quot;{{ crafty_dynmap_web_subdomain</span><span class="diff-line del">-                        + &#x27;.&#x27; + crafty_dynmap_web_domain }}&quot;</span><span class="diff-line add">+crafty_role_dynmap_web_subdomain: &quot;{{ crafty_name }}-map&quot;</span><span class="diff-line add">+crafty_role_dynmap_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+crafty_role_dynmap_web_port: &quot;8123&quot;</span><span class="diff-line add">+crafty_role_dynmap_host: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_web_subdomain&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                             + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_dynmap_web_domain&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-crafty_dns_record: &quot;{{ crafty_web_subdomain }}&quot;</span><span class="diff-line del">-crafty_dns_zone: &quot;{{ crafty_web_domain }}&quot;</span><span class="diff-line del">-crafty_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line del">-crafty_dynmap_dns_record: &quot;{{ crafty_dynmap_web_subdomain }}&quot;</span><span class="diff-line del">-crafty_dynmap_dns_zone: &quot;{{ crafty_web_domain }}&quot;</span><span class="diff-line del">-crafty_dynmap_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+crafty_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line add">+crafty_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line add">+crafty_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line add">+crafty_role_dynmap_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_web_subdomain&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line add">+crafty_role_dynmap_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line add">+crafty_role_dynmap_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-crafty_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-crafty_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-crafty_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-crafty_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-crafty_traefik_enabled: true</span><span class="diff-line add">+crafty_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+crafty_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+crafty_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+crafty_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+crafty_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-crafty_docker_container: &quot;{{ crafty_name }}&quot;</span><span class="diff-line add">+crafty_role_docker_container: &quot;{{ crafty_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-crafty_docker_image_pull: true</span><span class="diff-line del">-crafty_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-crafty_docker_image: &quot;arcadiatechnology/crafty-4:{{ crafty_docker_image_tag }}&quot;</span><span class="diff-line add">+crafty_role_docker_image_pull: true</span><span class="diff-line add">+crafty_role_docker_image_repo: &quot;arcadiatechnology/crafty-4&quot;</span><span class="diff-line add">+crafty_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+crafty_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;crafty&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-crafty_docker_ports_defaults:</span><span class="diff-line add">+crafty_role_docker_ports_default:</span><span class="diff-line context">   - &quot;19132:19132/udp&quot;</span><span class="diff-line context">   - &quot;25500-25600:25500-25600&quot;</span><span class="diff-line del">-crafty_docker_ports_custom: []</span><span class="diff-line del">-crafty_docker_ports: &quot;{{ crafty_docker_ports_defaults</span><span class="diff-line del">-                         + crafty_docker_ports_custom }}&quot;</span><span class="diff-line add">+crafty_role_docker_ports_custom: []</span><span class="diff-line add">+crafty_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-crafty_docker_envs_default:</span><span class="diff-line add">+crafty_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-crafty_docker_envs_custom: {}</span><span class="diff-line del">-crafty_docker_envs: &quot;{{ crafty_docker_envs_default</span><span class="diff-line del">-                        | combine(crafty_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-crafty_docker_commands_default: []</span><span class="diff-line del">-crafty_docker_commands_custom: []</span><span class="diff-line del">-crafty_docker_commands: &quot;{{ crafty_docker_commands_default</span><span class="diff-line del">-                            + crafty_docker_commands_custom }}&quot;</span><span class="diff-line add">+crafty_role_docker_envs_custom: {}</span><span class="diff-line add">+crafty_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;crafty&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-crafty_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/backups:/crafty/backups&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/logs:/crafty/logs&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/servers:/crafty/servers&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/config:/crafty/app/config&quot;</span><span class="diff-line del">-  - &quot;{{ crafty_paths_location }}/import:/crafty/import&quot;</span><span class="diff-line del">-crafty_docker_volumes_custom: []</span><span class="diff-line del">-crafty_docker_volumes: &quot;{{ crafty_docker_volumes_default</span><span class="diff-line del">-                           + crafty_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-crafty_docker_devices_default: []</span><span class="diff-line del">-crafty_docker_devices_custom: []</span><span class="diff-line del">-crafty_docker_devices: &quot;{{ crafty_docker_devices_default</span><span class="diff-line del">-                           + crafty_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-crafty_docker_hosts_default: {}</span><span class="diff-line del">-crafty_docker_hosts_custom: {}</span><span class="diff-line del">-crafty_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(crafty_docker_hosts_default)</span><span class="diff-line del">-                         | combine(crafty_docker_hosts_custom) }}&quot;</span><span class="diff-line add">+crafty_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/backups:/crafty/backups&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/logs:/crafty/logs&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/servers:/crafty/servers&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/config:/crafty/app/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/import:/crafty/import&quot;</span><span class="diff-line add">+crafty_role_docker_volumes_custom: []</span><span class="diff-line add">+crafty_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Labels</span><span class="diff-line del">-crafty_docker_labels_default:</span><span class="diff-line add">+crafty_role_docker_labels_default:</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.entrypoints&quot;: &quot;web&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.service&quot;: &quot;{{ crafty_name }}-map&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.rule&quot;: &quot;Host(`{{ crafty_dynmap_host }}`)&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.rule&quot;: &quot;Host(`{{ lookup(&quot;role_var&quot;, &quot;_dynmap_host&quot;, role=&quot;crafty&quot;) }}`)&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.middlewares&quot;: &quot;{{ traefik_default_middleware_http }}&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map-http.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.entrypoints&quot;: &quot;websecure&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.service&quot;: &quot;{{ crafty_name }}-map&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.rule&quot;: &quot;Host(`{{ crafty_dynmap_host }}`)&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.rule&quot;: &quot;Host(`{{ lookup(&quot;role_var&quot;, &quot;_dynmap_host&quot;, role=&quot;crafty&quot;) }}`)&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.tls.options&quot;: &quot;securetls@file&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.tls.certresolver&quot;: &quot;{{ crafty_traefik_certresolver }}&quot; }&#x27;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.tls.certresolver&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_traefik_certresolver&quot;, role=&quot;crafty&quot;) }}&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.middlewares&quot;: &quot;{{ traefik_default_middleware }}&quot; }&#x27;</span><span class="diff-line context">   - &#x27;{ &quot;traefik.http.routers.{{ crafty_name }}-map.priority&quot;: &quot;20&quot; }&#x27;</span><span class="diff-line del">-  - &#x27;{ &quot;traefik.http.services.{{ crafty_name }}-map.loadbalancer.server.port&quot;: &quot;{{ crafty_dynmap_web_port }}&quot; }&#x27;</span><span class="diff-line del">-crafty_docker_labels_custom: {}</span><span class="diff-line del">-crafty_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(crafty_docker_labels_default)</span><span class="diff-line del">-                          | combine(crafty_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &#x27;{ &quot;traefik.http.services.{{ crafty_name }}-map.loadbalancer.server.port&quot;: &quot;{{ lookup(&quot;role_var&quot;, &quot;_dynmap_web_port&quot;, role=&quot;crafty&quot;) }}&quot; }&#x27;</span><span class="diff-line add">+crafty_role_docker_labels_custom: {}</span><span class="diff-line add">+crafty_role_docker_labels: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_default&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;crafty&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-crafty_docker_hostname: &quot;{{ crafty_name }}&quot;</span><span class="diff-line add">+crafty_role_docker_hostname: &quot;{{ crafty_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-crafty_docker_networks_alias: &quot;{{ crafty_name }}&quot;</span><span class="diff-line del">-crafty_docker_networks_default: []</span><span class="diff-line del">-crafty_docker_networks_custom: []</span><span class="diff-line del">-crafty_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + crafty_docker_networks_default</span><span class="diff-line del">-                            + crafty_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-crafty_docker_capabilities_default: []</span><span class="diff-line del">-crafty_docker_capabilities_custom: []</span><span class="diff-line del">-crafty_docker_capabilities: &quot;{{ crafty_docker_capabilities_default</span><span class="diff-line del">-                                + crafty_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-crafty_docker_security_opts_default: []</span><span class="diff-line del">-crafty_docker_security_opts_custom: []</span><span class="diff-line del">-crafty_docker_security_opts: &quot;{{ crafty_docker_security_opts_default</span><span class="diff-line del">-                                 + crafty_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+crafty_role_docker_networks_alias: &quot;{{ crafty_name }}&quot;</span><span class="diff-line add">+crafty_role_docker_networks_default: []</span><span class="diff-line add">+crafty_role_docker_networks_custom: []</span><span class="diff-line add">+crafty_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;crafty&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-crafty_docker_restart_policy: unless-stopped</span><span class="diff-line add">+crafty_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-crafty_docker_state: started</span><span class="diff-line add">+crafty_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-crafty_docker_stop_timeout: 900</span><span class="diff-line add">+crafty_role_docker_stop_timeout: 900</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-104">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/crafty/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,20 +10,20 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dynmap_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dynmap_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dynmap_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if &#x27;{{ crafty_paths_location }}&#x27; exists</span><span class="diff-line add">+- name: Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ crafty_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}&quot;</span><span class="diff-line context">   register: crafty_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line hunk">@@ -35,7 +35,7 @@</span><span class="diff-line context"> - name: Import &#x27;config.json&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: config.json.j2</span><span class="diff-line del">-    dest: &quot;{{ crafty_paths_location }}/config/default.json&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;crafty&#x27;) }}/config/default.json&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: root</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-105">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dashdot/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,158 +17,115 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashdot_show_host: &quot;false&quot;</span><span class="diff-line del">-dashdot_cpu_temps: &quot;false&quot;</span><span class="diff-line del">-dashdot_imperial: &quot;false&quot;</span><span class="diff-line del">-dashdot_always_show_percentages: &quot;false&quot;</span><span class="diff-line del">-dashdot_title: &quot;dash.&quot;</span><span class="diff-line del">-dashdot_widget_list: &quot;os,cpu,storage,ram,network&quot;</span><span class="diff-line del">-dashdot_os_label_list: &quot;os,arch,up_since&quot;</span><span class="diff-line del">-dashdot_cpu_label_list: &quot;brand,model,cores,threads,frequency&quot;</span><span class="diff-line del">-dashdot_storage_label_list: &quot;brand,size,type&quot;</span><span class="diff-line del">-dashdot_ram_label_list: &quot;brand,size,type,frequency&quot;</span><span class="diff-line del">-dashdot_network_label_list: &quot;type,speed_up,speed_down,interface_speed&quot;</span><span class="diff-line del">-dashdot_gpu_label_list: &quot;brand,model,memory&quot;</span><span class="diff-line add">+dashdot_role_show_host: &quot;false&quot;</span><span class="diff-line add">+dashdot_role_cpu_temps: &quot;false&quot;</span><span class="diff-line add">+dashdot_role_imperial: &quot;false&quot;</span><span class="diff-line add">+dashdot_role_always_show_percentages: &quot;false&quot;</span><span class="diff-line add">+dashdot_role_title: &quot;dash.&quot;</span><span class="diff-line add">+dashdot_role_widget_list: &quot;os,cpu,storage,ram,network&quot;</span><span class="diff-line add">+dashdot_role_os_label_list: &quot;os,arch,up_since&quot;</span><span class="diff-line add">+dashdot_role_cpu_label_list: &quot;brand,model,cores,threads,frequency&quot;</span><span class="diff-line add">+dashdot_role_storage_label_list: &quot;brand,size,type&quot;</span><span class="diff-line add">+dashdot_role_ram_label_list: &quot;brand,size,type,frequency&quot;</span><span class="diff-line add">+dashdot_role_network_label_list: &quot;type,speed_up,speed_down,interface_speed&quot;</span><span class="diff-line add">+dashdot_role_gpu_label_list: &quot;brand,model,memory&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashdot_paths_folder: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line del">-dashdot_paths_location: &quot;{{ server_appdata_path }}/{{ dashdot_paths_folder }}&quot;</span><span class="diff-line del">-dashdot_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ dashdot_paths_location }}&quot;</span><span class="diff-line add">+dashdot_role_paths_folder: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line add">+dashdot_role_paths_location: &quot;{{ server_appdata_path }}/{{ dashdot_role_paths_folder }}&quot;</span><span class="diff-line add">+dashdot_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ dashdot_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashdot_web_subdomain: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line del">-dashdot_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-dashdot_web_port: &quot;3001&quot;</span><span class="diff-line del">-dashdot_web_url: &quot;{{ &#x27;https://&#x27; + (dashdot_web_subdomain + &#x27;.&#x27; + dashdot_web_domain</span><span class="diff-line del">-                  if (dashdot_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else dashdot_web_domain) }}&quot;</span><span class="diff-line add">+dashdot_role_web_subdomain: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line add">+dashdot_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+dashdot_role_web_port: &quot;3001&quot;</span><span class="diff-line add">+dashdot_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashdot&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashdot&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashdot&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashdot&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashdot_dns_record: &quot;{{ dashdot_web_subdomain }}&quot;</span><span class="diff-line del">-dashdot_dns_zone: &quot;{{ dashdot_web_domain }}&quot;</span><span class="diff-line del">-dashdot_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+dashdot_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+dashdot_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+dashdot_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashdot_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-dashdot_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-dashdot_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-dashdot_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-dashdot_traefik_enabled: true</span><span class="diff-line del">-dashdot_traefik_api_enabled: false</span><span class="diff-line del">-dashdot_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+dashdot_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+dashdot_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+dashdot_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+dashdot_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+dashdot_role_traefik_enabled: true</span><span class="diff-line add">+dashdot_role_traefik_api_enabled: false</span><span class="diff-line add">+dashdot_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-dashdot_docker_container: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line add">+dashdot_role_docker_container: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-dashdot_docker_image_pull: true</span><span class="diff-line del">-dashdot_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-dashdot_docker_image: &quot;mauricenino/dashdot:{{ dashdot_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-dashdot_docker_ports_defaults: []</span><span class="diff-line del">-dashdot_docker_ports_custom: []</span><span class="diff-line del">-dashdot_docker_ports: &quot;{{ dashdot_docker_ports_defaults</span><span class="diff-line del">-                          + dashdot_docker_ports_custom }}&quot;</span><span class="diff-line add">+dashdot_role_docker_image_pull: true</span><span class="diff-line add">+dashdot_role_docker_image_repo: &quot;mauricenino/dashdot&quot;</span><span class="diff-line add">+dashdot_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+dashdot_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;dashdot&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-dashdot_docker_envs_default:</span><span class="diff-line del">-  DASHDOT_SHOW_HOST: &quot;{{ dashdot_show_host }}&quot;</span><span class="diff-line del">-  DASHDOT_CUSTOM_HOST: &quot;{{ dashdot_web_subdomain + &#x27;.&#x27; + dashdot_web_domain }}&quot;</span><span class="diff-line del">-  DASHDOT_ENABLE_CPU_TEMPS: &quot;{{ dashdot_cpu_temps }}&quot;</span><span class="diff-line del">-  DASHDOT_USE_IMPERIAL: &quot;{{ dashdot_imperial }}&quot;</span><span class="diff-line del">-  DASHDOT_ALWAYS_SHOW_PERCENTAGES: &quot;{{ dashdot_always_show_percentages }}&quot;</span><span class="diff-line del">-  DASHDOT_PAGE_TITLE: &quot;{{ dashdot_title }}&quot;</span><span class="diff-line del">-  DASHDOT_WIDGET_LIST: &quot;{{ dashdot_widget_list }}&quot;</span><span class="diff-line del">-  DASHDOT_OS_LABEL_LIST: &quot;{{ dashdot_os_label_list }}&quot;</span><span class="diff-line del">-  DASHDOT_CPU_LABEL_LIST: &quot;{{ dashdot_cpu_label_list }}&quot;</span><span class="diff-line del">-  DASHDOT_STORAGE_LABEL_LIST: &quot;{{ dashdot_storage_label_list }}&quot;</span><span class="diff-line del">-  DASHDOT_RAM_LABEL_LIST: &quot;{{ dashdot_ram_label_list }}&quot;</span><span class="diff-line del">-  DASHDOT_NETWORK_LABEL_LIST: &quot;{{ dashdot_network_label_list }}&quot;</span><span class="diff-line del">-  DASHDOT_GPU_LABEL_LIST: &quot;{{ dashdot_gpu_label_list }}&quot;</span><span class="diff-line add">+dashdot_role_docker_envs_default:</span><span class="diff-line add">+  DASHDOT_SHOW_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_show_host&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_CUSTOM_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashdot&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_ENABLE_CPU_TEMPS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_cpu_temps&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_USE_IMPERIAL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_imperial&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_ALWAYS_SHOW_PERCENTAGES: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_always_show_percentages&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_PAGE_TITLE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_title&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_WIDGET_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_widget_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_OS_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_os_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_CPU_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_cpu_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_STORAGE_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_storage_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_RAM_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_ram_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_NETWORK_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_network_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line add">+  DASHDOT_GPU_LABEL_LIST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_gpu_label_list&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line context">   DASHDOT_ACCEPT_OOKLA_EULA: &quot;true&quot;</span><span class="diff-line del">-dashdot_docker_envs_custom: {}</span><span class="diff-line del">-dashdot_docker_envs: &quot;{{ dashdot_docker_envs_default</span><span class="diff-line del">-                         | combine(dashdot_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-dashdot_docker_commands_default: []</span><span class="diff-line del">-dashdot_docker_commands_custom: []</span><span class="diff-line del">-dashdot_docker_commands: &quot;{{ dashdot_docker_commands_default</span><span class="diff-line del">-                             + dashdot_docker_commands_custom }}&quot;</span><span class="diff-line add">+dashdot_role_docker_envs_custom: {}</span><span class="diff-line add">+dashdot_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;dashdot&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;dashdot&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-dashdot_docker_volumes_default:</span><span class="diff-line add">+dashdot_role_docker_volumes_default:</span><span class="diff-line context">   - &quot;/:/mnt/host:ro&quot;</span><span class="diff-line del">-dashdot_docker_volumes_custom: []</span><span class="diff-line del">-dashdot_docker_volumes: &quot;{{ dashdot_docker_volumes_default</span><span class="diff-line del">-                            + dashdot_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-dashdot_docker_devices_default: []</span><span class="diff-line del">-dashdot_docker_devices_custom: []</span><span class="diff-line del">-dashdot_docker_devices: &quot;{{ dashdot_docker_devices_default</span><span class="diff-line del">-                            + dashdot_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-dashdot_docker_hosts_default: {}</span><span class="diff-line del">-dashdot_docker_hosts_custom: {}</span><span class="diff-line del">-dashdot_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(dashdot_docker_hosts_default)</span><span class="diff-line del">-                          | combine(dashdot_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-dashdot_docker_labels_default: {}</span><span class="diff-line del">-dashdot_docker_labels_custom: {}</span><span class="diff-line del">-dashdot_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(dashdot_docker_labels_default)</span><span class="diff-line del">-                           | combine(dashdot_docker_labels_custom) }}&quot;</span><span class="diff-line add">+dashdot_role_docker_volumes_custom: []</span><span class="diff-line add">+dashdot_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;dashdot&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-dashdot_docker_hostname: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line add">+dashdot_role_docker_hostname: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-dashdot_docker_networks_alias: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line del">-dashdot_docker_networks_default: []</span><span class="diff-line del">-dashdot_docker_networks_custom: []</span><span class="diff-line del">-dashdot_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + dashdot_docker_networks_default</span><span class="diff-line del">-                             + dashdot_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-dashdot_docker_capabilities_default: []</span><span class="diff-line del">-dashdot_docker_capabilities_custom: []</span><span class="diff-line del">-dashdot_docker_capabilities: &quot;{{ dashdot_docker_capabilities_default</span><span class="diff-line del">-                                 + dashdot_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-dashdot_docker_security_opts_default: []</span><span class="diff-line del">-dashdot_docker_security_opts_custom: []</span><span class="diff-line del">-dashdot_docker_security_opts: &quot;{{ dashdot_docker_security_opts_default</span><span class="diff-line del">-                                  + dashdot_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+dashdot_role_docker_networks_alias: &quot;{{ dashdot_name }}&quot;</span><span class="diff-line add">+dashdot_role_docker_networks_default: []</span><span class="diff-line add">+dashdot_role_docker_networks_custom: []</span><span class="diff-line add">+dashdot_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;dashdot&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;dashdot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-dashdot_docker_restart_policy: unless-stopped</span><span class="diff-line add">+dashdot_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-dashdot_docker_state: started</span><span class="diff-line add">+dashdot_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Privileged</span><span class="diff-line del">-dashdot_docker_privileged: true</span><span class="diff-line add">+dashdot_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-106">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dashdot/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-107">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dashy/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,82 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashy_paths_folder: &quot;{{ dashy_name }}&quot;</span><span class="diff-line del">-dashy_paths_location: &quot;{{ server_appdata_path }}/{{ dashy_paths_folder }}&quot;</span><span class="diff-line del">-dashy_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ dashy_paths_location }}&quot;</span><span class="diff-line del">-dashy_paths_config_location: &quot;{{ dashy_paths_location }}/conf.yml&quot;</span><span class="diff-line add">+dashy_role_paths_folder: &quot;{{ dashy_name }}&quot;</span><span class="diff-line add">+dashy_role_paths_location: &quot;{{ server_appdata_path }}/{{ dashy_role_paths_folder }}&quot;</span><span class="diff-line add">+dashy_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ dashy_role_paths_location }}&quot;</span><span class="diff-line add">+dashy_role_paths_config_location: &quot;{{ dashy_role_paths_location }}/conf.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashy_web_subdomain: &quot;{{ dashy_name }}&quot;</span><span class="diff-line del">-dashy_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-dashy_web_port: &quot;8080&quot;</span><span class="diff-line del">-dashy_web_url: &quot;{{ &#x27;https://&#x27; + (dashy_web_subdomain + &#x27;.&#x27; + dashy_web_domain</span><span class="diff-line del">-                if (dashy_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else dashy_web_domain) }}&quot;</span><span class="diff-line add">+dashy_role_web_subdomain: &quot;{{ dashy_name }}&quot;</span><span class="diff-line add">+dashy_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+dashy_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+dashy_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashy&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashy&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashy&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashy&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashy_dns_record: &quot;{{ dashy_web_subdomain }}&quot;</span><span class="diff-line del">-dashy_dns_zone: &quot;{{ dashy_web_domain }}&quot;</span><span class="diff-line del">-dashy_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+dashy_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line add">+dashy_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line add">+dashy_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dashy_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-dashy_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-dashy_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-dashy_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-dashy_traefik_enabled: true</span><span class="diff-line del">-dashy_traefik_api_enabled: false</span><span class="diff-line del">-dashy_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+dashy_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+dashy_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+dashy_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+dashy_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+dashy_role_traefik_enabled: true</span><span class="diff-line add">+dashy_role_traefik_api_enabled: false</span><span class="diff-line add">+dashy_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-dashy_docker_container: &quot;{{ dashy_name }}&quot;</span><span class="diff-line add">+dashy_role_docker_container: &quot;{{ dashy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-dashy_docker_image_pull: true</span><span class="diff-line del">-dashy_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-dashy_docker_image: &quot;lissy93/dashy:{{ dashy_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-dashy_docker_ports_defaults: []</span><span class="diff-line del">-dashy_docker_ports_custom: []</span><span class="diff-line del">-dashy_docker_ports: &quot;{{ dashy_docker_ports_defaults</span><span class="diff-line del">-                        + dashy_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-dashy_docker_envs_default: {}</span><span class="diff-line del">-dashy_docker_envs_custom: {}</span><span class="diff-line del">-dashy_docker_envs: &quot;{{ dashy_docker_envs_default</span><span class="diff-line del">-                       | combine(dashy_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-dashy_docker_commands_default: []</span><span class="diff-line del">-dashy_docker_commands_custom: []</span><span class="diff-line del">-dashy_docker_commands: &quot;{{ dashy_docker_commands_default</span><span class="diff-line del">-                           + dashy_docker_commands_custom }}&quot;</span><span class="diff-line add">+dashy_role_docker_image_pull: true</span><span class="diff-line add">+dashy_role_docker_image_repo: &quot;lissy93/dashy&quot;</span><span class="diff-line add">+dashy_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+dashy_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;dashy&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-dashy_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ dashy_paths_location }}:/app/user-data&quot;</span><span class="diff-line del">-dashy_docker_volumes_custom: []</span><span class="diff-line del">-dashy_docker_volumes: &quot;{{ dashy_docker_volumes_default</span><span class="diff-line del">-                          + dashy_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-dashy_docker_devices_default: []</span><span class="diff-line del">-dashy_docker_devices_custom: []</span><span class="diff-line del">-dashy_docker_devices: &quot;{{ dashy_docker_devices_default</span><span class="diff-line del">-                          + dashy_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-dashy_docker_hosts_default: {}</span><span class="diff-line del">-dashy_docker_hosts_custom: {}</span><span class="diff-line del">-dashy_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(dashy_docker_hosts_default)</span><span class="diff-line del">-                        | combine(dashy_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-dashy_docker_labels_default: {}</span><span class="diff-line del">-dashy_docker_labels_custom: {}</span><span class="diff-line del">-dashy_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(dashy_docker_labels_default)</span><span class="diff-line del">-                         | combine(dashy_docker_labels_custom) }}&quot;</span><span class="diff-line add">+dashy_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;dashy&#x27;) }}:/app/user-data&quot;</span><span class="diff-line add">+dashy_role_docker_volumes_custom: []</span><span class="diff-line add">+dashy_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;dashy&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-dashy_docker_hostname: &quot;{{ dashy_name }}&quot;</span><span class="diff-line add">+dashy_role_docker_hostname: &quot;{{ dashy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-dashy_docker_networks_alias: &quot;{{ dashy_name }}&quot;</span><span class="diff-line del">-dashy_docker_networks_default: []</span><span class="diff-line del">-dashy_docker_networks_custom: []</span><span class="diff-line del">-dashy_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + dashy_docker_networks_default</span><span class="diff-line del">-                           + dashy_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-dashy_docker_capabilities_default: []</span><span class="diff-line del">-dashy_docker_capabilities_custom: []</span><span class="diff-line del">-dashy_docker_capabilities: &quot;{{ dashy_docker_capabilities_default</span><span class="diff-line del">-                               + dashy_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-dashy_docker_security_opts_default: []</span><span class="diff-line del">-dashy_docker_security_opts_custom: []</span><span class="diff-line del">-dashy_docker_security_opts: &quot;{{ dashy_docker_security_opts_default</span><span class="diff-line del">-                                + dashy_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+dashy_role_docker_networks_alias: &quot;{{ dashy_name }}&quot;</span><span class="diff-line add">+dashy_role_docker_networks_default: []</span><span class="diff-line add">+dashy_role_docker_networks_custom: []</span><span class="diff-line add">+dashy_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;dashy&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-dashy_docker_restart_policy: unless-stopped</span><span class="diff-line add">+dashy_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-dashy_docker_state: started</span><span class="diff-line add">+dashy_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Healthcheck</span><span class="diff-line del">-dashy_docker_healthcheck:</span><span class="diff-line add">+dashy_role_docker_healthcheck:</span><span class="diff-line context">   test: [&quot;CMD&quot;, &quot;yarn&quot;, &quot;health-check&quot;]</span><span class="diff-line context">   interval: 10s</span><span class="diff-line context">   timeout: 5s</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-108">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dashy/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,18 +20,18 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ dashy_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;dashy&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ dashy_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line context">   register: dashy_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: New `{{ dashy_paths_config_location | basename }}` tasks</span><span class="diff-line add">+- name: New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;dashy&#x27;) | basename }}` tasks</span><span class="diff-line context">   when: not dashy_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Import default `{{ dashy_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;dashy&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: conf.yml.j2</span><span class="diff-line del">-        dest: &quot;{{ dashy_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;dashy&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-109">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/deemix/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-deemix_paths_folder: &quot;{{ deemix_name }}&quot;</span><span class="diff-line del">-deemix_paths_location: &quot;{{ server_appdata_path }}/{{ deemix_paths_folder }}&quot;</span><span class="diff-line del">-deemix_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ deemix_paths_location }}&quot;</span><span class="diff-line add">+deemix_role_paths_folder: &quot;{{ deemix_name }}&quot;</span><span class="diff-line add">+deemix_role_paths_location: &quot;{{ server_appdata_path }}/{{ deemix_role_paths_folder }}&quot;</span><span class="diff-line add">+deemix_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ deemix_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-deemix_web_subdomain: &quot;{{ deemix_name }}&quot;</span><span class="diff-line del">-deemix_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-deemix_web_port: &quot;6595&quot;</span><span class="diff-line del">-deemix_web_url: &quot;{{ &#x27;https://&#x27; + (deemix_web_subdomain + &#x27;.&#x27; + deemix_web_domain</span><span class="diff-line del">-                 if (deemix_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else deemix_web_domain) }}&quot;</span><span class="diff-line add">+deemix_role_web_subdomain: &quot;{{ deemix_name }}&quot;</span><span class="diff-line add">+deemix_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+deemix_role_web_port: &quot;6595&quot;</span><span class="diff-line add">+deemix_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;deemix&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;deemix&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;deemix&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;deemix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-deemix_dns_record: &quot;{{ deemix_web_subdomain }}&quot;</span><span class="diff-line del">-deemix_dns_zone: &quot;{{ deemix_web_domain }}&quot;</span><span class="diff-line del">-deemix_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+deemix_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;deemix&#x27;) }}&quot;</span><span class="diff-line add">+deemix_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;deemix&#x27;) }}&quot;</span><span class="diff-line add">+deemix_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-deemix_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-deemix_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-deemix_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-deemix_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-deemix_traefik_enabled: true</span><span class="diff-line del">-deemix_traefik_api_enabled: false</span><span class="diff-line del">-deemix_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+deemix_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+deemix_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+deemix_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+deemix_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+deemix_role_traefik_enabled: true</span><span class="diff-line add">+deemix_role_traefik_api_enabled: false</span><span class="diff-line add">+deemix_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-deemix_docker_container: &quot;{{ deemix_name }}&quot;</span><span class="diff-line add">+deemix_role_docker_container: &quot;{{ deemix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-deemix_docker_image_pull: true</span><span class="diff-line del">-deemix_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-deemix_docker_image: &quot;registry.gitlab.com/bockiii/deemix-docker:{{ deemix_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-deemix_docker_ports_defaults: []</span><span class="diff-line del">-deemix_docker_ports_custom: []</span><span class="diff-line del">-deemix_docker_ports: &quot;{{ deemix_docker_ports_defaults</span><span class="diff-line del">-                         + deemix_docker_ports_custom }}&quot;</span><span class="diff-line add">+deemix_role_docker_image_pull: true</span><span class="diff-line add">+deemix_role_docker_image_repo: &quot;registry.gitlab.com/bockiii/deemix-docker&quot;</span><span class="diff-line add">+deemix_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+deemix_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;deemix&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;deemix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-deemix_docker_envs_default:</span><span class="diff-line add">+deemix_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UMASK_SET: &quot;022&quot;</span><span class="diff-line context">   REVERSEPROXY: &quot;true&quot;</span><span class="diff-line del">-deemix_docker_envs_custom: {}</span><span class="diff-line del">-deemix_docker_envs: &quot;{{ deemix_docker_envs_default</span><span class="diff-line del">-                        | combine(deemix_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-deemix_docker_commands_default: []</span><span class="diff-line del">-deemix_docker_commands_custom: []</span><span class="diff-line del">-deemix_docker_commands: &quot;{{ deemix_docker_commands_default</span><span class="diff-line del">-                            + deemix_docker_commands_custom }}&quot;</span><span class="diff-line add">+deemix_role_docker_envs_custom: {}</span><span class="diff-line add">+deemix_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;deemix&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;deemix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-deemix_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ deemix_paths_location }}:/config&quot;</span><span class="diff-line del">-deemix_docker_volumes_custom: []</span><span class="diff-line del">-deemix_docker_volumes: &quot;{{ deemix_docker_volumes_default</span><span class="diff-line del">-                           + deemix_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-deemix_docker_devices_default: []</span><span class="diff-line del">-deemix_docker_devices_custom: []</span><span class="diff-line del">-deemix_docker_devices: &quot;{{ deemix_docker_devices_default</span><span class="diff-line del">-                           + deemix_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-deemix_docker_hosts_default: {}</span><span class="diff-line del">-deemix_docker_hosts_custom: {}</span><span class="diff-line del">-deemix_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(deemix_docker_hosts_default)</span><span class="diff-line del">-                         | combine(deemix_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-deemix_docker_labels_default: {}</span><span class="diff-line del">-deemix_docker_labels_custom: {}</span><span class="diff-line del">-deemix_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(deemix_docker_labels_default)</span><span class="diff-line del">-                          | combine(deemix_docker_labels_custom) }}&quot;</span><span class="diff-line add">+deemix_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;deemix&#x27;) }}:/config&quot;</span><span class="diff-line add">+deemix_role_docker_volumes_custom: []</span><span class="diff-line add">+deemix_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;deemix&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;deemix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-deemix_docker_hostname: &quot;{{ deemix_name }}&quot;</span><span class="diff-line add">+deemix_role_docker_hostname: &quot;{{ deemix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-deemix_docker_networks_alias: &quot;{{ deemix_name }}&quot;</span><span class="diff-line del">-deemix_docker_networks_default: []</span><span class="diff-line del">-deemix_docker_networks_custom: []</span><span class="diff-line del">-deemix_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + deemix_docker_networks_default</span><span class="diff-line del">-                            + deemix_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-deemix_docker_capabilities_default: []</span><span class="diff-line del">-deemix_docker_capabilities_custom: []</span><span class="diff-line del">-deemix_docker_capabilities: &quot;{{ deemix_docker_capabilities_default</span><span class="diff-line del">-                                + deemix_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-deemix_docker_security_opts_default: []</span><span class="diff-line del">-deemix_docker_security_opts_custom: []</span><span class="diff-line del">-deemix_docker_security_opts: &quot;{{ deemix_docker_security_opts_default</span><span class="diff-line del">-                                 + deemix_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+deemix_role_docker_networks_alias: &quot;{{ deemix_name }}&quot;</span><span class="diff-line add">+deemix_role_docker_networks_default: []</span><span class="diff-line add">+deemix_role_docker_networks_custom: []</span><span class="diff-line add">+deemix_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;deemix&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;deemix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-deemix_docker_restart_policy: unless-stopped</span><span class="diff-line add">+deemix_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-deemix_docker_state: started</span><span class="diff-line add">+deemix_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-110">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/deemix/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-111">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/delugevpn/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,21 +16,25 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line del">-</span><span class="diff-line del">-delugevpn_log_level_daemon: info</span><span class="diff-line del">-delugevpn_log_level_web: info</span><span class="diff-line del">-delugevpn_name_servers: &quot;84.200.69.80,1.1.1.1,84.200.70.40,1.0.0.1&quot;</span><span class="diff-line del">-delugevpn_lan_network: &quot;172.19.0.0/16&quot;</span><span class="diff-line add">+# https://github.com/binhex/arch-delugevpn for options</span><span class="diff-line add">+delugevpn_role_log_level_daemon: info</span><span class="diff-line add">+delugevpn_role_log_level_web: info</span><span class="diff-line add">+delugevpn_role_name_servers: &quot;84.200.69.80,1.1.1.1,84.200.70.40,1.0.0.1&quot;</span><span class="diff-line add">+delugevpn_role_lan_network: &quot;172.19.0.0/16&quot;</span><span class="diff-line add">+delugevpn_role_vpn_user: &quot;&quot;</span><span class="diff-line add">+delugevpn_role_vpn_pass: &quot;&quot;</span><span class="diff-line add">+delugevpn_role_vpn_prov: &quot;pia&quot;</span><span class="diff-line add">+delugevpn_role_vpn_client: &quot;wireguard&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-delugevpn_paths_folder: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line del">-delugevpn_paths_location: &quot;{{ server_appdata_path }}/{{ delugevpn_paths_folder }}&quot;</span><span class="diff-line del">-delugevpn_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ delugevpn_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ delugevpn_paths_location }}/wireguard&quot;</span><span class="diff-line add">+delugevpn_role_paths_folder: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line add">+delugevpn_role_paths_location: &quot;{{ server_appdata_path }}/{{ delugevpn_role_paths_folder }}&quot;</span><span class="diff-line add">+delugevpn_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ delugevpn_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ delugevpn_role_paths_location }}/wireguard&quot;</span><span class="diff-line context">   - &quot;{{ downloads_torrents_path }}&quot;</span><span class="diff-line context">   - &quot;{{ downloads_torrents_path }}/delugevpn&quot;</span><span class="diff-line context">   - &quot;{{ downloads_torrents_path }}/delugevpn/completed&quot;</span><span class="diff-line hunk">@@ -41,142 +45,105 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-delugevpn_web_subdomain: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line del">-delugevpn_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-delugevpn_web_port: &quot;8112&quot;</span><span class="diff-line del">-delugevpn_web_url: &quot;{{ &#x27;https://&#x27; + (delugevpn_web_subdomain + &#x27;.&#x27; + delugevpn_web_domain</span><span class="diff-line del">-                    if (delugevpn_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else delugevpn_web_domain) }}&quot;</span><span class="diff-line add">+delugevpn_role_web_subdomain: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line add">+delugevpn_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+delugevpn_role_web_port: &quot;8112&quot;</span><span class="diff-line add">+delugevpn_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;delugevpn&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;delugevpn&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;delugevpn&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;delugevpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-delugevpn_dns_record: &quot;{{ delugevpn_web_subdomain }}&quot;</span><span class="diff-line del">-delugevpn_dns_zone: &quot;{{ delugevpn_web_domain }}&quot;</span><span class="diff-line del">-delugevpn_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+delugevpn_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+delugevpn_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+delugevpn_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-delugevpn_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-delugevpn_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-delugevpn_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-delugevpn_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-delugevpn_traefik_enabled: true</span><span class="diff-line del">-delugevpn_traefik_api_enabled: false</span><span class="diff-line del">-delugevpn_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+delugevpn_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+delugevpn_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+delugevpn_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+delugevpn_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+delugevpn_role_traefik_enabled: true</span><span class="diff-line add">+delugevpn_role_traefik_api_enabled: false</span><span class="diff-line add">+delugevpn_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-delugevpn_docker_container: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_container: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-delugevpn_docker_image_pull: true</span><span class="diff-line del">-delugevpn_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-delugevpn_docker_image: &quot;binhex/arch-delugevpn:{{ delugevpn_docker_image_tag }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_image_pull: true</span><span class="diff-line add">+delugevpn_role_docker_image_repo: &quot;binhex/arch-delugevpn&quot;</span><span class="diff-line add">+delugevpn_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+delugevpn_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;delugevpn&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-delugevpn_docker_ports_defaults:</span><span class="diff-line add">+delugevpn_role_docker_ports_default:</span><span class="diff-line context">   - &quot;58112:58112&quot;</span><span class="diff-line context">   - &quot;58846:58846&quot;</span><span class="diff-line del">-delugevpn_docker_ports_custom: []</span><span class="diff-line del">-delugevpn_docker_ports: &quot;{{ delugevpn_docker_ports_defaults</span><span class="diff-line del">-                            + delugevpn_docker_ports_custom }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_ports_custom: []</span><span class="diff-line add">+delugevpn_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;delugevpn&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-delugevpn_docker_envs_default:</span><span class="diff-line add">+delugevpn_role_docker_envs_default:</span><span class="diff-line add">+  DEBUG: &quot;false&quot;</span><span class="diff-line add">+  DELUGE_DAEMON_LOG_LEVEL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_log_level_daemon&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  DELUGE_WEB_LOG_LEVEL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_log_level_web&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  ENABLE_PRIVOXY: &quot;no&quot;</span><span class="diff-line add">+  LAN_NETWORK: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_lan_network&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  NAME_SERVERS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_name_servers&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line del">-  PGID: &quot;{{ gid }}&quot;</span><span class="diff-line add">+  STRICT_PORT_FORWARD: &quot;yes&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line add">+  UMASK: &quot;022&quot;</span><span class="diff-line add">+  VPN_CLIENT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_client&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line context">   VPN_ENABLED: &quot;yes&quot;</span><span class="diff-line del">-  VPN_USER: &quot;{{ delugevpn.vpn_user | default(&#x27;username&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_PASS: &quot;{{ delugevpn.vpn_pass | default(&#x27;password&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_PROV: &quot;{{ delugevpn.vpn_prov | default(&#x27;pia&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_CLIENT: &quot;{{ delugevpn.vpn_client | default(&#x27;wireguard&#x27;, true) }}&quot;</span><span class="diff-line del">-  STRICT_PORT_FORWARD: &quot;yes&quot;</span><span class="diff-line del">-  ENABLE_PRIVOXY: &quot;no&quot;</span><span class="diff-line del">-  LAN_NETWORK: &quot;{{ delugevpn_lan_network }}&quot;</span><span class="diff-line del">-  NAME_SERVERS: &quot;{{ delugevpn_name_servers }}&quot;</span><span class="diff-line del">-  DELUGE_DAEMON_LOG_LEVEL: &quot;{{ delugevpn_log_level_daemon }}&quot;</span><span class="diff-line del">-  DELUGE_WEB_LOG_LEVEL: &quot;{{ delugevpn_log_level_web }}&quot;</span><span class="diff-line del">-  DEBUG: &quot;false&quot;</span><span class="diff-line del">-  UMASK: &quot;022&quot;</span><span class="diff-line del">-delugevpn_docker_envs_custom: {}</span><span class="diff-line del">-delugevpn_docker_envs: &quot;{{ delugevpn_docker_envs_default</span><span class="diff-line del">-                           | combine(delugevpn_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-delugevpn_docker_commands_default: []</span><span class="diff-line del">-delugevpn_docker_commands_custom: []</span><span class="diff-line del">-delugevpn_docker_commands: &quot;{{ delugevpn_docker_commands_default</span><span class="diff-line del">-                               + delugevpn_docker_commands_custom }}&quot;</span><span class="diff-line add">+  VPN_PASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_pass&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  VPN_PROV: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_prov&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+  VPN_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_user&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_envs_custom: {}</span><span class="diff-line add">+delugevpn_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;delugevpn&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;delugevpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-delugevpn_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ delugevpn_paths_location }}:/config&quot;</span><span class="diff-line add">+delugevpn_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;delugevpn&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/etc/localtime:/etc/localtime:ro&quot;</span><span class="diff-line del">-  - &quot;/opt/scripts:/scripts&quot;</span><span class="diff-line del">-delugevpn_docker_volumes_custom: []</span><span class="diff-line del">-delugevpn_docker_volumes: &quot;{{ delugevpn_docker_volumes_default</span><span class="diff-line del">-                              + delugevpn_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-delugevpn_docker_devices_default: []</span><span class="diff-line del">-delugevpn_docker_devices_custom: []</span><span class="diff-line del">-delugevpn_docker_devices: &quot;{{ delugevpn_docker_devices_default</span><span class="diff-line del">-                              + delugevpn_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-delugevpn_docker_hosts_default: {}</span><span class="diff-line del">-delugevpn_docker_hosts_custom: {}</span><span class="diff-line del">-delugevpn_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(delugevpn_docker_hosts_default)</span><span class="diff-line del">-                            | combine(delugevpn_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-delugevpn_docker_labels_default: {}</span><span class="diff-line del">-delugevpn_docker_labels_custom: {}</span><span class="diff-line del">-delugevpn_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(delugevpn_docker_labels_default)</span><span class="diff-line del">-                             | combine(delugevpn_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line add">+delugevpn_role_docker_volumes_custom: []</span><span class="diff-line add">+delugevpn_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;delugevpn&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-delugevpn_docker_hostname: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_hostname: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-delugevpn_docker_networks_alias: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line del">-delugevpn_docker_networks_default: []</span><span class="diff-line del">-delugevpn_docker_networks_custom: []</span><span class="diff-line del">-delugevpn_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + delugevpn_docker_networks_default</span><span class="diff-line del">-                               + delugevpn_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-delugevpn_docker_capabilities_default: []</span><span class="diff-line del">-delugevpn_docker_capabilities_custom: []</span><span class="diff-line del">-delugevpn_docker_capabilities: &quot;{{ delugevpn_docker_capabilities_default</span><span class="diff-line del">-                                   + delugevpn_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-delugevpn_docker_security_opts_default: []</span><span class="diff-line del">-delugevpn_docker_security_opts_custom: []</span><span class="diff-line del">-delugevpn_docker_security_opts: &quot;{{ delugevpn_docker_security_opts_default</span><span class="diff-line del">-                                    + delugevpn_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_networks_alias: &quot;{{ delugevpn_name }}&quot;</span><span class="diff-line add">+delugevpn_role_docker_networks_default: []</span><span class="diff-line add">+delugevpn_role_docker_networks_custom: []</span><span class="diff-line add">+delugevpn_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;delugevpn&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;delugevpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-delugevpn_docker_restart_policy: unless-stopped</span><span class="diff-line add">+delugevpn_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-delugevpn_docker_state: started</span><span class="diff-line add">+delugevpn_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Sysctls</span><span class="diff-line del">-delugevpn_docker_sysctls:</span><span class="diff-line add">+delugevpn_role_docker_sysctls:</span><span class="diff-line context">   net.ipv4.conf.all.src_valid_mark: &quot;1&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Privileged</span><span class="diff-line del">-delugevpn_docker_privileged: &quot;yes&quot;</span><span class="diff-line add">+delugevpn_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-112">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/delugevpn/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,12 +7,19 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line add">+- name: Check for required variables</span><span class="diff-line add">+  ansible.builtin.fail:</span><span class="diff-line add">+    msg: &quot;You need to set delugevpn_role_vpn_user and delugevpn_role_vpn_pass when delugevpn_role_vpn_prov is set to pia using the inventory.&quot;</span><span class="diff-line add">+  when: (not continuous_integration)</span><span class="diff-line add">+        and ((delugevpn_role_vpn_user | length == 0) or (delugevpn_role_vpn_pass | length == 0))</span><span class="diff-line add">+        and (delugevpn_role_vpn_prov == &quot;pia&quot;)</span><span class="diff-line add">+</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-113">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/discoflix/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,123 +17,81 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-discoflix_paths_folder: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line del">-discoflix_paths_location: &quot;{{ server_appdata_path }}/{{ discoflix_paths_folder }}&quot;</span><span class="diff-line del">-discoflix_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ discoflix_paths_location }}&quot;</span><span class="diff-line add">+discoflix_role_paths_folder: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line add">+discoflix_role_paths_location: &quot;{{ server_appdata_path }}/{{ discoflix_role_paths_folder }}&quot;</span><span class="diff-line add">+discoflix_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ discoflix_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-discoflix_web_subdomain: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line del">-discoflix_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-discoflix_web_port: &quot;5454&quot;</span><span class="diff-line del">-discoflix_web_url: &quot;{{ &#x27;https://&#x27; + (discoflix_web_subdomain + &#x27;.&#x27; + discoflix_web_domain</span><span class="diff-line del">-                    if (discoflix_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else discoflix_web_domain) }}&quot;</span><span class="diff-line add">+discoflix_role_web_subdomain: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line add">+discoflix_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+discoflix_role_web_port: &quot;5454&quot;</span><span class="diff-line add">+discoflix_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;discoflix&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;discoflix&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;discoflix&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;discoflix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-discoflix_dns_record: &quot;{{ discoflix_web_subdomain }}&quot;</span><span class="diff-line del">-discoflix_dns_zone: &quot;{{ discoflix_web_domain }}&quot;</span><span class="diff-line del">-discoflix_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+discoflix_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line add">+discoflix_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line add">+discoflix_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-discoflix_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-discoflix_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-discoflix_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-discoflix_traefik_enabled: true</span><span class="diff-line del">-discoflix_traefik_api_enabled: false</span><span class="diff-line del">-discoflix_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+discoflix_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+discoflix_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+discoflix_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+discoflix_role_traefik_enabled: true</span><span class="diff-line add">+discoflix_role_traefik_api_enabled: false</span><span class="diff-line add">+discoflix_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-discoflix_docker_container: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line add">+discoflix_role_docker_container: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-discoflix_docker_image_pull: true</span><span class="diff-line del">-discoflix_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-discoflix_docker_image: &quot;nickheyer/discoflix:{{ discoflix_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-discoflix_docker_ports_defaults: []</span><span class="diff-line del">-discoflix_docker_ports_custom: []</span><span class="diff-line del">-discoflix_docker_ports: &quot;{{ discoflix_docker_ports_defaults</span><span class="diff-line del">-                            + discoflix_docker_ports_custom }}&quot;</span><span class="diff-line add">+discoflix_role_docker_image_pull: true</span><span class="diff-line add">+discoflix_role_docker_image_repo: &quot;nickheyer/discoflix&quot;</span><span class="diff-line add">+discoflix_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+discoflix_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;discoflix&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-discoflix_docker_envs_default: {&quot;internal_df_url&quot;:&quot;http://{{ discoflix_name }}:{{ discoflix_web_port }}&quot;}</span><span class="diff-line del">-discoflix_docker_envs_custom: {}</span><span class="diff-line del">-discoflix_docker_envs: &quot;{{ discoflix_docker_envs_default</span><span class="diff-line del">-                           | combine(discoflix_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-discoflix_docker_commands_default: []</span><span class="diff-line del">-discoflix_docker_commands_custom: []</span><span class="diff-line del">-discoflix_docker_commands: &quot;{{ discoflix_docker_commands_default</span><span class="diff-line del">-                               + discoflix_docker_commands_custom }}&quot;</span><span class="diff-line add">+discoflix_role_docker_envs_default:</span><span class="diff-line add">+  internal_df_url: &quot;http://{{ discoflix_name }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line add">+discoflix_role_docker_envs_custom: {}</span><span class="diff-line add">+discoflix_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;discoflix&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;discoflix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-discoflix_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ discoflix_paths_location }}/data:/app/data&quot;</span><span class="diff-line del">-discoflix_docker_volumes_custom: []</span><span class="diff-line del">-discoflix_docker_volumes: &quot;{{ discoflix_docker_volumes_default</span><span class="diff-line del">-                              + discoflix_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-discoflix_docker_devices_default: []</span><span class="diff-line del">-discoflix_docker_devices_custom: []</span><span class="diff-line del">-discoflix_docker_devices: &quot;{{ discoflix_docker_devices_default</span><span class="diff-line del">-                              + discoflix_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-discoflix_docker_hosts_default: {}</span><span class="diff-line del">-discoflix_docker_hosts_custom: {}</span><span class="diff-line del">-discoflix_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(discoflix_docker_hosts_default)</span><span class="diff-line del">-                            | combine(discoflix_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-discoflix_docker_labels_default: {}</span><span class="diff-line del">-discoflix_docker_labels_custom: {}</span><span class="diff-line del">-discoflix_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(discoflix_docker_labels_default)</span><span class="diff-line del">-                             | combine(discoflix_docker_labels_custom) }}&quot;</span><span class="diff-line add">+discoflix_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;discoflix&#x27;) }}/data:/app/data&quot;</span><span class="diff-line add">+discoflix_role_docker_volumes_custom: []</span><span class="diff-line add">+discoflix_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;discoflix&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-discoflix_docker_hostname: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line add">+discoflix_role_docker_hostname: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-discoflix_docker_networks_alias: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line del">-discoflix_docker_networks_default: []</span><span class="diff-line del">-discoflix_docker_networks_custom: []</span><span class="diff-line del">-discoflix_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + discoflix_docker_networks_default</span><span class="diff-line del">-                               + discoflix_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-discoflix_docker_capabilities_default: []</span><span class="diff-line del">-discoflix_docker_capabilities_custom: []</span><span class="diff-line del">-discoflix_docker_capabilities: &quot;{{ discoflix_docker_capabilities_default</span><span class="diff-line del">-                                 + discoflix_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-discoflix_docker_security_opts_default: []</span><span class="diff-line del">-discoflix_docker_security_opts_custom: []</span><span class="diff-line del">-discoflix_docker_security_opts: &quot;{{ discoflix_docker_security_opts_default</span><span class="diff-line del">-                                    + discoflix_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+discoflix_role_docker_networks_alias: &quot;{{ discoflix_name }}&quot;</span><span class="diff-line add">+discoflix_role_docker_networks_default: []</span><span class="diff-line add">+discoflix_role_docker_networks_custom: []</span><span class="diff-line add">+discoflix_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;discoflix&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;discoflix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-discoflix_docker_restart_policy: unless-stopped</span><span class="diff-line add">+discoflix_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-discoflix_docker_state: started</span><span class="diff-line add">+discoflix_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-114">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/discoflix/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-115">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dockwatch/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,16 +8,22 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Basics</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+dockwatch_name: dockwatch</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_post_enable: false</span><span class="diff-line add">+dockwatch_role_post_enable: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker Socket Proxy</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_docker_socket_proxy_envs:</span><span class="diff-line add">+dockwatch_role_docker_socket_proxy_envs:</span><span class="diff-line context">   ALLOW_START: &quot;1&quot;</span><span class="diff-line context">   ALLOW_STOP: &quot;1&quot;</span><span class="diff-line context">   ALLOW_RESTARTS: &quot;1&quot;</span><span class="diff-line hunk">@@ -25,147 +31,100 @@</span><span class="diff-line context">   IMAGES: &quot;1&quot;</span><span class="diff-line context">   NETWORKS: &quot;1&quot;</span><span class="diff-line context">   PORTS: &quot;1&quot;</span><span class="diff-line del">-  POST: &quot;{{ &#x27;1&#x27; if dockwatch_post_enable else omit }}&quot;</span><span class="diff-line add">+  POST: &quot;{{ &#x27;1&#x27;</span><span class="diff-line add">+         if lookup(&#x27;role_var&#x27;, &#x27;_post_enable&#x27;, role=&#x27;dockwatch&#x27;)</span><span class="diff-line add">+         else omit }}&quot;</span><span class="diff-line context">   VOLUMES: &quot;1&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line del">-# Basics</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-dockwatch_name: dockwatch</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_paths_folder: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line del">-dockwatch_paths_location: &quot;{{ server_appdata_path }}/{{ dockwatch_paths_folder }}&quot;</span><span class="diff-line del">-dockwatch_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ dockwatch_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ dockwatch_paths_location }}/icons&quot;</span><span class="diff-line add">+dockwatch_role_paths_folder: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line add">+dockwatch_role_paths_location: &quot;{{ server_appdata_path }}/{{ dockwatch_role_paths_folder }}&quot;</span><span class="diff-line add">+dockwatch_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ dockwatch_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ dockwatch_role_paths_location }}/icons&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_web_subdomain: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line del">-dockwatch_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-dockwatch_web_port: &quot;80&quot;</span><span class="diff-line del">-dockwatch_web_url: &quot;{{ &#x27;https://&#x27; + (dockwatch_web_subdomain + &#x27;.&#x27; + dockwatch_web_domain</span><span class="diff-line del">-                    if (dockwatch_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else dockwatch_web_domain) }}&quot;</span><span class="diff-line add">+dockwatch_role_web_subdomain: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line add">+dockwatch_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+dockwatch_role_web_port: &quot;80&quot;</span><span class="diff-line add">+dockwatch_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dockwatch&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dockwatch&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dockwatch&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dockwatch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_dns_record: &quot;{{ dockwatch_web_subdomain }}&quot;</span><span class="diff-line del">-dockwatch_dns_zone: &quot;{{ dockwatch_web_domain }}&quot;</span><span class="diff-line del">-dockwatch_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+dockwatch_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line add">+dockwatch_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line add">+dockwatch_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-dockwatch_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-dockwatch_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-dockwatch_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-dockwatch_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-dockwatch_traefik_enabled: true</span><span class="diff-line del">-dockwatch_traefik_api_enabled: true</span><span class="diff-line del">-dockwatch_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+dockwatch_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+dockwatch_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+dockwatch_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+dockwatch_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+dockwatch_role_traefik_enabled: true</span><span class="diff-line add">+dockwatch_role_traefik_api_enabled: true</span><span class="diff-line add">+dockwatch_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-dockwatch_docker_container: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_container: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-dockwatch_docker_image_pull: true</span><span class="diff-line del">-dockwatch_docker_image_tag: &quot;main&quot;</span><span class="diff-line del">-dockwatch_docker_image: &quot;ghcr.io/notifiarr/dockwatch:{{ dockwatch_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-dockwatch_docker_ports_defaults: []</span><span class="diff-line del">-dockwatch_docker_ports_custom: []</span><span class="diff-line del">-dockwatch_docker_ports: &quot;{{ dockwatch_docker_ports_defaults</span><span class="diff-line del">-                            + dockwatch_docker_ports_custom }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_image_pull: true</span><span class="diff-line add">+dockwatch_role_docker_image_repo: &quot;ghcr.io/notifiarr/dockwatch&quot;</span><span class="diff-line add">+dockwatch_role_docker_image_tag: &quot;main&quot;</span><span class="diff-line add">+dockwatch_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;dockwatch&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-dockwatch_docker_envs_default:</span><span class="diff-line add">+dockwatch_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   DOCKER_HOST: &quot;{{ dockwatch_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line del">-dockwatch_docker_envs_custom: {}</span><span class="diff-line del">-dockwatch_docker_envs: &quot;{{ dockwatch_docker_envs_default</span><span class="diff-line del">-                           | combine(dockwatch_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-dockwatch_docker_commands_default: []</span><span class="diff-line del">-dockwatch_docker_commands_custom: []</span><span class="diff-line del">-dockwatch_docker_commands: &quot;{{ dockwatch_docker_commands_default</span><span class="diff-line del">-                               + dockwatch_docker_commands_custom }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_envs_custom: {}</span><span class="diff-line add">+dockwatch_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;dockwatch&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;dockwatch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-dockwatch_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ dockwatch_paths_location }}:/config&quot;</span><span class="diff-line del">-dockwatch_docker_volumes_custom: []</span><span class="diff-line del">-dockwatch_docker_volumes: &quot;{{ dockwatch_docker_volumes_default</span><span class="diff-line del">-                              + dockwatch_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-dockwatch_docker_devices_default: []</span><span class="diff-line del">-dockwatch_docker_devices_custom: []</span><span class="diff-line del">-dockwatch_docker_devices: &quot;{{ dockwatch_docker_devices_default</span><span class="diff-line del">-                              + dockwatch_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-dockwatch_docker_hosts_default: {}</span><span class="diff-line del">-dockwatch_docker_hosts_custom: {}</span><span class="diff-line del">-dockwatch_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(dockwatch_docker_hosts_default)</span><span class="diff-line del">-                            | combine(dockwatch_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-dockwatch_docker_labels_default: {}</span><span class="diff-line del">-dockwatch_docker_labels_custom: {}</span><span class="diff-line del">-dockwatch_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(dockwatch_docker_labels_default)</span><span class="diff-line del">-                             | combine(dockwatch_docker_labels_custom) }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;dockwatch&#x27;) }}:/config&quot;</span><span class="diff-line add">+dockwatch_role_docker_volumes_custom: []</span><span class="diff-line add">+dockwatch_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;dockwatch&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-dockwatch_docker_hostname: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_hostname: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-dockwatch_docker_networks_alias: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line del">-dockwatch_docker_networks_default: []</span><span class="diff-line del">-dockwatch_docker_networks_custom: []</span><span class="diff-line del">-dockwatch_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + dockwatch_docker_networks_default</span><span class="diff-line del">-                               + dockwatch_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-dockwatch_docker_capabilities_default: []</span><span class="diff-line del">-dockwatch_docker_capabilities_custom: []</span><span class="diff-line del">-dockwatch_docker_capabilities: &quot;{{ dockwatch_docker_capabilities_default</span><span class="diff-line del">-                                   + dockwatch_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-dockwatch_docker_security_opts_default: []</span><span class="diff-line del">-dockwatch_docker_security_opts_custom: []</span><span class="diff-line del">-dockwatch_docker_security_opts: &quot;{{ dockwatch_docker_security_opts_default</span><span class="diff-line del">-                                    + dockwatch_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_networks_alias: &quot;{{ dockwatch_name }}&quot;</span><span class="diff-line add">+dockwatch_role_docker_networks_default: []</span><span class="diff-line add">+dockwatch_role_docker_networks_custom: []</span><span class="diff-line add">+dockwatch_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;dockwatch&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-dockwatch_docker_restart_policy: unless-stopped</span><span class="diff-line add">+dockwatch_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-dockwatch_docker_state: started</span><span class="diff-line add">+dockwatch_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-dockwatch_depends_on: &quot;{{ dockwatch_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-dockwatch_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-dockwatch_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+dockwatch_role_depends_on: &quot;{{ dockwatch_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+dockwatch_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+dockwatch_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-116">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/dockwatch/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,14 +12,14 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ dockwatch_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs: &quot;{{ dockwatch_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_socket_proxy_envs&#x27;, role=&#x27;dockwatch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-117">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/doplarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,99 +14,77 @@</span><span class="diff-line context"> doplarr_name: doplarr</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+doplarr_role_discord_token: &quot;&quot;</span><span class="diff-line add">+doplarr_role_overseerr_url: &quot;&quot;</span><span class="diff-line add">+doplarr_role_overseerr_api: &quot;&quot;</span><span class="diff-line add">+doplarr_role_radarr_api: &quot;&quot;</span><span class="diff-line add">+doplarr_role_radarr_url: &quot;&quot;</span><span class="diff-line add">+doplarr_role_sonarr_api: &quot;&quot;</span><span class="diff-line add">+doplarr_role_sonarr_url: &quot;&quot;</span><span class="diff-line add">+doplarr_role_discord_max_results: &quot;25&quot;</span><span class="diff-line add">+doplarr_role_discord_role_id: &quot;&quot;</span><span class="diff-line add">+doplarr_role_discord_requested_msg_style: &quot;:plain&quot;</span><span class="diff-line add">+doplarr_role_sonarr_quality_profile: &quot;&quot;</span><span class="diff-line add">+doplarr_role_radarr_quality_profile: &quot;&quot;</span><span class="diff-line add">+doplarr_role_sonarr_language_profile: &quot;&quot;</span><span class="diff-line add">+doplarr_role_overseer_default_id: &quot;&quot;</span><span class="diff-line add">+doplarr_role_partial_seasons: &quot;true&quot;</span><span class="diff-line add">+doplarr_role_log_level: &quot;:info&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-doplarr_docker_container: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line add">+doplarr_role_docker_container: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-doplarr_docker_image_pull: true</span><span class="diff-line del">-doplarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-doplarr_docker_image: &quot;lscr.io/linuxserver/doplarr:{{ doplarr_docker_image_tag }}&quot;</span><span class="diff-line add">+doplarr_role_docker_image_pull: true</span><span class="diff-line add">+doplarr_role_docker_image_repo: &quot;lscr.io/linuxserver/doplarr&quot;</span><span class="diff-line add">+doplarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+doplarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;doplarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-doplarr_docker_envs_default:</span><span class="diff-line add">+doplarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  DISCORD__TOKEN: &quot;{{ doplarr.discord_token }}&quot;</span><span class="diff-line del">-  OVERSEERR__URL: &quot;{{ doplarr.overseerr_url | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  OVERSEERR__API: &quot;{{ doplarr.overseerr_api }}&quot;</span><span class="diff-line del">-  RADARR__API: &quot;{{ doplarr.radarr_api | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  RADARR__URL: &quot;{{ doplarr.radarr_url | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  SONARR__API: &quot;{{ doplarr.sonarr_api | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  SONARR__URL: &quot;{{ doplarr.sonarr_url | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  DISCORD__MAX_RESULTS: &quot;{{ doplarr.discord_max_results | default(&#x27;25&#x27;, true) }}&quot;</span><span class="diff-line del">-  DISCORD__ROLE_ID: &quot;{{ doplarr.discord_role_id | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  DISCORD__REQUESTED_MSG_STYLE: &quot;{{ doplarr.discord_requested_msg_style | default(&#x27;:plain&#x27;, true) }}&quot;</span><span class="diff-line del">-  SONARR__QUALITY_PROFILE: &quot;{{ doplarr.sonarr_quality_profile | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  RADARR__QUALITY_PROFILE: &quot;{{ doplarr.radarr_quality_profile | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  SONARR__LANGUAGE_PROFILE: &quot;{{ doplarr.sonarr_language_profile | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  OVERSEERR__DEFAULT_ID: &quot;{{ doplarr.overseer_default_id | default(&#x27;&#x27;, true) }}&quot;</span><span class="diff-line del">-  PARTIAL_SEASONS: &quot;{{ doplarr.partial_seasons | default(&#x27;true&#x27;, true) }}&quot;</span><span class="diff-line del">-  LOG_LEVEL: &quot;{{ doplarr.log_level | default(&#x27;:info&#x27;, true) }}&quot;</span><span class="diff-line del">-doplarr_docker_envs_custom: []</span><span class="diff-line del">-doplarr_docker_envs: &quot;{{ doplarr_docker_envs_default</span><span class="diff-line del">-                         | combine(doplarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-doplarr_docker_commands_default: []</span><span class="diff-line del">-doplarr_docker_commands_custom: []</span><span class="diff-line del">-doplarr_docker_commands: &quot;{{ doplarr_docker_commands_default</span><span class="diff-line del">-                             + doplarr_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-doplarr_docker_volumes_default: []</span><span class="diff-line del">-doplarr_docker_volumes_custom: []</span><span class="diff-line del">-doplarr_docker_volumes: &quot;{{ doplarr_docker_volumes_default</span><span class="diff-line del">-                            + doplarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-doplarr_docker_devices_default: []</span><span class="diff-line del">-doplarr_docker_devices_custom: []</span><span class="diff-line del">-doplarr_docker_devices: &quot;{{ doplarr_docker_devices_default</span><span class="diff-line del">-                            + doplarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-doplarr_docker_hosts_default: {}</span><span class="diff-line del">-doplarr_docker_hosts_custom: {}</span><span class="diff-line del">-doplarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(doplarr_docker_hosts_default)</span><span class="diff-line del">-                          | combine(doplarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-doplarr_docker_labels_default: {}</span><span class="diff-line del">-doplarr_docker_labels_custom: {}</span><span class="diff-line del">-doplarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(doplarr_docker_labels_default)</span><span class="diff-line del">-                           | combine(doplarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  DISCORD__TOKEN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_discord_token&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  OVERSEERR__URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_overseerr_url&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  OVERSEERR__API: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_overseerr_api&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  RADARR__API: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_radarr_api&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  RADARR__URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_radarr_url&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  SONARR__API: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_api&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  SONARR__URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_url&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  DISCORD__MAX_RESULTS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_discord_max_results&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  DISCORD__ROLE_ID: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_discord_role_id&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  DISCORD__REQUESTED_MSG_STYLE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_discord_requested_msg_style&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  SONARR__QUALITY_PROFILE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_quality_profile&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  RADARR__QUALITY_PROFILE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_radarr_quality_profile&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  SONARR__LANGUAGE_PROFILE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_language_profile&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  OVERSEERR__DEFAULT_ID: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_overseer_default_id&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  PARTIAL_SEASONS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_partial_seasons&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+  LOG_LEVEL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_log_level&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line add">+doplarr_role_docker_envs_custom: []</span><span class="diff-line add">+doplarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;doplarr&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;doplarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-doplarr_docker_hostname: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line add">+doplarr_role_docker_hostname: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-doplarr_docker_networks_alias: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line del">-doplarr_docker_networks_default: []</span><span class="diff-line del">-doplarr_docker_networks_custom: []</span><span class="diff-line del">-doplarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + doplarr_docker_networks_default</span><span class="diff-line del">-                             + doplarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-doplarr_docker_capabilities_default: []</span><span class="diff-line del">-doplarr_docker_capabilities_custom: []</span><span class="diff-line del">-doplarr_docker_capabilities: &quot;{{ doplarr_docker_capabilities_default</span><span class="diff-line del">-                                 + doplarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-doplarr_docker_security_opts_default: []</span><span class="diff-line del">-doplarr_docker_security_opts_custom: []</span><span class="diff-line del">-doplarr_docker_security_opts: &quot;{{ doplarr_docker_security_opts_default</span><span class="diff-line del">-                                  + doplarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+doplarr_role_docker_networks_alias: &quot;{{ doplarr_name }}&quot;</span><span class="diff-line add">+doplarr_role_docker_networks_default: []</span><span class="diff-line add">+doplarr_role_docker_networks_custom: []</span><span class="diff-line add">+doplarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;doplarr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;doplarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-doplarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+doplarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-doplarr_docker_state: started</span><span class="diff-line add">+doplarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-118">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/doplarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,11 +7,18 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Fail when default doplarr.discord_token is specified</span><span class="diff-line add">+- name: Check for required variables</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You must specify a Discord bot token in the settings under doplarr.discord_token.&quot;</span><span class="diff-line del">-  when: (doplarr.discord_token == &#x27;your_discord_bot_token&#x27;) and</span><span class="diff-line del">-        (not continuous_integration)</span><span class="diff-line add">+    msg: &quot;You need to set doplarr_role_discord_token, doplarr_role_overseerr_url, doplarr_role_overseerr_api, doplarr_role_radarr_api, doplarr_role_radarr_url, doplarr_role_sonarr_api, doplarr_role_sonarr_url, and doplarr_role_discord_role_id using the inventory.&quot;</span><span class="diff-line add">+  when: (not continuous_integration) and</span><span class="diff-line add">+        ((doplarr_role_discord_token | length == 0) or</span><span class="diff-line add">+         (doplarr_role_overseerr_url | length == 0) or</span><span class="diff-line add">+         (doplarr_role_overseerr_api | length == 0) or</span><span class="diff-line add">+         (doplarr_role_radarr_api | length == 0) or</span><span class="diff-line add">+         (doplarr_role_radarr_url | length == 0) or</span><span class="diff-line add">+         (doplarr_role_sonarr_api | length == 0) or</span><span class="diff-line add">+         (doplarr_role_sonarr_url | length == 0) or</span><span class="diff-line add">+         (doplarr_role_discord_role_id | length == 0))</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-119">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/duplicati/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,129 +18,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-duplicati_paths_folder: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line del">-duplicati_paths_location: &quot;{{ server_appdata_path }}/{{ duplicati_paths_folder }}&quot;</span><span class="diff-line del">-duplicati_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ duplicati_paths_location }}&quot;</span><span class="diff-line add">+duplicati_role_paths_folder: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line add">+duplicati_role_paths_location: &quot;{{ server_appdata_path }}/{{ duplicati_role_paths_folder }}&quot;</span><span class="diff-line add">+duplicati_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ duplicati_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-duplicati_web_subdomain: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line del">-duplicati_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-duplicati_web_port: &quot;8200&quot;</span><span class="diff-line del">-duplicati_web_url: &quot;{{ &#x27;https://&#x27; + (duplicati_web_subdomain + &#x27;.&#x27; + duplicati_web_domain</span><span class="diff-line del">-                    if (duplicati_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else duplicati_web_domain) }}&quot;</span><span class="diff-line add">+duplicati_role_web_subdomain: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line add">+duplicati_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+duplicati_role_web_port: &quot;8200&quot;</span><span class="diff-line add">+duplicati_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;duplicati&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;duplicati&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;duplicati&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;duplicati&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-duplicati_dns_record: &quot;{{ duplicati_web_subdomain }}&quot;</span><span class="diff-line del">-duplicati_dns_zone: &quot;{{ duplicati_web_domain }}&quot;</span><span class="diff-line del">-duplicati_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+duplicati_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;duplicati&#x27;) }}&quot;</span><span class="diff-line add">+duplicati_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;duplicati&#x27;) }}&quot;</span><span class="diff-line add">+duplicati_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-duplicati_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-duplicati_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-duplicati_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-duplicati_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-duplicati_traefik_enabled: true</span><span class="diff-line del">-duplicati_traefik_api_enabled: true</span><span class="diff-line del">-duplicati_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+duplicati_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+duplicati_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+duplicati_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+duplicati_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+duplicati_role_traefik_enabled: true</span><span class="diff-line add">+duplicati_role_traefik_api_enabled: true</span><span class="diff-line add">+duplicati_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-duplicati_docker_container: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line add">+duplicati_role_docker_container: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-duplicati_docker_image_pull: true</span><span class="diff-line del">-duplicati_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-duplicati_docker_image: &quot;linuxserver/duplicati:{{ duplicati_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-duplicati_docker_ports_defaults: []</span><span class="diff-line del">-duplicati_docker_ports_custom: []</span><span class="diff-line del">-duplicati_docker_ports: &quot;{{ duplicati_docker_ports_defaults</span><span class="diff-line del">-                            + duplicati_docker_ports_custom }}&quot;</span><span class="diff-line add">+duplicati_role_docker_image_pull: true</span><span class="diff-line add">+duplicati_role_docker_image_repo: &quot;linuxserver/duplicati&quot;</span><span class="diff-line add">+duplicati_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+duplicati_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;duplicati&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;duplicati&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-duplicati_docker_envs_default:</span><span class="diff-line add">+duplicati_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-duplicati_docker_envs_custom: {}</span><span class="diff-line del">-duplicati_docker_envs: &quot;{{ duplicati_docker_envs_default</span><span class="diff-line del">-                           | combine(duplicati_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-duplicati_docker_commands_default: []</span><span class="diff-line del">-duplicati_docker_commands_custom: []</span><span class="diff-line del">-duplicati_docker_commands: &quot;{{ duplicati_docker_commands_default</span><span class="diff-line del">-                               + duplicati_docker_commands_custom }}&quot;</span><span class="diff-line add">+duplicati_role_docker_envs_custom: {}</span><span class="diff-line add">+duplicati_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;duplicati&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;duplicati&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-duplicati_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ duplicati_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;/opt:/saltbox/opt&quot;</span><span class="diff-line add">+duplicati_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;duplicati&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ server_appdata_path }}:/saltbox/opt&quot;</span><span class="diff-line context">   - &quot;/srv/git/saltbox:/saltbox/saltbox&quot;</span><span class="diff-line del">-duplicati_docker_volumes_custom: []</span><span class="diff-line del">-duplicati_docker_volumes: &quot;{{ duplicati_docker_volumes_default</span><span class="diff-line del">-                              + duplicati_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-duplicati_docker_devices_default: []</span><span class="diff-line del">-duplicati_docker_devices_custom: []</span><span class="diff-line del">-duplicati_docker_devices: &quot;{{ duplicati_docker_devices_default</span><span class="diff-line del">-                              + duplicati_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-duplicati_docker_hosts_default: {}</span><span class="diff-line del">-duplicati_docker_hosts_custom: {}</span><span class="diff-line del">-duplicati_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(duplicati_docker_hosts_default)</span><span class="diff-line del">-                            | combine(duplicati_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-duplicati_docker_labels_default: {}</span><span class="diff-line del">-duplicati_docker_labels_custom: {}</span><span class="diff-line del">-duplicati_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(duplicati_docker_labels_default)</span><span class="diff-line del">-                             | combine(duplicati_docker_labels_custom) }}&quot;</span><span class="diff-line add">+duplicati_role_docker_volumes_custom: []</span><span class="diff-line add">+duplicati_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;duplicati&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;duplicati&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-duplicati_docker_hostname: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line add">+duplicati_role_docker_hostname: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-duplicati_docker_networks_alias: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line del">-duplicati_docker_networks_default: []</span><span class="diff-line del">-duplicati_docker_networks_custom: []</span><span class="diff-line del">-duplicati_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + duplicati_docker_networks_default</span><span class="diff-line del">-                               + duplicati_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-duplicati_docker_capabilities_default: []</span><span class="diff-line del">-duplicati_docker_capabilities_custom: []</span><span class="diff-line del">-duplicati_docker_capabilities: &quot;{{ duplicati_docker_capabilities_default</span><span class="diff-line del">-                                   + duplicati_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-duplicati_docker_security_opts_default: []</span><span class="diff-line del">-duplicati_docker_security_opts_custom: []</span><span class="diff-line del">-duplicati_docker_security_opts: &quot;{{ duplicati_docker_security_opts_default</span><span class="diff-line del">-                                    + duplicati_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+duplicati_role_docker_networks_alias: &quot;{{ duplicati_name }}&quot;</span><span class="diff-line add">+duplicati_role_docker_networks_default: []</span><span class="diff-line add">+duplicati_role_docker_networks_custom: []</span><span class="diff-line add">+duplicati_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;duplicati&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;duplicati&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-duplicati_docker_restart_policy: unless-stopped</span><span class="diff-line add">+duplicati_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-duplicati_docker_state: started</span><span class="diff-line add">+duplicati_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-120">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/duplicati/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-121">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/elasticsearch/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,113 +17,68 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-elasticsearch_docker_env_password: &quot;elastic789&quot;</span><span class="diff-line del">-elasticsearch_docker_env_http_port: &quot;9200&quot;</span><span class="diff-line del">-elasticsearch_docker_env_transport_port: &quot;9300&quot;</span><span class="diff-line del">-elasticsearch_sysctl_vm_max_map_count: &quot;262144&quot;</span><span class="diff-line add">+elasticsearch_role_docker_env_password: &quot;elastic789&quot;</span><span class="diff-line add">+elasticsearch_role_docker_env_http_port: &quot;9200&quot;</span><span class="diff-line add">+elasticsearch_role_docker_env_transport_port: &quot;9300&quot;</span><span class="diff-line add">+elasticsearch_role_sysctl_vm_max_map_count: &quot;262144&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-elasticsearch_paths_folder: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line del">-elasticsearch_paths_location: &quot;{{ server_appdata_path }}/{{ elasticsearch_paths_folder }}&quot;</span><span class="diff-line del">-elasticsearch_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ elasticsearch_paths_location }}&quot;</span><span class="diff-line del">-elasticsearch_paths_recursive: true</span><span class="diff-line add">+elasticsearch_role_paths_folder: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line add">+elasticsearch_role_paths_location: &quot;{{ server_appdata_path }}/{{ elasticsearch_role_paths_folder }}&quot;</span><span class="diff-line add">+elasticsearch_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ elasticsearch_role_paths_location }}&quot;</span><span class="diff-line add">+elasticsearch_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-elasticsearch_docker_container: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_container: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-elasticsearch_docker_image_pull: true</span><span class="diff-line del">-elasticsearch_docker_image_tag: &quot;8.11.0&quot;</span><span class="diff-line del">-elasticsearch_docker_image: &quot;docker.elastic.co/elasticsearch/elasticsearch:{{ elasticsearch_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-elasticsearch_docker_ports_defaults: []</span><span class="diff-line del">-elasticsearch_docker_ports_custom: []</span><span class="diff-line del">-elasticsearch_docker_ports: &quot;{{ elasticsearch_docker_ports_defaults</span><span class="diff-line del">-                                + elasticsearch_docker_ports_custom }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_image_pull: true</span><span class="diff-line add">+elasticsearch_role_docker_image_repo: &quot;docker.elastic.co/elasticsearch/elasticsearch&quot;</span><span class="diff-line add">+elasticsearch_role_docker_image_tag: &quot;8.11.0&quot;</span><span class="diff-line add">+elasticsearch_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;elasticsearch&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-elasticsearch_docker_envs_default:</span><span class="diff-line add">+elasticsearch_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   discovery.type: &quot;single-node&quot;</span><span class="diff-line context">   node.name: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line context">   xpack.security.enabled: &quot;false&quot;</span><span class="diff-line del">-  ELASTIC_PASSWORD: &quot;{{ elasticsearch_docker_env_password }}&quot;</span><span class="diff-line del">-  # ES_JAVA_OPTS: &quot;-Xms1g -Xmx1g&quot;</span><span class="diff-line del">-  # ENROLLMENT_TOKEN: &quot;&lt;token&gt;&quot;</span><span class="diff-line del">-elasticsearch_docker_envs_custom: {}</span><span class="diff-line del">-elasticsearch_docker_envs: &quot;{{ elasticsearch_docker_envs_default</span><span class="diff-line del">-                               | combine(elasticsearch_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-elasticsearch_docker_commands_default: []</span><span class="diff-line del">-elasticsearch_docker_commands_custom: []</span><span class="diff-line del">-elasticsearch_docker_commands: &quot;{{ elasticsearch_docker_commands_default</span><span class="diff-line del">-                                   + elasticsearch_docker_commands_custom }}&quot;</span><span class="diff-line add">+  ELASTIC_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_envs_custom: {}</span><span class="diff-line add">+elasticsearch_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;elasticsearch&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;elasticsearch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-elasticsearch_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ elasticsearch_paths_location }}:/usr/share/elasticsearch/data&quot;</span><span class="diff-line del">-elasticsearch_docker_volumes_custom: []</span><span class="diff-line del">-elasticsearch_docker_volumes: &quot;{{ elasticsearch_docker_volumes_default</span><span class="diff-line del">-                                  + elasticsearch_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-elasticsearch_docker_devices_default: []</span><span class="diff-line del">-elasticsearch_docker_devices_custom: []</span><span class="diff-line del">-elasticsearch_docker_devices: &quot;{{ elasticsearch_docker_devices_default</span><span class="diff-line del">-                                  + elasticsearch_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-elasticsearch_docker_hosts_default: {}</span><span class="diff-line del">-elasticsearch_docker_hosts_custom: {}</span><span class="diff-line del">-elasticsearch_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(elasticsearch_docker_hosts_default)</span><span class="diff-line del">-                                | combine(elasticsearch_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-elasticsearch_docker_labels_default: {}</span><span class="diff-line del">-elasticsearch_docker_labels_custom: {}</span><span class="diff-line del">-elasticsearch_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(elasticsearch_docker_labels_default)</span><span class="diff-line del">-                                 | combine(elasticsearch_docker_labels_custom) }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;elasticsearch&#x27;) }}:/usr/share/elasticsearch/data&quot;</span><span class="diff-line add">+elasticsearch_role_docker_volumes_custom: []</span><span class="diff-line add">+elasticsearch_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;elasticsearch&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-elasticsearch_docker_hostname: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_hostname: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-elasticsearch_docker_networks_alias: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line del">-elasticsearch_docker_networks_default: []</span><span class="diff-line del">-elasticsearch_docker_networks_custom: []</span><span class="diff-line del">-elasticsearch_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + elasticsearch_docker_networks_default</span><span class="diff-line del">-                                   + elasticsearch_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-elasticsearch_docker_capabilities_default: []</span><span class="diff-line del">-elasticsearch_docker_capabilities_custom: []</span><span class="diff-line del">-elasticsearch_docker_capabilities: &quot;{{ elasticsearch_docker_capabilities_default</span><span class="diff-line del">-                                       + elasticsearch_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-elasticsearch_docker_security_opts_default: []</span><span class="diff-line del">-elasticsearch_docker_security_opts_custom: []</span><span class="diff-line del">-elasticsearch_docker_security_opts: &quot;{{ elasticsearch_docker_security_opts_default</span><span class="diff-line del">-                                        + elasticsearch_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_networks_alias: &quot;{{ elasticsearch_name }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_networks_default: []</span><span class="diff-line add">+elasticsearch_role_docker_networks_custom: []</span><span class="diff-line add">+elasticsearch_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;elasticsearch&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-elasticsearch_docker_restart_policy: always</span><span class="diff-line add">+elasticsearch_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-elasticsearch_docker_state: started</span><span class="diff-line add">+elasticsearch_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-elasticsearch_docker_user: &quot;{{ uid }}&quot;</span><span class="diff-line add">+elasticsearch_role_docker_user: &quot;{{ uid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-122">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/elasticsearch/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,7 +17,7 @@</span><span class="diff-line context">   ignore_errors: true</span><span class="diff-line context">   ansible.posix.sysctl:</span><span class="diff-line context">     name: &quot;vm.max_map_count&quot;</span><span class="diff-line del">-    value: &quot;{{ elasticsearch_sysctl_vm_max_map_count }}&quot;</span><span class="diff-line add">+    value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sysctl_vm_max_map_count&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-123">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/embystat/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,76 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-embystat_paths_folder: &quot;{{ embystat_name }}&quot;</span><span class="diff-line del">-embystat_paths_location: &quot;{{ server_appdata_path }}/{{ embystat_paths_folder }}&quot;</span><span class="diff-line del">-embystat_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ embystat_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ embystat_paths_location }}/config&quot;</span><span class="diff-line add">+embystat_role_paths_folder: &quot;{{ embystat_name }}&quot;</span><span class="diff-line add">+embystat_role_paths_location: &quot;{{ server_appdata_path }}/{{ embystat_role_paths_folder }}&quot;</span><span class="diff-line add">+embystat_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ embystat_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ embystat_role_paths_location }}/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-embystat_web_subdomain: &quot;{{ embystat_name }}&quot;</span><span class="diff-line del">-embystat_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-embystat_web_port: &quot;6555&quot;</span><span class="diff-line del">-embystat_web_url: &quot;{{ &#x27;https://&#x27; + (embystat_web_subdomain + &#x27;.&#x27; + embystat_web_domain</span><span class="diff-line del">-                   if (embystat_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else embystat_web_domain) }}&quot;</span><span class="diff-line add">+embystat_role_web_subdomain: &quot;{{ embystat_name }}&quot;</span><span class="diff-line add">+embystat_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+embystat_role_web_port: &quot;6555&quot;</span><span class="diff-line add">+embystat_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;embystat&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;embystat&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;embystat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;embystat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-embystat_dns_record: &quot;{{ embystat_web_subdomain }}&quot;</span><span class="diff-line del">-embystat_dns_zone: &quot;{{ embystat_web_domain }}&quot;</span><span class="diff-line del">-embystat_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+embystat_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span><span class="diff-line add">+embystat_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span><span class="diff-line add">+embystat_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-embystat_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-embystat_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-embystat_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-embystat_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-embystat_traefik_enabled: true</span><span class="diff-line del">-embystat_traefik_api_enabled: false</span><span class="diff-line del">-embystat_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+embystat_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+embystat_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+embystat_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+embystat_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+embystat_role_traefik_enabled: true</span><span class="diff-line add">+embystat_role_traefik_api_enabled: false</span><span class="diff-line add">+embystat_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-embystat_docker_container: &quot;{{ embystat_name }}&quot;</span><span class="diff-line add">+embystat_role_docker_container: &quot;{{ embystat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-embystat_docker_image_pull: true</span><span class="diff-line del">-embystat_docker_image_tag: &quot;beta-linux-x64&quot;</span><span class="diff-line del">-embystat_docker_image: &quot;uping/embystat:{{ embystat_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-embystat_docker_ports_defaults: []</span><span class="diff-line del">-embystat_docker_ports_custom: []</span><span class="diff-line del">-embystat_docker_ports: &quot;{{ embystat_docker_ports_defaults</span><span class="diff-line del">-                           + embystat_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-embystat_docker_envs_default: {}</span><span class="diff-line del">-embystat_docker_envs_custom: {}</span><span class="diff-line del">-embystat_docker_envs: &quot;{{ embystat_docker_envs_default</span><span class="diff-line del">-                          | combine(embystat_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-embystat_docker_commands_default: []</span><span class="diff-line del">-embystat_docker_commands_custom: []</span><span class="diff-line del">-embystat_docker_commands: &quot;{{ embystat_docker_commands_default</span><span class="diff-line del">-                              + embystat_docker_commands_custom }}&quot;</span><span class="diff-line add">+embystat_role_docker_image_pull: true</span><span class="diff-line add">+embystat_role_docker_image_repo: &quot;uping/embystat&quot;</span><span class="diff-line add">+embystat_role_docker_image_tag: &quot;beta-linux-x64&quot;</span><span class="diff-line add">+embystat_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;embystat&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-embystat_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ embystat_paths_location }}/config:/app/data&quot;</span><span class="diff-line del">-embystat_docker_volumes_custom: []</span><span class="diff-line del">-embystat_docker_volumes: &quot;{{ embystat_docker_volumes_default</span><span class="diff-line del">-                             + embystat_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-embystat_docker_devices_default: []</span><span class="diff-line del">-embystat_docker_devices_custom: []</span><span class="diff-line del">-embystat_docker_devices: &quot;{{ embystat_docker_devices_default</span><span class="diff-line del">-                             + embystat_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-embystat_docker_hosts_default: {}</span><span class="diff-line del">-embystat_docker_hosts_custom: {}</span><span class="diff-line del">-embystat_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(embystat_docker_hosts_default)</span><span class="diff-line del">-                           | combine(embystat_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-embystat_docker_labels_default: {}</span><span class="diff-line del">-embystat_docker_labels_custom: {}</span><span class="diff-line del">-embystat_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(embystat_docker_labels_default)</span><span class="diff-line del">-                            | combine(embystat_docker_labels_custom) }}&quot;</span><span class="diff-line add">+embystat_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;embystat&#x27;) }}/config:/app/data&quot;</span><span class="diff-line add">+embystat_role_docker_volumes_custom: []</span><span class="diff-line add">+embystat_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;embystat&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-embystat_docker_hostname: &quot;{{ embystat_name }}&quot;</span><span class="diff-line add">+embystat_role_docker_hostname: &quot;{{ embystat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-embystat_docker_networks_alias: &quot;{{ embystat_name }}&quot;</span><span class="diff-line del">-embystat_docker_networks_default: []</span><span class="diff-line del">-embystat_docker_networks_custom: []</span><span class="diff-line del">-embystat_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + embystat_docker_networks_default</span><span class="diff-line del">-                              + embystat_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-embystat_docker_capabilities_default: []</span><span class="diff-line del">-embystat_docker_capabilities_custom: []</span><span class="diff-line del">-embystat_docker_capabilities: &quot;{{ embystat_docker_capabilities_default</span><span class="diff-line del">-                                  + embystat_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-embystat_docker_security_opts_default: []</span><span class="diff-line del">-embystat_docker_security_opts_custom: []</span><span class="diff-line del">-embystat_docker_security_opts: &quot;{{ embystat_docker_security_opts_default</span><span class="diff-line del">-                                   + embystat_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+embystat_role_docker_networks_alias: &quot;{{ embystat_name }}&quot;</span><span class="diff-line add">+embystat_role_docker_networks_default: []</span><span class="diff-line add">+embystat_role_docker_networks_custom: []</span><span class="diff-line add">+embystat_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;embystat&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-embystat_docker_restart_policy: unless-stopped</span><span class="diff-line add">+embystat_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-embystat_docker_state: started</span><span class="diff-line add">+embystat_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-124">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/embystat/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -34,4 +34,4 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     recurse: true</span><span class="diff-line del">-  with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line add">+  with_items: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folders_list&#x27;, role=&#x27;embystat&#x27;) }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-125">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/epms/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -26,7 +26,6 @@</span><span class="diff-line context">     stop_timeout: &quot;180&quot;</span><span class="diff-line context">     comparisons:</span><span class="diff-line context">       &#x27;*&#x27;: ignore</span><span class="diff-line del">-</span><span class="diff-line context">   when: (&#x27;plex&#x27; in docker_running_containers)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Extended Personal Media Scanner directories</span><span class="diff-line hunk">@@ -38,19 +37,19 @@</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">   with_items:</span><span class="diff-line del">-    - &#x27;/opt/plex/Library/Application Support/Plex Media Server/Scanners&#x27;</span><span class="diff-line del">-    - &#x27;/opt/plex/Library/Application Support/Plex Media Server/Scanners/Series&#x27;</span><span class="diff-line add">+    - &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Scanners&#x27;</span><span class="diff-line add">+    - &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Scanners/Series&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Get latest Extended Personal Media Scanner.py</span><span class="diff-line context">   ansible.builtin.get_url:</span><span class="diff-line context">     url: https://bitbucket.org/mjarends/plex-scanners/raw/8aa4517831e440512a9a0cb4110e786bf041feb5/Series/Extended%20Personal%20Media%20Scanner.py</span><span class="diff-line context"> </span><span class="diff-line del">-    dest: &#x27;/opt/plex/Library/Application Support/Plex Media Server/Scanners/Series/Extended Personal Media Scanner.py&#x27;</span><span class="diff-line add">+    dest: &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Scanners/Series/Extended Personal Media Scanner.py&#x27;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Extended Personal Media Scanner directory permissions</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &#x27;/opt/plex/Library/Application Support/Plex Media Server/Scanners&#x27;</span><span class="diff-line add">+    path: &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Scanners&#x27;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -60,7 +59,7 @@</span><span class="diff-line context"> - name: Clone Extended Personal Media Scanner Bundle</span><span class="diff-line context">   ansible.builtin.git:</span><span class="diff-line context">     repo: https://bitbucket.org/mjarends/extendedpersonalmedia-agent.bundle.git</span><span class="diff-line del">-    dest: &#x27;/opt/plex/Library/Application Support/Plex Media Server/Plug-ins/ExtendedPersonalMedia-Agent.bundle&#x27;</span><span class="diff-line add">+    dest: &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Plug-ins/ExtendedPersonalMedia-Agent.bundle&#x27;</span><span class="diff-line context">     clone: true</span><span class="diff-line context">     version: HEAD</span><span class="diff-line context">     force: true</span><span class="diff-line hunk">@@ -69,7 +68,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Extended Personal Media Scanner directory permissions</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &#x27;/opt/plex/Library/Application Support/Plex Media Server/Plug-ins/ExtendedPersonalMedia-Agent.bundle&#x27;</span><span class="diff-line add">+    path: &#x27;{{ server_appdata_path }}/plex/Library/Application Support/Plex Media Server/Plug-ins/ExtendedPersonalMedia-Agent.bundle&#x27;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -84,5 +83,4 @@</span><span class="diff-line context">     tls_hostname: localhost</span><span class="diff-line context">     comparisons:</span><span class="diff-line context">       &#x27;*&#x27;: ignore</span><span class="diff-line del">-</span><span class="diff-line context">   when: (&#x27;plex&#x27; in docker_running_containers)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-126">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/esphome/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,135 +17,92 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-esphome_paths_folder: &quot;{{ esphome_name }}&quot;</span><span class="diff-line del">-esphome_paths_location: &quot;{{ server_appdata_path }}/{{ esphome_paths_folder }}&quot;</span><span class="diff-line del">-esphome_paths_conf: &quot;{{ esphome_paths_location }}/configuration.yaml&quot;</span><span class="diff-line del">-esphome_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ esphome_paths_location }}&quot;</span><span class="diff-line add">+esphome_role_paths_folder: &quot;{{ esphome_name }}&quot;</span><span class="diff-line add">+esphome_role_paths_location: &quot;{{ server_appdata_path }}/{{ esphome_role_paths_folder }}&quot;</span><span class="diff-line add">+esphome_role_paths_conf: &quot;{{ esphome_role_paths_location }}/configuration.yaml&quot;</span><span class="diff-line add">+esphome_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ esphome_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-esphome_web_subdomain: &quot;{{ esphome_name }}&quot;</span><span class="diff-line del">-esphome_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-esphome_web_port: &quot;6052&quot;</span><span class="diff-line del">-esphome_web_url: &quot;{{ &#x27;https://&#x27; + (esphome_web_subdomain + &#x27;.&#x27; + esphome_web_domain</span><span class="diff-line del">-                        if (esphome_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else esphome_web_domain) }}&quot;</span><span class="diff-line add">+esphome_role_web_subdomain: &quot;{{ esphome_name }}&quot;</span><span class="diff-line add">+esphome_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+esphome_role_web_port: &quot;6052&quot;</span><span class="diff-line add">+esphome_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;esphome&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;esphome&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;esphome&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;esphome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-esphome_dns_record: &quot;{{ esphome_web_subdomain }}&quot;</span><span class="diff-line del">-esphome_dns_zone: &quot;{{ esphome_web_domain }}&quot;</span><span class="diff-line del">-esphome_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+esphome_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;esphome&#x27;) }}&quot;</span><span class="diff-line add">+esphome_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;esphome&#x27;) }}&quot;</span><span class="diff-line add">+esphome_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-esphome_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-esphome_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-esphome_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-esphome_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-esphome_traefik_enabled: true</span><span class="diff-line del">-esphome_traefik_api_enabled: false</span><span class="diff-line del">-esphome_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+esphome_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+esphome_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+esphome_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+esphome_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+esphome_role_traefik_enabled: true</span><span class="diff-line add">+esphome_role_traefik_api_enabled: false</span><span class="diff-line add">+esphome_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-esphome_docker_container: &quot;{{ esphome_name }}&quot;</span><span class="diff-line add">+esphome_role_docker_container: &quot;{{ esphome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-esphome_docker_image_pull: true</span><span class="diff-line del">-esphome_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-esphome_docker_image: &quot;ghcr.io/imagegenius/esphome:latest&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-esphome_docker_ports_defaults: []</span><span class="diff-line del">-esphome_docker_ports_custom: []</span><span class="diff-line del">-esphome_docker_ports: &quot;{{ esphome_docker_ports_defaults</span><span class="diff-line del">-                                + esphome_docker_ports_custom }}&quot;</span><span class="diff-line add">+esphome_role_docker_image_pull: true</span><span class="diff-line add">+esphome_role_docker_image_repo: &quot;ghcr.io/imagegenius/esphome&quot;</span><span class="diff-line add">+esphome_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+esphome_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;esphome&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;esphome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-esphome_docker_envs_default:</span><span class="diff-line add">+esphome_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-esphome_docker_envs_custom: {}</span><span class="diff-line del">-esphome_docker_envs: &quot;{{ esphome_docker_envs_default</span><span class="diff-line del">-                               | combine(esphome_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-esphome_docker_commands_default: []</span><span class="diff-line del">-esphome_docker_commands_custom: []</span><span class="diff-line del">-esphome_docker_commands: &quot;{{ esphome_docker_commands_default</span><span class="diff-line del">-                                   + esphome_docker_commands_custom }}&quot;</span><span class="diff-line add">+esphome_role_docker_envs_custom: {}</span><span class="diff-line add">+esphome_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;esphome&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;esphome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-esphome_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ esphome_paths_location }}:/config&quot;</span><span class="diff-line add">+esphome_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;esphome&#x27;) }}:/config&quot;</span><span class="diff-line context">   - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-esphome_docker_volumes_custom: []</span><span class="diff-line del">-esphome_docker_volumes: &quot;{{ esphome_docker_volumes_default</span><span class="diff-line del">-                                  + esphome_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Extended Privileges</span><span class="diff-line del">-esphome_docker_privileged: &quot;yes&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-esphome_docker_devices_default: []</span><span class="diff-line del">-esphome_docker_devices_custom: []</span><span class="diff-line del">-esphome_docker_devices: &quot;{{ esphome_docker_devices_default</span><span class="diff-line del">-                                  + esphome_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-esphome_docker_hosts_default: {}</span><span class="diff-line del">-esphome_docker_hosts_custom: {}</span><span class="diff-line del">-esphome_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(esphome_docker_hosts_default)</span><span class="diff-line del">-                                | combine(esphome_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-esphome_docker_labels_default: {}</span><span class="diff-line del">-esphome_docker_labels_custom: {}</span><span class="diff-line del">-esphome_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(esphome_docker_labels_default)</span><span class="diff-line del">-                                 | combine(esphome_docker_labels_custom) }}&quot;</span><span class="diff-line add">+esphome_role_docker_volumes_custom: []</span><span class="diff-line add">+esphome_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;esphome&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;esphome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-esphome_docker_hostname: &quot;{{ esphome_name }}&quot;</span><span class="diff-line add">+esphome_role_docker_hostname: &quot;{{ esphome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-esphome_docker_networks_alias: &quot;{{ esphome_name }}&quot;</span><span class="diff-line del">-esphome_docker_networks_default: []</span><span class="diff-line del">-esphome_docker_networks_custom: []</span><span class="diff-line del">-esphome_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + esphome_docker_networks_default</span><span class="diff-line del">-                                   + esphome_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-esphome_docker_capabilities_default: []</span><span class="diff-line del">-esphome_docker_capabilities_custom: []</span><span class="diff-line del">-esphome_docker_capabilities: &quot;{{ esphome_docker_capabilities_default</span><span class="diff-line del">-                                       + esphome_docker_capabilities_custom }}&quot;</span><span class="diff-line add">+esphome_role_docker_networks_alias: &quot;{{ esphome_name }}&quot;</span><span class="diff-line add">+esphome_role_docker_networks_default: []</span><span class="diff-line add">+esphome_role_docker_networks_custom: []</span><span class="diff-line add">+esphome_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;esphome&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;esphome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Network Mode</span><span class="diff-line del">-esphome_docker_network_mode: &quot;host&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-esphome_docker_security_opts_default: []</span><span class="diff-line del">-esphome_docker_security_opts_custom: []</span><span class="diff-line del">-esphome_docker_security_opts: &quot;{{ esphome_docker_security_opts_default</span><span class="diff-line del">-                                        + esphome_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+esphome_role_docker_network_mode: &quot;host&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-esphome_docker_restart_policy: unless-stopped</span><span class="diff-line add">+esphome_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-esphome_docker_state: started</span><span class="diff-line add">+esphome_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# Privileged</span><span class="diff-line add">+esphome_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-127">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/esphome/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-128">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/factorio/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,114 +17,77 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-factorio_paths_folder: &quot;{{ factorio_name }}&quot;</span><span class="diff-line del">-factorio_paths_location: &quot;{{ server_appdata_path }}/{{ factorio_paths_folder }}&quot;</span><span class="diff-line del">-factorio_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ factorio_paths_location }}&quot;</span><span class="diff-line add">+factorio_role_paths_folder: &quot;{{ factorio_name }}&quot;</span><span class="diff-line add">+factorio_role_paths_location: &quot;{{ server_appdata_path }}/{{ factorio_role_paths_folder }}&quot;</span><span class="diff-line add">+factorio_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ factorio_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-factorio_web_subdomain: &quot;{{ factorio_name }}&quot;</span><span class="diff-line del">-factorio_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-factorio_web_port: &quot;&quot;</span><span class="diff-line add">+factorio_role_web_subdomain: &quot;{{ factorio_name }}&quot;</span><span class="diff-line add">+factorio_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+factorio_role_web_port: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-factorio_dns_record: &quot;{{ factorio_web_subdomain }}&quot;</span><span class="diff-line del">-factorio_dns_zone: &quot;{{ factorio_web_domain }}&quot;</span><span class="diff-line del">-factorio_dns_proxy: false</span><span class="diff-line add">+factorio_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line add">+factorio_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line add">+factorio_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-factorio_docker_container: &quot;{{ factorio_name }}&quot;</span><span class="diff-line add">+factorio_role_docker_container: &quot;{{ factorio_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-factorio_docker_image_pull: true</span><span class="diff-line del">-factorio_docker_image_tag: &quot;experimental&quot;</span><span class="diff-line del">-factorio_docker_image: &quot;goofball222/factorio:{{ factorio_docker_image_tag }}&quot;</span><span class="diff-line add">+factorio_role_docker_image_pull: true</span><span class="diff-line add">+factorio_role_docker_image_repo: &quot;goofball222/factorio&quot;</span><span class="diff-line add">+factorio_role_docker_image_tag: &quot;experimental&quot;</span><span class="diff-line add">+factorio_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;factorio&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-factorio_docker_ports_defaults:</span><span class="diff-line add">+factorio_role_docker_ports_default:</span><span class="diff-line context">   - &quot;27015:27015/tcp&quot;</span><span class="diff-line context">   - &quot;34197:34197/udp&quot;</span><span class="diff-line del">-factorio_docker_ports_custom: []</span><span class="diff-line del">-factorio_docker_ports: &quot;{{ factorio_docker_ports_defaults</span><span class="diff-line del">-                        + factorio_docker_ports_custom }}&quot;</span><span class="diff-line add">+factorio_role_docker_ports_custom: []</span><span class="diff-line add">+factorio_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;factorio&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-factorio_docker_envs_default:</span><span class="diff-line add">+factorio_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-factorio_docker_envs_custom: {}</span><span class="diff-line del">-factorio_docker_envs: &quot;{{ factorio_docker_envs_default</span><span class="diff-line del">-                       | combine(factorio_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-factorio_docker_commands_default: []</span><span class="diff-line del">-factorio_docker_commands_custom: []</span><span class="diff-line del">-factorio_docker_commands: &quot;{{ factorio_docker_commands_default</span><span class="diff-line del">-                           + factorio_docker_commands_custom }}&quot;</span><span class="diff-line add">+factorio_role_docker_envs_custom: {}</span><span class="diff-line add">+factorio_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;factorio&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;factorio&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-factorio_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ factorio_paths_location }}:/factorio&quot;</span><span class="diff-line del">-factorio_docker_volumes_custom: []</span><span class="diff-line del">-factorio_docker_volumes: &quot;{{ factorio_docker_volumes_default</span><span class="diff-line del">-                          + factorio_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-factorio_docker_devices_default: []</span><span class="diff-line del">-factorio_docker_devices_custom: []</span><span class="diff-line del">-factorio_docker_devices: &quot;{{ factorio_docker_devices_default</span><span class="diff-line del">-                          + factorio_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-factorio_docker_hosts_default: {}</span><span class="diff-line del">-factorio_docker_hosts_custom: {}</span><span class="diff-line del">-factorio_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(factorio_docker_hosts_default)</span><span class="diff-line del">-                        | combine(factorio_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-factorio_docker_labels_default: {}</span><span class="diff-line del">-factorio_docker_labels_custom: {}</span><span class="diff-line del">-factorio_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(factorio_docker_labels_default)</span><span class="diff-line del">-                         | combine(factorio_docker_labels_custom) }}&quot;</span><span class="diff-line add">+factorio_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;factorio&#x27;) }}:/factorio&quot;</span><span class="diff-line add">+factorio_role_docker_volumes_custom: []</span><span class="diff-line add">+factorio_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;factorio&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-factorio_docker_hostname: &quot;{{ factorio_name }}&quot;</span><span class="diff-line add">+factorio_role_docker_hostname: &quot;{{ factorio_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-factorio_docker_networks_alias: &quot;{{ factorio_name }}&quot;</span><span class="diff-line del">-factorio_docker_networks_default: []</span><span class="diff-line del">-factorio_docker_networks_custom: []</span><span class="diff-line del">-factorio_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + factorio_docker_networks_default</span><span class="diff-line del">-                           + factorio_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-factorio_docker_capabilities_default: []</span><span class="diff-line del">-factorio_docker_capabilities_custom: []</span><span class="diff-line del">-factorio_docker_capabilities: &quot;{{ factorio_docker_capabilities_default</span><span class="diff-line del">-                               + factorio_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-factorio_docker_security_opts_default: []</span><span class="diff-line del">-factorio_docker_security_opts_custom: []</span><span class="diff-line del">-factorio_docker_security_opts: &quot;{{ factorio_docker_security_opts_default</span><span class="diff-line del">-                                + factorio_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+factorio_role_docker_networks_alias: &quot;{{ factorio_name }}&quot;</span><span class="diff-line add">+factorio_role_docker_networks_default: []</span><span class="diff-line add">+factorio_role_docker_networks_custom: []</span><span class="diff-line add">+factorio_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;factorio&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;factorio&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-factorio_docker_restart_policy: unless-stopped</span><span class="diff-line add">+factorio_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-factorio_docker_state: started</span><span class="diff-line add">+factorio_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-129">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/factorio/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-130">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filebot/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebot_paths_folder: &quot;{{ filebot_name }}&quot;</span><span class="diff-line del">-filebot_paths_location: &quot;{{ server_appdata_path }}/{{ filebot_paths_folder }}&quot;</span><span class="diff-line del">-filebot_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ filebot_paths_location }}&quot;</span><span class="diff-line del">-filebot_paths_config_location: &quot;{{ filebot_paths_location }}/config.yml&quot;</span><span class="diff-line add">+filebot_role_paths_folder: &quot;{{ filebot_name }}&quot;</span><span class="diff-line add">+filebot_role_paths_location: &quot;{{ server_appdata_path }}/{{ filebot_role_paths_folder }}&quot;</span><span class="diff-line add">+filebot_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ filebot_role_paths_location }}&quot;</span><span class="diff-line add">+filebot_role_paths_config_location: &quot;{{ filebot_role_paths_location }}/config.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebot_web_subdomain: &quot;{{ filebot_name }}&quot;</span><span class="diff-line del">-filebot_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-filebot_web_port: &quot;5800&quot;</span><span class="diff-line del">-filebot_web_url: &quot;{{ &#x27;https://&#x27; + (filebot_web_subdomain + &#x27;.&#x27; + filebot_web_domain</span><span class="diff-line del">-                  if (filebot_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else filebot_web_domain) }}&quot;</span><span class="diff-line add">+filebot_role_web_subdomain: &quot;{{ filebot_name }}&quot;</span><span class="diff-line add">+filebot_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+filebot_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+filebot_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebot&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebot&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebot&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebot&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebot_dns_record: &quot;{{ filebot_web_subdomain }}&quot;</span><span class="diff-line del">-filebot_dns_zone: &quot;{{ filebot_web_domain }}&quot;</span><span class="diff-line del">-filebot_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+filebot_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebot&#x27;) }}&quot;</span><span class="diff-line add">+filebot_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebot&#x27;) }}&quot;</span><span class="diff-line add">+filebot_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebot_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-filebot_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-filebot_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-filebot_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-filebot_traefik_enabled: true</span><span class="diff-line del">-filebot_traefik_api_enabled: true</span><span class="diff-line del">-filebot_traefik_api_endpoint: &quot;PathPrefix(`/websockify`)&quot;</span><span class="diff-line add">+filebot_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+filebot_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+filebot_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+filebot_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+filebot_role_traefik_enabled: true</span><span class="diff-line add">+filebot_role_traefik_api_enabled: true</span><span class="diff-line add">+filebot_role_traefik_api_endpoint: &quot;PathPrefix(`/websockify`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-filebot_docker_container: &quot;{{ filebot_name }}&quot;</span><span class="diff-line add">+filebot_role_docker_container: &quot;{{ filebot_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-filebot_docker_image_pull: true</span><span class="diff-line del">-filebot_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-filebot_docker_image: &quot;jlesage/filebot:{{ filebot_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-filebot_docker_ports_defaults: []</span><span class="diff-line del">-filebot_docker_ports_custom: []</span><span class="diff-line del">-filebot_docker_ports: &quot;{{ filebot_docker_ports_defaults</span><span class="diff-line del">-                          + filebot_docker_ports_custom }}&quot;</span><span class="diff-line add">+filebot_role_docker_image_pull: true</span><span class="diff-line add">+filebot_role_docker_image_repo: &quot;jlesage/filebot&quot;</span><span class="diff-line add">+filebot_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+filebot_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;filebot&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;filebot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-filebot_docker_envs_default:</span><span class="diff-line add">+filebot_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   UMASK: &quot;022&quot;</span><span class="diff-line del">-filebot_docker_envs_custom: {}</span><span class="diff-line del">-filebot_docker_envs: &quot;{{ filebot_docker_envs_default</span><span class="diff-line del">-                         | combine(filebot_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-filebot_docker_commands_default: []</span><span class="diff-line del">-filebot_docker_commands_custom: []</span><span class="diff-line del">-filebot_docker_commands: &quot;{{ filebot_docker_commands_default</span><span class="diff-line del">-                             + filebot_docker_commands_custom }}&quot;</span><span class="diff-line add">+filebot_role_docker_envs_custom: {}</span><span class="diff-line add">+filebot_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;filebot&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;filebot&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-filebot_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ filebot_paths_location }}:/config&quot;</span><span class="diff-line add">+filebot_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;filebot&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/:/storage/Media/&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads:/storage/downloads&quot;</span><span class="diff-line del">-filebot_docker_volumes_custom: []</span><span class="diff-line del">-filebot_docker_volumes: &quot;{{ filebot_docker_volumes_default</span><span class="diff-line del">-                            + filebot_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-filebot_docker_devices_default: []</span><span class="diff-line del">-filebot_docker_devices_custom: []</span><span class="diff-line del">-filebot_docker_devices: &quot;{{ filebot_docker_devices_default</span><span class="diff-line del">-                            + filebot_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-filebot_docker_hosts_default: {}</span><span class="diff-line del">-filebot_docker_hosts_custom: {}</span><span class="diff-line del">-filebot_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(filebot_docker_hosts_default)</span><span class="diff-line del">-                          | combine(filebot_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-filebot_docker_labels_default: {}</span><span class="diff-line del">-filebot_docker_labels_custom: {}</span><span class="diff-line del">-filebot_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(filebot_docker_labels_default)</span><span class="diff-line del">-                           | combine(filebot_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/downloads:/storage/downloads&quot;</span><span class="diff-line add">+filebot_role_docker_volumes_custom: []</span><span class="diff-line add">+filebot_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;filebot&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;filebot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-filebot_docker_hostname: &quot;{{ filebot_name }}&quot;</span><span class="diff-line add">+filebot_role_docker_hostname: &quot;{{ filebot_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-filebot_docker_networks_alias: &quot;{{ filebot_name }}&quot;</span><span class="diff-line del">-filebot_docker_networks_default: []</span><span class="diff-line del">-filebot_docker_networks_custom: []</span><span class="diff-line del">-filebot_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + filebot_docker_networks_default</span><span class="diff-line del">-                             + filebot_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-filebot_docker_capabilities_default: []</span><span class="diff-line del">-filebot_docker_capabilities_custom: []</span><span class="diff-line del">-filebot_docker_capabilities: &quot;{{ filebot_docker_capabilities_default</span><span class="diff-line del">-                                 + filebot_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-filebot_docker_security_opts_default: []</span><span class="diff-line del">-filebot_docker_security_opts_custom: []</span><span class="diff-line del">-filebot_docker_security_opts: &quot;{{ filebot_docker_security_opts_default</span><span class="diff-line del">-                                  + filebot_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+filebot_role_docker_networks_alias: &quot;{{ filebot_name }}&quot;</span><span class="diff-line add">+filebot_role_docker_networks_default: []</span><span class="diff-line add">+filebot_role_docker_networks_custom: []</span><span class="diff-line add">+filebot_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;filebot&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;filebot&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-filebot_docker_restart_policy: unless-stopped</span><span class="diff-line add">+filebot_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-filebot_docker_state: started</span><span class="diff-line add">+filebot_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-131">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filebot/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-132">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filebrowser/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,136 +17,93 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebrowser_paths_folder: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line del">-filebrowser_paths_location: &quot;{{ server_appdata_path }}/{{ filebrowser_paths_folder }}&quot;</span><span class="diff-line del">-filebrowser_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ filebrowser_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ filebrowser_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ filebrowser_paths_location }}/database&quot;</span><span class="diff-line del">-filebrowser_paths_config_location: &quot;{{ filebrowser_paths_location }}/filebrowser.json&quot;</span><span class="diff-line del">-filebrowser_paths_config_folder: &quot;{{ filebrowser_paths_location }}/config&quot;</span><span class="diff-line del">-filebrowser_paths_db_location: &quot;{{ filebrowser_paths_location }}/filebrowser.db&quot;</span><span class="diff-line del">-filebrowser_paths_db_folder: &quot;{{ filebrowser_paths_location }}/database&quot;</span><span class="diff-line add">+filebrowser_role_paths_folder: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line add">+filebrowser_role_paths_location: &quot;{{ server_appdata_path }}/{{ filebrowser_role_paths_folder }}&quot;</span><span class="diff-line add">+filebrowser_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ filebrowser_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ filebrowser_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ filebrowser_role_paths_location }}/database&quot;</span><span class="diff-line add">+filebrowser_role_paths_config_location: &quot;{{ filebrowser_role_paths_location }}/filebrowser.json&quot;</span><span class="diff-line add">+filebrowser_role_paths_config_folder: &quot;{{ filebrowser_role_paths_location }}/config&quot;</span><span class="diff-line add">+filebrowser_role_paths_db_location: &quot;{{ filebrowser_role_paths_location }}/filebrowser.db&quot;</span><span class="diff-line add">+filebrowser_role_paths_db_folder: &quot;{{ filebrowser_role_paths_location }}/database&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebrowser_web_subdomain: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line del">-filebrowser_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-filebrowser_web_port: &quot;80&quot;</span><span class="diff-line del">-filebrowser_web_url: &quot;{{ &#x27;https://&#x27; + (filebrowser_web_subdomain + &#x27;.&#x27; + filebrowser_web_domain</span><span class="diff-line del">-                      if (filebrowser_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else filebrowser_web_domain) }}&quot;</span><span class="diff-line add">+filebrowser_role_web_subdomain: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line add">+filebrowser_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+filebrowser_role_web_port: &quot;80&quot;</span><span class="diff-line add">+filebrowser_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebrowser&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebrowser&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebrowser&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebrowser&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebrowser_dns_record: &quot;{{ filebrowser_web_subdomain }}&quot;</span><span class="diff-line del">-filebrowser_dns_zone: &quot;{{ filebrowser_web_domain }}&quot;</span><span class="diff-line del">-filebrowser_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+filebrowser_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line add">+filebrowser_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line add">+filebrowser_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filebrowser_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-filebrowser_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-filebrowser_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-filebrowser_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-filebrowser_traefik_enabled: true</span><span class="diff-line del">-filebrowser_traefik_api_enabled: true</span><span class="diff-line del">-filebrowser_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/share`) || PathPrefix(`/static`) || PathPrefix(`/api/public`)&quot;</span><span class="diff-line add">+filebrowser_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+filebrowser_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+filebrowser_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+filebrowser_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+filebrowser_role_traefik_enabled: true</span><span class="diff-line add">+filebrowser_role_traefik_api_enabled: true</span><span class="diff-line add">+filebrowser_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/share`) || PathPrefix(`/static`) || PathPrefix(`/api/public`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-filebrowser_docker_container: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_container: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-filebrowser_docker_image_pull: true</span><span class="diff-line del">-filebrowser_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-filebrowser_docker_image: &quot;filebrowser/filebrowser:{{ filebrowser_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-filebrowser_docker_ports_defaults: []</span><span class="diff-line del">-filebrowser_docker_ports_custom: []</span><span class="diff-line del">-filebrowser_docker_ports: &quot;{{ filebrowser_docker_ports_defaults</span><span class="diff-line del">-                              + filebrowser_docker_ports_custom }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_image_pull: true</span><span class="diff-line add">+filebrowser_role_docker_image_repo: &quot;filebrowser/filebrowser&quot;</span><span class="diff-line add">+filebrowser_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+filebrowser_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;filebrowser&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-filebrowser_docker_envs_default:</span><span class="diff-line add">+filebrowser_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-filebrowser_docker_envs_custom: {}</span><span class="diff-line del">-filebrowser_docker_envs: &quot;{{ filebrowser_docker_envs_default</span><span class="diff-line del">-                             | combine(filebrowser_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-filebrowser_docker_commands_default: []</span><span class="diff-line del">-filebrowser_docker_commands_custom: []</span><span class="diff-line del">-filebrowser_docker_commands: &quot;{{ filebrowser_docker_commands_default</span><span class="diff-line del">-                                 + filebrowser_docker_commands_custom }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_envs_custom: {}</span><span class="diff-line add">+filebrowser_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;filebrowser&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;filebrowser&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-filebrowser_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ filebrowser_paths_db_folder }}:/database&quot;</span><span class="diff-line del">-  - &quot;{{ filebrowser_paths_config_folder }}:/config&quot;</span><span class="diff-line add">+filebrowser_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) }}:/database&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs:/srv:rslave&quot;</span><span class="diff-line del">-filebrowser_docker_volumes_custom: []</span><span class="diff-line del">-filebrowser_docker_volumes: &quot;{{ filebrowser_docker_volumes_default</span><span class="diff-line del">-                                + filebrowser_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-filebrowser_docker_devices_default: []</span><span class="diff-line del">-filebrowser_docker_devices_custom: []</span><span class="diff-line del">-filebrowser_docker_devices: &quot;{{ filebrowser_docker_devices_default</span><span class="diff-line del">-                                + filebrowser_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-filebrowser_docker_hosts_default: {}</span><span class="diff-line del">-filebrowser_docker_hosts_custom: {}</span><span class="diff-line del">-filebrowser_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(filebrowser_docker_hosts_default)</span><span class="diff-line del">-                              | combine(filebrowser_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-filebrowser_docker_labels_default: {}</span><span class="diff-line del">-filebrowser_docker_labels_custom: {}</span><span class="diff-line del">-filebrowser_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(filebrowser_docker_labels_default)</span><span class="diff-line del">-                               | combine(filebrowser_docker_labels_custom) }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_volumes_custom: []</span><span class="diff-line add">+filebrowser_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;filebrowser&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-filebrowser_docker_hostname: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_hostname: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-filebrowser_docker_networks_alias: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line del">-filebrowser_docker_networks_default: []</span><span class="diff-line del">-filebrowser_docker_networks_custom: []</span><span class="diff-line del">-filebrowser_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + filebrowser_docker_networks_default</span><span class="diff-line del">-                                 + filebrowser_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-filebrowser_docker_capabilities_default: []</span><span class="diff-line del">-filebrowser_docker_capabilities_custom: []</span><span class="diff-line del">-filebrowser_docker_capabilities: &quot;{{ filebrowser_docker_capabilities_default</span><span class="diff-line del">-                                     + filebrowser_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-filebrowser_docker_security_opts_default: []</span><span class="diff-line del">-filebrowser_docker_security_opts_custom: []</span><span class="diff-line del">-filebrowser_docker_security_opts: &quot;{{ filebrowser_docker_security_opts_default</span><span class="diff-line del">-                                      + filebrowser_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_networks_alias: &quot;{{ filebrowser_name }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_networks_default: []</span><span class="diff-line add">+filebrowser_role_docker_networks_custom: []</span><span class="diff-line add">+filebrowser_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;filebrowser&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-filebrowser_docker_restart_policy: unless-stopped</span><span class="diff-line add">+filebrowser_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-filebrowser_docker_state: started</span><span class="diff-line add">+filebrowser_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-filebrowser_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+filebrowser_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-133">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filebrowser/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-134">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filebrowser/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,67 +7,67 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_config_location | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;filebrowser&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">   register: filebrowser_json</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_config_folder | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_config_folder }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">   register: filebrowser_config_folder</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_config_folder | basename }}/settings.json&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) | basename }}/settings.json&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_config_folder }}/settings.json&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/settings.json&quot;</span><span class="diff-line context">   register: filebrowser_config_folder_json</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | Migrate `{{ filebrowser_paths_config_location | basename }}` tasks</span><span class="diff-line add">+- name: Settings | Migrate `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;filebrowser&#x27;) | basename }}` tasks</span><span class="diff-line context">   when: (filebrowser_json.stat.exists) and (not filebrowser_config_folder_json.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Settings | Migrate filebrowser.json to settings.json</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line del">-        src: &quot;{{ filebrowser_paths_config_location }}&quot;</span><span class="diff-line del">-        dest: &quot;{{ filebrowser_paths_config_folder }}/settings.json&quot;</span><span class="diff-line add">+        src: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/settings.json&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Settings | Migrate JSON database path</span><span class="diff-line del">-      ansible.builtin.shell: jq &#x27;.database = &quot;/database/filebrowser.db&quot;&#x27; {{ filebrowser_paths_config_folder }}/settings.json | sponge {{ filebrowser_paths_config_folder }}/settings.json</span><span class="diff-line add">+      ansible.builtin.shell: jq &#x27;.database = &quot;/database/filebrowser.db&quot;&#x27; {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/settings.json | sponge {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/settings.json</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Settings | Remove legacy filebrowser.json</span><span class="diff-line context">       ansible.builtin.file:</span><span class="diff-line del">-        path: &quot;{{ filebrowser_paths_config_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">         state: absent</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_db_location | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_location&#x27;, role=&#x27;filebrowser&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_db_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">   register: filebrowser_db</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_db_folder | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_db_folder }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">   register: filebrowser_db_folder</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ filebrowser_paths_db_folder | basename }}/filebrowser.db&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) | basename }}/filebrowser.db&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ filebrowser_paths_db_folder }}/filebrowser.db&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/filebrowser.db&quot;</span><span class="diff-line context">   register: filebrowser_db_folder_db</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Settings | Migrate filebrowser.db tasks</span><span class="diff-line context">   when: (filebrowser_db.stat.exists) and (not filebrowser_db_folder_db.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Settings | Migrate `{{ filebrowser_paths_db_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Migrate `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_location&#x27;, role=&#x27;filebrowser&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line del">-        src: &quot;{{ filebrowser_paths_db_location }}&quot;</span><span class="diff-line del">-        dest: &quot;{{ filebrowser_paths_db_folder }}/filebrowser.db&quot;</span><span class="diff-line add">+        src: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_folder&#x27;, role=&#x27;filebrowser&#x27;) }}/filebrowser.db&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Settings | Remove legacy filebrowser.db</span><span class="diff-line context">       ansible.builtin.file:</span><span class="diff-line del">-        path: &quot;{{ filebrowser_paths_db_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_db_location&#x27;, role=&#x27;filebrowser&#x27;) }}&quot;</span><span class="diff-line context">         state: absent</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-135">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filezilla/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filezilla_paths_folder: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line del">-filezilla_paths_location: &quot;{{ server_appdata_path }}/{{ filezilla_paths_folder }}&quot;</span><span class="diff-line del">-filezilla_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ filezilla_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ filezilla_paths_location }}/config&quot;</span><span class="diff-line add">+filezilla_role_paths_folder: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line add">+filezilla_role_paths_location: &quot;{{ server_appdata_path }}/{{ filezilla_role_paths_folder }}&quot;</span><span class="diff-line add">+filezilla_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ filezilla_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ filezilla_role_paths_location }}/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filezilla_web_subdomain: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line del">-filezilla_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-filezilla_web_port: &quot;5800&quot;</span><span class="diff-line del">-filezilla_web_url: &quot;{{ &#x27;https://&#x27; + (filezilla_web_subdomain + &#x27;.&#x27; + filezilla_web_domain</span><span class="diff-line del">-                    if (filezilla_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else filezilla_web_domain) }}&quot;</span><span class="diff-line add">+filezilla_role_web_subdomain: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line add">+filezilla_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+filezilla_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+filezilla_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filezilla&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filezilla&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filezilla&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filezilla&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filezilla_dns_record: &quot;{{ filezilla_web_subdomain }}&quot;</span><span class="diff-line del">-filezilla_dns_zone: &quot;{{ filezilla_web_domain }}&quot;</span><span class="diff-line del">-filezilla_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+filezilla_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span><span class="diff-line add">+filezilla_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span><span class="diff-line add">+filezilla_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-filezilla_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-filezilla_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-filezilla_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-filezilla_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-filezilla_traefik_enabled: true</span><span class="diff-line del">-filezilla_traefik_api_enabled: false</span><span class="diff-line del">-filezilla_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+filezilla_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+filezilla_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+filezilla_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+filezilla_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+filezilla_role_traefik_enabled: true</span><span class="diff-line add">+filezilla_role_traefik_api_enabled: false</span><span class="diff-line add">+filezilla_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-filezilla_docker_container: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line add">+filezilla_role_docker_container: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-filezilla_docker_image_pull: true</span><span class="diff-line del">-filezilla_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-filezilla_docker_image: &quot;jlesage/filezilla:{{ filezilla_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-filezilla_docker_ports_defaults: []</span><span class="diff-line del">-filezilla_docker_ports_custom: []</span><span class="diff-line del">-filezilla_docker_ports: &quot;{{ filezilla_docker_ports_defaults</span><span class="diff-line del">-                            + filezilla_docker_ports_custom }}&quot;</span><span class="diff-line add">+filezilla_role_docker_image_pull: true</span><span class="diff-line add">+filezilla_role_docker_image_repo: &quot;jlesage/filezilla&quot;</span><span class="diff-line add">+filezilla_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+filezilla_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;filezilla&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-filezilla_docker_envs_default:</span><span class="diff-line add">+filezilla_role_docker_envs_default:</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   KEEP_APP_RUNNING: &quot;1&quot;</span><span class="diff-line del">-filezilla_docker_envs_custom: {}</span><span class="diff-line del">-filezilla_docker_envs: &quot;{{ filezilla_docker_envs_default</span><span class="diff-line del">-                           | combine(filezilla_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-filezilla_docker_commands_default: []</span><span class="diff-line del">-filezilla_docker_commands_custom: []</span><span class="diff-line del">-filezilla_docker_commands: &quot;{{ filezilla_docker_commands_default</span><span class="diff-line del">-                               + filezilla_docker_commands_custom }}&quot;</span><span class="diff-line add">+filezilla_role_docker_envs_custom: {}</span><span class="diff-line add">+filezilla_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;filezilla&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;filezilla&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-filezilla_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ filezilla_paths_location }}/config:/config&quot;</span><span class="diff-line add">+filezilla_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;filezilla&#x27;) }}/config:/config&quot;</span><span class="diff-line context">   - &quot;/home/{{ user.name }}:/storage&quot;</span><span class="diff-line del">-filezilla_docker_volumes_custom: []</span><span class="diff-line del">-filezilla_docker_volumes: &quot;{{ filezilla_docker_volumes_default</span><span class="diff-line del">-                              + filezilla_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-filezilla_docker_devices_default: []</span><span class="diff-line del">-filezilla_docker_devices_custom: []</span><span class="diff-line del">-filezilla_docker_devices: &quot;{{ filezilla_docker_devices_default</span><span class="diff-line del">-                              + filezilla_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-filezilla_docker_hosts_default: {}</span><span class="diff-line del">-filezilla_docker_hosts_custom: {}</span><span class="diff-line del">-filezilla_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(filezilla_docker_hosts_default)</span><span class="diff-line del">-                            | combine(filezilla_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-filezilla_docker_labels_default: {}</span><span class="diff-line del">-filezilla_docker_labels_custom: {}</span><span class="diff-line del">-filezilla_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(filezilla_docker_labels_default)</span><span class="diff-line del">-                             | combine(filezilla_docker_labels_custom) }}&quot;</span><span class="diff-line add">+filezilla_role_docker_volumes_custom: []</span><span class="diff-line add">+filezilla_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;filezilla&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-filezilla_docker_hostname: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line add">+filezilla_role_docker_hostname: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-filezilla_docker_networks_alias: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line del">-filezilla_docker_networks_default: []</span><span class="diff-line del">-filezilla_docker_networks_custom: []</span><span class="diff-line del">-filezilla_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + filezilla_docker_networks_default</span><span class="diff-line del">-                               + filezilla_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-filezilla_docker_capabilities_default: []</span><span class="diff-line del">-filezilla_docker_capabilities_custom: []</span><span class="diff-line del">-filezilla_docker_capabilities: &quot;{{ filezilla_docker_capabilities_default</span><span class="diff-line del">-                                   + filezilla_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-filezilla_docker_security_opts_default: []</span><span class="diff-line del">-filezilla_docker_security_opts_custom: []</span><span class="diff-line del">-filezilla_docker_security_opts: &quot;{{ filezilla_docker_security_opts_default</span><span class="diff-line del">-                                    + filezilla_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+filezilla_role_docker_networks_alias: &quot;{{ filezilla_name }}&quot;</span><span class="diff-line add">+filezilla_role_docker_networks_default: []</span><span class="diff-line add">+filezilla_role_docker_networks_custom: []</span><span class="diff-line add">+filezilla_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;filezilla&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-filezilla_docker_restart_policy: unless-stopped</span><span class="diff-line add">+filezilla_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-filezilla_docker_state: started</span><span class="diff-line add">+filezilla_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-136">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/filezilla/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -35,4 +35,4 @@</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">     recurse: true</span><span class="diff-line del">-  with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line add">+  with_items: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folders_list&#x27;, role=&#x27;filezilla&#x27;) }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-137">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/fireflyiii/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,73 +17,68 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_mariadb_name: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line del">-fireflyiii_mariadb_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_mariadb_paths_location: &quot;{{ server_appdata_path }}/{{ mariadb_paths_folder }}/mariadb&quot;</span><span class="diff-line del">-fireflyiii_mariadb_docker_image_tag: &quot;lts&quot;</span><span class="diff-line del">-fireflyiii_mariadb_docker_env_password: &quot;{{ fireflyiii_db_password_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line del">-fireflyiii_mariadb_docker_env_db: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_name: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_paths_location: &quot;{{ server_appdata_path }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folder&#x27;, role=&#x27;mariadb&#x27;) }}/mariadb&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_docker_image_tag: &quot;lts&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_docker_env_password: &quot;{{ fireflyiii_db_password_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line add">+fireflyiii_role_mariadb_docker_env_db: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_paths_location: &quot;{{ server_appdata_path }}/{{ fireflyiii_paths_folder }}&quot;</span><span class="diff-line del">-fireflyiii_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ fireflyiii_paths_location }}&quot;</span><span class="diff-line add">+fireflyiii_role_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_paths_location: &quot;{{ server_appdata_path }}/{{ fireflyiii_role_paths_folder }}&quot;</span><span class="diff-line add">+fireflyiii_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ fireflyiii_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_web_subdomain: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-fireflyiii_web_port: &quot;8080&quot;</span><span class="diff-line del">-fireflyiii_web_url: &quot;{{ &#x27;https://&#x27; + (fireflyiii_web_subdomain + &#x27;.&#x27; + fireflyiii_web_domain</span><span class="diff-line del">-                     if (fireflyiii_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else fireflyiii_web_domain) }}&quot;</span><span class="diff-line add">+fireflyiii_role_web_subdomain: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+fireflyiii_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+fireflyiii_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_dns_record: &quot;{{ fireflyiii_web_subdomain }}&quot;</span><span class="diff-line del">-fireflyiii_dns_zone: &quot;{{ fireflyiii_web_domain }}&quot;</span><span class="diff-line del">-fireflyiii_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+fireflyiii_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+fireflyiii_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+fireflyiii_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-fireflyiii_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-fireflyiii_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-fireflyiii_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-fireflyiii_traefik_enabled: true</span><span class="diff-line del">-fireflyiii_traefik_api_enabled: true</span><span class="diff-line del">-fireflyiii_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+fireflyiii_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+fireflyiii_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+fireflyiii_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+fireflyiii_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+fireflyiii_role_traefik_enabled: true</span><span class="diff-line add">+fireflyiii_role_traefik_api_enabled: true</span><span class="diff-line add">+fireflyiii_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-fireflyiii_docker_container: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_container: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-fireflyiii_docker_image_pull: true</span><span class="diff-line del">-fireflyiii_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-fireflyiii_docker_image: &quot;fireflyiii/core:{{ fireflyiii_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-fireflyiii_docker_ports_defaults: []</span><span class="diff-line del">-fireflyiii_docker_ports_custom: []</span><span class="diff-line del">-fireflyiii_docker_ports: &quot;{{ fireflyiii_docker_ports_defaults</span><span class="diff-line del">-                         + fireflyiii_docker_ports_custom }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_image_pull: true</span><span class="diff-line add">+fireflyiii_role_docker_image_repo: &quot;fireflyiii/core&quot;</span><span class="diff-line add">+fireflyiii_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+fireflyiii_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;fireflyiii&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-fireflyiii_docker_envs_default:</span><span class="diff-line add">+fireflyiii_role_docker_envs_default:</span><span class="diff-line context">   APP_ENV: &quot;production&quot;</span><span class="diff-line context">   SITE_OWNER: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   APP_KEY: &quot;{{ fireflyiii_appkey_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line hunk">@@ -101,77 +96,39 @@</span><span class="diff-line context">   DB_USERNAME: &quot;root&quot;</span><span class="diff-line context">   DB_PASSWORD: &quot;{{ fireflyiii_db_password_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">   AUTHENTICATION_GUARD: &quot;web&quot;</span><span class="diff-line del">-  APP_URL: &quot;{{ fireflyiii_web_url }}&quot;</span><span class="diff-line add">+  APP_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context">   ALLOW_WEBHOOKS: &quot;True&quot;</span><span class="diff-line del">-fireflyiii_docker_envs_custom: {}</span><span class="diff-line del">-fireflyiii_docker_envs: &quot;{{ fireflyiii_docker_envs_default</span><span class="diff-line del">-                       | combine(fireflyiii_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-fireflyiii_docker_commands_default: []</span><span class="diff-line del">-fireflyiii_docker_commands_custom: []</span><span class="diff-line del">-fireflyiii_docker_commands: &quot;{{ fireflyiii_docker_commands_default</span><span class="diff-line del">-                            + fireflyiii_docker_commands_custom }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_envs_custom: {}</span><span class="diff-line add">+fireflyiii_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;fireflyiii&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;fireflyiii&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-fireflyiii_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ fireflyiii_paths_location }}/upload:/var/www/html/storage/upload&quot;</span><span class="diff-line add">+fireflyiii_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;fireflyiii&#x27;) }}/upload:/var/www/html/storage/upload&quot;</span><span class="diff-line context">   - /etc/timezone:/etc/timezone:ro</span><span class="diff-line context">   - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-fireflyiii_docker_volumes_custom: []</span><span class="diff-line del">-fireflyiii_docker_volumes: &quot;{{ fireflyiii_docker_volumes_default</span><span class="diff-line del">-                           + fireflyiii_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-fireflyiii_docker_devices_default: []</span><span class="diff-line del">-fireflyiii_docker_devices_custom: []</span><span class="diff-line del">-fireflyiii_docker_devices: &quot;{{ fireflyiii_docker_devices_default</span><span class="diff-line del">-                           + fireflyiii_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-fireflyiii_docker_hosts_default: {}</span><span class="diff-line del">-fireflyiii_docker_hosts_custom: {}</span><span class="diff-line del">-fireflyiii_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(fireflyiii_docker_hosts_default)</span><span class="diff-line del">-                         | combine(fireflyiii_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-fireflyiii_docker_labels_default: {}</span><span class="diff-line del">-fireflyiii_docker_labels_custom: {}</span><span class="diff-line del">-fireflyiii_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(fireflyiii_docker_labels_default)</span><span class="diff-line del">-                          | combine(fireflyiii_docker_labels_custom) }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_volumes_custom: []</span><span class="diff-line add">+fireflyiii_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;fireflyiii&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-fireflyiii_docker_hostname: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_hostname: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-fireflyiii_docker_networks_alias: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_docker_networks_default: []</span><span class="diff-line del">-fireflyiii_docker_networks_custom: []</span><span class="diff-line del">-fireflyiii_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + fireflyiii_docker_networks_default</span><span class="diff-line del">-                            + fireflyiii_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-fireflyiii_docker_capabilities_default: []</span><span class="diff-line del">-fireflyiii_docker_capabilities_custom: []</span><span class="diff-line del">-fireflyiii_docker_capabilities: &quot;{{ fireflyiii_docker_capabilities_default</span><span class="diff-line del">-                                + fireflyiii_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-fireflyiii_docker_security_opts_default: []</span><span class="diff-line del">-fireflyiii_docker_security_opts_custom: []</span><span class="diff-line del">-fireflyiii_docker_security_opts: &quot;{{ fireflyiii_docker_security_opts_default</span><span class="diff-line del">-                                 + fireflyiii_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_networks_alias: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_role_docker_networks_default: []</span><span class="diff-line add">+fireflyiii_role_docker_networks_custom: []</span><span class="diff-line add">+fireflyiii_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;fireflyiii&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-fireflyiii_docker_restart_policy: unless-stopped</span><span class="diff-line add">+fireflyiii_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-fireflyiii_docker_state: started</span><span class="diff-line add">+fireflyiii_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-fireflyiii_depends_on: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line del">-fireflyiii_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-fireflyiii_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+fireflyiii_role_depends_on: &quot;{{ fireflyiii_name }}-mariadb&quot;</span><span class="diff-line add">+fireflyiii_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+fireflyiii_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-138">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/fireflyiii/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Save Fireflyiii Mariadb Password Saltbox facts&quot;</span><span class="diff-line context">   saltbox_facts:</span><span class="diff-line hunk">@@ -23,6 +23,7 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0755&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: fireflyiii_db_password_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Save Fireflyiii AppKey Saltbox facts&quot;</span><span class="diff-line hunk">@@ -34,18 +35,19 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0755&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: fireflyiii_appkey_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: mariadb</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    mariadb_instances: [&quot;{{ fireflyiii_mariadb_name }}&quot;]</span><span class="diff-line del">-    mariadb_paths_folder: &quot;{{ fireflyiii_mariadb_paths_folder }}&quot;</span><span class="diff-line del">-    mariadb_paths_location: &quot;{{ fireflyiii_mariadb_paths_location }}&quot;</span><span class="diff-line del">-    mariadb_docker_image_tag: &quot;{{ fireflyiii_mariadb_docker_image_tag }}&quot;</span><span class="diff-line del">-    mariadb_docker_env_db: &quot;{{ fireflyiii_mariadb_docker_env_db }}&quot;</span><span class="diff-line del">-    mariadb_docker_env_password: &quot;{{ fireflyiii_mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    mariadb_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_name&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;]</span><span class="diff-line add">+    mariadb_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_paths_folder&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+    mariadb_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_paths_location&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+    mariadb_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_docker_image_tag&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+    mariadb_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_docker_env_db&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line add">+    mariadb_role_docker_env_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_mariadb_docker_env_password&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-139">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/fireflyiii_importer/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,137 +17,94 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_importer_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_importer_paths_location: &quot;{{ server_appdata_path }}/{{ fireflyiii_importer_paths_folder }}&quot;</span><span class="diff-line del">-fireflyiii_importer_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ fireflyiii_importer_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ fireflyiii_importer_paths_location }}/import&quot;</span><span class="diff-line add">+fireflyiii_importer_role_paths_folder: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_paths_location: &quot;{{ server_appdata_path }}/{{ fireflyiii_importer_role_paths_folder }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ fireflyiii_importer_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ fireflyiii_importer_role_paths_location }}/import&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_importer_web_subdomain: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line del">-fireflyiii_importer_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-fireflyiii_importer_web_port: &quot;8080&quot;</span><span class="diff-line del">-fireflyiii_importer_web_url: &quot;{{ &#x27;https://&#x27; + (fireflyiii_importer_web_subdomain + &#x27;.&#x27; + fireflyiii_importer_web_domain</span><span class="diff-line del">-                              if (fireflyiii_importer_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                              else fireflyiii_importer_web_domain) }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_web_subdomain: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+fireflyiii_importer_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii_importer&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii_importer&#x27;)</span><span class="diff-line add">+                                   if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii_importer&#x27;) | length &gt; 0)</span><span class="diff-line add">+                                   else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii_importer&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_importer_dns_record: &quot;{{ fireflyiii_importer_web_subdomain }}&quot;</span><span class="diff-line del">-fireflyiii_importer_dns_zone: &quot;{{ fireflyiii_importer_web_domain }}&quot;</span><span class="diff-line del">-fireflyiii_importer_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-fireflyiii_importer_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-fireflyiii_importer_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-fireflyiii_importer_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-fireflyiii_importer_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-fireflyiii_importer_traefik_enabled: true</span><span class="diff-line del">-fireflyiii_importer_traefik_api_enabled: false</span><span class="diff-line del">-fireflyiii_importer_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+fireflyiii_importer_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+fireflyiii_importer_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+fireflyiii_importer_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_traefik_enabled: true</span><span class="diff-line add">+fireflyiii_importer_role_traefik_api_enabled: false</span><span class="diff-line add">+fireflyiii_importer_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-fireflyiii_importer_docker_container: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_container: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-fireflyiii_importer_docker_image_pull: true</span><span class="diff-line del">-fireflyiii_importer_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-fireflyiii_importer_docker_image: &quot;fireflyiii/data-importer:{{ fireflyiii_importer_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-fireflyiii_importer_docker_ports_defaults: []</span><span class="diff-line del">-fireflyiii_importer_docker_ports_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_ports: &quot;{{ fireflyiii_importer_docker_ports_defaults</span><span class="diff-line del">-                                  + fireflyiii_importer_docker_ports_custom }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_image_pull: true</span><span class="diff-line add">+fireflyiii_importer_role_docker_image_repo: &quot;fireflyiii/data-importer&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-fireflyiii_importer_docker_envs_default:</span><span class="diff-line add">+fireflyiii_importer_role_docker_envs_default:</span><span class="diff-line context">   IMPORT_DIR_ALLOWLIST: /import</span><span class="diff-line context">   FIREFLY_III_URL: &quot;http://{{ fireflyiii_name }}:8080&quot;</span><span class="diff-line del">-  VANITY_URL: &quot;{{ fireflyiii_web_url }}&quot;</span><span class="diff-line add">+  VANITY_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;fireflyiii&#x27;) }}&quot;</span><span class="diff-line context">   TRUSTED_PROXIES: &quot;**&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-fireflyiii_importer_docker_envs_custom: {}</span><span class="diff-line del">-fireflyiii_importer_docker_envs: &quot;{{ fireflyiii_importer_docker_envs_default</span><span class="diff-line del">-                                 | combine(fireflyiii_importer_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-fireflyiii_importer_docker_commands_default: []</span><span class="diff-line del">-fireflyiii_importer_docker_commands_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_commands: &quot;{{ fireflyiii_importer_docker_commands_default</span><span class="diff-line del">-                                     + fireflyiii_importer_docker_commands_custom }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_envs_custom: {}</span><span class="diff-line add">+fireflyiii_importer_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;fireflyiii_importer&#x27;)</span><span class="diff-line add">+                                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;fireflyiii_importer&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-fireflyiii_importer_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ fireflyiii_paths_location }}/import:/import&quot;</span><span class="diff-line del">-  - /etc/timezone:/etc/timezone:ro</span><span class="diff-line del">-  - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-fireflyiii_importer_docker_volumes_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_volumes: &quot;{{ fireflyiii_importer_docker_volumes_default</span><span class="diff-line del">-                                    + fireflyiii_importer_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-fireflyiii_importer_docker_devices_default: []</span><span class="diff-line del">-fireflyiii_importer_docker_devices_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_devices: &quot;{{ fireflyiii_importer_docker_devices_default</span><span class="diff-line del">-                                    + fireflyiii_importer_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-fireflyiii_importer_docker_hosts_default: {}</span><span class="diff-line del">-fireflyiii_importer_docker_hosts_custom: {}</span><span class="diff-line del">-fireflyiii_importer_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                  | combine(fireflyiii_importer_docker_hosts_default)</span><span class="diff-line del">-                                  | combine(fireflyiii_importer_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-fireflyiii_importer_docker_labels_default: {}</span><span class="diff-line del">-fireflyiii_importer_docker_labels_custom: {}</span><span class="diff-line del">-fireflyiii_importer_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                   | combine(fireflyiii_importer_docker_labels_default)</span><span class="diff-line del">-                                   | combine(fireflyiii_importer_docker_labels_custom) }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;fireflyiii&#x27;) }}/import:/import&quot;</span><span class="diff-line add">+  - &quot;/etc/timezone:/etc/timezone:ro&quot;</span><span class="diff-line add">+  - &quot;/etc/localtime:/etc/localtime:ro&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_volumes_custom: []</span><span class="diff-line add">+fireflyiii_importer_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;fireflyiii_importer&#x27;)</span><span class="diff-line add">+                                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-fireflyiii_importer_docker_hostname: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_hostname: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-fireflyiii_importer_docker_networks_alias: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line del">-fireflyiii_importer_docker_networks_default: []</span><span class="diff-line del">-fireflyiii_importer_docker_networks_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                     + fireflyiii_importer_docker_networks_default</span><span class="diff-line del">-                                     + fireflyiii_importer_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-fireflyiii_importer_docker_capabilities_default: []</span><span class="diff-line del">-fireflyiii_importer_docker_capabilities_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_capabilities: &quot;{{ fireflyiii_importer_docker_capabilities_default</span><span class="diff-line del">-                                         + fireflyiii_importer_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-fireflyiii_importer_docker_security_opts_default: []</span><span class="diff-line del">-fireflyiii_importer_docker_security_opts_custom: []</span><span class="diff-line del">-fireflyiii_importer_docker_security_opts: &quot;{{ fireflyiii_importer_docker_security_opts_default</span><span class="diff-line del">-                                          + fireflyiii_importer_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_networks_alias: &quot;{{ fireflyiii_importer_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_docker_networks_default: []</span><span class="diff-line add">+fireflyiii_importer_role_docker_networks_custom: []</span><span class="diff-line add">+fireflyiii_importer_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;fireflyiii_importer&#x27;)</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;fireflyiii_importer&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-fireflyiii_importer_docker_restart_policy: unless-stopped</span><span class="diff-line add">+fireflyiii_importer_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-fireflyiii_importer_docker_state: started</span><span class="diff-line add">+fireflyiii_importer_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-fireflyiii_importer_depends_on: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line del">-fireflyiii_importer_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-fireflyiii_importer_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+fireflyiii_importer_role_depends_on: &quot;{{ fireflyiii_name }}&quot;</span><span class="diff-line add">+fireflyiii_importer_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+fireflyiii_importer_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-140">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/fireflyiii_importer/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,14 +10,14 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;fireflyiii_importer&quot;</span><span class="diff-line add">+    container_name: &quot;fireflyiii_importer&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-141">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/firefox/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,94 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-firefox_paths_folder: &quot;{{ firefox_name }}&quot;</span><span class="diff-line del">-firefox_paths_location: &quot;{{ server_appdata_path }}/{{ firefox_paths_folder }}&quot;</span><span class="diff-line del">-firefox_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ firefox_paths_folder }}&quot;</span><span class="diff-line del">-firefox_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ firefox_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ firefox_paths_downloads_location }}&quot;</span><span class="diff-line del">-firefox_paths_env_file_location: &quot;{{ firefox_paths_location }}/.env&quot;</span><span class="diff-line add">+firefox_role_paths_folder: &quot;{{ firefox_name }}&quot;</span><span class="diff-line add">+firefox_role_paths_location: &quot;{{ server_appdata_path }}/{{ firefox_role_paths_folder }}&quot;</span><span class="diff-line add">+firefox_role_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ firefox_role_paths_folder }}&quot;</span><span class="diff-line add">+firefox_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ firefox_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ firefox_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+firefox_role_paths_env_file_location: &quot;{{ firefox_role_paths_location }}/.env&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-firefox_web_subdomain: &quot;{{ firefox_name }}&quot;</span><span class="diff-line del">-firefox_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-firefox_web_port: &quot;5800&quot;</span><span class="diff-line del">-firefox_web_url: &quot;{{ &#x27;https://&#x27; + (firefox_web_subdomain + &#x27;.&#x27; + firefox_web_domain</span><span class="diff-line del">-                  if (firefox_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else firefox_web_domain) }}&quot;</span><span class="diff-line add">+firefox_role_web_subdomain: &quot;{{ firefox_name }}&quot;</span><span class="diff-line add">+firefox_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+firefox_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+firefox_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;firefox&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;firefox&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;firefox&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;firefox&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # VNC</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-firefox_vnc_port: &quot;5900&quot;</span><span class="diff-line add">+firefox_role_vnc_port: &quot;5900&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-firefox_dns_record: &quot;{{ firefox_web_subdomain }}&quot;</span><span class="diff-line del">-firefox_dns_zone: &quot;{{ firefox_web_domain }}&quot;</span><span class="diff-line del">-firefox_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+firefox_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line add">+firefox_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line add">+firefox_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-firefox_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-firefox_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-firefox_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-firefox_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-firefox_traefik_enabled: true</span><span class="diff-line del">-firefox_traefik_api_enabled: false</span><span class="diff-line del">-firefox_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+firefox_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+firefox_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+firefox_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+firefox_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+firefox_role_traefik_enabled: true</span><span class="diff-line add">+firefox_role_traefik_api_enabled: false</span><span class="diff-line add">+firefox_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-firefox_docker_container: &quot;{{ firefox_name }}&quot;</span><span class="diff-line add">+firefox_role_docker_container: &quot;{{ firefox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-firefox_docker_image_pull: true</span><span class="diff-line del">-firefox_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-firefox_docker_image: &quot;jlesage/firefox:{{ firefox_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-firefox_docker_ports_defaults: []</span><span class="diff-line del">-firefox_docker_ports_custom: []</span><span class="diff-line del">-firefox_docker_ports: &quot;{{ firefox_docker_ports_defaults</span><span class="diff-line del">-                          + firefox_docker_ports_custom }}&quot;</span><span class="diff-line add">+firefox_role_docker_image_pull: true</span><span class="diff-line add">+firefox_role_docker_image_repo: &quot;jlesage/firefox&quot;</span><span class="diff-line add">+firefox_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+firefox_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;firefox&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-firefox_docker_env_file: &quot;{{ firefox_paths_env_file_location }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-firefox_docker_commands_default: []</span><span class="diff-line del">-firefox_docker_commands_custom: []</span><span class="diff-line del">-firefox_docker_commands: &quot;{{ firefox_docker_commands_default</span><span class="diff-line del">-                             + firefox_docker_commands_custom }}&quot;</span><span class="diff-line add">+firefox_role_docker_env_file: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_env_file_location&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-firefox_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ firefox_paths_location }}:/config&quot;</span><span class="diff-line del">-firefox_docker_volumes_custom: []</span><span class="diff-line del">-firefox_docker_volumes: &quot;{{ firefox_docker_volumes_default</span><span class="diff-line del">-                            + firefox_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-firefox_docker_devices_default: []</span><span class="diff-line del">-firefox_docker_devices_custom: []</span><span class="diff-line del">-firefox_docker_devices: &quot;{{ firefox_docker_devices_default</span><span class="diff-line del">-                            + firefox_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-firefox_docker_hosts_default: {}</span><span class="diff-line del">-firefox_docker_hosts_custom: {}</span><span class="diff-line del">-firefox_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(firefox_docker_hosts_default)</span><span class="diff-line del">-                          | combine(firefox_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-firefox_docker_labels_default: {}</span><span class="diff-line del">-firefox_docker_labels_custom: {}</span><span class="diff-line del">-firefox_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(firefox_docker_labels_default)</span><span class="diff-line del">-                           | combine(firefox_docker_labels_custom) }}&quot;</span><span class="diff-line add">+firefox_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;firefox&#x27;) }}:/config&quot;</span><span class="diff-line add">+firefox_role_docker_volumes_custom: []</span><span class="diff-line add">+firefox_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;firefox&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-firefox_docker_hostname: &quot;{{ firefox_name }}&quot;</span><span class="diff-line add">+firefox_role_docker_hostname: &quot;{{ firefox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-firefox_docker_networks_alias: &quot;{{ firefox_name }}&quot;</span><span class="diff-line del">-firefox_docker_networks_default: []</span><span class="diff-line del">-firefox_docker_networks_custom: []</span><span class="diff-line del">-firefox_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + firefox_docker_networks_default</span><span class="diff-line del">-                             + firefox_docker_networks_custom }}&quot;</span><span class="diff-line add">+firefox_role_docker_networks_alias: &quot;{{ firefox_name }}&quot;</span><span class="diff-line add">+firefox_role_docker_networks_default: []</span><span class="diff-line add">+firefox_role_docker_networks_custom: []</span><span class="diff-line add">+firefox_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;firefox&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Capabilities</span><span class="diff-line del">-firefox_docker_capabilities_default:</span><span class="diff-line add">+firefox_role_docker_capabilities_default:</span><span class="diff-line context">   - &quot;SYS_NICE&quot;</span><span class="diff-line del">-firefox_docker_capabilities_custom: []</span><span class="diff-line del">-firefox_docker_capabilities: &quot;{{ firefox_docker_capabilities_default</span><span class="diff-line del">-                                 + firefox_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-firefox_docker_security_opts_default: []</span><span class="diff-line del">-firefox_docker_security_opts_custom: []</span><span class="diff-line del">-firefox_docker_security_opts: &quot;{{ firefox_docker_security_opts_default</span><span class="diff-line del">-                                  + firefox_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+firefox_role_docker_capabilities_custom: []</span><span class="diff-line add">+firefox_role_docker_capabilities: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_default&#x27;, role=&#x27;firefox&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_custom&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-firefox_docker_restart_policy: unless-stopped</span><span class="diff-line add">+firefox_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-firefox_docker_state: started</span><span class="diff-line add">+firefox_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-142">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/firefox/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,10 +20,10 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Import default `{{ firefox_paths_env_file_location | basename }}` if necessary</span><span class="diff-line add">+- name: Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_env_file_location&#x27;, role=&#x27;firefox&#x27;) | basename }}` if necessary</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: env.j2</span><span class="diff-line del">-    dest: &quot;{{ firefox_paths_env_file_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_env_file_location&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -31,15 +31,15 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Wait for service availability</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    host: &quot;{{ firefox_docker_networks_alias }}&quot;</span><span class="diff-line del">-    port: &quot;{{ firefox_web_port }}&quot;</span><span class="diff-line add">+    host: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_alias&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line add">+    port: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Remove empty subdirectories of `{{ firefox_paths_location }}`</span><span class="diff-line del">-  ansible.builtin.shell: find &quot;{{ firefox_paths_location }}&quot; -maxdepth 1 -type d -empty -exec rmdir {} +</span><span class="diff-line add">+- name: Remove empty subdirectories of `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;firefox&#x27;) }}`</span><span class="diff-line add">+  ansible.builtin.shell: find &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;firefox&#x27;) }}&quot; -maxdepth 1 -type d -empty -exec rmdir {} +</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-143">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/firefox/templates/env.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,13 +9,13 @@</span><span class="diff-line context"> DISPLAY_WIDTH=1920</span><span class="diff-line context"> DISPLAY_HEIGHT=1080</span><span class="diff-line context"> DARK_MODE=1</span><span class="diff-line del">-{% if firefox_web_port != &#x27;5800&#x27; %}</span><span class="diff-line del">-WEB_LISTENING_PORT={{ firefox_web_port }}</span><span class="diff-line add">+{% if lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;firefox&#x27;) != &#x27;5800&#x27; %}</span><span class="diff-line add">+WEB_LISTENING_PORT={{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;firefox&#x27;) }}</span><span class="diff-line context"> {% endif %}</span><span class="diff-line del">-{% if firefox_vnc_port != &#x27;5900&#x27; %}</span><span class="diff-line del">-VNC_LISTENING_PORT={{ firefox_vnc_port }}</span><span class="diff-line add">+{% if lookup(&#x27;role_var&#x27;, &#x27;_vnc_port&#x27;, role=&#x27;firefox&#x27;) != &#x27;5900&#x27; %}</span><span class="diff-line add">+VNC_LISTENING_PORT={{ lookup(&#x27;role_var&#x27;, &#x27;_vnc_port&#x27;, role=&#x27;firefox&#x27;) }}</span><span class="diff-line context"> {% endif %}</span><span class="diff-line context"> ENABLE_CJK_FONT=0</span><span class="diff-line context"> FF_OPEN_URL=</span><span class="diff-line context"> FF_KIOSK=0</span><span class="diff-line del">-FF_PREF_DOWNLOADS=browser.download.dir=&quot;{{ firefox_paths_downloads_location }}&quot;</span><span class="diff-line add">+FF_PREF_DOWNLOADS=browser.download.dir=&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_downloads_location&#x27;, role=&#x27;firefox&#x27;) }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-144">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/flaresolverr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,84 +14,57 @@</span><span class="diff-line context"> flaresolverr_name: flaresolverr</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Paths</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+flaresolverr_role_paths_folder: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line add">+flaresolverr_role_paths_location: &quot;{{ server_appdata_path }}/{{ flaresolverr_role_paths_folder }}&quot;</span><span class="diff-line add">+flaresolverr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ flaresolverr_role_paths_location }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-flaresolverr_docker_container: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_container: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-flaresolverr_docker_image_pull: true</span><span class="diff-line del">-flaresolverr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-flaresolverr_docker_image: &quot;ghcr.io/flaresolverr/flaresolverr:{{ flaresolverr_docker_image_tag }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_image_pull: true</span><span class="diff-line add">+flaresolverr_role_docker_image_repo: &quot;ghcr.io/flaresolverr/flaresolverr&quot;</span><span class="diff-line add">+flaresolverr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+flaresolverr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;flaresolverr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;flaresolverr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-flaresolverr_docker_envs_default:</span><span class="diff-line add">+flaresolverr_role_docker_envs_default:</span><span class="diff-line context">   LOG_LEVEL: &quot;info&quot;</span><span class="diff-line context">   LOG_HTML: &quot;false&quot;</span><span class="diff-line context">   CAPTCHA_SOLVER: &quot;hcaptcha-solver&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-flaresolverr_docker_envs_custom: {}</span><span class="diff-line del">-flaresolverr_docker_envs: &quot;{{ flaresolverr_docker_envs_default</span><span class="diff-line del">-                              | combine(flaresolverr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-flaresolverr_docker_commands_default: []</span><span class="diff-line del">-flaresolverr_docker_commands_custom: []</span><span class="diff-line del">-flaresolverr_docker_commands: &quot;{{ flaresolverr_docker_commands_default</span><span class="diff-line del">-                                  + flaresolverr_docker_commands_custom }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_envs_custom: {}</span><span class="diff-line add">+flaresolverr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;flaresolverr&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;flaresolverr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-flaresolverr_docker_volumes_default: []</span><span class="diff-line del">-flaresolverr_docker_volumes_custom: []</span><span class="diff-line del">-flaresolverr_docker_volumes: &quot;{{ flaresolverr_docker_volumes_default</span><span class="diff-line del">-                                 + flaresolverr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-flaresolverr_docker_devices_default: []</span><span class="diff-line del">-flaresolverr_docker_devices_custom: []</span><span class="diff-line del">-flaresolverr_docker_devices: &quot;{{ flaresolverr_docker_devices_default</span><span class="diff-line del">-                                 + flaresolverr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-flaresolverr_docker_hosts_default: {}</span><span class="diff-line del">-flaresolverr_docker_hosts_custom: {}</span><span class="diff-line del">-flaresolverr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(flaresolverr_docker_hosts_default)</span><span class="diff-line del">-                               | combine(flaresolverr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-flaresolverr_docker_labels_default: {}</span><span class="diff-line del">-flaresolverr_docker_labels_custom: {}</span><span class="diff-line del">-flaresolverr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(flaresolverr_docker_labels_default)</span><span class="diff-line del">-                                | combine(flaresolverr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;flaresolverr&#x27;) }}:/config&quot;</span><span class="diff-line add">+flaresolverr_role_docker_volumes_custom: []</span><span class="diff-line add">+flaresolverr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;flaresolverr&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;flaresolverr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-flaresolverr_docker_hostname: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_hostname: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-flaresolverr_docker_networks_alias: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line del">-flaresolverr_docker_networks_default: []</span><span class="diff-line del">-flaresolverr_docker_networks_custom: []</span><span class="diff-line del">-flaresolverr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + flaresolverr_docker_networks_default</span><span class="diff-line del">-                                  + flaresolverr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-flaresolverr_docker_capabilities_default: []</span><span class="diff-line del">-flaresolverr_docker_capabilities_custom: []</span><span class="diff-line del">-flaresolverr_docker_capabilities: &quot;{{ flaresolverr_docker_capabilities_default</span><span class="diff-line del">-                                      + flaresolverr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-flaresolverr_docker_security_opts_default: []</span><span class="diff-line del">-flaresolverr_docker_security_opts_custom: []</span><span class="diff-line del">-flaresolverr_docker_security_opts: &quot;{{ flaresolverr_docker_security_opts_default</span><span class="diff-line del">-                                       + flaresolverr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_networks_alias: &quot;{{ flaresolverr_name }}&quot;</span><span class="diff-line add">+flaresolverr_role_docker_networks_default: []</span><span class="diff-line add">+flaresolverr_role_docker_networks_custom: []</span><span class="diff-line add">+flaresolverr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;flaresolverr&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;flaresolverr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-flaresolverr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+flaresolverr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-flaresolverr_docker_state: started</span><span class="diff-line add">+flaresolverr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-145">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/flaresolverr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,5 +10,8 @@</span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line add">+- name: Create directories</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-146">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/forgejo/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,61 +17,61 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-forgejo_paths_folder: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line del">-forgejo_paths_location: &quot;{{ server_appdata_path }}/{{ forgejo_paths_folder }}&quot;</span><span class="diff-line del">-forgejo_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ forgejo_paths_location }}&quot;</span><span class="diff-line add">+forgejo_role_paths_folder: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line add">+forgejo_role_paths_location: &quot;{{ server_appdata_path }}/{{ forgejo_role_paths_folder }}&quot;</span><span class="diff-line add">+forgejo_role_paths_recursive: true</span><span class="diff-line add">+forgejo_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ forgejo_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ forgejo_role_paths_location }}/git&quot;</span><span class="diff-line add">+  - &quot;{{ forgejo_role_paths_location }}/gitea&quot;</span><span class="diff-line add">+  - &quot;{{ forgejo_role_paths_location }}/ssh&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-forgejo_web_subdomain: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line del">-forgejo_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-forgejo_web_port: &quot;3000&quot;</span><span class="diff-line del">-forgejo_web_url: &quot;{{ &#x27;https://&#x27; + (forgejo_web_subdomain + &#x27;.&#x27; + forgejo_web_domain</span><span class="diff-line del">-                  if (forgejo_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else forgejo_web_domain) }}&quot;</span><span class="diff-line add">+forgejo_role_web_subdomain: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line add">+forgejo_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+forgejo_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+forgejo_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;forgejo&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;forgejo&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;forgejo&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;forgejo&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-forgejo_dns_record: &quot;{{ forgejo_web_subdomain }}&quot;</span><span class="diff-line del">-forgejo_dns_zone: &quot;{{ forgejo_web_domain }}&quot;</span><span class="diff-line del">-forgejo_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+forgejo_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;forgejo&#x27;) }}&quot;</span><span class="diff-line add">+forgejo_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;forgejo&#x27;) }}&quot;</span><span class="diff-line add">+forgejo_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-forgejo_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-forgejo_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-forgejo_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-forgejo_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-forgejo_traefik_enabled: true</span><span class="diff-line del">-forgejo_traefik_api_enabled: false</span><span class="diff-line del">-forgejo_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+forgejo_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+forgejo_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+forgejo_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+forgejo_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+forgejo_role_traefik_enabled: true</span><span class="diff-line add">+forgejo_role_traefik_api_enabled: false</span><span class="diff-line add">+forgejo_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-forgejo_docker_container: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line add">+forgejo_role_docker_container: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-forgejo_docker_image_pull: true</span><span class="diff-line del">-forgejo_docker_image_tag: &quot;1.20&quot; # the Codeberg container registry does not provide a &quot;latest&quot; tag</span><span class="diff-line del">-forgejo_docker_image: &quot;codeberg.org/forgejo/forgejo:{{ forgejo_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-forgejo_docker_ports_defaults: []</span><span class="diff-line del">-forgejo_docker_ports_custom: []</span><span class="diff-line del">-forgejo_docker_ports: &quot;{{ forgejo_docker_ports_defaults + forgejo_docker_ports_custom }}&quot;</span><span class="diff-line add">+forgejo_role_docker_image_pull: true</span><span class="diff-line add">+forgejo_role_docker_image_repo: &quot;codeberg.org/forgejo/forgejo&quot;</span><span class="diff-line add">+forgejo_role_docker_image_tag: &quot;13&quot; # the Codeberg container registry does not provide a &quot;latest&quot; tag</span><span class="diff-line add">+forgejo_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;forgejo&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;forgejo&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-forgejo_docker_envs_default:</span><span class="diff-line add">+forgejo_role_docker_envs_default:</span><span class="diff-line context">   USER_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   USER_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   DB_TYPE: &quot;mysql&quot;</span><span class="diff-line hunk">@@ -80,65 +80,38 @@</span><span class="diff-line context">   DB_PASS: &quot;password321&quot;</span><span class="diff-line context">   DB_DATABASE: &quot;forgejo&quot;</span><span class="diff-line context">   DISABLE_SSH: &quot;true&quot;</span><span class="diff-line del">-  RUN_MODE: &quot;prod&quot;</span><span class="diff-line del">-  ROOT_URL: &quot;{{ forgejo_web_url }}/&quot;</span><span class="diff-line del">-forgejo_docker_envs_custom: {}</span><span class="diff-line del">-forgejo_docker_envs: &quot;{{ forgejo_docker_envs_default | combine(forgejo_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-forgejo_docker_commands_default: []</span><span class="diff-line del">-forgejo_docker_commands_custom: []</span><span class="diff-line del">-forgejo_docker_commands: &quot;{{ forgejo_docker_commands_default + forgejo_docker_commands_custom }}&quot;</span><span class="diff-line add">+  ROOT_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;forgejo&#x27;) }}/&quot;</span><span class="diff-line add">+forgejo_role_docker_envs_custom: {}</span><span class="diff-line add">+forgejo_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;forgejo&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;forgejo&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-forgejo_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ forgejo_paths_location }}:/data&quot;</span><span class="diff-line add">+forgejo_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;forgejo&#x27;) }}:/data&quot;</span><span class="diff-line context">   - /etc/timezone:/etc/timezone:ro</span><span class="diff-line context">   - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-forgejo_docker_volumes_custom: []</span><span class="diff-line del">-forgejo_docker_volumes: &quot;{{ forgejo_docker_volumes_default + forgejo_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-forgejo_docker_devices_default: []</span><span class="diff-line del">-forgejo_docker_devices_custom: []</span><span class="diff-line del">-forgejo_docker_devices: &quot;{{ forgejo_docker_devices_default + forgejo_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-forgejo_docker_hosts_default: {}</span><span class="diff-line del">-forgejo_docker_hosts_custom: {}</span><span class="diff-line del">-forgejo_docker_hosts: &quot;{{ docker_hosts_common | combine(forgejo_docker_hosts_default) | combine(forgejo_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-forgejo_docker_labels_default: {}</span><span class="diff-line del">-forgejo_docker_labels_custom: {}</span><span class="diff-line del">-forgejo_docker_labels: &quot;{{ docker_labels_common | combine(forgejo_docker_labels_default) | combine(forgejo_docker_labels_custom) }}&quot;</span><span class="diff-line add">+forgejo_role_docker_volumes_custom: []</span><span class="diff-line add">+forgejo_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;forgejo&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;forgejo&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-forgejo_docker_hostname: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line add">+forgejo_role_docker_hostname: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-forgejo_docker_networks_alias: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line del">-forgejo_docker_networks_default: []</span><span class="diff-line del">-forgejo_docker_networks_custom: []</span><span class="diff-line del">-forgejo_docker_networks: &quot;{{ docker_networks_common + forgejo_docker_networks_default + forgejo_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-forgejo_docker_capabilities_default: []</span><span class="diff-line del">-forgejo_docker_capabilities_custom: []</span><span class="diff-line del">-forgejo_docker_capabilities: &quot;{{ forgejo_docker_capabilities_default + forgejo_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-forgejo_docker_security_opts_default: []</span><span class="diff-line del">-forgejo_docker_security_opts_custom: []</span><span class="diff-line del">-forgejo_docker_security_opts: &quot;{{ forgejo_docker_security_opts_default + forgejo_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+forgejo_role_docker_networks_alias: &quot;{{ forgejo_name }}&quot;</span><span class="diff-line add">+forgejo_role_docker_networks_default: []</span><span class="diff-line add">+forgejo_role_docker_networks_custom: []</span><span class="diff-line add">+forgejo_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;forgejo&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;forgejo&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-forgejo_docker_restart_policy: unless-stopped</span><span class="diff-line add">+forgejo_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-forgejo_docker_state: started</span><span class="diff-line add">+forgejo_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-forgejo_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-forgejo_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-forgejo_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+forgejo_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+forgejo_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+forgejo_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-147">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/forgejo/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,14 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Check for previous install</span><span class="diff-line add">+  ansible.builtin.stat:</span><span class="diff-line add">+    path: &quot;{{ forgejo_role_paths_location }}&quot;</span><span class="diff-line add">+  register: forgejo_install_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line hunk">@@ -23,7 +28,7 @@</span><span class="diff-line context">     name: &quot;forgejo&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_envs_mysql_root_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_mysql_root_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line hunk">@@ -34,3 +39,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: New install</span><span class="diff-line add">+  when: (not forgejo_install_stat.stat.exists)</span><span class="diff-line add">+  block:</span><span class="diff-line add">+    - name: Wait 30 seconds before continuing</span><span class="diff-line add">+      ansible.builtin.wait_for:</span><span class="diff-line add">+        timeout: 30</span><span class="diff-line add">+</span><span class="diff-line add">+    - name: Chown directories</span><span class="diff-line add">+      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-148">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/foundry/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,139 +14,114 @@</span><span class="diff-line context"> foundry_name: foundry</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+foundry_role_user: &quot;your_foundryvtt_username&quot;</span><span class="diff-line add">+foundry_role_pass: &quot;your_foundryvtt_password&quot;</span><span class="diff-line add">+foundry_role_app_key: &quot;your_foundryvtt_license&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-foundry_paths_folder: &quot;{{ foundry_name }}&quot;</span><span class="diff-line del">-foundry_paths_location: &quot;{{ server_appdata_path }}/{{ foundry_paths_folder }}&quot;</span><span class="diff-line del">-foundry_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ foundry_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ foundry_paths_location }}/data&quot;</span><span class="diff-line del">-  - &quot;{{ foundry_paths_location }}/container_cache&quot;</span><span class="diff-line add">+foundry_role_paths_folder: &quot;{{ foundry_name }}&quot;</span><span class="diff-line add">+foundry_role_paths_location: &quot;{{ server_appdata_path }}/{{ foundry_role_paths_folder }}&quot;</span><span class="diff-line add">+foundry_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ foundry_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ foundry_role_paths_location }}/data&quot;</span><span class="diff-line add">+  - &quot;{{ foundry_role_paths_location }}/container_cache&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-foundry_web_subdomain: &quot;{{ foundry_name }}&quot;</span><span class="diff-line del">-foundry_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-foundry_web_port: &quot;30000&quot;</span><span class="diff-line del">-foundry_web_url: &quot;{{ &#x27;https://&#x27; + (foundry_web_subdomain + &#x27;.&#x27; + foundry_web_domain</span><span class="diff-line del">-                  if (foundry_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else foundry_web_domain) }}&quot;</span><span class="diff-line add">+foundry_role_web_subdomain: &quot;{{ foundry_name }}&quot;</span><span class="diff-line add">+foundry_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+foundry_role_web_port: &quot;30000&quot;</span><span class="diff-line add">+foundry_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;foundry&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;foundry&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;foundry&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;foundry&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-foundry_dns_record: &quot;{{ foundry_web_subdomain }}&quot;</span><span class="diff-line del">-foundry_dns_zone: &quot;{{ foundry_web_domain }}&quot;</span><span class="diff-line del">-foundry_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+foundry_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line add">+foundry_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line add">+foundry_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-foundry_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-foundry_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-foundry_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-foundry_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-foundry_traefik_enabled: true</span><span class="diff-line del">-foundry_traefik_api_enabled: false</span><span class="diff-line del">-foundry_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+foundry_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+foundry_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+foundry_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+foundry_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+foundry_role_traefik_enabled: true</span><span class="diff-line add">+foundry_role_traefik_api_enabled: false</span><span class="diff-line add">+foundry_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-foundry_docker_container: &quot;{{ foundry_name }}&quot;</span><span class="diff-line add">+foundry_role_docker_container: &quot;{{ foundry_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-foundry_docker_image_pull: true</span><span class="diff-line del">-foundry_docker_image_tag: &quot;release&quot;</span><span class="diff-line del">-foundry_docker_image: &quot;felddy/foundryvtt:{{ foundry_docker_image_tag }}&quot;</span><span class="diff-line add">+foundry_role_docker_image_pull: true</span><span class="diff-line add">+foundry_role_docker_image_repo: &quot;felddy/foundryvtt&quot;</span><span class="diff-line add">+foundry_role_docker_image_tag: &quot;release&quot;</span><span class="diff-line add">+foundry_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;foundry&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-foundry_docker_envs_default:</span><span class="diff-line add">+foundry_role_docker_envs_default:</span><span class="diff-line context">   FOUNDRY_HOSTNAME: &quot;{{ foundry_name }}.{{ user.domain }}&quot;</span><span class="diff-line context">   FOUNDRY_ADMIN_KEY: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   FOUNDRY_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   FOUNDRY_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   CONTAINER_PRESERVE_CONFIG: &quot;true&quot;</span><span class="diff-line context">   CONTAINER_VERBOSE: &quot;false&quot;</span><span class="diff-line del">-  FOUNDRY_LICENSE_KEY: &quot;{{ foundry.app_key }}&quot;</span><span class="diff-line add">+  FOUNDRY_LICENSE_KEY: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_app_key&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context">   FOUNDRY_PROXY_SSL: &quot;true&quot;</span><span class="diff-line del">-  FOUNDRY_USERNAME: &quot;{{ foundry.user }}&quot;</span><span class="diff-line del">-  FOUNDRY_PASSWORD: &quot;{{ foundry.pass }}&quot;</span><span class="diff-line add">+  FOUNDRY_USERNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_user&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line add">+  FOUNDRY_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_pass&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context">   TIMEZONE: &quot;{{ tz }}&quot;</span><span class="diff-line del">-foundry_docker_envs_custom: {}</span><span class="diff-line del">-foundry_docker_envs: &quot;{{ foundry_docker_envs_default</span><span class="diff-line del">-                              | combine(foundry_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-foundry_docker_commands_default: []</span><span class="diff-line del">-foundry_docker_commands_custom: []</span><span class="diff-line del">-foundry_docker_commands: &quot;{{ foundry_docker_commands_default</span><span class="diff-line del">-                                  + foundry_docker_commands_custom }}&quot;</span><span class="diff-line add">+foundry_role_docker_envs_custom: {}</span><span class="diff-line add">+foundry_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;foundry&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;foundry&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-foundry_docker_volumes_default: [&quot;/opt/foundry/data:/data&quot;, &quot;/opt/foundry/container_cache:/container_cache&quot;, &quot;/mnt/unionfs/Media/Foundry:/data/Data/Media&quot;]</span><span class="diff-line del">-foundry_docker_volumes_custom: []</span><span class="diff-line del">-foundry_docker_volumes: &quot;{{ foundry_docker_volumes_default</span><span class="diff-line del">-                                 + foundry_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-foundry_docker_devices_default: []</span><span class="diff-line del">-foundry_docker_devices_custom: []</span><span class="diff-line del">-foundry_docker_devices: &quot;{{ foundry_docker_devices_default</span><span class="diff-line del">-                                 + foundry_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-foundry_docker_hosts_default: {}</span><span class="diff-line del">-foundry_docker_hosts_custom: {}</span><span class="diff-line del">-foundry_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(foundry_docker_hosts_default)</span><span class="diff-line del">-                               | combine(foundry_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-foundry_docker_labels_default: {}</span><span class="diff-line del">-foundry_docker_labels_custom: {}</span><span class="diff-line del">-foundry_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(foundry_docker_labels_default)</span><span class="diff-line del">-                                | combine(foundry_docker_labels_custom) }}&quot;</span><span class="diff-line add">+foundry_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;foundry&#x27;) }}/data:/data&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;foundry&#x27;) }}/container_cache:/container_cache&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/Media/Foundry:/data/Data/Media&quot;</span><span class="diff-line add">+foundry_role_docker_volumes_custom: []</span><span class="diff-line add">+foundry_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;foundry&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-foundry_docker_hostname: &quot;{{ foundry_name }}&quot;</span><span class="diff-line add">+foundry_role_docker_hostname: &quot;{{ foundry_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-foundry_docker_ports_defaults: [&quot;{{ foundry_web_port }}:{{ foundry_web_port }}&quot;]</span><span class="diff-line del">-foundry_docker_ports_custom: []</span><span class="diff-line del">-foundry_docker_ports: &quot;{{ foundry_docker_ports_defaults</span><span class="diff-line del">-                         + foundry_docker_ports_custom }}&quot;</span><span class="diff-line add">+foundry_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;foundry&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line add">+foundry_role_docker_ports_custom: []</span><span class="diff-line add">+foundry_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;foundry&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-foundry_docker_networks_alias: &quot;{{ foundry_name }}&quot;</span><span class="diff-line del">-foundry_docker_networks_default: []</span><span class="diff-line del">-foundry_docker_networks_custom: []</span><span class="diff-line del">-foundry_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + foundry_docker_networks_default</span><span class="diff-line del">-                                  + foundry_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-foundry_docker_capabilities_default: []</span><span class="diff-line del">-foundry_docker_capabilities_custom: []</span><span class="diff-line del">-foundry_docker_capabilities: &quot;{{ foundry_docker_capabilities_default</span><span class="diff-line del">-                                      + foundry_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-foundry_docker_security_opts_default: []</span><span class="diff-line del">-foundry_docker_security_opts_custom: []</span><span class="diff-line del">-foundry_docker_security_opts: &quot;{{ foundry_docker_security_opts_default</span><span class="diff-line del">-                                       + foundry_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+foundry_role_docker_networks_alias: &quot;{{ foundry_name }}&quot;</span><span class="diff-line add">+foundry_role_docker_networks_default: []</span><span class="diff-line add">+foundry_role_docker_networks_custom: []</span><span class="diff-line add">+foundry_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;foundry&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;foundry&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-foundry_docker_restart_policy: unless-stopped</span><span class="diff-line add">+foundry_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-foundry_docker_state: started</span><span class="diff-line add">+foundry_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-149">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/foundry/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-150">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/freshrss/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-freshrss_paths_folder: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line del">-freshrss_paths_location: &quot;{{ server_appdata_path }}/{{ freshrss_paths_folder }}&quot;</span><span class="diff-line del">-freshrss_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ freshrss_paths_location }}&quot;</span><span class="diff-line add">+freshrss_role_paths_folder: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line add">+freshrss_role_paths_location: &quot;{{ server_appdata_path }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folder&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line add">+freshrss_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-freshrss_web_subdomain: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line del">-freshrss_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-freshrss_web_port: &quot;80&quot;</span><span class="diff-line del">-freshrss_web_url: &quot;{{ &#x27;https://&#x27; + (freshrss_web_subdomain + &#x27;.&#x27; + freshrss_web_domain</span><span class="diff-line del">-                   if (freshrss_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else freshrss_web_domain) }}&quot;</span><span class="diff-line add">+freshrss_role_web_subdomain: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line add">+freshrss_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+freshrss_role_web_port: &quot;80&quot;</span><span class="diff-line add">+freshrss_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;freshrss&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;freshrss&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;freshrss&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;freshrss&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-freshrss_dns_record: &quot;{{ freshrss_web_subdomain }}&quot;</span><span class="diff-line del">-freshrss_dns_zone: &quot;{{ freshrss_web_domain }}&quot;</span><span class="diff-line del">-freshrss_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+freshrss_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line add">+freshrss_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line add">+freshrss_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-freshrss_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-freshrss_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-freshrss_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-freshrss_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-freshrss_traefik_enabled: true</span><span class="diff-line del">-freshrss_traefik_api_enabled: false</span><span class="diff-line del">-freshrss_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+freshrss_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+freshrss_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+freshrss_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+freshrss_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+freshrss_role_traefik_enabled: true</span><span class="diff-line add">+freshrss_role_traefik_api_enabled: false</span><span class="diff-line add">+freshrss_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-freshrss_docker_container: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line add">+freshrss_role_docker_container: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-freshrss_docker_image_pull: true</span><span class="diff-line del">-freshrss_docker_image_tag: &quot;amd64-latest&quot;</span><span class="diff-line del">-freshrss_docker_image: &quot;lscr.io/linuxserver/freshrss:{{ freshrss_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-freshrss_docker_ports_defaults: []</span><span class="diff-line del">-freshrss_docker_ports_custom: []</span><span class="diff-line del">-freshrss_docker_ports: &quot;{{ freshrss_docker_ports_defaults</span><span class="diff-line del">-                           + freshrss_docker_ports_custom }}&quot;</span><span class="diff-line add">+freshrss_role_docker_image_pull: true</span><span class="diff-line add">+freshrss_role_docker_image_repo: &quot;lscr.io/linuxserver/freshrss&quot;</span><span class="diff-line add">+freshrss_role_docker_image_tag: &quot;amd64-latest&quot;</span><span class="diff-line add">+freshrss_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;freshrss&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-freshrss_docker_envs_default:</span><span class="diff-line add">+freshrss_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-freshrss_docker_envs_custom: {}</span><span class="diff-line del">-freshrss_docker_envs: &quot;{{ freshrss_docker_envs_default</span><span class="diff-line del">-                          | combine(freshrss_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-freshrss_docker_commands_default: []</span><span class="diff-line del">-freshrss_docker_commands_custom: []</span><span class="diff-line del">-freshrss_docker_commands: &quot;{{ freshrss_docker_commands_default</span><span class="diff-line del">-                              + freshrss_docker_commands_custom }}&quot;</span><span class="diff-line add">+freshrss_role_docker_envs_custom: {}</span><span class="diff-line add">+freshrss_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;freshrss&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;freshrss&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-freshrss_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ freshrss_paths_location }}:/config&quot;</span><span class="diff-line del">-freshrss_docker_volumes_custom: []</span><span class="diff-line del">-freshrss_docker_volumes: &quot;{{ freshrss_docker_volumes_default</span><span class="diff-line del">-                             + freshrss_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-freshrss_docker_devices_default: []</span><span class="diff-line del">-freshrss_docker_devices_custom: []</span><span class="diff-line del">-freshrss_docker_devices: &quot;{{ freshrss_docker_devices_default</span><span class="diff-line del">-                             + freshrss_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-freshrss_docker_hosts_default: {}</span><span class="diff-line del">-freshrss_docker_hosts_custom: {}</span><span class="diff-line del">-freshrss_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(freshrss_docker_hosts_default)</span><span class="diff-line del">-                           | combine(freshrss_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-freshrss_docker_labels_default: {}</span><span class="diff-line del">-freshrss_docker_labels_custom: {}</span><span class="diff-line del">-freshrss_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(freshrss_docker_labels_default)</span><span class="diff-line del">-                            | combine(freshrss_docker_labels_custom) }}&quot;</span><span class="diff-line add">+freshrss_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;freshrss&#x27;) }}:/config&quot;</span><span class="diff-line add">+freshrss_role_docker_volumes_custom: []</span><span class="diff-line add">+freshrss_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;freshrss&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-freshrss_docker_hostname: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line add">+freshrss_role_docker_hostname: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-freshrss_docker_networks_alias: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line del">-freshrss_docker_networks_default: []</span><span class="diff-line del">-freshrss_docker_networks_custom: []</span><span class="diff-line del">-freshrss_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + freshrss_docker_networks_default</span><span class="diff-line del">-                              + freshrss_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-freshrss_docker_capabilities_default: []</span><span class="diff-line del">-freshrss_docker_capabilities_custom: []</span><span class="diff-line del">-freshrss_docker_capabilities: &quot;{{ freshrss_docker_capabilities_default</span><span class="diff-line del">-                                  + freshrss_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-freshrss_docker_security_opts_default: []</span><span class="diff-line del">-freshrss_docker_security_opts_custom: []</span><span class="diff-line del">-freshrss_docker_security_opts: &quot;{{ freshrss_docker_security_opts_default</span><span class="diff-line del">-                                   + freshrss_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+freshrss_role_docker_networks_alias: &quot;{{ freshrss_name }}&quot;</span><span class="diff-line add">+freshrss_role_docker_networks_default: []</span><span class="diff-line add">+freshrss_role_docker_networks_custom: []</span><span class="diff-line add">+freshrss_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;freshrss&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;freshrss&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-freshrss_docker_restart_policy: unless-stopped</span><span class="diff-line add">+freshrss_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-freshrss_docker_state: started</span><span class="diff-line add">+freshrss_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-151">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/freshrss/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-152">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/funkwhale/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-funkwhale_paths_folder: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line del">-funkwhale_paths_location: &quot;{{ server_appdata_path }}/{{ funkwhale_paths_folder }}&quot;</span><span class="diff-line del">-funkwhale_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ funkwhale_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ funkwhale_paths_location }}/data&quot;</span><span class="diff-line add">+funkwhale_role_paths_folder: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line add">+funkwhale_role_paths_location: &quot;{{ server_appdata_path }}/{{ funkwhale_role_paths_folder }}&quot;</span><span class="diff-line add">+funkwhale_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ funkwhale_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ funkwhale_role_paths_location }}/data&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-funkwhale_web_subdomain: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line del">-funkwhale_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-funkwhale_web_port: &quot;80&quot;</span><span class="diff-line del">-funkwhale_web_url: &quot;{{ &#x27;https://&#x27; + (funkwhale_web_subdomain + &#x27;.&#x27; + funkwhale_web_domain</span><span class="diff-line del">-                    if (funkwhale_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else funkwhale_web_domain) }}&quot;</span><span class="diff-line add">+funkwhale_role_web_subdomain: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line add">+funkwhale_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+funkwhale_role_web_port: &quot;80&quot;</span><span class="diff-line add">+funkwhale_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;funkwhale&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;funkwhale&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;funkwhale&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;funkwhale&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-funkwhale_dns_record: &quot;{{ funkwhale_web_subdomain }}&quot;</span><span class="diff-line del">-funkwhale_dns_zone: &quot;{{ funkwhale_web_domain }}&quot;</span><span class="diff-line del">-funkwhale_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+funkwhale_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line add">+funkwhale_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line add">+funkwhale_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-funkwhale_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-funkwhale_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-funkwhale_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-funkwhale_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-funkwhale_traefik_enabled: true</span><span class="diff-line del">-funkwhale_traefik_api_enabled: false</span><span class="diff-line del">-funkwhale_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+funkwhale_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+funkwhale_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+funkwhale_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+funkwhale_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+funkwhale_role_traefik_enabled: true</span><span class="diff-line add">+funkwhale_role_traefik_api_enabled: false</span><span class="diff-line add">+funkwhale_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-funkwhale_docker_container: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_container: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-funkwhale_docker_image_pull: true</span><span class="diff-line del">-funkwhale_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-funkwhale_docker_image: &quot;funkwhale/all-in-one:{{ funkwhale_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-funkwhale_docker_ports_defaults: []</span><span class="diff-line del">-funkwhale_docker_ports_custom: []</span><span class="diff-line del">-funkwhale_docker_ports: &quot;{{ funkwhale_docker_ports_defaults</span><span class="diff-line del">-                            + funkwhale_docker_ports_custom }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_image_pull: true</span><span class="diff-line add">+funkwhale_role_docker_image_repo: &quot;funkwhale/all-in-one&quot;</span><span class="diff-line add">+funkwhale_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+funkwhale_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;funkwhale&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-funkwhale_docker_envs_default:</span><span class="diff-line del">-  FUNKWHALE_HOSTNAME: &quot;{{ funkwhale_web_subdomain + &#x27;.&#x27; + funkwhale_web_domain }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_envs_default:</span><span class="diff-line add">+  FUNKWHALE_HOSTNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;funkwhale&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line context">   NESTED_PROXY: &quot;1&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-funkwhale_docker_envs_custom: {}</span><span class="diff-line del">-funkwhale_docker_envs: &quot;{{ funkwhale_docker_envs_default</span><span class="diff-line del">-                           | combine(funkwhale_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-funkwhale_docker_commands_default: []</span><span class="diff-line del">-funkwhale_docker_commands_custom: []</span><span class="diff-line del">-funkwhale_docker_commands: &quot;{{ funkwhale_docker_commands_default</span><span class="diff-line del">-                               + funkwhale_docker_commands_custom }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_envs_custom: {}</span><span class="diff-line add">+funkwhale_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;funkwhale&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;funkwhale&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-funkwhale_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ funkwhale_paths_location }}/data:/data&quot;</span><span class="diff-line add">+funkwhale_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;funkwhale&#x27;) }}/data:/data&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs:/music:ro&quot;</span><span class="diff-line del">-funkwhale_docker_volumes_custom: []</span><span class="diff-line del">-funkwhale_docker_volumes: &quot;{{ funkwhale_docker_volumes_default</span><span class="diff-line del">-                              + funkwhale_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-funkwhale_docker_devices_default: []</span><span class="diff-line del">-funkwhale_docker_devices_custom: []</span><span class="diff-line del">-funkwhale_docker_devices: &quot;{{ funkwhale_docker_devices_default</span><span class="diff-line del">-                              + funkwhale_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-funkwhale_docker_hosts_default: {}</span><span class="diff-line del">-funkwhale_docker_hosts_custom: {}</span><span class="diff-line del">-funkwhale_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(funkwhale_docker_hosts_default)</span><span class="diff-line del">-                            | combine(funkwhale_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-funkwhale_docker_labels_default: {}</span><span class="diff-line del">-funkwhale_docker_labels_custom: {}</span><span class="diff-line del">-funkwhale_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(funkwhale_docker_labels_default)</span><span class="diff-line del">-                             | combine(funkwhale_docker_labels_custom) }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_volumes_custom: []</span><span class="diff-line add">+funkwhale_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;funkwhale&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-funkwhale_docker_hostname: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_hostname: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-funkwhale_docker_networks_alias: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line del">-funkwhale_docker_networks_default: []</span><span class="diff-line del">-funkwhale_docker_networks_custom: []</span><span class="diff-line del">-funkwhale_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + funkwhale_docker_networks_default</span><span class="diff-line del">-                               + funkwhale_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-funkwhale_docker_capabilities_default: []</span><span class="diff-line del">-funkwhale_docker_capabilities_custom: []</span><span class="diff-line del">-funkwhale_docker_capabilities: &quot;{{ funkwhale_docker_capabilities_default</span><span class="diff-line del">-                                   + funkwhale_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-funkwhale_docker_security_opts_default: []</span><span class="diff-line del">-funkwhale_docker_security_opts_custom: []</span><span class="diff-line del">-funkwhale_docker_security_opts: &quot;{{ funkwhale_docker_security_opts_default</span><span class="diff-line del">-                                    + funkwhale_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_networks_alias: &quot;{{ funkwhale_name }}&quot;</span><span class="diff-line add">+funkwhale_role_docker_networks_default: []</span><span class="diff-line add">+funkwhale_role_docker_networks_custom: []</span><span class="diff-line add">+funkwhale_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;funkwhale&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;funkwhale&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-funkwhale_docker_restart_policy: unless-stopped</span><span class="diff-line add">+funkwhale_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-funkwhale_docker_state: started</span><span class="diff-line add">+funkwhale_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-153">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/funkwhale/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-154">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gaps/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gaps_paths_folder: &quot;{{ gaps_name }}&quot;</span><span class="diff-line del">-gaps_paths_location: &quot;{{ server_appdata_path }}/{{ gaps_paths_folder }}&quot;</span><span class="diff-line del">-gaps_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ gaps_paths_location }}&quot;</span><span class="diff-line add">+gaps_role_paths_folder: &quot;{{ gaps_name }}&quot;</span><span class="diff-line add">+gaps_role_paths_location: &quot;{{ server_appdata_path }}/{{ gaps_role_paths_folder }}&quot;</span><span class="diff-line add">+gaps_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ gaps_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gaps_web_subdomain: &quot;{{ gaps_name }}&quot;</span><span class="diff-line del">-gaps_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-gaps_web_port: &quot;8484&quot;</span><span class="diff-line del">-gaps_web_url: &quot;{{ &#x27;https://&#x27; + (gaps_web_subdomain + &#x27;.&#x27; + gaps_web_domain</span><span class="diff-line del">-               if (gaps_web_subdomain | length &gt; 0)</span><span class="diff-line del">-               else gaps_web_domain) }}&quot;</span><span class="diff-line add">+gaps_role_web_subdomain: &quot;{{ gaps_name }}&quot;</span><span class="diff-line add">+gaps_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+gaps_role_web_port: &quot;8484&quot;</span><span class="diff-line add">+gaps_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gaps&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gaps&#x27;)</span><span class="diff-line add">+                    if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gaps&#x27;) | length &gt; 0)</span><span class="diff-line add">+                    else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gaps&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gaps_dns_record: &quot;{{ gaps_web_subdomain }}&quot;</span><span class="diff-line del">-gaps_dns_zone: &quot;{{ gaps_web_domain }}&quot;</span><span class="diff-line del">-gaps_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+gaps_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gaps&#x27;) }}&quot;</span><span class="diff-line add">+gaps_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gaps&#x27;) }}&quot;</span><span class="diff-line add">+gaps_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gaps_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-gaps_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-gaps_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-gaps_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-gaps_traefik_enabled: true</span><span class="diff-line del">-gaps_traefik_api_enabled: false</span><span class="diff-line del">-gaps_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+gaps_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+gaps_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+gaps_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+gaps_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+gaps_role_traefik_enabled: true</span><span class="diff-line add">+gaps_role_traefik_api_enabled: false</span><span class="diff-line add">+gaps_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-gaps_docker_container: &quot;{{ gaps_name }}&quot;</span><span class="diff-line add">+gaps_role_docker_container: &quot;{{ gaps_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-gaps_docker_image_pull: true</span><span class="diff-line del">-gaps_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-gaps_docker_image: &quot;housewrecker/gaps:{{ gaps_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-gaps_docker_ports_defaults: []</span><span class="diff-line del">-gaps_docker_ports_custom: []</span><span class="diff-line del">-gaps_docker_ports: &quot;{{ gaps_docker_ports_defaults</span><span class="diff-line del">-                       + gaps_docker_ports_custom }}&quot;</span><span class="diff-line add">+gaps_role_docker_image_pull: true</span><span class="diff-line add">+gaps_role_docker_image_repo: &quot;housewrecker/gaps&quot;</span><span class="diff-line add">+gaps_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+gaps_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;gaps&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;gaps&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-gaps_docker_envs_default:</span><span class="diff-line add">+gaps_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  # BASE_URL: &quot;{{ gaps_web_url }}&quot;</span><span class="diff-line context">   ENABLE_LOGIN: &quot;false&quot;</span><span class="diff-line context">   ENABLE_SSL: &quot;false&quot;</span><span class="diff-line del">-gaps_docker_envs_custom: {}</span><span class="diff-line del">-gaps_docker_envs: &quot;{{ gaps_docker_envs_default</span><span class="diff-line del">-                      | combine(gaps_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-gaps_docker_commands_default: []</span><span class="diff-line del">-gaps_docker_commands_custom: []</span><span class="diff-line del">-gaps_docker_commands: &quot;{{ gaps_docker_commands_default</span><span class="diff-line del">-                          + gaps_docker_commands_custom }}&quot;</span><span class="diff-line add">+gaps_role_docker_envs_custom: {}</span><span class="diff-line add">+gaps_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;gaps&#x27;)</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;gaps&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-gaps_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ gaps_paths_location }}:/usr/data&quot;</span><span class="diff-line del">-gaps_docker_volumes_custom: []</span><span class="diff-line del">-gaps_docker_volumes: &quot;{{ gaps_docker_volumes_default</span><span class="diff-line del">-                         + gaps_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-gaps_docker_devices_default: []</span><span class="diff-line del">-gaps_docker_devices_custom: []</span><span class="diff-line del">-gaps_docker_devices: &quot;{{ gaps_docker_devices_default</span><span class="diff-line del">-                         + gaps_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-gaps_docker_hosts_default: {}</span><span class="diff-line del">-gaps_docker_hosts_custom: {}</span><span class="diff-line del">-gaps_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                       | combine(gaps_docker_hosts_default)</span><span class="diff-line del">-                       | combine(gaps_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-gaps_docker_labels_default: {}</span><span class="diff-line del">-gaps_docker_labels_custom: {}</span><span class="diff-line del">-gaps_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                        | combine(gaps_docker_labels_default)</span><span class="diff-line del">-                        | combine(gaps_docker_labels_custom) }}&quot;</span><span class="diff-line add">+gaps_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;gaps&#x27;) }}:/usr/data&quot;</span><span class="diff-line add">+gaps_role_docker_volumes_custom: []</span><span class="diff-line add">+gaps_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;gaps&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;gaps&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-gaps_docker_hostname: &quot;{{ gaps_name }}&quot;</span><span class="diff-line add">+gaps_role_docker_hostname: &quot;{{ gaps_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-gaps_docker_networks_alias: &quot;{{ gaps_name }}&quot;</span><span class="diff-line del">-gaps_docker_networks_default: []</span><span class="diff-line del">-gaps_docker_networks_custom: []</span><span class="diff-line del">-gaps_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                          + gaps_docker_networks_default</span><span class="diff-line del">-                          + gaps_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-gaps_docker_capabilities_default: []</span><span class="diff-line del">-gaps_docker_capabilities_custom: []</span><span class="diff-line del">-gaps_docker_capabilities: &quot;{{ gaps_docker_capabilities_default</span><span class="diff-line del">-                              + gaps_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-gaps_docker_security_opts_default: []</span><span class="diff-line del">-gaps_docker_security_opts_custom: []</span><span class="diff-line del">-gaps_docker_security_opts: &quot;{{ gaps_docker_security_opts_default</span><span class="diff-line del">-                               + gaps_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+gaps_role_docker_networks_alias: &quot;{{ gaps_name }}&quot;</span><span class="diff-line add">+gaps_role_docker_networks_default: []</span><span class="diff-line add">+gaps_role_docker_networks_custom: []</span><span class="diff-line add">+gaps_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;gaps&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;gaps&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-gaps_docker_restart_policy: unless-stopped</span><span class="diff-line add">+gaps_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-gaps_docker_state: started</span><span class="diff-line add">+gaps_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-155">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gaps/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-156">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gitea/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,141 +17,101 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gitea_paths_folder: &quot;{{ gitea_name }}&quot;</span><span class="diff-line del">-gitea_paths_location: &quot;{{ server_appdata_path }}/{{ gitea_paths_folder }}&quot;</span><span class="diff-line del">-gitea_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ gitea_paths_location }}&quot;</span><span class="diff-line add">+gitea_role_paths_folder: &quot;{{ gitea_name }}&quot;</span><span class="diff-line add">+gitea_role_paths_location: &quot;{{ server_appdata_path }}/{{ gitea_role_paths_folder }}&quot;</span><span class="diff-line add">+gitea_role_paths_recursive: true</span><span class="diff-line add">+gitea_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ gitea_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ gitea_role_paths_location }}/git&quot;</span><span class="diff-line add">+  - &quot;{{ gitea_role_paths_location }}/gitea&quot;</span><span class="diff-line add">+  - &quot;{{ gitea_role_paths_location }}/ssh&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gitea_web_subdomain: &quot;{{ gitea_name }}&quot;</span><span class="diff-line del">-gitea_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-gitea_web_port: &quot;3000&quot;</span><span class="diff-line del">-gitea_web_url: &quot;{{ &#x27;https://&#x27; + (gitea_web_subdomain + &#x27;.&#x27; + gitea_web_domain</span><span class="diff-line del">-                if (gitea_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else gitea_web_domain) }}&quot;</span><span class="diff-line add">+gitea_role_web_subdomain: &quot;{{ gitea_name }}&quot;</span><span class="diff-line add">+gitea_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+gitea_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+gitea_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gitea&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gitea&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gitea&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gitea&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gitea_dns_record: &quot;{{ gitea_web_subdomain }}&quot;</span><span class="diff-line del">-gitea_dns_zone: &quot;{{ gitea_web_domain }}&quot;</span><span class="diff-line del">-gitea_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+gitea_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gitea&#x27;) }}&quot;</span><span class="diff-line add">+gitea_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gitea&#x27;) }}&quot;</span><span class="diff-line add">+gitea_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gitea_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-gitea_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-gitea_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-gitea_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-gitea_traefik_enabled: true</span><span class="diff-line del">-gitea_traefik_api_enabled: false</span><span class="diff-line del">-gitea_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+gitea_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+gitea_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+gitea_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+gitea_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+gitea_role_traefik_enabled: true</span><span class="diff-line add">+gitea_role_traefik_api_enabled: false</span><span class="diff-line add">+gitea_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-gitea_docker_container: &quot;{{ gitea_name }}&quot;</span><span class="diff-line add">+gitea_role_docker_container: &quot;{{ gitea_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-gitea_docker_image_pull: true</span><span class="diff-line del">-gitea_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-gitea_docker_image: &quot;gitea/gitea:{{ gitea_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-gitea_docker_ports_defaults: []</span><span class="diff-line del">-gitea_docker_ports_custom: []</span><span class="diff-line del">-gitea_docker_ports: &quot;{{ gitea_docker_ports_defaults</span><span class="diff-line del">-                        + gitea_docker_ports_custom }}&quot;</span><span class="diff-line add">+gitea_role_docker_image_pull: true</span><span class="diff-line add">+gitea_role_docker_image_repo: &quot;gitea/gitea&quot;</span><span class="diff-line add">+gitea_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+gitea_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;gitea&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;gitea&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-gitea_docker_envs_default:</span><span class="diff-line add">+gitea_role_docker_envs_default:</span><span class="diff-line context">   USER_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   USER_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   GITEA__database__DB_TYPE: &quot;mysql&quot;</span><span class="diff-line context">   GITEA__database__HOST: &quot;mariadb:3306&quot;</span><span class="diff-line context">   GITEA__database__USER: &quot;root&quot;</span><span class="diff-line del">-  GITEA__database__PASSWD: &quot;password321&quot;</span><span class="diff-line add">+  GITEA__database__PASSWD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">   GITEA__database__NAME: &quot;gitea&quot;</span><span class="diff-line context">   DISABLE_SSH: &quot;true&quot;</span><span class="diff-line del">-  RUN_MODE: &quot;prod&quot;</span><span class="diff-line del">-  ROOT_URL: &quot;{{ gitea_web_url }}/&quot;</span><span class="diff-line del">-gitea_docker_envs_custom: {}</span><span class="diff-line del">-gitea_docker_envs: &quot;{{ gitea_docker_envs_default</span><span class="diff-line del">-                       | combine(gitea_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-gitea_docker_commands_default: []</span><span class="diff-line del">-gitea_docker_commands_custom: []</span><span class="diff-line del">-gitea_docker_commands: &quot;{{ gitea_docker_commands_default</span><span class="diff-line del">-                           + gitea_docker_commands_custom }}&quot;</span><span class="diff-line add">+  ROOT_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;gitea&#x27;) }}/&quot;</span><span class="diff-line add">+gitea_role_docker_envs_custom: {}</span><span class="diff-line add">+gitea_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;gitea&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;gitea&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-gitea_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ gitea_paths_location }}:/data&quot;</span><span class="diff-line add">+gitea_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;gitea&#x27;) }}:/data&quot;</span><span class="diff-line context">   - /etc/timezone:/etc/timezone:ro</span><span class="diff-line context">   - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-gitea_docker_volumes_custom: []</span><span class="diff-line del">-gitea_docker_volumes: &quot;{{ gitea_docker_volumes_default</span><span class="diff-line del">-                          + gitea_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-gitea_docker_devices_default: []</span><span class="diff-line del">-gitea_docker_devices_custom: []</span><span class="diff-line del">-gitea_docker_devices: &quot;{{ gitea_docker_devices_default</span><span class="diff-line del">-                          + gitea_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-gitea_docker_hosts_default: {}</span><span class="diff-line del">-gitea_docker_hosts_custom: {}</span><span class="diff-line del">-gitea_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(gitea_docker_hosts_default)</span><span class="diff-line del">-                        | combine(gitea_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-gitea_docker_labels_default: {}</span><span class="diff-line del">-gitea_docker_labels_custom: {}</span><span class="diff-line del">-gitea_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(gitea_docker_labels_default)</span><span class="diff-line del">-                         | combine(gitea_docker_labels_custom) }}&quot;</span><span class="diff-line add">+gitea_role_docker_volumes_custom: []</span><span class="diff-line add">+gitea_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;gitea&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;gitea&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-gitea_docker_hostname: &quot;{{ gitea_name }}&quot;</span><span class="diff-line add">+gitea_role_docker_hostname: &quot;{{ gitea_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-gitea_docker_networks_alias: &quot;{{ gitea_name }}&quot;</span><span class="diff-line del">-gitea_docker_networks_default: []</span><span class="diff-line del">-gitea_docker_networks_custom: []</span><span class="diff-line del">-gitea_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + gitea_docker_networks_default</span><span class="diff-line del">-                           + gitea_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-gitea_docker_capabilities_default: []</span><span class="diff-line del">-gitea_docker_capabilities_custom: []</span><span class="diff-line del">-gitea_docker_capabilities: &quot;{{ gitea_docker_capabilities_default</span><span class="diff-line del">-                               + gitea_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-gitea_docker_security_opts_default: []</span><span class="diff-line del">-gitea_docker_security_opts_custom: []</span><span class="diff-line del">-gitea_docker_security_opts: &quot;{{ gitea_docker_security_opts_default</span><span class="diff-line del">-                                + gitea_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+gitea_role_docker_networks_alias: &quot;{{ gitea_name }}&quot;</span><span class="diff-line add">+gitea_role_docker_networks_default: []</span><span class="diff-line add">+gitea_role_docker_networks_custom: []</span><span class="diff-line add">+gitea_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;gitea&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;gitea&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-gitea_docker_restart_policy: unless-stopped</span><span class="diff-line add">+gitea_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-gitea_docker_state: started</span><span class="diff-line add">+gitea_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-gitea_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-gitea_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-gitea_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+gitea_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+gitea_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+gitea_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-157">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gitea/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,14 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Check for previous install</span><span class="diff-line add">+  ansible.builtin.stat:</span><span class="diff-line add">+    path: &quot;{{ gitea_role_paths_location }}&quot;</span><span class="diff-line add">+  register: gitea_install_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line hunk">@@ -23,7 +28,7 @@</span><span class="diff-line context">     name: &quot;gitea&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line hunk">@@ -34,3 +39,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: New install</span><span class="diff-line add">+  when: (not gitea_install_stat.stat.exists)</span><span class="diff-line add">+  block:</span><span class="diff-line add">+    - name: Wait 30 seconds before continuing</span><span class="diff-line add">+      ansible.builtin.wait_for:</span><span class="diff-line add">+        timeout: 30</span><span class="diff-line add">+</span><span class="diff-line add">+    - name: Chown directories</span><span class="diff-line add">+      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-158">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/glances_web/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,154 +7,111 @@</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Docker Socket Proxy</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-glances_docker_socket_proxy_envs:</span><span class="diff-line del">-  CONTAINERS: &quot;1&quot;</span><span class="diff-line del">-  IMAGES: &quot;1&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> glances_web_name: glances</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Docker Socket Proxy</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+glances_role_docker_socket_proxy_envs:</span><span class="diff-line add">+  CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+  IMAGES: &quot;1&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-glances_web_paths_folder: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line del">-glances_web_paths_location: &quot;{{ server_appdata_path }}/{{ glances_web_paths_folder }}&quot;</span><span class="diff-line del">-glances_web_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ glances_web_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ glances_web_paths_location }}/config&quot;</span><span class="diff-line del">-glances_web_paths_config_location: &quot;{{ glances_web_paths_location }}/config/glances.conf&quot;</span><span class="diff-line add">+glances_web_role_paths_folder: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line add">+glances_web_role_paths_location: &quot;{{ server_appdata_path }}/{{ glances_web_role_paths_folder }}&quot;</span><span class="diff-line add">+glances_web_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ glances_web_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ glances_web_role_paths_location }}/config&quot;</span><span class="diff-line add">+glances_web_role_paths_config_location: &quot;{{ glances_web_role_paths_location }}/config/glances.conf&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-glances_web_web_subdomain: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line del">-glances_web_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-glances_web_web_port: &quot;61208&quot;</span><span class="diff-line del">-glances_web_web_url: &quot;{{ &#x27;https://&#x27; + (glances_web_web_subdomain + &#x27;.&#x27; + glances_web_web_domain</span><span class="diff-line del">-                      if (glances_web_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else glances_web_web_domain) }}&quot;</span><span class="diff-line add">+glances_web_role_web_subdomain: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line add">+glances_web_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+glances_web_role_web_port: &quot;61208&quot;</span><span class="diff-line add">+glances_web_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;glances_web&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;glances_web&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;glances_web&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;glances_web&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-glances_web_dns_record: &quot;{{ glances_web_web_subdomain }}&quot;</span><span class="diff-line del">-glances_web_dns_zone: &quot;{{ glances_web_web_domain }}&quot;</span><span class="diff-line del">-glances_web_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+glances_web_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line add">+glances_web_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line add">+glances_web_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-glances_web_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-glances_web_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-glances_web_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-glances_web_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-glances_web_traefik_enabled: true</span><span class="diff-line del">-glances_web_traefik_api_enabled: false</span><span class="diff-line del">-glances_web_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+glances_web_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+glances_web_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+glances_web_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+glances_web_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+glances_web_role_traefik_enabled: true</span><span class="diff-line add">+glances_web_role_traefik_api_enabled: false</span><span class="diff-line add">+glances_web_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-glances_web_docker_container: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line add">+glances_web_role_docker_container: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-glances_web_docker_image_pull: true</span><span class="diff-line del">-glances_web_docker_image_tag: &quot;latest-full&quot;</span><span class="diff-line del">-glances_web_docker_image: &quot;nicolargo/glances:{{ glances_web_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-glances_web_docker_ports_defaults: []</span><span class="diff-line del">-glances_web_docker_ports_custom: []</span><span class="diff-line del">-glances_web_docker_ports: &quot;{{ glances_web_docker_ports_defaults</span><span class="diff-line del">-                              + glances_web_docker_ports_custom }}&quot;</span><span class="diff-line add">+glances_web_role_docker_image_pull: true</span><span class="diff-line add">+glances_web_role_docker_image_repo: &quot;nicolargo/glances&quot;</span><span class="diff-line add">+glances_web_role_docker_image_tag: &quot;latest-full&quot;</span><span class="diff-line add">+glances_web_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;glances_web&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-glances_web_docker_envs_default:</span><span class="diff-line add">+glances_web_role_docker_envs_default:</span><span class="diff-line context">   UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   GLANCES_OPT: &quot;-w --bind 172.19.0.1&quot;</span><span class="diff-line context">   DOCKER_HOST: &quot;tcp://{{ glances_web_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line del">-glances_web_docker_envs_custom: {}</span><span class="diff-line del">-glances_web_docker_envs: &quot;{{ glances_web_docker_envs_default</span><span class="diff-line del">-                             | combine(glances_web_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-glances_web_docker_commands_default: []</span><span class="diff-line del">-glances_web_docker_commands_custom: []</span><span class="diff-line del">-glances_web_docker_commands: &quot;{{ glances_web_docker_commands_default</span><span class="diff-line del">-                                 + glances_web_docker_commands_custom }}&quot;</span><span class="diff-line add">+glances_web_role_docker_envs_custom: {}</span><span class="diff-line add">+glances_web_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;glances_web&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;glances_web&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-glances_web_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ glances_web_paths_config_location }}:/glances/conf/glances.conf:rw&quot;</span><span class="diff-line del">-glances_web_docker_volumes_custom: []</span><span class="diff-line del">-glances_web_docker_volumes: &quot;{{ glances_web_docker_volumes_default</span><span class="diff-line del">-                                + glances_web_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-glances_web_docker_devices_default: []</span><span class="diff-line del">-glances_web_docker_devices_custom: []</span><span class="diff-line del">-glances_web_docker_devices: &quot;{{ glances_web_docker_devices_default</span><span class="diff-line del">-                                + glances_web_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-glances_web_docker_hosts_default: {}</span><span class="diff-line del">-glances_web_docker_hosts_custom: {}</span><span class="diff-line del">-glances_web_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(glances_web_docker_hosts_default)</span><span class="diff-line del">-                              | combine(glances_web_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-glances_web_docker_labels_default: {}</span><span class="diff-line del">-glances_web_docker_labels_custom: {}</span><span class="diff-line del">-glances_web_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(glances_web_docker_labels_default)</span><span class="diff-line del">-                               | combine(glances_web_docker_labels_custom) }}&quot;</span><span class="diff-line add">+glances_web_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) }}:/glances/conf/glances.conf&quot;</span><span class="diff-line add">+glances_web_role_docker_volumes_custom: []</span><span class="diff-line add">+glances_web_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;glances_web&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-glances_web_docker_hostname: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line add">+glances_web_role_docker_hostname: &quot;{{ glances_web_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-glances_web_docker_network_mode: &quot;host&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-glances_web_docker_capabilities_default: []</span><span class="diff-line del">-glances_web_docker_capabilities_custom: []</span><span class="diff-line del">-glances_web_docker_capabilities: &quot;{{ glances_web_docker_capabilities_default</span><span class="diff-line del">-                                     + glances_web_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-glances_web_docker_security_opts_default: []</span><span class="diff-line del">-glances_web_docker_security_opts_custom: []</span><span class="diff-line del">-glances_web_docker_security_opts: &quot;{{ glances_web_docker_security_opts_default</span><span class="diff-line del">-                                      + glances_web_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+glances_web_role_docker_network_mode: &quot;host&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-glances_web_docker_restart_policy: unless-stopped</span><span class="diff-line add">+glances_web_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-glances_web_docker_state: started</span><span class="diff-line add">+glances_web_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Force Kill</span><span class="diff-line del">-glances_web_docker_force_kill: yes</span><span class="diff-line add">+glances_web_role_docker_force_kill: true</span><span class="diff-line context"> </span><span class="diff-line context"> # PID Mode</span><span class="diff-line del">-glances_web_docker_pid_mode: host</span><span class="diff-line add">+glances_web_role_docker_pid_mode: host</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-glances_web_depends_on: &quot;{{ glances_web_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-glances_web_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-glances_web_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+glances_web_role_depends_on: &quot;{{ glances_web_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+glances_web_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+glances_web_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-159">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/glances_web/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,14 +11,14 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ glances_web_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs_custom: &quot;{{ glances_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ glances_role_docker_socket_proxy_envs }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-160">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/glances_web/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -5,18 +5,18 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Settings | Check if `{{ glances_web_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ glances_web_paths_config_location }}&quot;</span><span class="diff-line del">-  register: glances_web_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line add">+  register: glances_web_role_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ glances_web_paths_config_location | basename }}` tasks</span><span class="diff-line del">-  when: not glances_web_config.stat.exists</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) | basename }}` tasks</span><span class="diff-line add">+  when: not glances_web_role_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Settings | Import default `{{ glances_web_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: glances.conf</span><span class="diff-line del">-        dest: &quot;{{ glances_web_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;glances_web&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-161">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/goaccess/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-goaccess_paths_folder: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line del">-goaccess_paths_location: &quot;{{ server_appdata_path }}/{{ goaccess_paths_folder }}&quot;</span><span class="diff-line del">-goaccess_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ goaccess_paths_location }}&quot;</span><span class="diff-line add">+goaccess_role_paths_folder: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line add">+goaccess_role_paths_location: &quot;{{ server_appdata_path }}/{{ goaccess_role_paths_folder }}&quot;</span><span class="diff-line add">+goaccess_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ goaccess_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-goaccess_web_subdomain: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line del">-goaccess_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-goaccess_web_port: &quot;7889&quot;</span><span class="diff-line del">-goaccess_web_url: &quot;{{ &#x27;https://&#x27; + (goaccess_web_subdomain + &#x27;.&#x27; + goaccess_web_domain</span><span class="diff-line del">-                   if (goaccess_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else goaccess_web_domain) }}&quot;</span><span class="diff-line add">+goaccess_role_web_subdomain: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line add">+goaccess_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+goaccess_role_web_port: &quot;7889&quot;</span><span class="diff-line add">+goaccess_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;goaccess&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;goaccess&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;goaccess&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;goaccess&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-goaccess_dns_record: &quot;{{ goaccess_web_subdomain }}&quot;</span><span class="diff-line del">-goaccess_dns_zone: &quot;{{ goaccess_web_domain }}&quot;</span><span class="diff-line del">-goaccess_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+goaccess_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;goaccess&#x27;) }}&quot;</span><span class="diff-line add">+goaccess_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;goaccess&#x27;) }}&quot;</span><span class="diff-line add">+goaccess_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-goaccess_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-goaccess_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-goaccess_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-goaccess_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-goaccess_traefik_enabled: true</span><span class="diff-line del">-goaccess_traefik_api_enabled: false</span><span class="diff-line del">-goaccess_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+goaccess_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+goaccess_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+goaccess_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+goaccess_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+goaccess_role_traefik_enabled: true</span><span class="diff-line add">+goaccess_role_traefik_api_enabled: false</span><span class="diff-line add">+goaccess_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-goaccess_docker_container: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line add">+goaccess_role_docker_container: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-goaccess_docker_image_pull: true</span><span class="diff-line del">-goaccess_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-goaccess_docker_image: &quot;gregyankovoy/goaccess:{{ goaccess_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-goaccess_docker_ports_defaults: []</span><span class="diff-line del">-goaccess_docker_ports_custom: []</span><span class="diff-line del">-goaccess_docker_ports: &quot;{{ goaccess_docker_ports_defaults</span><span class="diff-line del">-                           + goaccess_docker_ports_custom }}&quot;</span><span class="diff-line add">+goaccess_role_docker_image_pull: true</span><span class="diff-line add">+goaccess_role_docker_image_repo: &quot;gregyankovoy/goaccess&quot;</span><span class="diff-line add">+goaccess_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+goaccess_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;goaccess&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;goaccess&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-goaccess_docker_envs_default:</span><span class="diff-line add">+goaccess_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-goaccess_docker_envs_custom: {}</span><span class="diff-line del">-goaccess_docker_envs: &quot;{{ goaccess_docker_envs_default</span><span class="diff-line del">-                          | combine(goaccess_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-goaccess_docker_commands_default: []</span><span class="diff-line del">-goaccess_docker_commands_custom: []</span><span class="diff-line del">-goaccess_docker_commands: &quot;{{ goaccess_docker_commands_default</span><span class="diff-line del">-                              + goaccess_docker_commands_custom }}&quot;</span><span class="diff-line add">+goaccess_role_docker_envs_custom: {}</span><span class="diff-line add">+goaccess_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;goaccess&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;goaccess&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-goaccess_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ goaccess_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;/opt/traefik:/opt/log&quot;</span><span class="diff-line del">-goaccess_docker_volumes_custom: []</span><span class="diff-line del">-goaccess_docker_volumes: &quot;{{ goaccess_docker_volumes_default</span><span class="diff-line del">-                             + goaccess_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-goaccess_docker_devices_default: []</span><span class="diff-line del">-goaccess_docker_devices_custom: []</span><span class="diff-line del">-goaccess_docker_devices: &quot;{{ goaccess_docker_devices_default</span><span class="diff-line del">-                             + goaccess_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-goaccess_docker_hosts_default: {}</span><span class="diff-line del">-goaccess_docker_hosts_custom: {}</span><span class="diff-line del">-goaccess_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(goaccess_docker_hosts_default)</span><span class="diff-line del">-                           | combine(goaccess_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-goaccess_docker_labels_default: {}</span><span class="diff-line del">-goaccess_docker_labels_custom: {}</span><span class="diff-line del">-goaccess_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(goaccess_docker_labels_default)</span><span class="diff-line del">-                            | combine(goaccess_docker_labels_custom) }}&quot;</span><span class="diff-line add">+goaccess_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;goaccess&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;traefik&#x27;) }}:/opt/log&quot;</span><span class="diff-line add">+goaccess_role_docker_volumes_custom: []</span><span class="diff-line add">+goaccess_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;goaccess&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;goaccess&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-goaccess_docker_hostname: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line add">+goaccess_role_docker_hostname: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-goaccess_docker_networks_alias: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line del">-goaccess_docker_networks_default: []</span><span class="diff-line del">-goaccess_docker_networks_custom: []</span><span class="diff-line del">-goaccess_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + goaccess_docker_networks_default</span><span class="diff-line del">-                              + goaccess_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-goaccess_docker_capabilities_default: []</span><span class="diff-line del">-goaccess_docker_capabilities_custom: []</span><span class="diff-line del">-goaccess_docker_capabilities: &quot;{{ goaccess_docker_capabilities_default</span><span class="diff-line del">-                                  + goaccess_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-goaccess_docker_security_opts_default: []</span><span class="diff-line del">-goaccess_docker_security_opts_custom: []</span><span class="diff-line del">-goaccess_docker_security_opts: &quot;{{ goaccess_docker_security_opts_default</span><span class="diff-line del">-                                   + goaccess_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+goaccess_role_docker_networks_alias: &quot;{{ goaccess_name }}&quot;</span><span class="diff-line add">+goaccess_role_docker_networks_default: []</span><span class="diff-line add">+goaccess_role_docker_networks_custom: []</span><span class="diff-line add">+goaccess_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;goaccess&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;goaccess&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-goaccess_docker_restart_policy: unless-stopped</span><span class="diff-line add">+goaccess_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-goaccess_docker_state: started</span><span class="diff-line add">+goaccess_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Force Kill</span><span class="diff-line del">-goaccess_docker_force_kill: true</span><span class="diff-line add">+goaccess_role_docker_force_kill: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-162">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/goaccess/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-163">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gotenberg/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,83 +18,34 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-gotenberg_docker_container: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_container: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-gotenberg_docker_image_pull: true</span><span class="diff-line del">-gotenberg_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-gotenberg_docker_image: &quot;gotenberg/gotenberg:{{ gotenberg_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-gotenberg_docker_ports_defaults: []</span><span class="diff-line del">-gotenberg_docker_ports_custom: []</span><span class="diff-line del">-gotenberg_docker_ports: &quot;{{ gotenberg_docker_ports_defaults</span><span class="diff-line del">-                            + gotenberg_docker_ports_custom }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_image_pull: true</span><span class="diff-line add">+gotenberg_role_docker_image_repo: &quot;gotenberg/gotenberg&quot;</span><span class="diff-line add">+gotenberg_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+gotenberg_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;gotenberg&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;gotenberg&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-gotenberg_docker_envs_default:</span><span class="diff-line add">+gotenberg_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-gotenberg_docker_envs_custom: {}</span><span class="diff-line del">-gotenberg_docker_envs: &quot;{{ gotenberg_docker_envs_default</span><span class="diff-line del">-                           | combine(gotenberg_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-gotenberg_docker_commands_default: []</span><span class="diff-line del">-gotenberg_docker_commands_custom: []</span><span class="diff-line del">-gotenberg_docker_commands: &quot;{{ gotenberg_docker_commands_default</span><span class="diff-line del">-                               + gotenberg_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-gotenberg_docker_volumes_default: []</span><span class="diff-line del">-gotenberg_docker_volumes_custom: []</span><span class="diff-line del">-gotenberg_docker_volumes: &quot;{{ gotenberg_docker_volumes_default</span><span class="diff-line del">-                              + gotenberg_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-gotenberg_docker_devices_default: []</span><span class="diff-line del">-gotenberg_docker_devices_custom: []</span><span class="diff-line del">-gotenberg_docker_devices: &quot;{{ gotenberg_docker_devices_default</span><span class="diff-line del">-                              + gotenberg_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-gotenberg_docker_hosts_default: {}</span><span class="diff-line del">-gotenberg_docker_hosts_custom: {}</span><span class="diff-line del">-gotenberg_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(gotenberg_docker_hosts_default)</span><span class="diff-line del">-                            | combine(gotenberg_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-gotenberg_docker_labels_default: {}</span><span class="diff-line del">-gotenberg_docker_labels_custom: {}</span><span class="diff-line del">-gotenberg_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(gotenberg_docker_labels_default)</span><span class="diff-line del">-                             | combine(gotenberg_docker_labels_custom) }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_envs_custom: {}</span><span class="diff-line add">+gotenberg_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;gotenberg&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;gotenberg&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-gotenberg_docker_hostname: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_hostname: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-gotenberg_docker_networks_alias: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line del">-gotenberg_docker_networks_default: []</span><span class="diff-line del">-gotenberg_docker_networks_custom: []</span><span class="diff-line del">-gotenberg_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + gotenberg_docker_networks_default</span><span class="diff-line del">-                               + gotenberg_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-gotenberg_docker_capabilities_default: []</span><span class="diff-line del">-gotenberg_docker_capabilities_custom: []</span><span class="diff-line del">-gotenberg_docker_capabilities: &quot;{{ gotenberg_docker_capabilities_default</span><span class="diff-line del">-                                   + gotenberg_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-gotenberg_docker_security_opts_default: []</span><span class="diff-line del">-gotenberg_docker_security_opts_custom: []</span><span class="diff-line del">-gotenberg_docker_security_opts: &quot;{{ gotenberg_docker_security_opts_default</span><span class="diff-line del">-                                    + gotenberg_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_networks_alias: &quot;{{ gotenberg_name }}&quot;</span><span class="diff-line add">+gotenberg_role_docker_networks_default: []</span><span class="diff-line add">+gotenberg_role_docker_networks_custom: []</span><span class="diff-line add">+gotenberg_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;gotenberg&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;gotenberg&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-gotenberg_docker_restart_policy: always</span><span class="diff-line add">+gotenberg_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-gotenberg_docker_state: started</span><span class="diff-line add">+gotenberg_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-164">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gotify/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gotify_paths_folder: &quot;{{ gotify_name }}&quot;</span><span class="diff-line del">-gotify_paths_location: &quot;{{ server_appdata_path }}/{{ gotify_paths_folder }}&quot;</span><span class="diff-line del">-gotify_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ gotify_paths_location }}&quot;</span><span class="diff-line add">+gotify_role_paths_folder: &quot;{{ gotify_name }}&quot;</span><span class="diff-line add">+gotify_role_paths_location: &quot;{{ server_appdata_path }}/{{ gotify_role_paths_folder }}&quot;</span><span class="diff-line add">+gotify_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ gotify_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gotify_web_subdomain: &quot;{{ gotify_name }}&quot;</span><span class="diff-line del">-gotify_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-gotify_web_port: &quot;80&quot;</span><span class="diff-line del">-gotify_web_url: &quot;{{ &#x27;https://&#x27; + (gotify_web_subdomain + &#x27;.&#x27; + gotify_web_domain</span><span class="diff-line del">-                 if (gotify_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else gotify_web_domain) }}&quot;</span><span class="diff-line add">+gotify_role_web_subdomain: &quot;{{ gotify_name }}&quot;</span><span class="diff-line add">+gotify_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+gotify_role_web_port: &quot;80&quot;</span><span class="diff-line add">+gotify_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gotify&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gotify&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gotify&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gotify&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gotify_dns_record: &quot;{{ gotify_web_subdomain }}&quot;</span><span class="diff-line del">-gotify_dns_zone: &quot;{{ gotify_web_domain }}&quot;</span><span class="diff-line del">-gotify_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+gotify_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;gotify&#x27;) }}&quot;</span><span class="diff-line add">+gotify_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;gotify&#x27;) }}&quot;</span><span class="diff-line add">+gotify_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-gotify_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-gotify_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-gotify_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-gotify_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-gotify_traefik_enabled: true</span><span class="diff-line del">-gotify_traefik_api_enabled: false</span><span class="diff-line del">-gotify_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+gotify_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+gotify_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+gotify_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+gotify_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+gotify_role_traefik_enabled: true</span><span class="diff-line add">+gotify_role_traefik_api_enabled: false</span><span class="diff-line add">+gotify_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-gotify_docker_container: &quot;{{ gotify_name }}&quot;</span><span class="diff-line add">+gotify_role_docker_container: &quot;{{ gotify_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-gotify_docker_image_pull: true</span><span class="diff-line del">-gotify_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-gotify_docker_image: &quot;gotify/server:{{ gotify_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-gotify_docker_ports_defaults: []</span><span class="diff-line del">-gotify_docker_ports_custom: []</span><span class="diff-line del">-gotify_docker_ports: &quot;{{ gotify_docker_ports_defaults</span><span class="diff-line del">-                         + gotify_docker_ports_custom }}&quot;</span><span class="diff-line add">+gotify_role_docker_image_pull: true</span><span class="diff-line add">+gotify_role_docker_image_repo: &quot;gotify/server&quot;</span><span class="diff-line add">+gotify_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+gotify_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;gotify&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;gotify&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-gotify_docker_envs_default:</span><span class="diff-line add">+gotify_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   GOTIFY_DEFAULTUSER_NAME: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   GOTIFY_DEFAULTUSER_PASS: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-gotify_docker_envs_custom: {}</span><span class="diff-line del">-gotify_docker_envs: &quot;{{ gotify_docker_envs_default</span><span class="diff-line del">-                        | combine(gotify_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-gotify_docker_commands_default: []</span><span class="diff-line del">-gotify_docker_commands_custom: []</span><span class="diff-line del">-gotify_docker_commands: &quot;{{ gotify_docker_commands_default</span><span class="diff-line del">-                            + gotify_docker_commands_custom }}&quot;</span><span class="diff-line add">+gotify_role_docker_envs_custom: {}</span><span class="diff-line add">+gotify_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;gotify&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;gotify&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-gotify_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ gotify_paths_location }}:/app/data&quot;</span><span class="diff-line del">-gotify_docker_volumes_custom: []</span><span class="diff-line del">-gotify_docker_volumes: &quot;{{ gotify_docker_volumes_default</span><span class="diff-line del">-                           + gotify_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-gotify_docker_devices_default: []</span><span class="diff-line del">-gotify_docker_devices_custom: []</span><span class="diff-line del">-gotify_docker_devices: &quot;{{ gotify_docker_devices_default</span><span class="diff-line del">-                           + gotify_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-gotify_docker_hosts_default: {}</span><span class="diff-line del">-gotify_docker_hosts_custom: {}</span><span class="diff-line del">-gotify_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(gotify_docker_hosts_default)</span><span class="diff-line del">-                         | combine(gotify_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-gotify_docker_labels_default: {}</span><span class="diff-line del">-gotify_docker_labels_custom: {}</span><span class="diff-line del">-gotify_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(gotify_docker_labels_default)</span><span class="diff-line del">-                          | combine(gotify_docker_labels_custom) }}&quot;</span><span class="diff-line add">+gotify_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;gotify&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+gotify_role_docker_volumes_custom: []</span><span class="diff-line add">+gotify_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;gotify&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;gotify&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-gotify_docker_hostname: &quot;{{ gotify_name }}&quot;</span><span class="diff-line add">+gotify_role_docker_hostname: &quot;{{ gotify_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-gotify_docker_networks_alias: &quot;{{ gotify_name }}&quot;</span><span class="diff-line del">-gotify_docker_networks_default: []</span><span class="diff-line del">-gotify_docker_networks_custom: []</span><span class="diff-line del">-gotify_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + gotify_docker_networks_default</span><span class="diff-line del">-                            + gotify_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-gotify_docker_capabilities_default: []</span><span class="diff-line del">-gotify_docker_capabilities_custom: []</span><span class="diff-line del">-gotify_docker_capabilities: &quot;{{ gotify_docker_capabilities_default</span><span class="diff-line del">-                                + gotify_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-gotify_docker_security_opts_default: []</span><span class="diff-line del">-gotify_docker_security_opts_custom: []</span><span class="diff-line del">-gotify_docker_security_opts: &quot;{{ gotify_docker_security_opts_default</span><span class="diff-line del">-                                 + gotify_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+gotify_role_docker_networks_alias: &quot;{{ gotify_name }}&quot;</span><span class="diff-line add">+gotify_role_docker_networks_default: []</span><span class="diff-line add">+gotify_role_docker_networks_custom: []</span><span class="diff-line add">+gotify_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;gotify&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;gotify&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-gotify_docker_restart_policy: unless-stopped</span><span class="diff-line add">+gotify_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-gotify_docker_state: started</span><span class="diff-line add">+gotify_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-165">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/gotify/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,9 +9,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-166">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/grocy/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-grocy_paths_folder: &quot;{{ grocy_name }}&quot;</span><span class="diff-line del">-grocy_paths_location: &quot;{{ server_appdata_path }}/{{ grocy_paths_folder }}&quot;</span><span class="diff-line del">-grocy_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ grocy_paths_location }}&quot;</span><span class="diff-line add">+grocy_role_paths_folder: &quot;{{ grocy_name }}&quot;</span><span class="diff-line add">+grocy_role_paths_location: &quot;{{ server_appdata_path }}/{{ grocy_role_paths_folder }}&quot;</span><span class="diff-line add">+grocy_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ grocy_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-grocy_web_subdomain: &quot;{{ grocy_name }}&quot;</span><span class="diff-line del">-grocy_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-grocy_web_port: &quot;80&quot;</span><span class="diff-line del">-grocy_web_url: &quot;{{ &#x27;https://&#x27; + (grocy_web_subdomain + &#x27;.&#x27; + grocy_web_domain</span><span class="diff-line del">-                if (grocy_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else grocy_web_domain) }}&quot;</span><span class="diff-line add">+grocy_role_web_subdomain: &quot;{{ grocy_name }}&quot;</span><span class="diff-line add">+grocy_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+grocy_role_web_port: &quot;80&quot;</span><span class="diff-line add">+grocy_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;grocy&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;grocy&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;grocy&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;grocy&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-grocy_dns_record: &quot;{{ grocy_web_subdomain }}&quot;</span><span class="diff-line del">-grocy_dns_zone: &quot;{{ grocy_web_domain }}&quot;</span><span class="diff-line del">-grocy_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+grocy_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;grocy&#x27;) }}&quot;</span><span class="diff-line add">+grocy_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;grocy&#x27;) }}&quot;</span><span class="diff-line add">+grocy_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-grocy_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-grocy_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-grocy_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-grocy_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-grocy_traefik_enabled: true</span><span class="diff-line add">+grocy_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+grocy_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+grocy_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+grocy_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+grocy_role_traefik_enabled: true</span><span class="diff-line add">+grocy_role_traefik_api_enabled: false</span><span class="diff-line add">+grocy_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-grocy_docker_container: &quot;{{ grocy_name }}&quot;</span><span class="diff-line add">+grocy_role_docker_container: &quot;{{ grocy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-grocy_docker_image_pull: true</span><span class="diff-line del">-grocy_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-grocy_docker_image: &quot;lscr.io/linuxserver/grocy:{{ grocy_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-grocy_docker_ports_defaults: []</span><span class="diff-line del">-grocy_docker_ports_custom: []</span><span class="diff-line del">-grocy_docker_ports: &quot;{{ grocy_docker_ports_defaults</span><span class="diff-line del">-                        + grocy_docker_ports_custom }}&quot;</span><span class="diff-line add">+grocy_role_docker_image_pull: true</span><span class="diff-line add">+grocy_role_docker_image_repo: &quot;lscr.io/linuxserver/grocy&quot;</span><span class="diff-line add">+grocy_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+grocy_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;grocy&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;grocy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-grocy_docker_envs_default:</span><span class="diff-line add">+grocy_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-grocy_docker_envs_custom: {}</span><span class="diff-line del">-grocy_docker_envs: &quot;{{ grocy_docker_envs_default</span><span class="diff-line del">-                       | combine(grocy_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-grocy_docker_commands_default: []</span><span class="diff-line del">-grocy_docker_commands_custom: []</span><span class="diff-line del">-grocy_docker_commands: &quot;{{ grocy_docker_commands_default</span><span class="diff-line del">-                           + grocy_docker_commands_custom }}&quot;</span><span class="diff-line add">+grocy_role_docker_envs_custom: {}</span><span class="diff-line add">+grocy_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;grocy&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;grocy&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-grocy_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ grocy_paths_location }}:/config&quot;</span><span class="diff-line del">-grocy_docker_volumes_custom: []</span><span class="diff-line del">-grocy_docker_volumes: &quot;{{ grocy_docker_volumes_default</span><span class="diff-line del">-                          + grocy_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-grocy_docker_devices_default: []</span><span class="diff-line del">-grocy_docker_devices_custom: []</span><span class="diff-line del">-grocy_docker_devices: &quot;{{ grocy_docker_devices_default</span><span class="diff-line del">-                          + grocy_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-grocy_docker_hosts_default: {}</span><span class="diff-line del">-grocy_docker_hosts_custom: {}</span><span class="diff-line del">-grocy_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(grocy_docker_hosts_default)</span><span class="diff-line del">-                        | combine(grocy_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-grocy_docker_labels_default: {}</span><span class="diff-line del">-grocy_docker_labels_custom: {}</span><span class="diff-line del">-grocy_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(grocy_docker_labels_default)</span><span class="diff-line del">-                         | combine(grocy_docker_labels_custom) }}&quot;</span><span class="diff-line add">+grocy_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;grocy&#x27;) }}:/config&quot;</span><span class="diff-line add">+grocy_role_docker_volumes_custom: []</span><span class="diff-line add">+grocy_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;grocy&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;grocy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-grocy_docker_hostname: &quot;{{ grocy_name }}&quot;</span><span class="diff-line add">+grocy_role_docker_hostname: &quot;{{ grocy_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-grocy_docker_networks_alias: &quot;{{ grocy_name }}&quot;</span><span class="diff-line del">-grocy_docker_networks_default: []</span><span class="diff-line del">-grocy_docker_networks_custom: []</span><span class="diff-line del">-grocy_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + grocy_docker_networks_default</span><span class="diff-line del">-                           + grocy_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-grocy_docker_capabilities_default: []</span><span class="diff-line del">-grocy_docker_capabilities_custom: []</span><span class="diff-line del">-grocy_docker_capabilities: &quot;{{ grocy_docker_capabilities_default</span><span class="diff-line del">-                               + grocy_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-grocy_docker_security_opts_default: []</span><span class="diff-line del">-grocy_docker_security_opts_custom: []</span><span class="diff-line del">-grocy_docker_security_opts: &quot;{{ grocy_docker_security_opts_default</span><span class="diff-line del">-                                + grocy_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+grocy_role_docker_networks_alias: &quot;{{ grocy_name }}&quot;</span><span class="diff-line add">+grocy_role_docker_networks_default: []</span><span class="diff-line add">+grocy_role_docker_networks_custom: []</span><span class="diff-line add">+grocy_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;grocy&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;grocy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-grocy_docker_restart_policy: unless-stopped</span><span class="diff-line add">+grocy_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-grocy_docker_state: started</span><span class="diff-line add">+grocy_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-167">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/grocy/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-168">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/guacamole/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,158 +8,115 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Settings</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-guacamole_totp_enable: false</span><span class="diff-line del">-guacamole_ldap_enable: false</span><span class="diff-line del">-guacamole_radius_enable: false</span><span class="diff-line del">-guacamole_duo_enable: false</span><span class="diff-line del">-guacamole_cas_enable: false</span><span class="diff-line del">-guacamole_openid_enable: false</span><span class="diff-line del">-guacamole_saml_enable: false</span><span class="diff-line del">-guacamole_header_enable: false</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> guacamole_name: guacamole</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+guacamole_role_totp_enable: false</span><span class="diff-line add">+guacamole_role_ldap_enable: false</span><span class="diff-line add">+guacamole_role_radius_enable: false</span><span class="diff-line add">+guacamole_role_duo_enable: false</span><span class="diff-line add">+guacamole_role_cas_enable: false</span><span class="diff-line add">+guacamole_role_openid_enable: false</span><span class="diff-line add">+guacamole_role_saml_enable: false</span><span class="diff-line add">+guacamole_role_header_enable: false</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-guacamole_paths_folder: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line del">-guacamole_paths_location: &quot;{{ server_appdata_path }}/{{ guacamole_paths_folder }}&quot;</span><span class="diff-line del">-guacamole_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ guacamole_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ guacamole_paths_location }}/config&quot;</span><span class="diff-line add">+guacamole_role_paths_folder: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line add">+guacamole_role_paths_location: &quot;{{ server_appdata_path }}/{{ guacamole_role_paths_folder }}&quot;</span><span class="diff-line add">+guacamole_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ guacamole_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ guacamole_role_paths_location }}/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-guacamole_web_subdomain: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line del">-guacamole_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-guacamole_web_port: &quot;8080&quot;</span><span class="diff-line del">-guacamole_web_url: &quot;{{ &#x27;https://&#x27; + (guacamole_web_subdomain + &#x27;.&#x27; + guacamole_web_domain</span><span class="diff-line del">-                    if (guacamole_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else guacamole_web_domain) }}&quot;</span><span class="diff-line add">+guacamole_role_web_subdomain: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line add">+guacamole_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+guacamole_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+guacamole_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;guacamole&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;guacamole&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;guacamole&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;guacamole&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-guacamole_dns_record: &quot;{{ guacamole_web_subdomain }}&quot;</span><span class="diff-line del">-guacamole_dns_zone: &quot;{{ guacamole_web_domain }}&quot;</span><span class="diff-line del">-guacamole_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+guacamole_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line add">+guacamole_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line add">+guacamole_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-guacamole_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-guacamole_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-guacamole_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-guacamole_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-guacamole_traefik_enabled: true</span><span class="diff-line del">-guacamole_traefik_api_enabled: false</span><span class="diff-line del">-guacamole_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+guacamole_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+guacamole_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+guacamole_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+guacamole_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+guacamole_role_traefik_enabled: true</span><span class="diff-line add">+guacamole_role_traefik_api_enabled: false</span><span class="diff-line add">+guacamole_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-guacamole_docker_container: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line add">+guacamole_role_docker_container: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-guacamole_docker_image_pull: true</span><span class="diff-line del">-guacamole_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-guacamole_docker_image: &quot;jasonbean/guacamole:{{ guacamole_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-guacamole_docker_ports_defaults: []</span><span class="diff-line del">-guacamole_docker_ports_custom: []</span><span class="diff-line del">-guacamole_docker_ports: &quot;{{ guacamole_docker_ports_defaults</span><span class="diff-line del">-                            + guacamole_docker_ports_custom }}&quot;</span><span class="diff-line add">+guacamole_role_docker_image_pull: true</span><span class="diff-line add">+guacamole_role_docker_image_repo: &quot;jasonbean/guacamole&quot;</span><span class="diff-line add">+guacamole_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+guacamole_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;guacamole&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-guacamole_docker_envs_default:</span><span class="diff-line add">+guacamole_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   OPT_MYSQL: &quot;Y&quot;</span><span class="diff-line del">-  OPT_TOTP: &quot;{{ &#x27;Y&#x27; if guacamole_totp_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_LDAP: &quot;{{ &#x27;Y&#x27; if guacamole_ldap_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_RADIUS: &quot;{{ &#x27;Y&#x27; if guacamole_radius_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_DUO: &quot;{{ &#x27;Y&#x27; if guacamole_duo_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_CAS: &quot;{{ &#x27;Y&#x27; if guacamole_cas_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_OPENID: &quot;{{ &#x27;Y&#x27; if guacamole_openid_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_SAML: &quot;{{ &#x27;Y&#x27; if guacamole_saml_enable else omit }}&quot;</span><span class="diff-line del">-  OPT_HEADER: &quot;{{ &#x27;Y&#x27; if guacamole_header_enable else omit }}&quot;</span><span class="diff-line del">-guacamole_docker_envs_custom: {}</span><span class="diff-line del">-guacamole_docker_envs: &quot;{{ guacamole_docker_envs_default</span><span class="diff-line del">-                           | combine(guacamole_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-guacamole_docker_commands_default: []</span><span class="diff-line del">-guacamole_docker_commands_custom: []</span><span class="diff-line del">-guacamole_docker_commands: &quot;{{ guacamole_docker_commands_default</span><span class="diff-line del">-                               + guacamole_docker_commands_custom }}&quot;</span><span class="diff-line add">+  OPT_TOTP: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_totp_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_LDAP: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_ldap_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_RADIUS: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_radius_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_DUO: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_duo_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_CAS: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_cas_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_OPENID: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_openid_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_SAML: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_saml_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+  OPT_HEADER: &quot;{{ &#x27;Y&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_header_enable&#x27;, role=&#x27;guacamole&#x27;) else omit }}&quot;</span><span class="diff-line add">+guacamole_role_docker_envs_custom: {}</span><span class="diff-line add">+guacamole_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;guacamole&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;guacamole&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-guacamole_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ guacamole_paths_location }}/config:/config&quot;</span><span class="diff-line del">-guacamole_docker_volumes_custom: []</span><span class="diff-line del">-guacamole_docker_volumes: &quot;{{ guacamole_docker_volumes_default</span><span class="diff-line del">-                              + guacamole_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-guacamole_docker_devices_default: []</span><span class="diff-line del">-guacamole_docker_devices_custom: []</span><span class="diff-line del">-guacamole_docker_devices: &quot;{{ guacamole_docker_devices_default</span><span class="diff-line del">-                              + guacamole_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-guacamole_docker_hosts_default: {}</span><span class="diff-line del">-guacamole_docker_hosts_custom: {}</span><span class="diff-line del">-guacamole_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(guacamole_docker_hosts_default)</span><span class="diff-line del">-                            | combine(guacamole_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-guacamole_docker_labels_default: {}</span><span class="diff-line del">-guacamole_docker_labels_custom: {}</span><span class="diff-line del">-guacamole_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(guacamole_docker_labels_default)</span><span class="diff-line del">-                             | combine(guacamole_docker_labels_custom) }}&quot;</span><span class="diff-line add">+guacamole_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;guacamole&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+guacamole_role_docker_volumes_custom: []</span><span class="diff-line add">+guacamole_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;guacamole&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-guacamole_docker_hostname: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line add">+guacamole_role_docker_hostname: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-guacamole_docker_networks_alias: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line del">-guacamole_docker_networks_default: []</span><span class="diff-line del">-guacamole_docker_networks_custom: []</span><span class="diff-line del">-guacamole_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + guacamole_docker_networks_default</span><span class="diff-line del">-                               + guacamole_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-guacamole_docker_capabilities_default: []</span><span class="diff-line del">-guacamole_docker_capabilities_custom: []</span><span class="diff-line del">-guacamole_docker_capabilities: &quot;{{ guacamole_docker_capabilities_default</span><span class="diff-line del">-                                   + guacamole_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-guacamole_docker_security_opts_default: []</span><span class="diff-line del">-guacamole_docker_security_opts_custom: []</span><span class="diff-line del">-guacamole_docker_security_opts: &quot;{{ guacamole_docker_security_opts_default</span><span class="diff-line del">-                                    + guacamole_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+guacamole_role_docker_networks_alias: &quot;{{ guacamole_name }}&quot;</span><span class="diff-line add">+guacamole_role_docker_networks_default: []</span><span class="diff-line add">+guacamole_role_docker_networks_custom: []</span><span class="diff-line add">+guacamole_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;guacamole&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-guacamole_docker_restart_policy: unless-stopped</span><span class="diff-line add">+guacamole_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-guacamole_docker_state: started</span><span class="diff-line add">+guacamole_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-169">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/guacamole/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -29,7 +29,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Ensure guacamole config folder has the correct permissions</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ guacamole_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;guacamole&#x27;) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-170">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/handbrake/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,138 +14,101 @@</span><span class="diff-line context"> handbrake_name: handbrake</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+handbrake_role_handbrake_pass: &quot;saltbox&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-handbrake_paths_folder: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line del">-handbrake_paths_location: &quot;{{ server_appdata_path }}/{{ handbrake_paths_folder }}&quot;</span><span class="diff-line del">-handbrake_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ handbrake_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/handbrake/watch&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/handbrake/output&quot;</span><span class="diff-line add">+handbrake_role_paths_folder: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line add">+handbrake_role_paths_location: &quot;{{ server_appdata_path }}/{{ handbrake_role_paths_folder }}&quot;</span><span class="diff-line add">+handbrake_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ handbrake_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/handbrake/watch&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/downloads/handbrake/output&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-handbrake_web_subdomain: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line del">-handbrake_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-handbrake_web_port: &quot;5800&quot;</span><span class="diff-line del">-handbrake_web_url: &quot;{{ &#x27;https://&#x27; + (handbrake_web_subdomain + &#x27;.&#x27; + handbrake_web_domain</span><span class="diff-line del">-                    if (handbrake_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else handbrake_web_domain) }}&quot;</span><span class="diff-line add">+handbrake_role_web_subdomain: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line add">+handbrake_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+handbrake_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+handbrake_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;handbrake&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;handbrake&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;handbrake&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;handbrake&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-handbrake_dns_record: &quot;{{ handbrake_web_subdomain }}&quot;</span><span class="diff-line del">-handbrake_dns_zone: &quot;{{ handbrake_web_domain }}&quot;</span><span class="diff-line del">-handbrake_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+handbrake_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line add">+handbrake_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line add">+handbrake_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-handbrake_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-handbrake_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-handbrake_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-handbrake_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-handbrake_traefik_enabled: true</span><span class="diff-line del">-handbrake_traefik_api_enabled: false</span><span class="diff-line del">-handbrake_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+handbrake_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+handbrake_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+handbrake_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+handbrake_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+handbrake_role_traefik_enabled: true</span><span class="diff-line add">+handbrake_role_traefik_api_enabled: false</span><span class="diff-line add">+handbrake_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-handbrake_docker_container: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line add">+handbrake_role_docker_container: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-handbrake_docker_image_pull: true</span><span class="diff-line del">-handbrake_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-handbrake_docker_image: &quot;jlesage/handbrake:{{ handbrake_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-handbrake_docker_ports_defaults: []</span><span class="diff-line del">-handbrake_docker_ports_custom: []</span><span class="diff-line del">-handbrake_docker_ports: &quot;{{ handbrake_docker_ports_defaults</span><span class="diff-line del">-                            + handbrake_docker_ports_custom }}&quot;</span><span class="diff-line add">+handbrake_role_docker_image_pull: true</span><span class="diff-line add">+handbrake_role_docker_image_repo: &quot;jlesage/handbrake&quot;</span><span class="diff-line add">+handbrake_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+handbrake_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;handbrake&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-handbrake_docker_envs_default:</span><span class="diff-line add">+handbrake_role_docker_envs_default:</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   CLEAN_TMP_DIR: &quot;1&quot;</span><span class="diff-line context">   ENABLE_CJK_FONT: &quot;1&quot;</span><span class="diff-line del">-  VNC_PASSWORD: &quot;{{ handbrake.handbrake_pass | default(&#x27;saltbox&#x27;, true) }}&quot;</span><span class="diff-line del">-handbrake_docker_envs_custom: {}</span><span class="diff-line del">-handbrake_docker_envs: &quot;{{ handbrake_docker_envs_default</span><span class="diff-line del">-                           | combine(handbrake_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-handbrake_docker_commands_default: []</span><span class="diff-line del">-handbrake_docker_commands_custom: []</span><span class="diff-line del">-handbrake_docker_commands: &quot;{{ handbrake_docker_commands_default</span><span class="diff-line del">-                               + handbrake_docker_commands_custom }}&quot;</span><span class="diff-line add">+  VNC_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_handbrake_pass&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line add">+handbrake_role_docker_envs_custom: {}</span><span class="diff-line add">+handbrake_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;handbrake&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;handbrake&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-handbrake_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ handbrake_paths_location }}:/config:rw&quot;</span><span class="diff-line add">+handbrake_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;handbrake&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt:/storage:ro&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/handbrake/watch:/watch:rw&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/downloads/handbrake/output:/output:rw&quot;</span><span class="diff-line del">-handbrake_docker_volumes_custom: []</span><span class="diff-line del">-handbrake_docker_volumes: &quot;{{ handbrake_docker_volumes_default</span><span class="diff-line del">-                              + handbrake_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-handbrake_docker_devices_default: []</span><span class="diff-line del">-handbrake_docker_devices_custom: []</span><span class="diff-line del">-handbrake_docker_devices: &quot;{{ handbrake_docker_devices_default</span><span class="diff-line del">-                              + handbrake_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-handbrake_docker_hosts_default: {}</span><span class="diff-line del">-handbrake_docker_hosts_custom: {}</span><span class="diff-line del">-handbrake_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(handbrake_docker_hosts_default)</span><span class="diff-line del">-                            | combine(handbrake_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-handbrake_docker_labels_default: {}</span><span class="diff-line del">-handbrake_docker_labels_custom: {}</span><span class="diff-line del">-handbrake_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(handbrake_docker_labels_default)</span><span class="diff-line del">-                             | combine(handbrake_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/downloads/handbrake/watch:/watch&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/downloads/handbrake/output:/output&quot;</span><span class="diff-line add">+handbrake_role_docker_volumes_custom: []</span><span class="diff-line add">+handbrake_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;handbrake&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-handbrake_docker_hostname: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line add">+handbrake_role_docker_hostname: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-handbrake_docker_networks_alias: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line del">-handbrake_docker_networks_default: []</span><span class="diff-line del">-handbrake_docker_networks_custom: []</span><span class="diff-line del">-handbrake_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + handbrake_docker_networks_default</span><span class="diff-line del">-                               + handbrake_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-handbrake_docker_capabilities_default: []</span><span class="diff-line del">-handbrake_docker_capabilities_custom: []</span><span class="diff-line del">-handbrake_docker_capabilities: &quot;{{ handbrake_docker_capabilities_default</span><span class="diff-line del">-                                   + handbrake_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-handbrake_docker_security_opts_default: []</span><span class="diff-line del">-handbrake_docker_security_opts_custom: []</span><span class="diff-line del">-handbrake_docker_security_opts: &quot;{{ handbrake_docker_security_opts_default</span><span class="diff-line del">-                                    + handbrake_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+handbrake_role_docker_networks_alias: &quot;{{ handbrake_name }}&quot;</span><span class="diff-line add">+handbrake_role_docker_networks_default: []</span><span class="diff-line add">+handbrake_role_docker_networks_custom: []</span><span class="diff-line add">+handbrake_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;handbrake&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;handbrake&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-handbrake_docker_restart_policy: unless-stopped</span><span class="diff-line add">+handbrake_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-handbrake_docker_state: started</span><span class="diff-line add">+handbrake_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-171">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/handbrake/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-172">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/healthchecks/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,137 +17,94 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-healthchecks_paths_folder: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line del">-healthchecks_paths_location: &quot;{{ server_appdata_path }}/{{ healthchecks_paths_folder }}&quot;</span><span class="diff-line del">-healthchecks_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ healthchecks_paths_location }}&quot;</span><span class="diff-line del">-healthchecks_paths_config_location: &quot;{{ healthchecks_paths_location }}/local_settings.py&quot;</span><span class="diff-line add">+healthchecks_role_paths_folder: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line add">+healthchecks_role_paths_location: &quot;{{ server_appdata_path }}/{{ healthchecks_role_paths_folder }}&quot;</span><span class="diff-line add">+healthchecks_role_paths_config_location: &quot;{{ healthchecks_role_paths_location }}/local_settings.py&quot;</span><span class="diff-line add">+healthchecks_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ healthchecks_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-healthchecks_web_subdomain: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line del">-healthchecks_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-healthchecks_web_port: &quot;8000&quot;</span><span class="diff-line del">-healthchecks_web_url: &quot;{{ &#x27;https://&#x27; + (healthchecks_web_subdomain + &#x27;.&#x27; + healthchecks_web_domain</span><span class="diff-line del">-                       if (healthchecks_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else healthchecks_web_domain) }}&quot;</span><span class="diff-line add">+healthchecks_role_web_subdomain: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line add">+healthchecks_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+healthchecks_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+healthchecks_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;healthchecks&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;healthchecks&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;healthchecks&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;healthchecks&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-healthchecks_dns_record: &quot;{{ healthchecks_web_subdomain }}&quot;</span><span class="diff-line del">-healthchecks_dns_zone: &quot;{{ healthchecks_web_domain }}&quot;</span><span class="diff-line del">-healthchecks_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+healthchecks_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line add">+healthchecks_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line add">+healthchecks_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-healthchecks_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-healthchecks_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-healthchecks_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-healthchecks_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-healthchecks_traefik_enabled: true</span><span class="diff-line del">-healthchecks_traefik_api_enabled: false</span><span class="diff-line del">-healthchecks_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+healthchecks_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+healthchecks_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+healthchecks_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+healthchecks_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+healthchecks_role_traefik_enabled: true</span><span class="diff-line add">+healthchecks_role_traefik_api_enabled: false</span><span class="diff-line add">+healthchecks_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-healthchecks_docker_container: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_container: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-healthchecks_docker_image_pull: true</span><span class="diff-line del">-healthchecks_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-healthchecks_docker_image: &quot;lscr.io/linuxserver/healthchecks:{{ healthchecks_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-healthchecks_docker_ports_defaults: []</span><span class="diff-line del">-healthchecks_docker_ports_custom: []</span><span class="diff-line del">-healthchecks_docker_ports: &quot;{{ healthchecks_docker_ports_defaults</span><span class="diff-line del">-                               + healthchecks_docker_ports_custom }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_image_pull: true</span><span class="diff-line add">+healthchecks_role_docker_image_repo: &quot;lscr.io/linuxserver/healthchecks&quot;</span><span class="diff-line add">+healthchecks_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+healthchecks_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;healthchecks&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-healthchecks_docker_envs_default:</span><span class="diff-line add">+healthchecks_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   DEBUG: &quot;False&quot;</span><span class="diff-line context">   APPRISE_ENABLED: &quot;True&quot;</span><span class="diff-line del">-  SITE_ROOT: &quot;{{ healthchecks_web_url }}&quot;</span><span class="diff-line add">+  SITE_ROOT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line context">   SITE_NAME: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line context">   SUPERUSER_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   SUPERUSER_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   SECRET_KEY: &quot;{{ lookup(&#x27;password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_letters&#x27;, &#x27;digits&#x27;], length=16) }}&quot;</span><span class="diff-line del">-healthchecks_docker_envs_custom: {}</span><span class="diff-line del">-healthchecks_docker_envs: &quot;{{ healthchecks_docker_envs_default</span><span class="diff-line del">-                              | combine(healthchecks_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-healthchecks_docker_commands_default: []</span><span class="diff-line del">-healthchecks_docker_commands_custom: []</span><span class="diff-line del">-healthchecks_docker_commands: &quot;{{ healthchecks_docker_commands_default</span><span class="diff-line del">-                                  + healthchecks_docker_commands_custom }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_envs_custom: {}</span><span class="diff-line add">+healthchecks_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;healthchecks&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;healthchecks&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-healthchecks_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ healthchecks_paths_location }}:/config&quot;</span><span class="diff-line del">-healthchecks_docker_volumes_custom: []</span><span class="diff-line del">-healthchecks_docker_volumes: &quot;{{ healthchecks_docker_volumes_default</span><span class="diff-line del">-                                 + healthchecks_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-healthchecks_docker_devices_default: []</span><span class="diff-line del">-healthchecks_docker_devices_custom: []</span><span class="diff-line del">-healthchecks_docker_devices: &quot;{{ healthchecks_docker_devices_default</span><span class="diff-line del">-                                 + healthchecks_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-healthchecks_docker_hosts_default: {}</span><span class="diff-line del">-healthchecks_docker_hosts_custom: {}</span><span class="diff-line del">-healthchecks_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(healthchecks_docker_hosts_default)</span><span class="diff-line del">-                               | combine(healthchecks_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-healthchecks_docker_labels_default: {}</span><span class="diff-line del">-healthchecks_docker_labels_custom: {}</span><span class="diff-line del">-healthchecks_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(healthchecks_docker_labels_default)</span><span class="diff-line del">-                                | combine(healthchecks_docker_labels_custom) }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;healthchecks&#x27;) }}:/config&quot;</span><span class="diff-line add">+healthchecks_role_docker_volumes_custom: []</span><span class="diff-line add">+healthchecks_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;healthchecks&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-healthchecks_docker_hostname: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_hostname: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-healthchecks_docker_networks_alias: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line del">-healthchecks_docker_networks_default: []</span><span class="diff-line del">-healthchecks_docker_networks_custom: []</span><span class="diff-line del">-healthchecks_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + healthchecks_docker_networks_default</span><span class="diff-line del">-                                  + healthchecks_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-healthchecks_docker_capabilities_default: []</span><span class="diff-line del">-healthchecks_docker_capabilities_custom: []</span><span class="diff-line del">-healthchecks_docker_capabilities: &quot;{{ healthchecks_docker_capabilities_default</span><span class="diff-line del">-                                      + healthchecks_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-healthchecks_docker_security_opts_default: []</span><span class="diff-line del">-healthchecks_docker_security_opts_custom: []</span><span class="diff-line del">-healthchecks_docker_security_opts: &quot;{{ healthchecks_docker_security_opts_default</span><span class="diff-line del">-                                       + healthchecks_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_networks_alias: &quot;{{ healthchecks_name }}&quot;</span><span class="diff-line add">+healthchecks_role_docker_networks_default: []</span><span class="diff-line add">+healthchecks_role_docker_networks_custom: []</span><span class="diff-line add">+healthchecks_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;healthchecks&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;healthchecks&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-healthchecks_docker_restart_policy: unless-stopped</span><span class="diff-line add">+healthchecks_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-healthchecks_docker_state: started</span><span class="diff-line add">+healthchecks_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Force Kill</span><span class="diff-line del">-healthchecks_docker_force_kill: yes</span><span class="diff-line add">+healthchecks_role_docker_force_kill: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-173">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/healthchecks/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-174">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/heimdall/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-heimdall_paths_folder: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line del">-heimdall_paths_location: &quot;{{ server_appdata_path }}/{{ heimdall_paths_folder }}&quot;</span><span class="diff-line del">-heimdall_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ heimdall_paths_location }}&quot;</span><span class="diff-line add">+heimdall_role_paths_folder: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line add">+heimdall_role_paths_location: &quot;{{ server_appdata_path }}/{{ heimdall_role_paths_folder }}&quot;</span><span class="diff-line add">+heimdall_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ heimdall_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-heimdall_web_subdomain: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line del">-heimdall_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-heimdall_web_port: &quot;80&quot;</span><span class="diff-line del">-heimdall_web_url: &quot;{{ &#x27;https://&#x27; + (heimdall_web_subdomain + &#x27;.&#x27; + heimdall_web_domain</span><span class="diff-line del">-                   if (heimdall_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else heimdall_web_domain) }}&quot;</span><span class="diff-line add">+heimdall_role_web_subdomain: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line add">+heimdall_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+heimdall_role_web_port: &quot;80&quot;</span><span class="diff-line add">+heimdall_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;heimdall&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;heimdall&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;heimdall&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;heimdall&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-heimdall_dns_record: &quot;{{ heimdall_web_subdomain }}&quot;</span><span class="diff-line del">-heimdall_dns_zone: &quot;{{ heimdall_web_domain }}&quot;</span><span class="diff-line del">-heimdall_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+heimdall_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;heimdall&#x27;) }}&quot;</span><span class="diff-line add">+heimdall_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;heimdall&#x27;) }}&quot;</span><span class="diff-line add">+heimdall_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-heimdall_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-heimdall_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-heimdall_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-heimdall_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-heimdall_traefik_enabled: true</span><span class="diff-line del">-heimdall_traefik_api_enabled: false</span><span class="diff-line del">-heimdall_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+heimdall_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+heimdall_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+heimdall_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+heimdall_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+heimdall_role_traefik_enabled: true</span><span class="diff-line add">+heimdall_role_traefik_api_enabled: false</span><span class="diff-line add">+heimdall_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-heimdall_docker_container: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line add">+heimdall_role_docker_container: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-heimdall_docker_image_pull: true</span><span class="diff-line del">-heimdall_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-heimdall_docker_image: &quot;lscr.io/linuxserver/heimdall:{{ heimdall_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-heimdall_docker_ports_defaults: []</span><span class="diff-line del">-heimdall_docker_ports_custom: []</span><span class="diff-line del">-heimdall_docker_ports: &quot;{{ heimdall_docker_ports_defaults</span><span class="diff-line del">-                           + heimdall_docker_ports_custom }}&quot;</span><span class="diff-line add">+heimdall_role_docker_image_pull: true</span><span class="diff-line add">+heimdall_role_docker_image_repo: &quot;lscr.io/linuxserver/heimdall&quot;</span><span class="diff-line add">+heimdall_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+heimdall_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;heimdall&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;heimdall&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-heimdall_docker_envs_default:</span><span class="diff-line add">+heimdall_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-heimdall_docker_envs_custom: {}</span><span class="diff-line del">-heimdall_docker_envs: &quot;{{ heimdall_docker_envs_default</span><span class="diff-line del">-                          | combine(heimdall_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-heimdall_docker_commands_default: []</span><span class="diff-line del">-heimdall_docker_commands_custom: []</span><span class="diff-line del">-heimdall_docker_commands: &quot;{{ heimdall_docker_commands_default</span><span class="diff-line del">-                              + heimdall_docker_commands_custom }}&quot;</span><span class="diff-line add">+heimdall_role_docker_envs_custom: {}</span><span class="diff-line add">+heimdall_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;heimdall&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;heimdall&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-heimdall_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ heimdall_paths_location }}:/config&quot;</span><span class="diff-line del">-heimdall_docker_volumes_custom: []</span><span class="diff-line del">-heimdall_docker_volumes: &quot;{{ heimdall_docker_volumes_default</span><span class="diff-line del">-                             + heimdall_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-heimdall_docker_devices_default: []</span><span class="diff-line del">-heimdall_docker_devices_custom: []</span><span class="diff-line del">-heimdall_docker_devices: &quot;{{ heimdall_docker_devices_default</span><span class="diff-line del">-                             + heimdall_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-heimdall_docker_hosts_default: {}</span><span class="diff-line del">-heimdall_docker_hosts_custom: {}</span><span class="diff-line del">-heimdall_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(heimdall_docker_hosts_default)</span><span class="diff-line del">-                           | combine(heimdall_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-heimdall_docker_labels_default: {}</span><span class="diff-line del">-heimdall_docker_labels_custom: {}</span><span class="diff-line del">-heimdall_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(heimdall_docker_labels_default)</span><span class="diff-line del">-                            | combine(heimdall_docker_labels_custom) }}&quot;</span><span class="diff-line add">+heimdall_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;heimdall&#x27;) }}:/config&quot;</span><span class="diff-line add">+heimdall_role_docker_volumes_custom: []</span><span class="diff-line add">+heimdall_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;heimdall&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;heimdall&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-heimdall_docker_hostname: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line add">+heimdall_role_docker_hostname: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-heimdall_docker_networks_alias: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line del">-heimdall_docker_networks_default: []</span><span class="diff-line del">-heimdall_docker_networks_custom: []</span><span class="diff-line del">-heimdall_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + heimdall_docker_networks_default</span><span class="diff-line del">-                              + heimdall_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-heimdall_docker_capabilities_default: []</span><span class="diff-line del">-heimdall_docker_capabilities_custom: []</span><span class="diff-line del">-heimdall_docker_capabilities: &quot;{{ heimdall_docker_capabilities_default</span><span class="diff-line del">-                                  + heimdall_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-heimdall_docker_security_opts_default: []</span><span class="diff-line del">-heimdall_docker_security_opts_custom: []</span><span class="diff-line del">-heimdall_docker_security_opts: &quot;{{ heimdall_docker_security_opts_default</span><span class="diff-line del">-                                   + heimdall_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+heimdall_role_docker_networks_alias: &quot;{{ heimdall_name }}&quot;</span><span class="diff-line add">+heimdall_role_docker_networks_default: []</span><span class="diff-line add">+heimdall_role_docker_networks_custom: []</span><span class="diff-line add">+heimdall_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;heimdall&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;heimdall&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-heimdall_docker_restart_policy: unless-stopped</span><span class="diff-line add">+heimdall_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-heimdall_docker_state: started</span><span class="diff-line add">+heimdall_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-175">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/heimdall/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-176">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -2,19 +2,12 @@</span><span class="diff-line context"> # Title:            Sandbox: homarr | Default Variables                  #</span><span class="diff-line context"> # Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line add">+# URL:              https://homarr.dev                                   #</span><span class="diff-line context"> # --                                                                     #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> #                   GNU General Public License v3.0                      #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-################################</span><span class="diff-line del">-# Docker Socket Proxy</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-homarr_docker_socket_proxy_envs:</span><span class="diff-line del">-  CONTAINERS: &quot;1&quot;</span><span class="diff-line del">-  POST: &quot;0&quot;</span><span class="diff-line del">-</span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line hunk">@@ -22,139 +15,105 @@</span><span class="diff-line context"> homarr_name: homarr</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Docker Socket Proxy</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+homarr_role_docker_socket_proxy_envs:</span><span class="diff-line add">+  CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+  POST: &quot;0&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homarr_paths_folder: &quot;{{ homarr_name }}&quot;</span><span class="diff-line del">-homarr_paths_location: &quot;{{ server_appdata_path }}/{{ homarr_paths_folder }}&quot;</span><span class="diff-line del">-homarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ homarr_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ homarr_paths_location }}/icons&quot;</span><span class="diff-line add">+homarr_role_paths_folder: &quot;{{ homarr_name }}&quot;</span><span class="diff-line add">+homarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ homarr_role_paths_folder }}&quot;</span><span class="diff-line add">+homarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ homarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homarr_web_subdomain: &quot;{{ homarr_name }}&quot;</span><span class="diff-line del">-homarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-homarr_web_port: &quot;7575&quot;</span><span class="diff-line del">-homarr_web_url: &quot;{{ &#x27;https://&#x27; + (homarr_web_subdomain + &#x27;.&#x27; + homarr_web_domain</span><span class="diff-line del">-                 if (homarr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else homarr_web_domain) }}&quot;</span><span class="diff-line add">+homarr_role_web_subdomain: &quot;{{ homarr_name }}&quot;</span><span class="diff-line add">+homarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+homarr_role_web_port: &quot;7575&quot;</span><span class="diff-line add">+homarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homarr_dns_record: &quot;{{ homarr_web_subdomain }}&quot;</span><span class="diff-line del">-homarr_dns_zone: &quot;{{ homarr_web_domain }}&quot;</span><span class="diff-line del">-homarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+homarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line add">+homarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line add">+homarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-homarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-homarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-homarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-homarr_traefik_enabled: true</span><span class="diff-line del">-homarr_traefik_api_enabled: false</span><span class="diff-line del">-homarr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+homarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+homarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+homarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+homarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+homarr_role_traefik_enabled: true</span><span class="diff-line add">+homarr_role_traefik_api_enabled: false</span><span class="diff-line add">+homarr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-homarr_docker_container: &quot;{{ homarr_name }}&quot;</span><span class="diff-line add">+homarr_role_docker_container: &quot;{{ homarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-homarr_docker_image_pull: true</span><span class="diff-line del">-homarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-homarr_docker_image: &quot;ghcr.io/ajnart/homarr:{{ homarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-homarr_docker_ports_defaults: []</span><span class="diff-line del">-homarr_docker_ports_custom: []</span><span class="diff-line del">-homarr_docker_ports: &quot;{{ homarr_docker_ports_defaults</span><span class="diff-line del">-                         + homarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+homarr_role_docker_image_pull: true</span><span class="diff-line add">+homarr_role_docker_image_repo: &quot;ghcr.io/homarr-labs/homarr&quot;</span><span class="diff-line add">+homarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+homarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;homarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-homarr_docker_envs_default:</span><span class="diff-line add">+homarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  BASE_URL: &quot;{{ homarr_web_subdomain + &#x27;.&#x27; + homarr_web_domain }}&quot;</span><span class="diff-line del">-  PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line add">+  PUID: &quot;{{ uid }}&quot;</span><span class="diff-line add">+  PGID: &quot;{{ gid }}&quot;</span><span class="diff-line add">+  SECRET_ENCRYPTION_KEY: &quot;{{ homarr_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">   DOCKER_HOST: &quot;tcp://{{ homarr_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line del">-  NODE_TLS_REJECT_UNAUTHORIZED: &quot;0&quot;</span><span class="diff-line del">-homarr_docker_envs_custom: {}</span><span class="diff-line del">-homarr_docker_envs: &quot;{{ homarr_docker_envs_default</span><span class="diff-line del">-                        | combine(homarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-homarr_docker_commands_default: []</span><span class="diff-line del">-homarr_docker_commands_custom: []</span><span class="diff-line del">-homarr_docker_commands: &quot;{{ homarr_docker_commands_default</span><span class="diff-line del">-                            + homarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+homarr_role_docker_envs_custom: {}</span><span class="diff-line add">+homarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;homarr&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;homarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-homarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ homarr_paths_location }}:/app/data/configs&quot;</span><span class="diff-line del">-  - &quot;{{ homarr_paths_location }}/icons:/app/public/icons&quot;</span><span class="diff-line del">-homarr_docker_volumes_custom: []</span><span class="diff-line del">-homarr_docker_volumes: &quot;{{ homarr_docker_volumes_default</span><span class="diff-line del">-                           + homarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-homarr_docker_devices_default: []</span><span class="diff-line del">-homarr_docker_devices_custom: []</span><span class="diff-line del">-homarr_docker_devices: &quot;{{ homarr_docker_devices_default</span><span class="diff-line del">-                           + homarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-homarr_docker_hosts_default: {}</span><span class="diff-line del">-homarr_docker_hosts_custom: {}</span><span class="diff-line del">-homarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(homarr_docker_hosts_default)</span><span class="diff-line del">-                         | combine(homarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-homarr_docker_labels_default: {}</span><span class="diff-line del">-homarr_docker_labels_custom: {}</span><span class="diff-line del">-homarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(homarr_docker_labels_default)</span><span class="diff-line del">-                          | combine(homarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+homarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homarr&#x27;) }}:/appdata&quot;</span><span class="diff-line add">+homarr_role_docker_volumes_custom: []</span><span class="diff-line add">+homarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;homarr&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-homarr_docker_hostname: &quot;{{ homarr_name }}&quot;</span><span class="diff-line add">+homarr_role_docker_hostname: &quot;{{ homarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-homarr_docker_networks_alias: &quot;{{ homarr_name }}&quot;</span><span class="diff-line del">-homarr_docker_networks_default: []</span><span class="diff-line del">-homarr_docker_networks_custom: []</span><span class="diff-line del">-homarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + homarr_docker_networks_default</span><span class="diff-line del">-                            + homarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-homarr_docker_capabilities_default: []</span><span class="diff-line del">-homarr_docker_capabilities_custom: []</span><span class="diff-line del">-homarr_docker_capabilities: &quot;{{ homarr_docker_capabilities_default</span><span class="diff-line del">-                                + homarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-homarr_docker_security_opts_default: []</span><span class="diff-line del">-homarr_docker_security_opts_custom: []</span><span class="diff-line del">-homarr_docker_security_opts: &quot;{{ homarr_docker_security_opts_default</span><span class="diff-line del">-                                 + homarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+homarr_role_docker_networks_alias: &quot;{{ homarr_name }}&quot;</span><span class="diff-line add">+homarr_role_docker_networks_default: []</span><span class="diff-line add">+homarr_role_docker_networks_custom: []</span><span class="diff-line add">+homarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;homarr&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-homarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+homarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-homarr_docker_state: started</span><span class="diff-line add">+homarr_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# Init</span><span class="diff-line add">+homarr_role_docker_init: true</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-homarr_depends_on: &quot;{{ homarr_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-homarr_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-homarr_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+homarr_role_depends_on: &quot;{{ homarr_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+homarr_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+homarr_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-177">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,7 +1,8 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> # Title:            Sandbox: Homarr                                      #</span><span class="diff-line del">-# Author(s):        CHAIR/Raneydazed                                     #</span><span class="diff-line add">+# Author(s):        salty                                                #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line add">+# URL:              https://homarr.dev                                   #</span><span class="diff-line context"> # --                                                                     #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> #                   GNU General Public License v3.0                      #</span><span class="diff-line hunk">@@ -12,20 +13,34 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ homarr_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs: &quot;{{ homarr_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_socket_proxy_envs&#x27;, role=&#x27;homarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line add">+- name: Import Legacy tasks</span><span class="diff-line add">+  ansible.builtin.import_tasks: &quot;subtasks/legacy.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line add">+- name: Homarr Saltbox Facts</span><span class="diff-line add">+  saltbox_facts:</span><span class="diff-line add">+    role: &quot;homarr&quot;</span><span class="diff-line add">+    instance: &quot;homarr&quot;</span><span class="diff-line add">+    keys:</span><span class="diff-line add">+      secret_key: &quot;{{ lookup(&#x27;ansible.builtin.password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;abcdef&#x27;, &#x27;digits&#x27;], length=32) }}&quot;</span><span class="diff-line add">+    owner: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line add">+  register: homarr_saltbox_facts</span><span class="diff-line add">+</span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-178">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homeassistant/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,135 +17,93 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homeassistant_paths_folder: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line del">-homeassistant_paths_location: &quot;{{ server_appdata_path }}/{{ homeassistant_paths_folder }}&quot;</span><span class="diff-line del">-homeassistant_paths_conf: &quot;{{ homeassistant_paths_location }}/configuration.yaml&quot;</span><span class="diff-line del">-homeassistant_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ homeassistant_paths_location }}&quot;</span><span class="diff-line add">+homeassistant_role_paths_folder: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line add">+homeassistant_role_paths_location: &quot;{{ server_appdata_path }}/{{ homeassistant_role_paths_folder }}&quot;</span><span class="diff-line add">+homeassistant_role_paths_conf: &quot;{{ homeassistant_role_paths_location }}/configuration.yaml&quot;</span><span class="diff-line add">+homeassistant_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ homeassistant_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homeassistant_web_subdomain: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line del">-homeassistant_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-homeassistant_web_port: &quot;8123&quot;</span><span class="diff-line del">-homeassistant_web_url: &quot;{{ &#x27;https://&#x27; + (homeassistant_web_subdomain + &#x27;.&#x27; + homeassistant_web_domain</span><span class="diff-line del">-                        if (homeassistant_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else homeassistant_web_domain) }}&quot;</span><span class="diff-line add">+homeassistant_role_web_subdomain: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line add">+homeassistant_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+homeassistant_role_web_port: &quot;8123&quot;</span><span class="diff-line add">+homeassistant_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homeassistant&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homeassistant&#x27;)</span><span class="diff-line add">+                             if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homeassistant&#x27;) | length &gt; 0)</span><span class="diff-line add">+                             else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homeassistant&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homeassistant_dns_record: &quot;{{ homeassistant_web_subdomain }}&quot;</span><span class="diff-line del">-homeassistant_dns_zone: &quot;{{ homeassistant_web_domain }}&quot;</span><span class="diff-line del">-homeassistant_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+homeassistant_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line add">+homeassistant_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line add">+homeassistant_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homeassistant_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-homeassistant_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-homeassistant_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-homeassistant_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-homeassistant_traefik_enabled: true</span><span class="diff-line del">-homeassistant_traefik_api_enabled: false</span><span class="diff-line del">-homeassistant_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+homeassistant_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+homeassistant_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+homeassistant_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+homeassistant_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+homeassistant_role_traefik_enabled: true</span><span class="diff-line add">+homeassistant_role_traefik_api_enabled: false</span><span class="diff-line add">+homeassistant_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-homeassistant_docker_container: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_container: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-homeassistant_docker_image_pull: true</span><span class="diff-line del">-homeassistant_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-homeassistant_docker_image: &quot;lscr.io/linuxserver/homeassistant:{{ homeassistant_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-homeassistant_docker_ports_defaults: []</span><span class="diff-line del">-homeassistant_docker_ports_custom: []</span><span class="diff-line del">-homeassistant_docker_ports: &quot;{{ homeassistant_docker_ports_defaults</span><span class="diff-line del">-                                + homeassistant_docker_ports_custom }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_image_pull: true</span><span class="diff-line add">+homeassistant_role_docker_image_repo: &quot;lscr.io/linuxserver/homeassistant&quot;</span><span class="diff-line add">+homeassistant_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+homeassistant_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;homeassistant&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-homeassistant_docker_envs_default:</span><span class="diff-line add">+homeassistant_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-homeassistant_docker_envs_custom: {}</span><span class="diff-line del">-homeassistant_docker_envs: &quot;{{ homeassistant_docker_envs_default</span><span class="diff-line del">-                               | combine(homeassistant_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-homeassistant_docker_commands_default: []</span><span class="diff-line del">-homeassistant_docker_commands_custom: []</span><span class="diff-line del">-homeassistant_docker_commands: &quot;{{ homeassistant_docker_commands_default</span><span class="diff-line del">-                                   + homeassistant_docker_commands_custom }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_envs_custom: {}</span><span class="diff-line add">+homeassistant_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;homeassistant&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;homeassistant&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-homeassistant_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ homeassistant_paths_location }}:/config&quot;</span><span class="diff-line del">-  - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-homeassistant_docker_volumes_custom: []</span><span class="diff-line del">-homeassistant_docker_volumes: &quot;{{ homeassistant_docker_volumes_default</span><span class="diff-line del">-                                  + homeassistant_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Extended Privileges</span><span class="diff-line del">-homeassistant_docker_privileged: &quot;yes&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-homeassistant_docker_devices_default: []</span><span class="diff-line del">-homeassistant_docker_devices_custom: []</span><span class="diff-line del">-homeassistant_docker_devices: &quot;{{ homeassistant_docker_devices_default</span><span class="diff-line del">-                                  + homeassistant_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-homeassistant_docker_hosts_default: {}</span><span class="diff-line del">-homeassistant_docker_hosts_custom: {}</span><span class="diff-line del">-homeassistant_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(homeassistant_docker_hosts_default)</span><span class="diff-line del">-                                | combine(homeassistant_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-homeassistant_docker_labels_default: {}</span><span class="diff-line del">-homeassistant_docker_labels_custom: {}</span><span class="diff-line del">-homeassistant_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(homeassistant_docker_labels_default)</span><span class="diff-line del">-                                 | combine(homeassistant_docker_labels_custom) }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homeassistant&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;/etc/localtime:/etc/localtime:ro&quot;</span><span class="diff-line add">+  - &quot;/run/dbus:/run/dbus:ro&quot;</span><span class="diff-line add">+homeassistant_role_docker_volumes_custom: []</span><span class="diff-line add">+homeassistant_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;homeassistant&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-homeassistant_docker_hostname: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_hostname: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-homeassistant_docker_networks_alias: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line del">-homeassistant_docker_networks_default: []</span><span class="diff-line del">-homeassistant_docker_networks_custom: []</span><span class="diff-line del">-homeassistant_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + homeassistant_docker_networks_default</span><span class="diff-line del">-                                   + homeassistant_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-homeassistant_docker_capabilities_default: []</span><span class="diff-line del">-homeassistant_docker_capabilities_custom: []</span><span class="diff-line del">-homeassistant_docker_capabilities: &quot;{{ homeassistant_docker_capabilities_default</span><span class="diff-line del">-                                       + homeassistant_docker_capabilities_custom }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_networks_alias: &quot;{{ homeassistant_name }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_networks_default: []</span><span class="diff-line add">+homeassistant_role_docker_networks_custom: []</span><span class="diff-line add">+homeassistant_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;homeassistant&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Network Mode</span><span class="diff-line del">-homeassistant_docker_network_mode: &quot;host&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-homeassistant_docker_security_opts_default: []</span><span class="diff-line del">-homeassistant_docker_security_opts_custom: []</span><span class="diff-line del">-homeassistant_docker_security_opts: &quot;{{ homeassistant_docker_security_opts_default</span><span class="diff-line del">-                                        + homeassistant_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+homeassistant_role_docker_network_mode: &quot;host&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-homeassistant_docker_restart_policy: unless-stopped</span><span class="diff-line add">+homeassistant_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-homeassistant_docker_state: started</span><span class="diff-line add">+homeassistant_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# Privileged</span><span class="diff-line add">+homeassistant_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-179">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homeassistant/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,12 +7,17 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line add">+- name: Install bluez</span><span class="diff-line add">+  ansible.builtin.apt:</span><span class="diff-line add">+    state: latest</span><span class="diff-line add">+    name: bluez</span><span class="diff-line add">+</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,18 +25,18 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Check if &#x27;{{ homeassistant_paths_conf | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ homeassistant_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context">   register: homeassistant_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ homeassistant_paths_conf | basename }}` tasks</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) | basename }}` tasks</span><span class="diff-line context">   when: not homeassistant_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: &quot;Create &#x27;{{ homeassistant_paths_conf | basename }}&#x27; if it doesnt exist&quot;</span><span class="diff-line add">+    - name: &quot;Create &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) | basename }}&#x27; if it doesnt exist&quot;</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: configuration.yaml.j2</span><span class="diff-line del">-        dest: &quot;{{ homeassistant_paths_conf }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -41,13 +46,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Wait for &#x27;configuration.yaml&#x27; to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ homeassistant_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">   when: (not continuous_integration)</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Chown &#x27;{{ homeassistant_paths_location }}&#x27;</span><span class="diff-line add">+- name: Chown &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homeassistant&#x27;) }}&#x27;</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ homeassistant_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homeassistant&#x27;) }}&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-180">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homebox/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homebox_paths_folder: &quot;{{ homebox_name }}&quot;</span><span class="diff-line del">-homebox_paths_location: &quot;{{ server_appdata_path }}/{{ homebox_paths_folder }}&quot;</span><span class="diff-line del">-homebox_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ homebox_paths_location }}&quot;</span><span class="diff-line add">+homebox_role_paths_folder: &quot;{{ homebox_name }}&quot;</span><span class="diff-line add">+homebox_role_paths_location: &quot;{{ server_appdata_path }}/{{ homebox_role_paths_folder }}&quot;</span><span class="diff-line add">+homebox_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ homebox_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homebox_web_subdomain: &quot;{{ homebox_name }}&quot;</span><span class="diff-line del">-homebox_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-homebox_web_port: &quot;7745&quot;</span><span class="diff-line del">-homebox_web_url: &quot;{{ &#x27;https://&#x27; + (homebox_web_subdomain + &#x27;.&#x27; + homebox_web_domain</span><span class="diff-line del">-                  if (homebox_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else homebox_web_domain) }}&quot;</span><span class="diff-line add">+homebox_role_web_subdomain: &quot;{{ homebox_name }}&quot;</span><span class="diff-line add">+homebox_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+homebox_role_web_port: &quot;7745&quot;</span><span class="diff-line add">+homebox_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homebox&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homebox&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homebox&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homebox&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homebox_dns_record: &quot;{{ homebox_web_subdomain }}&quot;</span><span class="diff-line del">-homebox_dns_zone: &quot;{{ homebox_web_domain }}&quot;</span><span class="diff-line del">-homebox_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+homebox_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homebox&#x27;) }}&quot;</span><span class="diff-line add">+homebox_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homebox&#x27;) }}&quot;</span><span class="diff-line add">+homebox_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homebox_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-homebox_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-homebox_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-homebox_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-homebox_traefik_enabled: true</span><span class="diff-line del">-homebox_traefik_api_enabled: false</span><span class="diff-line del">-homebox_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+homebox_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+homebox_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+homebox_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+homebox_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+homebox_role_traefik_enabled: true</span><span class="diff-line add">+homebox_role_traefik_api_enabled: false</span><span class="diff-line add">+homebox_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-homebox_docker_container: &quot;{{ homebox_name }}&quot;</span><span class="diff-line add">+homebox_role_docker_container: &quot;{{ homebox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-homebox_docker_image_pull: true</span><span class="diff-line del">-homebox_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-homebox_docker_image: &quot;ghcr.io/sysadminsmedia/homebox:{{ homebox_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-homebox_docker_ports_defaults: []</span><span class="diff-line del">-homebox_docker_ports_custom: []</span><span class="diff-line del">-homebox_docker_ports: &quot;{{ homebox_docker_ports_defaults</span><span class="diff-line del">-                          + homebox_docker_ports_custom }}&quot;</span><span class="diff-line add">+homebox_role_docker_image_pull: true</span><span class="diff-line add">+homebox_role_docker_image_repo: &quot;ghcr.io/sysadminsmedia/homebox&quot;</span><span class="diff-line add">+homebox_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+homebox_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;homebox&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;homebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-homebox_docker_envs_default:</span><span class="diff-line add">+homebox_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   HBOX_LOG_LEVEL: &quot;info&quot;</span><span class="diff-line context">   HBOX_SWAGGER_SCHEMA: &quot;https&quot;</span><span class="diff-line del">-homebox_docker_envs_custom: {}</span><span class="diff-line del">-homebox_docker_envs: &quot;{{ homebox_docker_envs_default</span><span class="diff-line del">-                         | combine(homebox_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-homebox_docker_commands_default: []</span><span class="diff-line del">-homebox_docker_commands_custom: []</span><span class="diff-line del">-homebox_docker_commands: &quot;{{ homebox_docker_commands_default</span><span class="diff-line del">-                             + homebox_docker_commands_custom }}&quot;</span><span class="diff-line add">+homebox_role_docker_envs_custom: {}</span><span class="diff-line add">+homebox_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;homebox&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;homebox&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-homebox_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ homebox_paths_location }}:/data&quot;</span><span class="diff-line del">-homebox_docker_volumes_custom: []</span><span class="diff-line del">-homebox_docker_volumes: &quot;{{ homebox_docker_volumes_default</span><span class="diff-line del">-                            + homebox_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-homebox_docker_devices_default: []</span><span class="diff-line del">-homebox_docker_devices_custom: []</span><span class="diff-line del">-homebox_docker_devices: &quot;{{ homebox_docker_devices_default</span><span class="diff-line del">-                            + homebox_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-homebox_docker_hosts_default: {}</span><span class="diff-line del">-homebox_docker_hosts_custom: {}</span><span class="diff-line del">-homebox_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(homebox_docker_hosts_default)</span><span class="diff-line del">-                          | combine(homebox_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-homebox_docker_labels_default: {}</span><span class="diff-line del">-homebox_docker_labels_custom: {}</span><span class="diff-line del">-homebox_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(homebox_docker_labels_default)</span><span class="diff-line del">-                           | combine(homebox_docker_labels_custom) }}&quot;</span><span class="diff-line add">+homebox_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homebox&#x27;) }}:/data&quot;</span><span class="diff-line add">+homebox_role_docker_volumes_custom: []</span><span class="diff-line add">+homebox_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;homebox&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;homebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-homebox_docker_hostname: &quot;{{ homebox_name }}&quot;</span><span class="diff-line add">+homebox_role_docker_hostname: &quot;{{ homebox_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-homebox_docker_networks_alias: &quot;{{ homebox_name }}&quot;</span><span class="diff-line del">-homebox_docker_networks_default: []</span><span class="diff-line del">-homebox_docker_networks_custom: []</span><span class="diff-line del">-homebox_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + homebox_docker_networks_default</span><span class="diff-line del">-                             + homebox_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-homebox_docker_capabilities_default: []</span><span class="diff-line del">-homebox_docker_capabilities_custom: []</span><span class="diff-line del">-homebox_docker_capabilities: &quot;{{ homebox_docker_capabilities_default</span><span class="diff-line del">-                                 + homebox_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-homebox_docker_security_opts_default: []</span><span class="diff-line del">-homebox_docker_security_opts_custom: []</span><span class="diff-line del">-homebox_docker_security_opts: &quot;{{ homebox_docker_security_opts_default</span><span class="diff-line del">-                                  + homebox_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+homebox_role_docker_networks_alias: &quot;{{ homebox_name }}&quot;</span><span class="diff-line add">+homebox_role_docker_networks_default: []</span><span class="diff-line add">+homebox_role_docker_networks_custom: []</span><span class="diff-line add">+homebox_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;homebox&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;homebox&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-homebox_docker_restart_policy: unless-stopped</span><span class="diff-line add">+homebox_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-homebox_docker_state: started</span><span class="diff-line add">+homebox_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-181">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homebox/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-182">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homepage/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,158 +9,115 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Docker Socket Proxy</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-homepage_docker_socket_proxy_envs:</span><span class="diff-line del">-  CONTAINERS: &quot;1&quot;</span><span class="diff-line del">-  POST: &quot;0&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> homepage_name: homepage</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Docker Socket Proxy</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+homepage_role_docker_socket_proxy_envs:</span><span class="diff-line add">+  CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+  POST: &quot;0&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homepage_paths_folder: &quot;{{ homepage_name }}&quot;</span><span class="diff-line del">-homepage_paths_location: &quot;{{ server_appdata_path }}/{{ homepage_paths_folder }}&quot;</span><span class="diff-line del">-homepage_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/images&quot;</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/icons&quot;</span><span class="diff-line add">+homepage_role_paths_folder: &quot;{{ homepage_name }}&quot;</span><span class="diff-line add">+homepage_role_paths_location: &quot;{{ server_appdata_path }}/{{ homepage_role_paths_folder }}&quot;</span><span class="diff-line add">+homepage_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ homepage_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ homepage_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ homepage_role_paths_location }}/images&quot;</span><span class="diff-line add">+  - &quot;{{ homepage_role_paths_location }}/icons&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homepage_web_subdomain: &quot;{{ homepage_name }}&quot;</span><span class="diff-line del">-homepage_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-homepage_web_port: &quot;3000&quot;</span><span class="diff-line del">-homepage_web_url: &quot;{{ &#x27;https://&#x27; + (homepage_web_subdomain + &#x27;.&#x27; + homepage_web_domain</span><span class="diff-line del">-                   if (homepage_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else homepage_web_domain) }}&quot;</span><span class="diff-line add">+homepage_role_web_subdomain: &quot;{{ homepage_name }}&quot;</span><span class="diff-line add">+homepage_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+homepage_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+homepage_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homepage&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homepage&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homepage&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homepage&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homepage_dns_record: &quot;{{ homepage_web_subdomain }}&quot;</span><span class="diff-line del">-homepage_dns_zone: &quot;{{ homepage_web_domain }}&quot;</span><span class="diff-line del">-homepage_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+homepage_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line add">+homepage_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line add">+homepage_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-homepage_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-homepage_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-homepage_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-homepage_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-homepage_traefik_enabled: true</span><span class="diff-line del">-homepage_traefik_api_enabled: false</span><span class="diff-line del">-homepage_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+homepage_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+homepage_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+homepage_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+homepage_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+homepage_role_traefik_enabled: true</span><span class="diff-line add">+homepage_role_traefik_api_enabled: false</span><span class="diff-line add">+homepage_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-homepage_docker_container: &quot;{{ homepage_name }}&quot;</span><span class="diff-line add">+homepage_role_docker_container: &quot;{{ homepage_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-homepage_docker_image_pull: true</span><span class="diff-line del">-homepage_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-homepage_docker_image: &quot;ghcr.io/gethomepage/homepage:{{ homepage_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-homepage_docker_ports_defaults: []</span><span class="diff-line del">-homepage_docker_ports_custom: []</span><span class="diff-line del">-homepage_docker_ports: &quot;{{ homepage_docker_ports_defaults</span><span class="diff-line del">-                           + homepage_docker_ports_custom }}&quot;</span><span class="diff-line add">+homepage_role_docker_image_pull: true</span><span class="diff-line add">+homepage_role_docker_image_repo: &quot;ghcr.io/gethomepage/homepage&quot;</span><span class="diff-line add">+homepage_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+homepage_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;homepage&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-homepage_docker_envs_default:</span><span class="diff-line add">+homepage_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  HOMEPAGE_ALLOWED_HOSTS: &quot;{{ traefik_host + &#x27;,&#x27; + homepage_name + &#x27;:&#x27; + homepage_web_port }}&quot;</span><span class="diff-line del">-homepage_docker_envs_custom: {}</span><span class="diff-line del">-homepage_docker_envs: &quot;{{ homepage_docker_envs_default</span><span class="diff-line del">-                          | combine(homepage_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-homepage_docker_commands_default: []</span><span class="diff-line del">-homepage_docker_commands_custom: []</span><span class="diff-line del">-homepage_docker_commands: &quot;{{ homepage_docker_commands_default</span><span class="diff-line del">-                              + homepage_docker_commands_custom }}&quot;</span><span class="diff-line add">+  HOMEPAGE_ALLOWED_HOSTS: &quot;{{ traefik_host + &#x27;,&#x27; + homepage_name + &#x27;:&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line add">+homepage_role_docker_envs_custom: {}</span><span class="diff-line add">+homepage_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;homepage&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;homepage&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-homepage_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/config:/app/config&quot;</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/images:/app/public/images&quot;</span><span class="diff-line del">-  - &quot;{{ homepage_paths_location }}/icons:/app/public/icons&quot;</span><span class="diff-line del">-homepage_docker_volumes_custom: []</span><span class="diff-line del">-homepage_docker_volumes: &quot;{{ homepage_docker_volumes_default</span><span class="diff-line del">-                             + homepage_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-homepage_docker_devices_default: []</span><span class="diff-line del">-homepage_docker_devices_custom: []</span><span class="diff-line del">-homepage_docker_devices: &quot;{{ homepage_docker_devices_default</span><span class="diff-line del">-                             + homepage_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-homepage_docker_hosts_default: {}</span><span class="diff-line del">-homepage_docker_hosts_custom: {}</span><span class="diff-line del">-homepage_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(homepage_docker_hosts_default)</span><span class="diff-line del">-                           | combine(homepage_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-homepage_docker_labels_default: {}</span><span class="diff-line del">-homepage_docker_labels_custom: {}</span><span class="diff-line del">-homepage_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(homepage_docker_labels_default)</span><span class="diff-line del">-                            | combine(homepage_docker_labels_custom) }}&quot;</span><span class="diff-line add">+homepage_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config:/app/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/images:/app/public/images&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/icons:/app/public/icons&quot;</span><span class="diff-line add">+homepage_role_docker_volumes_custom: []</span><span class="diff-line add">+homepage_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;homepage&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-homepage_docker_hostname: &quot;{{ homepage_name }}&quot;</span><span class="diff-line add">+homepage_role_docker_hostname: &quot;{{ homepage_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-homepage_docker_networks_alias: &quot;{{ homepage_name }}&quot;</span><span class="diff-line del">-homepage_docker_networks_default: []</span><span class="diff-line del">-homepage_docker_networks_custom: []</span><span class="diff-line del">-homepage_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + homepage_docker_networks_default</span><span class="diff-line del">-                              + homepage_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-homepage_docker_capabilities_default: []</span><span class="diff-line del">-homepage_docker_capabilities_custom: []</span><span class="diff-line del">-homepage_docker_capabilities: &quot;{{ homepage_docker_capabilities_default</span><span class="diff-line del">-                                  + homepage_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-homepage_docker_security_opts_default: []</span><span class="diff-line del">-homepage_docker_security_opts_custom: []</span><span class="diff-line del">-homepage_docker_security_opts: &quot;{{ homepage_docker_security_opts_default</span><span class="diff-line del">-                                   + homepage_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+homepage_role_docker_networks_alias: &quot;{{ homepage_name }}&quot;</span><span class="diff-line add">+homepage_role_docker_networks_default: []</span><span class="diff-line add">+homepage_role_docker_networks_custom: []</span><span class="diff-line add">+homepage_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;homepage&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-homepage_docker_restart_policy: unless-stopped</span><span class="diff-line add">+homepage_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-homepage_docker_state: started</span><span class="diff-line add">+homepage_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-homepage_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+homepage_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-homepage_depends_on: &quot;{{ homepage_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-homepage_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-homepage_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+homepage_role_depends_on: &quot;{{ homepage_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+homepage_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+homepage_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-183">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homepage/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -13,22 +13,22 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ homepage_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs: &quot;{{ homepage_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_socket_proxy_envs&#x27;, role=&#x27;homepage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ homepage_paths_location | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ homepage_paths_location }}/config&quot;</span><span class="diff-line del">-  register: homepage_web_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config&quot;</span><span class="diff-line add">+  register: homepage_role_web_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-184">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homepage/tasks/subtasks/init.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,13 +8,13 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Settings | New `{{ homepage_paths_location | basename }}` tasks</span><span class="diff-line del">-  when: not homepage_web_config.stat.exists</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) | basename }}` tasks</span><span class="diff-line add">+  when: not homepage_role_web_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Settings | Import bookmarks.yaml`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: bookmarks.yaml</span><span class="diff-line del">-        dest: &quot;{{ homepage_paths_location }}/config&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context">     - name: &quot;Settings | Import docker.yaml&quot;</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: docker.yaml.j2</span><span class="diff-line del">-        dest: &#x27;{{ homepage_paths_location }}/config/docker.yaml&#x27;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config/docker.yaml&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -30,7 +30,7 @@</span><span class="diff-line context">     - name: Settings | Import services.yaml`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: services.yaml</span><span class="diff-line del">-        dest: &quot;{{ homepage_paths_location }}/config&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -38,7 +38,7 @@</span><span class="diff-line context">     - name: &quot;Settings | Import settings.yaml&quot;</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: settings.yaml.j2</span><span class="diff-line del">-        dest: &#x27;{{ homepage_paths_location }}/config/settings.yaml&#x27;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config/settings.yaml&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -46,7 +46,7 @@</span><span class="diff-line context">     - name: Settings | Import widgets.yaml`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: widgets.yaml</span><span class="diff-line del">-        dest: &quot;{{ homepage_paths_location }}/config&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;homepage&#x27;) }}/config&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-185">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/homepage/templates/settings.yaml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,7 +9,7 @@</span><span class="diff-line context"> # background: /images/background-1.png</span><span class="diff-line context"> backgroundOpacity: 0.3</span><span class="diff-line context"> headerStyle: boxed</span><span class="diff-line del">-base: {{ homepage_web_url }}</span><span class="diff-line add">+base: {{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;homepage&#x27;) }}</span><span class="diff-line context"> # layout:</span><span class="diff-line context"> #   Movies and Series Management:</span><span class="diff-line context"> #     # icon: /icons/film-solid.png</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-186">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/immich/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,158 +17,130 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-immich_photos_location: &quot;/mnt/unionfs/Media/Photos&quot;</span><span class="diff-line del">-immich_postgres_name: &quot;{{ immich_name }}-postgres&quot;</span><span class="diff-line del">-immich_postgres_docker_env_db: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-immich_postgres_docker_image_tag: &quot;14-vectorchord0.4.3-pgvectors0.2.0&quot;</span><span class="diff-line del">-immich_postgres_docker_image_repo: &quot;ghcr.io/immich-app/postgres&quot;</span><span class="diff-line del">-immich_postgres_docker_shm_size: &quot;128M&quot;</span><span class="diff-line del">-immich_postgres_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-immich_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line del">-immich_postgres_docker_envs_custom:</span><span class="diff-line add">+immich_role_photos_location: &quot;/mnt/unionfs/Media/Photos&quot;</span><span class="diff-line add">+immich_role_postgres_deploy: true</span><span class="diff-line add">+immich_role_postgres_name: &quot;{{ immich_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+immich_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+immich_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+immich_role_postgres_docker_env_db: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_postgres_docker_image_tag: &quot;14-vectorchord0.4.3-pgvectors0.2.0&quot;</span><span class="diff-line add">+immich_role_postgres_docker_image_repo: &quot;ghcr.io/immich-app/postgres&quot;</span><span class="diff-line add">+immich_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;immich&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;immich&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;immich&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+immich_role_postgres_docker_shm_size: &quot;128M&quot;</span><span class="diff-line add">+immich_role_postgres_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ immich_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+immich_role_postgres_docker_envs_custom:</span><span class="diff-line context">   POSTGRES_INITDB_ARGS: &#x27;--data-checksums&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-immich_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-immich_paths_location: &quot;{{ server_appdata_path }}/{{ immich_paths_folder }}&quot;</span><span class="diff-line del">-immich_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ immich_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ immich_paths_location }}/machine-learning&quot;</span><span class="diff-line del">-  - &quot;{{ immich_photos_location }}&quot;</span><span class="diff-line add">+immich_role_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_paths_location: &quot;{{ server_appdata_path }}/{{ immich_role_paths_folder }}&quot;</span><span class="diff-line add">+immich_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ immich_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ immich_role_paths_location }}/machine-learning&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_photos_location&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-immich_web_subdomain: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-immich_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-immich_web_port: &quot;8080&quot;</span><span class="diff-line del">-immich_web_url: &quot;{{ &#x27;https://&#x27; + (immich_web_subdomain + &#x27;.&#x27; + immich_web_domain</span><span class="diff-line del">-                 if (immich_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else immich_web_domain) }}&quot;</span><span class="diff-line add">+immich_role_web_subdomain: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+immich_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+immich_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;immich&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;immich&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;immich&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-immich_dns_record: &quot;{{ immich_web_subdomain }}&quot;</span><span class="diff-line del">-immich_dns_zone: &quot;{{ immich_web_domain }}&quot;</span><span class="diff-line del">-immich_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+immich_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+immich_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+immich_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-immich_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-immich_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-immich_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-immich_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-immich_traefik_enabled: true</span><span class="diff-line del">-immich_traefik_api_enabled: false</span><span class="diff-line del">-immich_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+immich_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+immich_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+immich_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+immich_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+immich_role_traefik_enabled: true</span><span class="diff-line add">+immich_role_traefik_api_enabled: false</span><span class="diff-line add">+immich_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-immich_docker_container: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_docker_container: &quot;{{ immich_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-immich_docker_image_pull: true</span><span class="diff-line del">-immich_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-immich_docker_image: &quot;ghcr.io/imagegenius/immich:{{ immich_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-immich_docker_ports_defaults: []</span><span class="diff-line del">-immich_docker_ports_custom: []</span><span class="diff-line del">-immich_docker_ports: &quot;{{ immich_docker_ports_defaults</span><span class="diff-line del">-                         + immich_docker_ports_custom }}&quot;</span><span class="diff-line add">+immich_role_docker_image_pull: true</span><span class="diff-line add">+immich_role_docker_image_repo: &quot;ghcr.io/imagegenius/immich&quot;</span><span class="diff-line add">+immich_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+immich_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;immich&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-immich_docker_envs_default:</span><span class="diff-line add">+immich_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  DB_HOSTNAME: &quot;{{ immich_postgres_name }}&quot;</span><span class="diff-line del">-  DB_USERNAME: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  DB_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  DB_DATABASE_NAME: &quot;{{ immich_postgres_docker_env_db }}&quot;</span><span class="diff-line add">+  DB_HOSTNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+  DB_USERNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                 if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;immich&#x27;) | length &gt; 0)</span><span class="diff-line add">+                 else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DB_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                 if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;immich&#x27;) | length &gt; 0)</span><span class="diff-line add">+                 else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DB_DATABASE_NAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line context">   REDIS_HOSTNAME: &quot;{{ immich_name }}-redis&quot;</span><span class="diff-line context">   DISABLE_MACHINE_LEARNING: &quot;false&quot;</span><span class="diff-line context">   MACHINE_LEARNING_WORKERS: &quot;1&quot;</span><span class="diff-line context">   MACHINE_LEARNING_WORKER_TIMEOUT: &quot;120&quot;</span><span class="diff-line del">-immich_docker_envs_custom: {}</span><span class="diff-line del">-immich_docker_envs: &quot;{{ immich_docker_envs_default</span><span class="diff-line del">-                        | combine(immich_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-immich_docker_commands_default: []</span><span class="diff-line del">-immich_docker_commands_custom: []</span><span class="diff-line del">-immich_docker_commands: &quot;{{ immich_docker_commands_default</span><span class="diff-line del">-                            + immich_docker_commands_custom }}&quot;</span><span class="diff-line add">+immich_role_docker_envs_custom: {}</span><span class="diff-line add">+immich_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;immich&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-immich_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ immich_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ immich_photos_location }}:/photos&quot;</span><span class="diff-line del">-immich_docker_volumes_custom: []</span><span class="diff-line del">-immich_docker_volumes: &quot;{{ immich_docker_volumes_default</span><span class="diff-line del">-                           + immich_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-immich_docker_devices_default: []</span><span class="diff-line del">-immich_docker_devices_custom: []</span><span class="diff-line del">-immich_docker_devices: &quot;{{ immich_docker_devices_default</span><span class="diff-line del">-                           + immich_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-immich_docker_hosts_default: {}</span><span class="diff-line del">-immich_docker_hosts_custom: {}</span><span class="diff-line del">-immich_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(immich_docker_hosts_default)</span><span class="diff-line del">-                         | combine(immich_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-immich_docker_labels_default: {}</span><span class="diff-line del">-immich_docker_labels_custom: {}</span><span class="diff-line del">-immich_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(immich_docker_labels_default)</span><span class="diff-line del">-                          | combine(immich_docker_labels_custom) }}&quot;</span><span class="diff-line add">+immich_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;immich&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_photos_location&#x27;, role=&#x27;immich&#x27;) }}:/photos&quot;</span><span class="diff-line add">+immich_role_docker_volumes_custom: []</span><span class="diff-line add">+immich_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-immich_docker_hostname: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_docker_hostname: &quot;{{ immich_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-immich_docker_networks_alias: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-immich_docker_networks_default: []</span><span class="diff-line del">-immich_docker_networks_custom: []</span><span class="diff-line del">-immich_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + immich_docker_networks_default</span><span class="diff-line del">-                            + immich_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-immich_docker_capabilities_default: []</span><span class="diff-line del">-immich_docker_capabilities_custom: []</span><span class="diff-line del">-immich_docker_capabilities: &quot;{{ immich_docker_capabilities_default</span><span class="diff-line del">-                                + immich_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-immich_docker_security_opts_default: []</span><span class="diff-line del">-immich_docker_security_opts_custom: []</span><span class="diff-line del">-immich_docker_security_opts: &quot;{{ immich_docker_security_opts_default</span><span class="diff-line del">-                                 + immich_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+immich_role_docker_networks_alias: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+immich_role_docker_networks_default: []</span><span class="diff-line add">+immich_role_docker_networks_custom: []</span><span class="diff-line add">+immich_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-immich_docker_restart_policy: unless-stopped</span><span class="diff-line add">+immich_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-immich_docker_state: started</span><span class="diff-line add">+immich_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-immich_depends_on: &quot;{{ immich_postgres_name }},{{ immich_name }}-redis&quot;</span><span class="diff-line del">-immich_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-immich_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+immich_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;immich&#x27;) }},{{ immich_name }}-redis&quot;</span><span class="diff-line add">+immich_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+immich_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-187">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/immich/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,41 +10,45 @@</span><span class="diff-line context"> - name: Remove legacy redis Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ immich_name }}_redis&quot;</span><span class="diff-line add">+    container_name: &quot;{{ immich_name }}_redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import Redis Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: redis</span><span class="diff-line context">   vars:</span><span class="diff-line context">     redis_instances: [&quot;{{ immich_name }}-redis&quot;]</span><span class="diff-line del">-    redis_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line del">-    redis_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line del">-    redis_paths_location: &quot;{{ server_appdata_path }}/{{ redis_paths_folder }}/redis&quot;</span><span class="diff-line add">+    redis_role_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line add">+    redis_role_paths_folder: &quot;{{ immich_name }}&quot;</span><span class="diff-line add">+    redis_role_paths_location: &quot;{{ server_appdata_path }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folder&#x27;, role=&#x27;redis&#x27;) }}/redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ immich_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ immich_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Import PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ immich_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ immich_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ immich_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ immich_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_docker_shm_size: &quot;{{ immich_postgres_docker_shm_size }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ immich_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ immich_postgres_paths_location }}&quot;</span><span class="diff-line del">-    postgres_docker_envs_custom: &quot;{{ immich_postgres_docker_envs_custom }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;immich&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_shm_size: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_shm_size&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_envs_custom&#x27;, role=&#x27;immich&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;immich&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -54,7 +58,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-188">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/influxdb/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,93 +17,45 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-influxdb_paths_folder: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line del">-influxdb_paths_location: &quot;{{ server_appdata_path }}/{{ influxdb_paths_folder }}&quot;</span><span class="diff-line del">-influxdb_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ influxdb_paths_location }}&quot;</span><span class="diff-line add">+influxdb_role_paths_folder: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line add">+influxdb_role_paths_location: &quot;{{ server_appdata_path }}/{{ influxdb_role_paths_folder }}&quot;</span><span class="diff-line add">+influxdb_role_paths_recursive: true</span><span class="diff-line add">+influxdb_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ influxdb_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-influxdb_docker_container: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line add">+influxdb_role_docker_container: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-influxdb_docker_image_pull: true</span><span class="diff-line del">-influxdb_docker_image_tag: &quot;1.8.4&quot;</span><span class="diff-line del">-influxdb_docker_image: &quot;influxdb:{{ influxdb_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-influxdb_docker_ports_defaults: []</span><span class="diff-line del">-influxdb_docker_ports_custom: []</span><span class="diff-line del">-influxdb_docker_ports: &quot;{{ influxdb_docker_ports_defaults</span><span class="diff-line del">-                           + influxdb_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-influxdb_docker_envs_default: {}</span><span class="diff-line del">-influxdb_docker_envs_custom: {}</span><span class="diff-line del">-influxdb_docker_envs: &quot;{{ influxdb_docker_envs_default</span><span class="diff-line del">-                          | combine(influxdb_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-influxdb_docker_commands_default: []</span><span class="diff-line del">-influxdb_docker_commands_custom: []</span><span class="diff-line del">-influxdb_docker_commands: &quot;{{ influxdb_docker_commands_default</span><span class="diff-line del">-                              + influxdb_docker_commands_custom }}&quot;</span><span class="diff-line add">+influxdb_role_docker_image_pull: true</span><span class="diff-line add">+influxdb_role_docker_image_repo: &quot;influxdb&quot;</span><span class="diff-line add">+influxdb_role_docker_image_tag: &quot;1.12&quot;</span><span class="diff-line add">+influxdb_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;influxdb&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;influxdb&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-influxdb_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ influxdb_paths_location }}:/var/lib/influxdb&quot;</span><span class="diff-line del">-influxdb_docker_volumes_custom: []</span><span class="diff-line del">-influxdb_docker_volumes: &quot;{{ influxdb_docker_volumes_default</span><span class="diff-line del">-                             + influxdb_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-influxdb_docker_devices_default: []</span><span class="diff-line del">-influxdb_docker_devices_custom: []</span><span class="diff-line del">-influxdb_docker_devices: &quot;{{ influxdb_docker_devices_default</span><span class="diff-line del">-                             + influxdb_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-influxdb_docker_hosts_default: {}</span><span class="diff-line del">-influxdb_docker_hosts_custom: {}</span><span class="diff-line del">-influxdb_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(influxdb_docker_hosts_default)</span><span class="diff-line del">-                           | combine(influxdb_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-influxdb_docker_labels_default: {}</span><span class="diff-line del">-influxdb_docker_labels_custom: {}</span><span class="diff-line del">-influxdb_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(influxdb_docker_labels_default)</span><span class="diff-line del">-                            | combine(influxdb_docker_labels_custom) }}&quot;</span><span class="diff-line add">+influxdb_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;influxdb&#x27;) }}:/var/lib/influxdb&quot;</span><span class="diff-line add">+influxdb_role_docker_volumes_custom: []</span><span class="diff-line add">+influxdb_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;influxdb&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;influxdb&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-influxdb_docker_hostname: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line add">+influxdb_role_docker_hostname: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-influxdb_docker_networks_alias: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line del">-influxdb_docker_networks_default: []</span><span class="diff-line del">-influxdb_docker_networks_custom: []</span><span class="diff-line del">-influxdb_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + influxdb_docker_networks_default</span><span class="diff-line del">-                              + influxdb_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-influxdb_docker_capabilities_default: []</span><span class="diff-line del">-influxdb_docker_capabilities_custom: []</span><span class="diff-line del">-influxdb_docker_capabilities: &quot;{{ influxdb_docker_capabilities_default</span><span class="diff-line del">-                                  + influxdb_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-influxdb_docker_security_opts_default: []</span><span class="diff-line del">-influxdb_docker_security_opts_custom: []</span><span class="diff-line del">-influxdb_docker_security_opts: &quot;{{ influxdb_docker_security_opts_default</span><span class="diff-line del">-                                   + influxdb_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+influxdb_role_docker_networks_alias: &quot;{{ influxdb_name }}&quot;</span><span class="diff-line add">+influxdb_role_docker_networks_default: []</span><span class="diff-line add">+influxdb_role_docker_networks_custom: []</span><span class="diff-line add">+influxdb_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;influxdb&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;influxdb&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-influxdb_docker_restart_policy: unless-stopped</span><span class="diff-line add">+influxdb_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-influxdb_docker_state: started</span><span class="diff-line add">+influxdb_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-189">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/influxdb2/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,133 +17,78 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-influxdb2_paths_folder: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line del">-influxdb2_paths_location: &quot;{{ server_appdata_path }}/{{ influxdb2_paths_folder }}&quot;</span><span class="diff-line del">-influxdb2_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ influxdb2_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ influxdb2_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ influxdb2_paths_location }}/data&quot;</span><span class="diff-line add">+influxdb2_role_paths_folder: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line add">+influxdb2_role_paths_location: &quot;{{ server_appdata_path }}/{{ influxdb2_role_paths_folder }}&quot;</span><span class="diff-line add">+influxdb2_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ influxdb2_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ influxdb2_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ influxdb2_role_paths_location }}/data&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-influxdb2_web_subdomain: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line del">-influxdb2_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-influxdb2_web_port: &quot;8086&quot;</span><span class="diff-line del">-influxdb2_web_url: &quot;{{ &#x27;https://&#x27; + (influxdb2_web_subdomain + &#x27;.&#x27; + influxdb2_web_domain</span><span class="diff-line del">-                    if (influxdb2_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else influxdb2_web_domain) }}&quot;</span><span class="diff-line add">+influxdb2_role_web_subdomain: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line add">+influxdb2_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+influxdb2_role_web_port: &quot;8086&quot;</span><span class="diff-line add">+influxdb2_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;influxdb2&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;influxdb2&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;influxdb2&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;influxdb2&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-influxdb2_dns_record: &quot;{{ influxdb2_web_subdomain }}&quot;</span><span class="diff-line del">-influxdb2_dns_zone: &quot;{{ influxdb2_web_domain }}&quot;</span><span class="diff-line del">-influxdb2_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+influxdb2_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;influxdb2&#x27;) }}&quot;</span><span class="diff-line add">+influxdb2_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;influxdb2&#x27;) }}&quot;</span><span class="diff-line add">+influxdb2_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-influxdb2_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-influxdb2_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-influxdb2_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-influxdb2_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-influxdb2_traefik_enabled: true</span><span class="diff-line del">-influxdb2_traefik_api_enabled: false</span><span class="diff-line del">-influxdb2_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+influxdb2_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+influxdb2_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+influxdb2_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+influxdb2_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+influxdb2_role_traefik_enabled: true</span><span class="diff-line add">+influxdb2_role_traefik_api_enabled: false</span><span class="diff-line add">+influxdb2_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-influxdb2_docker_container: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_container: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-influxdb2_docker_image_pull: true</span><span class="diff-line del">-influxdb2_docker_image_tag: &quot;2-alpine&quot;</span><span class="diff-line del">-influxdb2_docker_image_repo: &quot;influxdb&quot;</span><span class="diff-line del">-influxdb2_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_image_repo&#x27;, default=influxdb2_docker_image_repo)</span><span class="diff-line del">-                           + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_image_tag&#x27;, default=influxdb2_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-influxdb2_docker_ports_defaults: []</span><span class="diff-line del">-influxdb2_docker_ports_custom: []</span><span class="diff-line del">-influxdb2_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_ports_default&#x27;, default=influxdb2_docker_ports_defaults)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_ports_custom&#x27;, default=influxdb2_docker_ports_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-influxdb2_docker_envs_default: {}</span><span class="diff-line del">-influxdb2_docker_envs_custom: {}</span><span class="diff-line del">-influxdb2_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_envs_default&#x27;, default=influxdb2_docker_envs_default)</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_envs_custom&#x27;, default=influxdb2_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-influxdb2_docker_commands_default: []</span><span class="diff-line del">-influxdb2_docker_commands_custom: []</span><span class="diff-line del">-influxdb2_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_commands_default&#x27;, default=influxdb2_docker_commands_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_commands_custom&#x27;, default=influxdb2_docker_commands_custom) }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_image_pull: true</span><span class="diff-line add">+influxdb2_role_docker_image_tag: &quot;2-alpine&quot;</span><span class="diff-line add">+influxdb2_role_docker_image_repo: &quot;influxdb&quot;</span><span class="diff-line add">+influxdb2_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;influxdb2&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;influxdb2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-influxdb2_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ influxdb2_paths_location }}/data:/var/lib/influxdb2&quot;</span><span class="diff-line del">-  - &quot;{{ influxdb2_paths_location }}/config:/etc/influxdb2&quot;</span><span class="diff-line del">-influxdb2_docker_volumes_custom: []</span><span class="diff-line del">-influxdb2_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_volumes_default&#x27;, default=influxdb2_docker_volumes_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_volumes_custom&#x27;, default=influxdb2_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-influxdb2_docker_devices_default: []</span><span class="diff-line del">-influxdb2_docker_devices_custom: []</span><span class="diff-line del">-influxdb2_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_devices_default&#x27;, default=influxdb2_docker_devices_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_devices_custom&#x27;, default=influxdb2_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-influxdb2_docker_hosts_default: {}</span><span class="diff-line del">-influxdb2_docker_hosts_custom: {}</span><span class="diff-line del">-influxdb2_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_hosts_default&#x27;, default=influxdb2_docker_hosts_default))</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_hosts_custom&#x27;, default=influxdb2_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-influxdb2_docker_labels_default: {}</span><span class="diff-line del">-influxdb2_docker_labels_custom: {}</span><span class="diff-line del">-influxdb2_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_labels_default&#x27;, default=influxdb2_docker_labels_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_labels_custom&#x27;, default=influxdb2_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;influxdb2&#x27;) }}/data:/var/lib/influxdb2&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;influxdb2&#x27;) }}/config:/etc/influxdb2&quot;</span><span class="diff-line add">+influxdb2_role_docker_volumes_custom: []</span><span class="diff-line add">+influxdb2_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;influxdb2&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;influxdb2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-influxdb2_docker_hostname: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-influxdb2_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-influxdb2_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_network_mode_default&#x27;, default=influxdb2_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_hostname: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-influxdb2_docker_networks_alias: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line del">-influxdb2_docker_networks_default: []</span><span class="diff-line del">-influxdb2_docker_networks_custom: []</span><span class="diff-line del">-influxdb2_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_networks_default&#x27;, default=influxdb2_docker_networks_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_networks_dcustom&#x27;, default=influxdb2_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-influxdb2_docker_capabilities_default: []</span><span class="diff-line del">-influxdb2_docker_capabilities_custom: []</span><span class="diff-line del">-influxdb2_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_capabilities_default&#x27;, default=influxdb2_docker_capabilities_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_capabilities_custom&#x27;, default=influxdb2_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-influxdb2_docker_security_opts_default: []</span><span class="diff-line del">-influxdb2_docker_security_opts_custom: []</span><span class="diff-line del">-influxdb2_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_security_opts_default&#x27;, default=influxdb2_docker_security_opts_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, influxdb2_name + &#x27;_docker_security_opts_custom&#x27;, default=influxdb2_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_networks_alias: &quot;{{ influxdb2_name }}&quot;</span><span class="diff-line add">+influxdb2_role_docker_networks_default: []</span><span class="diff-line add">+influxdb2_role_docker_networks_custom: []</span><span class="diff-line add">+influxdb2_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;influxdb2&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;influxdb2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-influxdb2_docker_restart_policy: unless-stopped</span><span class="diff-line add">+influxdb2_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-influxdb2_docker_state: started</span><span class="diff-line add">+influxdb2_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-190">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/influxdb2/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-191">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/invoiceninjav5/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,63 +18,59 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> invoiceninjav5_overwrite_nginx_config: true</span><span class="diff-line add">+invoiceninjav5_role_app_key: &quot;base64:O1S3kAJEDgo92gPkXtxfdCJpoGShgKloUSdcaHMXmoY=&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-invoiceninjav5_paths_folder: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line del">-invoiceninjav5_paths_location: &quot;{{ server_appdata_path }}/{{ invoiceninjav5_paths_folder }}&quot;</span><span class="diff-line del">-invoiceninjav5_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/public&quot;</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/storage&quot;</span><span class="diff-line del">-invoiceninjav5_paths_recursive: true</span><span class="diff-line del">-invoiceninjav5_paths_owner: &quot;1500&quot;</span><span class="diff-line del">-invoiceninjav5_paths_group: &quot;1500&quot;</span><span class="diff-line add">+invoiceninjav5_role_paths_folder: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_paths_location: &quot;{{ server_appdata_path }}/{{ invoiceninjav5_role_paths_folder }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ invoiceninjav5_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ invoiceninjav5_role_paths_location }}/public&quot;</span><span class="diff-line add">+  - &quot;{{ invoiceninjav5_role_paths_location }}/storage&quot;</span><span class="diff-line add">+invoiceninjav5_role_paths_recursive: true</span><span class="diff-line add">+invoiceninjav5_role_paths_owner: &quot;1500&quot;</span><span class="diff-line add">+invoiceninjav5_role_paths_group: &quot;1500&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-invoiceninjav5_nginx_web_subdomain: &quot;invoiceninja&quot;</span><span class="diff-line del">-invoiceninjav5_nginx_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-invoiceninjav5_nginx_web_port: &quot;80&quot;</span><span class="diff-line del">-invoiceninjav5_nginx_web_url: &quot;{{ &#x27;https://&#x27; + (invoiceninjav5_nginx_web_subdomain + &#x27;.&#x27; + invoiceninjav5_nginx_web_domain</span><span class="diff-line del">-                               if (invoiceninjav5_nginx_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                               else invoiceninjav5_nginx_web_domain) }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_web_subdomain: &quot;invoiceninja&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_web_port: &quot;80&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_subdomain&#x27;, role=&#x27;invoiceninjav5&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_domain&#x27;, role=&#x27;invoiceninjav5&#x27;)</span><span class="diff-line add">+                                    if (lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_subdomain&#x27;, role=&#x27;invoiceninjav5&#x27;) | length &gt; 0)</span><span class="diff-line add">+                                    else lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_domain&#x27;, role=&#x27;invoiceninjav5&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-invoiceninjav5_nginx_dns_record: &quot;{{ invoiceninjav5_nginx_web_subdomain }}&quot;</span><span class="diff-line del">-invoiceninjav5_nginx_dns_zone: &quot;{{ invoiceninjav5_nginx_web_domain }}&quot;</span><span class="diff-line del">-invoiceninjav5_nginx_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_subdomain&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_domain&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_nginx_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-invoiceninjav5_docker_container: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_container: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-invoiceninjav5_docker_image_pull: true</span><span class="diff-line del">-invoiceninjav5_docker_image_tag: &quot;5&quot;</span><span class="diff-line del">-invoiceninjav5_docker_image: &quot;invoiceninja/invoiceninja:{{ invoiceninjav5_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-invoiceninjav5_docker_ports_defaults: []</span><span class="diff-line del">-invoiceninjav5_docker_ports_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_ports: &quot;{{ invoiceninjav5_docker_ports_defaults</span><span class="diff-line del">-                                 + invoiceninjav5_docker_ports_custom }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_image_pull: true</span><span class="diff-line add">+invoiceninjav5_role_docker_image_repo: &quot;invoiceninja/invoiceninja&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_image_tag: &quot;5&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;invoiceninjav5&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-invoiceninjav5_docker_envs_default:</span><span class="diff-line add">+invoiceninjav5_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  APP_URL: &quot;{{ invoiceninjav5_nginx_web_url }}&quot;</span><span class="diff-line del">-  APP_KEY: &quot;{{ invoiceninja.app_key | default(&#x27;base64:O1S3kAJEDgo92gPkXtxfdCJpoGShgKloUSdcaHMXmoY=&#x27;, true) }}&quot;</span><span class="diff-line add">+  APP_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_url&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+  APP_KEY: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_app_key&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line context">   APP_ENV: &quot;production&quot;</span><span class="diff-line context">   APP_DEBUG: &quot;false&quot;</span><span class="diff-line context">   TRUSTED_PROXIES: &quot;*&quot;</span><span class="diff-line hunk">@@ -90,76 +86,38 @@</span><span class="diff-line context">   PHANTOMJS_PDF_GENERATION: &quot;false&quot;</span><span class="diff-line context">   IN_USER_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   IN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-invoiceninjav5_docker_envs_custom: {}</span><span class="diff-line del">-invoiceninjav5_docker_envs: &quot;{{ invoiceninjav5_docker_envs_default</span><span class="diff-line del">-                                | combine(invoiceninjav5_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-invoiceninjav5_docker_commands_default: []</span><span class="diff-line del">-invoiceninjav5_docker_commands_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_commands: &quot;{{ invoiceninjav5_docker_commands_default</span><span class="diff-line del">-                                    + invoiceninjav5_docker_commands_custom }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_envs_custom: {}</span><span class="diff-line add">+invoiceninjav5_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;invoiceninjav5&#x27;)</span><span class="diff-line add">+                                     | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;invoiceninjav5&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-invoiceninjav5_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/public:/var/www/app/public&quot;</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/storage:/var/www/app/storage&quot;</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/php.ini:/usr/local/etc/php/php.ini&quot;</span><span class="diff-line del">-  - &quot;{{ invoiceninjav5_paths_location }}/php-cli.ini:/usr/local/etc/php/php-cli.ini&quot;</span><span class="diff-line del">-invoiceninjav5_docker_volumes_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_volumes: &quot;{{ invoiceninjav5_docker_volumes_default</span><span class="diff-line del">-                                   + invoiceninjav5_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-invoiceninjav5_docker_devices_default: []</span><span class="diff-line del">-invoiceninjav5_docker_devices_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_devices: &quot;{{ invoiceninjav5_docker_devices_default</span><span class="diff-line del">-                                   + invoiceninjav5_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-invoiceninjav5_docker_hosts_default: {}</span><span class="diff-line del">-invoiceninjav5_docker_hosts_custom: {}</span><span class="diff-line del">-invoiceninjav5_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                 | combine(invoiceninjav5_docker_hosts_default)</span><span class="diff-line del">-                                 | combine(invoiceninjav5_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-invoiceninjav5_docker_labels_default: {}</span><span class="diff-line del">-invoiceninjav5_docker_labels_custom: {}</span><span class="diff-line del">-invoiceninjav5_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                  | combine(invoiceninjav5_docker_labels_default)</span><span class="diff-line del">-                                  | combine(invoiceninjav5_docker_labels_custom) }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/public:/var/www/app/public&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/storage:/var/www/app/storage&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/php.ini:/usr/local/etc/php/php.ini&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/php-cli.ini:/usr/local/etc/php/php-cli.ini&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_volumes_custom: []</span><span class="diff-line add">+invoiceninjav5_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;invoiceninjav5&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-invoiceninjav5_docker_hostname: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_hostname: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-invoiceninjav5_docker_networks_alias: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line del">-invoiceninjav5_docker_networks_default: []</span><span class="diff-line del">-invoiceninjav5_docker_networks_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                    + invoiceninjav5_docker_networks_default</span><span class="diff-line del">-                                    + invoiceninjav5_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-invoiceninjav5_docker_capabilities_default: []</span><span class="diff-line del">-invoiceninjav5_docker_capabilities_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_capabilities: &quot;{{ invoiceninjav5_docker_capabilities_default</span><span class="diff-line del">-                                        + invoiceninjav5_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-invoiceninjav5_docker_security_opts_default: []</span><span class="diff-line del">-invoiceninjav5_docker_security_opts_custom: []</span><span class="diff-line del">-invoiceninjav5_docker_security_opts: &quot;{{ invoiceninjav5_docker_security_opts_default</span><span class="diff-line del">-                                         + invoiceninjav5_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_networks_alias: &quot;{{ invoiceninjav5_name }}&quot;</span><span class="diff-line add">+invoiceninjav5_role_docker_networks_default: []</span><span class="diff-line add">+invoiceninjav5_role_docker_networks_custom: []</span><span class="diff-line add">+invoiceninjav5_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;invoiceninjav5&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-invoiceninjav5_docker_restart_policy: unless-stopped</span><span class="diff-line add">+invoiceninjav5_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-invoiceninjav5_docker_state: started</span><span class="diff-line add">+invoiceninjav5_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-invoiceninjav5_depends_on: &quot;invoiceninja-nginx,mariadb&quot;</span><span class="diff-line del">-invoiceninjav5_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-invoiceninjav5_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+invoiceninjav5_role_depends_on: &quot;invoiceninja-nginx,mariadb&quot;</span><span class="diff-line add">+invoiceninjav5_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+invoiceninjav5_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-192">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/invoiceninjav5/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,26 +16,16 @@</span><span class="diff-line context">     name: &quot;invoiceninjav5db&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ mariadb_role_docker_env_password }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-# - name: Create directories</span><span class="diff-line del">-#   ansible.builtin.file:</span><span class="diff-line del">-#     path: &quot;{{ item }}&quot;</span><span class="diff-line del">-#     state: directory</span><span class="diff-line del">-#     owner: &quot;1500&quot;</span><span class="diff-line del">-#     group: &quot;invoiceninja&quot;</span><span class="diff-line del">-#     mode: &quot;0775&quot;</span><span class="diff-line del">-#     recurse: true</span><span class="diff-line del">-#   with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line context"> - name: &quot;Settings | Import in-vhost.conf&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: &quot;{{ item }}.j2&quot;</span><span class="diff-line del">-    dest: &#x27;{{ invoiceninjav5_paths_location }}/{{ item }}&#x27;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/{{ item }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -55,19 +45,19 @@</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: nginx</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    nginx_docker_image: &quot;nginx:latest&quot;</span><span class="diff-line del">-    nginx_paths_folder: &quot;&quot;</span><span class="diff-line del">-    nginx_paths_folders_list: []</span><span class="diff-line del">-    nginx_web_subdomain: &quot;{{ invoiceninjav5_nginx_web_subdomain }}&quot;</span><span class="diff-line del">-    nginx_web_domain: &quot;{{ invoiceninjav5_nginx_web_domain }}&quot;</span><span class="diff-line del">-    nginx_dns_record: &quot;{{ invoiceninjav5_nginx_dns_record }}&quot;</span><span class="diff-line del">-    nginx_dns_zone: &quot;{{ invoiceninjav5_nginx_dns_zone }}&quot;</span><span class="diff-line del">-    nginx_dns_proxy: &quot;{{ invoiceninjav5_nginx_dns_proxy }}&quot;</span><span class="diff-line add">+    nginx_role_docker_image: &quot;nginx:latest&quot;</span><span class="diff-line add">+    nginx_role_paths_folder: &quot;&quot;</span><span class="diff-line add">+    nginx_role_paths_folders_list: []</span><span class="diff-line add">+    nginx_role_web_subdomain: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_subdomain&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+    nginx_role_web_domain: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_web_domain&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+    nginx_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_dns_record&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+    nginx_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_dns_zone&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line add">+    nginx_role_dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_nginx_dns_proxy&#x27;, role=&#x27;invoiceninjav5&#x27;) }}&quot;</span><span class="diff-line context">     nginx_instances: [&quot;invoiceninja-nginx&quot;]</span><span class="diff-line del">-    nginx_traefik_gzip_enabled: false</span><span class="diff-line del">-    nginx_docker_volumes_default:</span><span class="diff-line del">-      - &quot;{{ invoiceninjav5_paths_location }}/in-vhost.conf:/etc/nginx/conf.d/in-vhost.conf:ro&quot;</span><span class="diff-line del">-      - &quot;{{ invoiceninjav5_paths_location }}/public:/var/www/app/public:ro&quot;</span><span class="diff-line add">+    nginx_role_traefik_gzip_enabled: false</span><span class="diff-line add">+    nginx_role_docker_volumes_default:</span><span class="diff-line add">+      - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/in-vhost.conf:/etc/nginx/conf.d/in-vhost.conf:ro&quot;</span><span class="diff-line add">+      - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;invoiceninjav5&#x27;) }}/public:/var/www/app/public:ro&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-193">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/it_tools/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,121 +17,62 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-it_tools_web_subdomain: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line del">-it_tools_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-it_tools_web_port: &quot;80&quot;</span><span class="diff-line del">-it_tools_web_url: &quot;{{ &#x27;https://&#x27; + (it_tools_web_subdomain + &#x27;.&#x27; + it_tools_web_domain</span><span class="diff-line del">-                   if (it_tools_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else it_tools_web_domain) }}&quot;</span><span class="diff-line add">+it_tools_role_web_subdomain: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line add">+it_tools_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+it_tools_role_web_port: &quot;80&quot;</span><span class="diff-line add">+it_tools_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;it_tools&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;it_tools&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;it_tools&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;it_tools&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-it_tools_dns_record: &quot;{{ it_tools_web_subdomain }}&quot;</span><span class="diff-line del">-it_tools_dns_zone: &quot;{{ it_tools_web_domain }}&quot;</span><span class="diff-line del">-it_tools_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+it_tools_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;it_tools&#x27;) }}&quot;</span><span class="diff-line add">+it_tools_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;it_tools&#x27;) }}&quot;</span><span class="diff-line add">+it_tools_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-it_tools_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-it_tools_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-it_tools_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-it_tools_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-it_tools_traefik_enabled: true</span><span class="diff-line del">-it_tools_traefik_api_enabled: false</span><span class="diff-line del">-it_tools_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+it_tools_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+it_tools_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+it_tools_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+it_tools_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+it_tools_role_traefik_enabled: true</span><span class="diff-line add">+it_tools_role_traefik_api_enabled: false</span><span class="diff-line add">+it_tools_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-it_tools_docker_container: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line add">+it_tools_role_docker_container: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-it_tools_docker_image_pull: true</span><span class="diff-line del">-it_tools_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-it_tools_docker_image: &quot;corentinth/it-tools:{{ it_tools_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-it_tools_docker_ports_defaults: []</span><span class="diff-line del">-it_tools_docker_ports_custom: []</span><span class="diff-line del">-it_tools_docker_ports: &quot;{{ it_tools_docker_ports_defaults</span><span class="diff-line del">-                           + it_tools_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-it_tools_docker_envs_default: {}</span><span class="diff-line del">-it_tools_docker_envs_custom: {}</span><span class="diff-line del">-it_tools_docker_envs: &quot;{{ it_tools_docker_envs_default</span><span class="diff-line del">-                          | combine(it_tools_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-it_tools_docker_volumes_global: false</span><span class="diff-line del">-it_tools_docker_commands_default: []</span><span class="diff-line del">-it_tools_docker_commands_custom: []</span><span class="diff-line del">-it_tools_docker_commands: &quot;{{ it_tools_docker_commands_default</span><span class="diff-line del">-                              + it_tools_docker_commands_custom }}&quot;</span><span class="diff-line add">+it_tools_role_docker_image_pull: true</span><span class="diff-line add">+it_tools_role_docker_image_repo: &quot;corentinth/it-tools&quot;</span><span class="diff-line add">+it_tools_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+it_tools_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;it_tools&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;it_tools&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-it_tools_docker_volumes_default: []</span><span class="diff-line del">-it_tools_docker_volumes_custom: []</span><span class="diff-line del">-it_tools_docker_volumes: &quot;{{ it_tools_docker_volumes_default</span><span class="diff-line del">-                             + it_tools_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Mounts</span><span class="diff-line del">-it_tools_docker_mounts_default: []</span><span class="diff-line del">-it_tools_docker_mounts_custom: []</span><span class="diff-line del">-it_tools_docker_mounts: &quot;{{ it_tools_docker_mounts_default</span><span class="diff-line del">-                            + it_tools_docker_mounts_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-it_tools_docker_devices_default: []</span><span class="diff-line del">-it_tools_docker_devices_custom: []</span><span class="diff-line del">-it_tools_docker_devices: &quot;{{ it_tools_docker_devices_default</span><span class="diff-line del">-                             + it_tools_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-it_tools_docker_hosts_default: {}</span><span class="diff-line del">-it_tools_docker_hosts_custom: {}</span><span class="diff-line del">-it_tools_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(it_tools_docker_hosts_default)</span><span class="diff-line del">-                           | combine(it_tools_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-it_tools_docker_labels_default: {}</span><span class="diff-line del">-it_tools_docker_labels_custom: {}</span><span class="diff-line del">-it_tools_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(it_tools_docker_labels_default)</span><span class="diff-line del">-                            | combine(it_tools_docker_labels_custom) }}&quot;</span><span class="diff-line add">+it_tools_role_docker_volumes_global: false</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-it_tools_docker_hostname: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line add">+it_tools_role_docker_hostname: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-it_tools_docker_networks_alias: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line del">-it_tools_docker_networks_default: []</span><span class="diff-line del">-it_tools_docker_networks_custom: []</span><span class="diff-line del">-it_tools_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + it_tools_docker_networks_default</span><span class="diff-line del">-                              + it_tools_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-it_tools_docker_capabilities_default: []</span><span class="diff-line del">-it_tools_docker_capabilities_custom: []</span><span class="diff-line del">-it_tools_docker_capabilities: &quot;{{ it_tools_docker_capabilities_default</span><span class="diff-line del">-                                  + it_tools_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-it_tools_docker_security_opts_default: []</span><span class="diff-line del">-it_tools_docker_security_opts_custom: []</span><span class="diff-line del">-it_tools_docker_security_opts: &quot;{{ it_tools_docker_security_opts_default</span><span class="diff-line del">-                                   + it_tools_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+it_tools_role_docker_networks_alias: &quot;{{ it_tools_name }}&quot;</span><span class="diff-line add">+it_tools_role_docker_networks_default: []</span><span class="diff-line add">+it_tools_role_docker_networks_custom: []</span><span class="diff-line add">+it_tools_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;it_tools&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;it_tools&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-it_tools_docker_restart_policy: unless-stopped</span><span class="diff-line add">+it_tools_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-it_tools_docker_state: started</span><span class="diff-line add">+it_tools_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-194">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/it_tools/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-195">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jdownloader2/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,67 +17,62 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jdownloader2_paths_folder: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line del">-jdownloader2_paths_location: &quot;{{ server_appdata_path }}/{{ jdownloader2_paths_folder }}&quot;</span><span class="diff-line del">-jdownloader2_paths_downloads_location: &quot;/mnt/local/downloads/{{ jdownloader2_name }}/output&quot;</span><span class="diff-line del">-jdownloader2_paths_tools_location: &quot;{{ jdownloader2_paths_location }}/config/libs&quot;</span><span class="diff-line del">-jdownloader2_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_tools_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_downloads_location }}&quot;</span><span class="diff-line add">+jdownloader2_role_paths_folder: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line add">+jdownloader2_role_paths_location: &quot;{{ server_appdata_path }}/{{ jdownloader2_role_paths_folder }}&quot;</span><span class="diff-line add">+jdownloader2_role_paths_downloads_location: &quot;{{ server_local_folder_path }}/downloads/{{ jdownloader2_name }}/output&quot;</span><span class="diff-line add">+jdownloader2_role_paths_tools_location: &quot;{{ jdownloader2_role_paths_location }}/config/libs&quot;</span><span class="diff-line add">+jdownloader2_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ jdownloader2_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ jdownloader2_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ jdownloader2_role_paths_tools_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ jdownloader2_role_paths_downloads_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jdownloader2_web_subdomain: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line del">-jdownloader2_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-jdownloader2_web_port: &quot;5800&quot;</span><span class="diff-line del">-jdownloader2_web_url: &quot;{{ &#x27;https://&#x27; + (jdownloader2_web_subdomain + &#x27;.&#x27; + jdownloader2_web_domain</span><span class="diff-line del">-                       if (jdownloader2_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else jdownloader2_web_domain) }}&quot;</span><span class="diff-line add">+jdownloader2_role_web_subdomain: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line add">+jdownloader2_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+jdownloader2_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+jdownloader2_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jdownloader2&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jdownloader2&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jdownloader2&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jdownloader2&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jdownloader2_dns_record: &quot;{{ jdownloader2_web_subdomain }}&quot;</span><span class="diff-line del">-jdownloader2_dns_zone: &quot;{{ jdownloader2_web_domain }}&quot;</span><span class="diff-line del">-jdownloader2_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+jdownloader2_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line add">+jdownloader2_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line add">+jdownloader2_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jdownloader2_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-jdownloader2_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-jdownloader2_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-jdownloader2_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-jdownloader2_traefik_enabled: true</span><span class="diff-line del">-jdownloader2_traefik_api_enabled: false</span><span class="diff-line del">-jdownloader2_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+jdownloader2_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+jdownloader2_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+jdownloader2_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+jdownloader2_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+jdownloader2_role_traefik_enabled: true</span><span class="diff-line add">+jdownloader2_role_traefik_api_enabled: false</span><span class="diff-line add">+jdownloader2_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-jdownloader2_docker_container: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_container: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-jdownloader2_docker_image_pull: true</span><span class="diff-line del">-jdownloader2_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-jdownloader2_docker_image: &quot;jlesage/jdownloader-2:{{ jdownloader2_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-jdownloader2_docker_ports_defaults: []</span><span class="diff-line del">-jdownloader2_docker_ports_custom: []</span><span class="diff-line del">-jdownloader2_docker_ports: &quot;{{ jdownloader2_docker_ports_defaults</span><span class="diff-line del">-                               + jdownloader2_docker_ports_custom }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_image_pull: true</span><span class="diff-line add">+jdownloader2_role_docker_image_repo: &quot;jlesage/jdownloader-2&quot;</span><span class="diff-line add">+jdownloader2_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+jdownloader2_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;jdownloader2&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-jdownloader2_docker_envs_default:</span><span class="diff-line add">+jdownloader2_role_docker_envs_default:</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line hunk">@@ -87,69 +82,31 @@</span><span class="diff-line context">   CLEAN_TMP_DIR: &quot;1&quot;</span><span class="diff-line context">   UMASK: &quot;000&quot;</span><span class="diff-line context">   ENABLE_CJK_FONT: &quot;1&quot;</span><span class="diff-line del">-jdownloader2_docker_envs_custom: {}</span><span class="diff-line del">-jdownloader2_docker_envs: &quot;{{ jdownloader2_docker_envs_default</span><span class="diff-line del">-                              | combine(jdownloader2_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-jdownloader2_docker_commands_default: []</span><span class="diff-line del">-jdownloader2_docker_commands_custom: []</span><span class="diff-line del">-jdownloader2_docker_commands: &quot;{{ jdownloader2_docker_commands_default</span><span class="diff-line del">-                                  + jdownloader2_docker_commands_custom }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_envs_custom: {}</span><span class="diff-line add">+jdownloader2_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;jdownloader2&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;jdownloader2&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-jdownloader2_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ jdownloader2_paths_downloads_location }}:/output&quot;</span><span class="diff-line del">-jdownloader2_docker_volumes_custom: []</span><span class="diff-line del">-jdownloader2_docker_volumes: &quot;{{ jdownloader2_docker_volumes_default</span><span class="diff-line del">-                                 + jdownloader2_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-jdownloader2_docker_devices_default: []</span><span class="diff-line del">-jdownloader2_docker_devices_custom: []</span><span class="diff-line del">-jdownloader2_docker_devices: &quot;{{ jdownloader2_docker_devices_default</span><span class="diff-line del">-                                 + jdownloader2_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-jdownloader2_docker_hosts_default: {}</span><span class="diff-line del">-jdownloader2_docker_hosts_custom: {}</span><span class="diff-line del">-jdownloader2_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(jdownloader2_docker_hosts_default)</span><span class="diff-line del">-                               | combine(jdownloader2_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-jdownloader2_docker_labels_default: {}</span><span class="diff-line del">-jdownloader2_docker_labels_custom: {}</span><span class="diff-line del">-jdownloader2_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(jdownloader2_docker_labels_default)</span><span class="diff-line del">-                                | combine(jdownloader2_docker_labels_custom) }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_downloads_location&#x27;, role=&#x27;jdownloader2&#x27;) }}:/output&quot;</span><span class="diff-line add">+jdownloader2_role_docker_volumes_custom: []</span><span class="diff-line add">+jdownloader2_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;jdownloader2&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-jdownloader2_docker_hostname: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_hostname: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-jdownloader2_docker_networks_alias: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line del">-jdownloader2_docker_networks_default: []</span><span class="diff-line del">-jdownloader2_docker_networks_custom: []</span><span class="diff-line del">-jdownloader2_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + jdownloader2_docker_networks_default</span><span class="diff-line del">-                                  + jdownloader2_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-jdownloader2_docker_capabilities_default: []</span><span class="diff-line del">-jdownloader2_docker_capabilities_custom: []</span><span class="diff-line del">-jdownloader2_docker_capabilities: &quot;{{ jdownloader2_docker_capabilities_default</span><span class="diff-line del">-                                      + jdownloader2_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-jdownloader2_docker_security_opts_default: []</span><span class="diff-line del">-jdownloader2_docker_security_opts_custom: []</span><span class="diff-line del">-jdownloader2_docker_security_opts: &quot;{{ jdownloader2_docker_security_opts_default</span><span class="diff-line del">-                                       + jdownloader2_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_networks_alias: &quot;{{ jdownloader2_name }}&quot;</span><span class="diff-line add">+jdownloader2_role_docker_networks_default: []</span><span class="diff-line add">+jdownloader2_role_docker_networks_custom: []</span><span class="diff-line add">+jdownloader2_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;jdownloader2&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-jdownloader2_docker_restart_policy: unless-stopped</span><span class="diff-line add">+jdownloader2_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-jdownloader2_docker_state: started</span><span class="diff-line add">+jdownloader2_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-196">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jdownloader2/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-197">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jdownloader2/tasks/subtasks/legacy.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,9 +7,9 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                      #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Legacy | Check if &#x27;/opt/myjdownloader&#x27; exists</span><span class="diff-line add">+- name: Legacy | Check if &#x27;{{ server_appdata_path }}/myjdownloader&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/myjdownloader&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/myjdownloader&quot;</span><span class="diff-line context">   register: opt_myjdownloader</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Legacy | Migration Block</span><span class="diff-line hunk">@@ -22,11 +22,11 @@</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Legacy | Move opt folder &#x27;myjdownloader&#x27; to &#x27;jdownloader2&#x27;</span><span class="diff-line context">       ansible.builtin.shell: |</span><span class="diff-line del">-        mv /opt/myjdownloader &quot;{{ jdownloader2_paths_location }}&quot;</span><span class="diff-line add">+        mv {{ server_appdata_path }}/myjdownloader &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Legacy | Set permissions on &#x27;jdownloader2&#x27;</span><span class="diff-line context">       ansible.builtin.file:</span><span class="diff-line del">-        path: &quot;{{ jdownloader2_paths_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;jdownloader2&#x27;) }}&quot;</span><span class="diff-line context">         state: directory</span><span class="diff-line context">         recurse: true</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-198">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jdownloader2/tasks/subtasks/unzippers.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,22 +7,22 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                      #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: &quot;unzippers | Check if &#x27;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509.jar&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;unzippers | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509.jar&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509.jar&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509.jar&quot;</span><span class="diff-line context">   register: sevenzip_1509</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;unzippers | Check if &#x27;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509Linux.jar&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;unzippers | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509Linux.jar&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509Linux.jar&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509Linux.jar&quot;</span><span class="diff-line context">   register: sevenzip_1509linux</span><span class="diff-line context"> </span><span class="diff-line del">-- name: unzippers | Import tools &quot;{{ jdownloader2_paths_tools_location | basename }}&quot; tasks</span><span class="diff-line add">+- name: unzippers | Import tools &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) | basename }}&quot; tasks</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: unzippers | Import 7zip 1509</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: &quot;sevenzipjbinding1509.jar&quot;</span><span class="diff-line del">-        dest: &quot;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509.jar&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509.jar&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0775&quot;</span><span class="diff-line hunk">@@ -32,7 +32,7 @@</span><span class="diff-line context">     - name: unzippers | Import 7zip 1509Linux</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: &quot;sevenzipjbinding1509Linux.jar&quot;</span><span class="diff-line del">-        dest: &quot;{{ jdownloader2_paths_tools_location }}/sevenzipjbinding1509Linux.jar&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_tools_location&#x27;, role=&#x27;jdownloader2&#x27;) }}/sevenzipjbinding1509Linux.jar&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0775&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-199">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jellyseerr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,144 +17,93 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellyseerr_log_level: &quot;INFO&quot;</span><span class="diff-line del">-jellyseerr_emby: false</span><span class="diff-line add">+jellyseerr_role_log_level: &quot;INFO&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellyseerr_paths_folder: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line del">-jellyseerr_paths_location: &quot;{{ server_appdata_path }}/{{ jellyseerr_paths_folder }}&quot;</span><span class="diff-line del">-jellyseerr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ jellyseerr_paths_location }}&quot;</span><span class="diff-line add">+jellyseerr_role_paths_folder: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line add">+jellyseerr_role_paths_location: &quot;{{ server_appdata_path }}/{{ jellyseerr_role_paths_folder }}&quot;</span><span class="diff-line add">+jellyseerr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ jellyseerr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellyseerr_web_subdomain: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line del">-jellyseerr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-jellyseerr_web_port: &quot;5055&quot;</span><span class="diff-line del">-jellyseerr_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_subdomain&#x27;, default=jellyseerr_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_domain&#x27;, default=jellyseerr_web_domain)</span><span class="diff-line del">-                     if (lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_subdomain&#x27;, default=jellyseerr_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                     else lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_domain&#x27;, default=jellyseerr_web_domain)) }}&quot;</span><span class="diff-line add">+jellyseerr_role_web_subdomain: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line add">+jellyseerr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+jellyseerr_role_web_port: &quot;5055&quot;</span><span class="diff-line add">+jellyseerr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellyseerr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellyseerr&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellyseerr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellyseerr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellyseerr_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_subdomain&#x27;, default=jellyseerr_web_subdomain) }}&quot;</span><span class="diff-line del">-jellyseerr_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_web_domain&#x27;, default=jellyseerr_web_domain) }}&quot;</span><span class="diff-line del">-jellyseerr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+jellyseerr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line add">+jellyseerr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line add">+jellyseerr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellyseerr_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-jellyseerr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-jellyseerr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-jellyseerr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-jellyseerr_traefik_enabled: true</span><span class="diff-line del">-jellyseerr_traefik_api_enabled: false</span><span class="diff-line del">-jellyseerr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+jellyseerr_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+jellyseerr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+jellyseerr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+jellyseerr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+jellyseerr_role_traefik_enabled: true</span><span class="diff-line add">+jellyseerr_role_traefik_api_enabled: false</span><span class="diff-line add">+jellyseerr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-jellyseerr_docker_container: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_container: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-jellyseerr_docker_image_pull: true</span><span class="diff-line del">-jellyseerr_docker_image_repo: &quot;fallenbagel/jellyseerr&quot;</span><span class="diff-line del">-jellyseerr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-jellyseerr_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_image_repo&#x27;, default=jellyseerr_docker_image_repo)</span><span class="diff-line del">-                             + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_image_tag&#x27;, default=jellyseerr_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-jellyseerr_docker_ports_defaults: []</span><span class="diff-line del">-jellyseerr_docker_ports_custom: []</span><span class="diff-line del">-jellyseerr_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_ports_defaults&#x27;, default=jellyseerr_docker_ports_defaults)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_ports_custom&#x27;, default=jellyseerr_docker_ports_custom) }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_image_pull: true</span><span class="diff-line add">+jellyseerr_role_docker_image_repo: &quot;fallenbagel/jellyseerr&quot;</span><span class="diff-line add">+jellyseerr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+jellyseerr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;jellyseerr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-jellyseerr_docker_envs_default:</span><span class="diff-line add">+jellyseerr_role_docker_envs_default:</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  LOG_LEVEL: &quot;{{ jellyseerr_log_level }}&quot;</span><span class="diff-line del">-  JELLYFIN_TYPE: &quot;{{ &#x27;emby&#x27; if jellyseerr_emby else omit }}&quot;</span><span class="diff-line del">-jellyseerr_docker_envs_custom: {}</span><span class="diff-line del">-jellyseerr_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_envs_default&#x27;, default=jellyseerr_docker_envs_default)</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_envs_custom&#x27;, default=jellyseerr_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-jellyseerr_docker_commands_default: []</span><span class="diff-line del">-jellyseerr_docker_commands_custom: []</span><span class="diff-line del">-jellyseerr_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_commands_default&#x27;, default=jellyseerr_docker_commands_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_commands_custom&#x27;, default=jellyseerr_docker_commands_custom) }}&quot;</span><span class="diff-line add">+  LOG_LEVEL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_log_level&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_envs_custom: {}</span><span class="diff-line add">+jellyseerr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;jellyseerr&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;jellyseerr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-jellyseerr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ jellyseerr_paths_location }}:/app/config&quot;</span><span class="diff-line del">-jellyseerr_docker_volumes_custom: []</span><span class="diff-line del">-jellyseerr_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_volumes_default&#x27;, default=jellyseerr_docker_volumes_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_volumes_custom&#x27;, default=jellyseerr_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-jellyseerr_docker_devices_default: []</span><span class="diff-line del">-jellyseerr_docker_devices_custom: []</span><span class="diff-line del">-jellyseerr_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_devices_default&#x27;, default=jellyseerr_docker_devices_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_devices_custom&#x27;, default=jellyseerr_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-jellyseerr_docker_hosts_default: {}</span><span class="diff-line del">-jellyseerr_docker_hosts_custom: {}</span><span class="diff-line del">-jellyseerr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_hosts_default&#x27;, default=jellyseerr_docker_hosts_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_hosts_custom&#x27;, default=jellyseerr_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-jellyseerr_docker_labels_default: {}</span><span class="diff-line del">-jellyseerr_docker_labels_custom: {}</span><span class="diff-line del">-jellyseerr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_labels_default&#x27;, default=jellyseerr_docker_labels_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_labels_custom&#x27;, default=jellyseerr_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;jellyseerr&#x27;) }}:/app/config&quot;</span><span class="diff-line add">+jellyseerr_role_docker_volumes_custom: []</span><span class="diff-line add">+jellyseerr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;jellyseerr&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-jellyseerr_docker_hostname: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-jellyseerr_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-jellyseerr_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_network_mode_default&#x27;, default=jellyseerr_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_hostname: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-jellyseerr_docker_networks_alias: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line del">-jellyseerr_docker_networks_default: []</span><span class="diff-line del">-jellyseerr_docker_networks_custom: []</span><span class="diff-line del">-jellyseerr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_networks_default&#x27;, default=jellyseerr_docker_networks_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_networks_custom&#x27;, default=jellyseerr_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-jellyseerr_docker_capabilities_default: []</span><span class="diff-line del">-jellyseerr_docker_capabilities_custom: []</span><span class="diff-line del">-jellyseerr_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_capabilities_default&#x27;, default=jellyseerr_docker_capabilities_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_capabilities_custom&#x27;, default=jellyseerr_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-jellyseerr_docker_security_opts_default: []</span><span class="diff-line del">-jellyseerr_docker_security_opts_custom: []</span><span class="diff-line del">-jellyseerr_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_security_opts_default&#x27;, default=jellyseerr_docker_security_opts_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, jellyseerr_name + &#x27;_docker_security_opts_custom&#x27;, default=jellyseerr_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_networks_alias: &quot;{{ jellyseerr_name }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_networks_default: []</span><span class="diff-line add">+jellyseerr_role_docker_networks_custom: []</span><span class="diff-line add">+jellyseerr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;jellyseerr&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;jellyseerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-jellyseerr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+jellyseerr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-jellyseerr_docker_state: started</span><span class="diff-line add">+jellyseerr_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-jellyseerr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+jellyseerr_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-200">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jellyseerr/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-201">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jellystat/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,39 +17,52 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellystat_postgres_name: &quot;{{ jellystat_name }}-postgres&quot;</span><span class="diff-line del">-jellystat_postgres_docker_env_db: &quot;jfstat&quot;</span><span class="diff-line del">-jellystat_postgres_docker_image_tag: &quot;15.2-alpine&quot;</span><span class="diff-line del">-jellystat_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+jellystat_role_postgres_deploy: true</span><span class="diff-line add">+jellystat_role_postgres_name: &quot;{{ jellystat_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+jellystat_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+jellystat_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+jellystat_role_postgres_docker_env_db: &quot;jfstat&quot;</span><span class="diff-line add">+jellystat_role_postgres_docker_image_tag: &quot;15.2-alpine&quot;</span><span class="diff-line add">+jellystat_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+jellystat_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;jellystat&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;jellystat&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;jellystat&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+jellystat_role_postgres_paths_folder: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line add">+jellystat_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ jellystat_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellystat_paths_folder: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line del">-jellystat_paths_location: &quot;{{ server_appdata_path }}/{{ jellystat_paths_folder }}&quot;</span><span class="diff-line del">-jellystat_paths_jwt_secret_file: &quot;{{ jellystat_paths_location }}/jwt_secret.txt&quot;</span><span class="diff-line del">-jellystat_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ jellystat_paths_location }}&quot;</span><span class="diff-line add">+jellystat_role_paths_folder: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line add">+jellystat_role_paths_location: &quot;{{ server_appdata_path }}/{{ jellystat_role_paths_folder }}&quot;</span><span class="diff-line add">+jellystat_role_paths_jwt_secret_file: &quot;{{ jellystat_role_paths_location }}/jwt_secret.txt&quot;</span><span class="diff-line add">+jellystat_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ jellystat_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellystat_web_subdomain: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line del">-jellystat_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-jellystat_web_port: &quot;3000&quot;</span><span class="diff-line del">-jellystat_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_subdomain&#x27;, default=jellystat_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_domain&#x27;, default=jellystat_web_domain)</span><span class="diff-line del">-                    if (lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_subdomain&#x27;, default=jellystat_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                    else lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_domain&#x27;, default=jellystat_web_domain)) }}&quot;</span><span class="diff-line add">+jellystat_role_web_subdomain: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line add">+jellystat_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+jellystat_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+jellystat_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellystat&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellystat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellystat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellystat_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_subdomain&#x27;, default=jellystat_web_subdomain) }}&quot;</span><span class="diff-line del">-jellystat_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_web_domain&#x27;, default=jellystat_web_domain) }}&quot;</span><span class="diff-line del">-jellystat_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+jellystat_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+jellystat_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+jellystat_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Settings</span><span class="diff-line hunk">@@ -62,112 +75,67 @@</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-jellystat_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-jellystat_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-jellystat_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-jellystat_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-jellystat_traefik_enabled: true</span><span class="diff-line del">-jellystat_traefik_api_enabled: false</span><span class="diff-line del">-jellystat_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+jellystat_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+jellystat_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+jellystat_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+jellystat_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+jellystat_role_traefik_enabled: true</span><span class="diff-line add">+jellystat_role_traefik_api_enabled: false</span><span class="diff-line add">+jellystat_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-jellystat_docker_container: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line add">+jellystat_role_docker_container: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-jellystat_docker_image_pull: true</span><span class="diff-line del">-jellystat_docker_image_repo: &quot;cyfershepard/jellystat&quot;</span><span class="diff-line del">-jellystat_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-jellystat_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_image_repo&#x27;, default=jellystat_docker_image_repo)</span><span class="diff-line del">-                            + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_image_tag&#x27;, default=jellystat_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-jellystat_docker_ports_defaults: []</span><span class="diff-line del">-jellystat_docker_ports_custom: []</span><span class="diff-line del">-jellystat_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_ports_defaults&#x27;, default=jellystat_docker_ports_defaults)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_ports_custom&#x27;, default=jellystat_docker_ports_custom) }}&quot;</span><span class="diff-line add">+jellystat_role_docker_image_pull: true</span><span class="diff-line add">+jellystat_role_docker_image_repo: &quot;cyfershepard/jellystat&quot;</span><span class="diff-line add">+jellystat_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+jellystat_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;jellystat&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-jellystat_docker_envs_default:</span><span class="diff-line del">-  POSTGRES_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  POSTGRES_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  POSTGRES_IP: &quot;{{ jellystat_postgres_name }}&quot;</span><span class="diff-line add">+jellystat_role_docker_envs_default:</span><span class="diff-line add">+  POSTGRES_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                  if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;jellystat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                  else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;jellystat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_IP: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context">   POSTGRES_PORT: &quot;5432&quot;</span><span class="diff-line context">   JWT_SECRET: &quot;{{ jwt_token.stdout }}&quot;</span><span class="diff-line del">-jellystat_docker_envs_custom: {}</span><span class="diff-line del">-jellystat_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_envs_default&#x27;, default=jellystat_docker_envs_default)</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_envs_custom&#x27;, default=jellystat_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-jellystat_docker_commands_default: []</span><span class="diff-line del">-jellystat_docker_commands_custom: []</span><span class="diff-line del">-jellystat_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_commands_default&#x27;, default=jellystat_docker_commands_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_commands_custom&#x27;, default=jellystat_docker_commands_custom) }}&quot;</span><span class="diff-line add">+jellystat_role_docker_envs_custom: {}</span><span class="diff-line add">+jellystat_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;jellystat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-jellystat_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ jellystat_paths_location }}:/app/backend/backup-data&quot;</span><span class="diff-line del">-jellystat_docker_volumes_custom: []</span><span class="diff-line del">-jellystat_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_volumes_default&#x27;, default=jellystat_docker_volumes_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_volumes_custom&#x27;, default=jellystat_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-jellystat_docker_devices_default: []</span><span class="diff-line del">-jellystat_docker_devices_custom: []</span><span class="diff-line del">-jellystat_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_devices_default&#x27;, default=jellystat_docker_devices_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_devices_custom&#x27;, default=jellystat_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-jellystat_docker_hosts_default: {}</span><span class="diff-line del">-jellystat_docker_hosts_custom: {}</span><span class="diff-line del">-jellystat_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_hosts_default&#x27;, default=jellystat_docker_hosts_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_hosts_custom&#x27;, default=jellystat_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-jellystat_docker_labels_default: {}</span><span class="diff-line del">-jellystat_docker_labels_custom: {}</span><span class="diff-line del">-jellystat_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_labels_default&#x27;, default=jellystat_docker_labels_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_labels_custom&#x27;, default=jellystat_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+jellystat_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;jellystat&#x27;) }}:/app/backend/backup-data&quot;</span><span class="diff-line add">+jellystat_role_docker_volumes_custom: []</span><span class="diff-line add">+jellystat_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-jellystat_docker_hostname: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-jellystat_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-jellystat_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_network_mode_default&#x27;, default=jellystat_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+jellystat_role_docker_hostname: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-jellystat_docker_networks_alias: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line del">-jellystat_docker_networks_default: []</span><span class="diff-line del">-jellystat_docker_networks_custom: []</span><span class="diff-line del">-jellystat_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_networks_default&#x27;, default=jellystat_docker_networks_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_networks_custom&#x27;, default=jellystat_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-jellystat_docker_capabilities_default: []</span><span class="diff-line del">-jellystat_docker_capabilities_custom: []</span><span class="diff-line del">-jellystat_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_capabilities_default&#x27;, default=jellystat_docker_capabilities_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_capabilities_custom&#x27;, default=jellystat_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-jellystat_docker_security_opts_default: []</span><span class="diff-line del">-jellystat_docker_security_opts_custom: []</span><span class="diff-line del">-jellystat_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_security_opts_default&#x27;, default=jellystat_docker_security_opts_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, jellystat_name + &#x27;_docker_security_opts_custom&#x27;, default=jellystat_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+jellystat_role_docker_networks_alias: &quot;{{ jellystat_name }}&quot;</span><span class="diff-line add">+jellystat_role_docker_networks_default: []</span><span class="diff-line add">+jellystat_role_docker_networks_custom: []</span><span class="diff-line add">+jellystat_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-jellystat_docker_restart_policy: unless-stopped</span><span class="diff-line add">+jellystat_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-jellystat_docker_state: started</span><span class="diff-line add">+jellystat_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-jellystat_depends_on: &quot;{{ jellystat_postgres_name }}&quot;</span><span class="diff-line del">-jellystat_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-jellystat_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+jellystat_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+jellystat_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+jellystat_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-202">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/jellystat/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if JWT secret file exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ jellystat_paths_jwt_secret_file }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_jwt_secret_file&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context">   register: jwt_file</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Generate JWT Token Secret</span><span class="diff-line hunk">@@ -33,25 +33,31 @@</span><span class="diff-line context"> - name: Store JWT Token Secret in a file</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     content: &quot;{{ jwt_secret.stdout }}&quot;</span><span class="diff-line del">-    dest: &quot;{{ jellystat_paths_jwt_secret_file }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_jwt_secret_file&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">   when: not jwt_file.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Read JWT Token Secret from file</span><span class="diff-line del">-  ansible.builtin.shell: cat &quot;{{ jellystat_paths_jwt_secret_file }}&quot;</span><span class="diff-line add">+  ansible.builtin.shell: cat &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_jwt_secret_file&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line context">   register: jwt_token</span><span class="diff-line del">-  changed_when: False</span><span class="diff-line add">+  changed_when: false</span><span class="diff-line context"> </span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ jellystat_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ jellystat_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ jellystat_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ jellystat_postgres_docker_image_repo }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;jellystat&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;jellystat&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;jellystat&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-203">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/joplin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,149 +17,111 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-joplin_postgres_name: &quot;{{ joplin_name }}-postgres&quot;</span><span class="diff-line del">-joplin_postgres_docker_image_tag: &quot;13&quot;</span><span class="diff-line del">-joplin_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-joplin_postgres_docker_env_db: &quot;joplin&quot;</span><span class="diff-line del">-joplin_postgres_docker_env_user: &quot;joplin&quot;</span><span class="diff-line del">-joplin_postgres_docker_env_password: &quot;joplin&quot;</span><span class="diff-line del">-joplin_postgres_paths_folder: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_postgres_deploy: true</span><span class="diff-line add">+joplin_role_postgres_name: &quot;{{ joplin_name }}-postgres&quot;</span><span class="diff-line add">+joplin_role_postgres_user: &quot;joplin&quot;</span><span class="diff-line add">+joplin_role_postgres_password: &quot;joplin&quot;</span><span class="diff-line add">+joplin_role_postgres_docker_env_db: &quot;joplin&quot;</span><span class="diff-line add">+joplin_role_postgres_docker_image_tag: &quot;13&quot;</span><span class="diff-line add">+joplin_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+joplin_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;joplin&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;joplin&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+joplin_role_postgres_paths_folder: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ joplin_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-joplin_paths_folder: &quot;{{ joplin_name }}&quot;</span><span class="diff-line del">-joplin_paths_location: &quot;{{ server_appdata_path }}/{{ joplin_paths_folder }}&quot;</span><span class="diff-line del">-joplin_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ joplin_paths_location }}&quot;</span><span class="diff-line add">+joplin_role_paths_folder: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_paths_location: &quot;{{ server_appdata_path }}/{{ joplin_role_paths_folder }}&quot;</span><span class="diff-line add">+joplin_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ joplin_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-joplin_web_subdomain: &quot;{{ joplin_name }}&quot;</span><span class="diff-line del">-joplin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-joplin_web_port: &quot;22300&quot;</span><span class="diff-line del">-joplin_web_url: &quot;{{ &#x27;https://&#x27; + (joplin_web_subdomain + &#x27;.&#x27; + joplin_web_domain</span><span class="diff-line del">-                 if (joplin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else joplin_web_domain) }}&quot;</span><span class="diff-line add">+joplin_role_web_subdomain: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+joplin_role_web_port: &quot;22300&quot;</span><span class="diff-line add">+joplin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;joplin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;joplin&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;joplin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;joplin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-joplin_dns_record: &quot;{{ joplin_web_subdomain }}&quot;</span><span class="diff-line del">-joplin_dns_zone: &quot;{{ joplin_web_domain }}&quot;</span><span class="diff-line del">-joplin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+joplin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+joplin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+joplin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-joplin_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-joplin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-joplin_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-joplin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-joplin_traefik_enabled: true</span><span class="diff-line del">-joplin_traefik_api_enabled: false</span><span class="diff-line del">-joplin_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+joplin_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+joplin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+joplin_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+joplin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+joplin_role_traefik_enabled: true</span><span class="diff-line add">+joplin_role_traefik_api_enabled: false</span><span class="diff-line add">+joplin_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-joplin_docker_container: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_docker_container: &quot;{{ joplin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-joplin_docker_image_pull: true</span><span class="diff-line del">-joplin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-joplin_docker_image: &quot;joplin/server:{{ joplin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-joplin_docker_ports_defaults: []</span><span class="diff-line del">-joplin_docker_ports_custom: []</span><span class="diff-line del">-joplin_docker_ports: &quot;{{ joplin_docker_ports_defaults</span><span class="diff-line del">-                         + joplin_docker_ports_custom }}&quot;</span><span class="diff-line add">+joplin_role_docker_image_pull: true</span><span class="diff-line add">+joplin_role_docker_image_repo: &quot;joplin/server&quot;</span><span class="diff-line add">+joplin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+joplin_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;joplin&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-joplin_docker_envs_default:</span><span class="diff-line add">+joplin_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  APP_BASE_URL: &quot;{{ joplin_web_url }}&quot;</span><span class="diff-line add">+  APP_BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line context">   APP_PORT: &quot;22300&quot;</span><span class="diff-line del">-  POSTGRES_PASSWORD: &quot;{{ joplin_postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  POSTGRES_DATABASE: &quot;{{ joplin_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-  POSTGRES_USER: &quot;{{ joplin_postgres_docker_env_user }}&quot;</span><span class="diff-line add">+  POSTGRES_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_DATABASE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line context">   POSTGRES_PORT: &quot;5432&quot;</span><span class="diff-line del">-  POSTGRES_HOST: &quot;{{ joplin_postgres_name }}&quot;</span><span class="diff-line add">+  POSTGRES_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line context">   DB_CLIENT: &quot;pg&quot;</span><span class="diff-line del">-joplin_docker_envs_custom: {}</span><span class="diff-line del">-joplin_docker_envs: &quot;{{ joplin_docker_envs_default</span><span class="diff-line del">-                        | combine(joplin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-joplin_docker_commands_default: []</span><span class="diff-line del">-joplin_docker_commands_custom: []</span><span class="diff-line del">-joplin_docker_commands: &quot;{{ joplin_docker_commands_default</span><span class="diff-line del">-                            + joplin_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-joplin_docker_volumes_default: []</span><span class="diff-line del">-joplin_docker_volumes_custom: []</span><span class="diff-line del">-joplin_docker_volumes: &quot;{{ joplin_docker_volumes_default</span><span class="diff-line del">-                           + joplin_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-joplin_docker_devices_default: []</span><span class="diff-line del">-joplin_docker_devices_custom: []</span><span class="diff-line del">-joplin_docker_devices: &quot;{{ joplin_docker_devices_default</span><span class="diff-line del">-                           + joplin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-joplin_docker_hosts_default: {}</span><span class="diff-line del">-joplin_docker_hosts_custom: {}</span><span class="diff-line del">-joplin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(joplin_docker_hosts_default)</span><span class="diff-line del">-                         | combine(joplin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-joplin_docker_labels_default: {}</span><span class="diff-line del">-joplin_docker_labels_custom: {}</span><span class="diff-line del">-joplin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(joplin_docker_labels_default)</span><span class="diff-line del">-                          | combine(joplin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+joplin_role_docker_envs_custom: {}</span><span class="diff-line add">+joplin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;joplin&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;joplin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-joplin_docker_hostname: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_docker_hostname: &quot;{{ joplin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-joplin_docker_networks_alias: &quot;{{ joplin_name }}&quot;</span><span class="diff-line del">-joplin_docker_networks_default: []</span><span class="diff-line del">-joplin_docker_networks_custom: []</span><span class="diff-line del">-joplin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + joplin_docker_networks_default</span><span class="diff-line del">-                            + joplin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-joplin_docker_capabilities_default: []</span><span class="diff-line del">-joplin_docker_capabilities_custom: []</span><span class="diff-line del">-joplin_docker_capabilities: &quot;{{ joplin_docker_capabilities_default</span><span class="diff-line del">-                                + joplin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-joplin_docker_security_opts_default: []</span><span class="diff-line del">-joplin_docker_security_opts_custom: []</span><span class="diff-line del">-joplin_docker_security_opts: &quot;{{ joplin_docker_security_opts_default</span><span class="diff-line del">-                                 + joplin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+joplin_role_docker_networks_alias: &quot;{{ joplin_name }}&quot;</span><span class="diff-line add">+joplin_role_docker_networks_default: []</span><span class="diff-line add">+joplin_role_docker_networks_custom: []</span><span class="diff-line add">+joplin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;joplin&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-joplin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+joplin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-joplin_docker_state: started</span><span class="diff-line add">+joplin_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-joplin_depends_on: &quot;{{ joplin_postgres_name }}&quot;</span><span class="diff-line del">-joplin_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-joplin_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+joplin_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+joplin_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+joplin_role_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+# Create Docker Container Timeout</span><span class="diff-line add">+joplin_docker_create_timeout: 300</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-204">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/joplin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,27 +10,29 @@</span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ joplin_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ joplin_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-</span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ joplin_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ joplin_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ joplin_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ joplin_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_env_user: &quot;{{ joplin_postgres_docker_env_user }}&quot;</span><span class="diff-line del">-    postgres_docker_env_password: &quot;{{ joplin_postgres_docker_env_password }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ joplin_postgres_paths_folder }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;joplin&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;joplin&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;joplin&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-205">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/karakeep/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,71 +14,69 @@</span><span class="diff-line context"> karakeep_name: karakeep</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Container Dependant Variables</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+karakeep_meili_name: &quot;meilisearch&quot;</span><span class="diff-line add">+karakeep_meili_port: &quot;7700&quot;</span><span class="diff-line add">+karakeep_chrome_name: &quot;chrome&quot;</span><span class="diff-line add">+karakeep_chrome_port: &quot;9222&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-karakeep_paths_folder: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line del">-karakeep_paths_location: &quot;{{ server_appdata_path }}/{{ karakeep_paths_folder }}&quot;</span><span class="diff-line del">-karakeep_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ karakeep_paths_location }}&quot;</span><span class="diff-line add">+karakeep_role_paths_folder: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line add">+karakeep_role_paths_location: &quot;{{ server_appdata_path }}/{{ karakeep_role_paths_folder }}&quot;</span><span class="diff-line add">+karakeep_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ karakeep_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-karakeep_web_subdomain: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line del">-karakeep_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-karakeep_web_port: &quot;3000&quot;</span><span class="diff-line del">-karakeep_web_url: &quot;{{ &#x27;https://&#x27; + (karakeep_web_subdomain + &#x27;.&#x27; + karakeep_web_domain</span><span class="diff-line del">-                   if (karakeep_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else karakeep_web_domain) }}&quot;</span><span class="diff-line add">+karakeep_role_web_subdomain: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line add">+karakeep_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+karakeep_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+karakeep_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;karakeep&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;karakeep&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;karakeep&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;karakeep&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-karakeep_dns_record: &quot;{{ karakeep_web_subdomain }}&quot;</span><span class="diff-line del">-karakeep_dns_zone: &quot;{{ karakeep_web_domain }}&quot;</span><span class="diff-line del">-karakeep_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+karakeep_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line add">+karakeep_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line add">+karakeep_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-karakeep_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-karakeep_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-karakeep_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-karakeep_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-karakeep_traefik_enabled: true</span><span class="diff-line del">-karakeep_traefik_api_enabled: false</span><span class="diff-line del">-karakeep_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+karakeep_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+karakeep_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+karakeep_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+karakeep_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+karakeep_role_traefik_enabled: true</span><span class="diff-line add">+karakeep_role_traefik_api_enabled: false</span><span class="diff-line add">+karakeep_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-karakeep_docker_container: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Dependant Container Settings</span><span class="diff-line del">-karakeep_meili_name: &quot;meilisearch&quot;</span><span class="diff-line del">-karakeep_meili_port: &quot;7700&quot;</span><span class="diff-line del">-karakeep_chrome_name: &quot;chrome&quot;</span><span class="diff-line del">-karakeep_chrome_port: &quot;9222&quot;</span><span class="diff-line add">+karakeep_role_docker_container: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-karakeep_docker_image_pull: true</span><span class="diff-line del">-karakeep_docker_image: &quot;ghcr.io/karakeep-app/karakeep&quot;</span><span class="diff-line del">-karakeep_docker_image_tag: &quot;release&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-karakeep_docker_ports_defaults: []</span><span class="diff-line del">-karakeep_docker_ports_custom: []</span><span class="diff-line del">-karakeep_docker_ports: &quot;{{ karakeep_docker_ports_defaults</span><span class="diff-line del">-                          + karakeep_docker_ports_custom }}&quot;</span><span class="diff-line add">+karakeep_role_docker_image_pull: true</span><span class="diff-line add">+karakeep_role_docker_image_repo: &quot;ghcr.io/karakeep-app/karakeep&quot;</span><span class="diff-line add">+karakeep_role_docker_image_tag: &quot;release&quot;</span><span class="diff-line add">+karakeep_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;karakeep&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-karakeep_docker_envs_default:</span><span class="diff-line add">+karakeep_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line hunk">@@ -87,70 +85,32 @@</span><span class="diff-line context">   BROWSER_WEB_URL: &quot;{{ &#x27;http://&#x27; + karakeep_chrome_name + &#x27;:&#x27; + karakeep_chrome_port }}&quot;</span><span class="diff-line context">   NEXTAUTH_SECRET: &quot;{{ karakeep_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">   MEILI_MASTER_KEY: &quot;{{ meilisearch_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line del">-  NEXTAUTH_URL: &quot;{{ karakeep_web_url }}&quot;</span><span class="diff-line add">+  NEXTAUTH_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line context">   DATA_DIR: &quot;/data&quot;</span><span class="diff-line del">-karakeep_docker_envs_custom: {}</span><span class="diff-line del">-karakeep_docker_envs: &quot;{{ karakeep_docker_envs_default</span><span class="diff-line del">-                         | combine(karakeep_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-karakeep_docker_commands_default: []</span><span class="diff-line del">-karakeep_docker_commands_custom: []</span><span class="diff-line del">-karakeep_docker_commands: &quot;{{ karakeep_docker_commands_default</span><span class="diff-line del">-                             + karakeep_docker_commands_custom }}&quot;</span><span class="diff-line add">+karakeep_role_docker_envs_custom: {}</span><span class="diff-line add">+karakeep_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;karakeep&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;karakeep&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-karakeep_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ karakeep_paths_location }}/data:/data&quot;</span><span class="diff-line del">-karakeep_docker_volumes_custom: []</span><span class="diff-line del">-karakeep_docker_volumes: &quot;{{ karakeep_docker_volumes_default</span><span class="diff-line del">-                            + karakeep_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-karakeep_docker_devices_default: []</span><span class="diff-line del">-karakeep_docker_devices_custom: []</span><span class="diff-line del">-karakeep_docker_devices: &quot;{{ karakeep_docker_devices_default</span><span class="diff-line del">-                            + karakeep_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-karakeep_docker_hosts_default: {}</span><span class="diff-line del">-karakeep_docker_hosts_custom: {}</span><span class="diff-line del">-karakeep_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(karakeep_docker_hosts_default)</span><span class="diff-line del">-                          | combine(karakeep_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-karakeep_docker_labels_default: {}</span><span class="diff-line del">-karakeep_docker_labels_custom: {}</span><span class="diff-line del">-karakeep_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(karakeep_docker_labels_default)</span><span class="diff-line del">-                           | combine(karakeep_docker_labels_custom) }}&quot;</span><span class="diff-line add">+karakeep_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;karakeep&#x27;) }}/data:/data&quot;</span><span class="diff-line add">+karakeep_role_docker_volumes_custom: []</span><span class="diff-line add">+karakeep_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;karakeep&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-karakeep_docker_hostname: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line add">+karakeep_role_docker_hostname: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-karakeep_docker_networks_alias: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line del">-karakeep_docker_networks_default: []</span><span class="diff-line del">-karakeep_docker_networks_custom: []</span><span class="diff-line del">-karakeep_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + karakeep_docker_networks_default</span><span class="diff-line del">-                             + karakeep_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-karakeep_docker_capabilities_default: []</span><span class="diff-line del">-karakeep_docker_capabilities_custom: []</span><span class="diff-line del">-karakeep_docker_capabilities: &quot;{{ karakeep_docker_capabilities_default</span><span class="diff-line del">-                                 + karakeep_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-karakeep_docker_security_opts_default: []</span><span class="diff-line del">-karakeep_docker_security_opts_custom: []</span><span class="diff-line del">-karakeep_docker_security_opts: &quot;{{ karakeep_docker_security_opts_default</span><span class="diff-line del">-                                  + karakeep_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+karakeep_role_docker_networks_alias: &quot;{{ karakeep_name }}&quot;</span><span class="diff-line add">+karakeep_role_docker_networks_default: []</span><span class="diff-line add">+karakeep_role_docker_networks_custom: []</span><span class="diff-line add">+karakeep_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;karakeep&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;karakeep&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-karakeep_docker_restart_policy: unless-stopped</span><span class="diff-line add">+karakeep_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-karakeep_docker_state: started</span><span class="diff-line add">+karakeep_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-206">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/karakeep/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,31 +12,31 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;hoarder&quot;</span><span class="diff-line add">+    container_name: &quot;hoarder&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if legacy folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/hoarder&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/hoarder&quot;</span><span class="diff-line context">   register: karakeep_legacy_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if new folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/karakeep&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/karakeep&quot;</span><span class="diff-line context">   register: karakeep_new_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate karakeep directory</span><span class="diff-line context">   migrate_folder:</span><span class="diff-line del">-    legacy_path: /opt/hoarder</span><span class="diff-line del">-    new_path: &quot;{{ karakeep_paths_location }}&quot;</span><span class="diff-line add">+    legacy_path: &quot;{{ server_appdata_path }}/hoarder&quot;</span><span class="diff-line add">+    new_path: &quot;{{ karakeep_role_paths_location }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span><span class="diff-line context">     recurse: false</span><span class="diff-line context">   when: karakeep_legacy_folder.stat.exists and not karakeep_new_folder.stat.exists</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if &#x27;/opt/saltbox/hoarder.ini&#x27; folder exists</span><span class="diff-line add">+- name: Check if &#x27;{{ server_appdata_path }}/saltbox/hoarder.ini&#x27; folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/saltbox/hoarder.ini&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/saltbox/hoarder.ini&quot;</span><span class="diff-line context">   register: hoarder_fact_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migration Block</span><span class="diff-line hunk">@@ -50,6 +50,7 @@</span><span class="diff-line context">           secret_key: &quot;&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">       register: hoarder_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context">     - name: &quot;Save Karakeep Saltbox facts&quot;</span><span class="diff-line hunk">@@ -60,6 +61,7 @@</span><span class="diff-line context">           secret_key: &quot;{{ hoarder_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: &quot;Delete legacy Hoarder Saltbox facts&quot;</span><span class="diff-line context">       saltbox_facts:</span><span class="diff-line hunk">@@ -67,6 +69,7 @@</span><span class="diff-line context">         instance: &quot;hoarder&quot;</span><span class="diff-line context">         delete_type: &quot;role&quot;</span><span class="diff-line context">         method: &quot;delete&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Save Karakeep Saltbox Facts&quot;</span><span class="diff-line context">   saltbox_facts:</span><span class="diff-line hunk">@@ -76,6 +79,7 @@</span><span class="diff-line context">       secret_key: &quot;{{ lookup(&#x27;ansible.builtin.password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_letters&#x27;, &#x27;digits&#x27;], length=36) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: karakeep_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Chrome role</span><span class="diff-line hunk">@@ -89,9 +93,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-207">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kavita/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,125 +17,82 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kavita_paths_folder: &quot;{{ kavita_name }}&quot;</span><span class="diff-line del">-kavita_paths_location: &quot;{{ server_appdata_path }}/{{ kavita_paths_folder }}&quot;</span><span class="diff-line del">-kavita_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ kavita_paths_location }}&quot;</span><span class="diff-line add">+kavita_role_paths_folder: &quot;{{ kavita_name }}&quot;</span><span class="diff-line add">+kavita_role_paths_location: &quot;{{ server_appdata_path }}/{{ kavita_role_paths_folder }}&quot;</span><span class="diff-line add">+kavita_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ kavita_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kavita_web_subdomain: &quot;{{ kavita_name }}&quot;</span><span class="diff-line del">-kavita_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-kavita_web_port: &quot;5000&quot;</span><span class="diff-line del">-kavita_web_url: &quot;{{ &#x27;https://&#x27; + (kavita_web_subdomain + &#x27;.&#x27; + kavita_web_domain</span><span class="diff-line del">-                 if (kavita_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else kavita_web_domain) }}&quot;</span><span class="diff-line add">+kavita_role_web_subdomain: &quot;{{ kavita_name }}&quot;</span><span class="diff-line add">+kavita_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+kavita_role_web_port: &quot;5000&quot;</span><span class="diff-line add">+kavita_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kavita&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kavita&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kavita&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kavita&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kavita_dns_record: &quot;{{ kavita_web_subdomain }}&quot;</span><span class="diff-line del">-kavita_dns_zone: &quot;{{ kavita_web_domain }}&quot;</span><span class="diff-line del">-kavita_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+kavita_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kavita&#x27;) }}&quot;</span><span class="diff-line add">+kavita_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kavita&#x27;) }}&quot;</span><span class="diff-line add">+kavita_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kavita_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-kavita_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-kavita_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-kavita_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-kavita_traefik_enabled: true</span><span class="diff-line del">-kavita_traefik_api_enabled: false</span><span class="diff-line del">-kavita_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+kavita_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+kavita_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+kavita_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+kavita_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+kavita_role_traefik_enabled: true</span><span class="diff-line add">+kavita_role_traefik_api_enabled: false</span><span class="diff-line add">+kavita_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-kavita_docker_container: &quot;{{ kavita_name }}&quot;</span><span class="diff-line add">+kavita_role_docker_container: &quot;{{ kavita_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-kavita_docker_image_pull: true</span><span class="diff-line del">-kavita_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-kavita_docker_image: &quot;jvmilazz0/kavita:{{ kavita_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-kavita_docker_ports_defaults: []</span><span class="diff-line del">-kavita_docker_ports_custom: []</span><span class="diff-line del">-kavita_docker_ports: &quot;{{ kavita_docker_ports_defaults</span><span class="diff-line del">-                         + kavita_docker_ports_custom }}&quot;</span><span class="diff-line add">+kavita_role_docker_image_pull: true</span><span class="diff-line add">+kavita_role_docker_image_repo: &quot;jvmilazz0/kavita&quot;</span><span class="diff-line add">+kavita_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+kavita_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;kavita&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;kavita&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-kavita_docker_envs_default:</span><span class="diff-line add">+kavita_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-kavita_docker_envs_custom: {}</span><span class="diff-line del">-kavita_docker_envs: &quot;{{ kavita_docker_envs_default</span><span class="diff-line del">-                        | combine(kavita_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-kavita_docker_commands_default: []</span><span class="diff-line del">-kavita_docker_commands_custom: []</span><span class="diff-line del">-kavita_docker_commands: &quot;{{ kavita_docker_commands_default</span><span class="diff-line del">-                            + kavita_docker_commands_custom }}&quot;</span><span class="diff-line add">+kavita_role_docker_envs_custom: {}</span><span class="diff-line add">+kavita_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;kavita&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;kavita&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-kavita_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ kavita_paths_location }}:/kavita/config&quot;</span><span class="diff-line del">-kavita_docker_volumes_custom: []</span><span class="diff-line del">-kavita_docker_volumes: &quot;{{ kavita_docker_volumes_default</span><span class="diff-line del">-                           + kavita_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-kavita_docker_devices_default: []</span><span class="diff-line del">-kavita_docker_devices_custom: []</span><span class="diff-line del">-kavita_docker_devices: &quot;{{ kavita_docker_devices_default</span><span class="diff-line del">-                           + kavita_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-kavita_docker_hosts_default: {}</span><span class="diff-line del">-kavita_docker_hosts_custom: {}</span><span class="diff-line del">-kavita_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(kavita_docker_hosts_default)</span><span class="diff-line del">-                         | combine(kavita_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-kavita_docker_labels_default: {}</span><span class="diff-line del">-kavita_docker_labels_custom: {}</span><span class="diff-line del">-kavita_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(kavita_docker_labels_default)</span><span class="diff-line del">-                          | combine(kavita_docker_labels_custom) }}&quot;</span><span class="diff-line add">+kavita_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kavita&#x27;) }}:/kavita/config&quot;</span><span class="diff-line add">+kavita_role_docker_volumes_custom: []</span><span class="diff-line add">+kavita_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;kavita&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;kavita&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-kavita_docker_hostname: &quot;{{ kavita_name }}&quot;</span><span class="diff-line add">+kavita_role_docker_hostname: &quot;{{ kavita_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-kavita_docker_networks_alias: &quot;{{ kavita_name }}&quot;</span><span class="diff-line del">-kavita_docker_networks_default: []</span><span class="diff-line del">-kavita_docker_networks_custom: []</span><span class="diff-line del">-kavita_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + kavita_docker_networks_default</span><span class="diff-line del">-                            + kavita_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-kavita_docker_capabilities_default: []</span><span class="diff-line del">-kavita_docker_capabilities_custom: []</span><span class="diff-line del">-kavita_docker_capabilities: &quot;{{ kavita_docker_capabilities_default</span><span class="diff-line del">-                                + kavita_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-kavita_docker_security_opts_default: []</span><span class="diff-line del">-kavita_docker_security_opts_custom: []</span><span class="diff-line del">-kavita_docker_security_opts: &quot;{{ kavita_docker_security_opts_default</span><span class="diff-line del">-                                 + kavita_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+kavita_role_docker_networks_alias: &quot;{{ kavita_name }}&quot;</span><span class="diff-line add">+kavita_role_docker_networks_default: []</span><span class="diff-line add">+kavita_role_docker_networks_custom: []</span><span class="diff-line add">+kavita_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;kavita&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;kavita&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-kavita_docker_restart_policy: unless-stopped</span><span class="diff-line add">+kavita_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-kavita_docker_state: started</span><span class="diff-line add">+kavita_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-208">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kavita/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-209">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kcptun_client/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -22,18 +22,18 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   with_items:</span><span class="diff-line del">-    - /opt/kcptun-client</span><span class="diff-line del">-    - /opt/kcptun-client/config</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/kcptun-client&quot;</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/kcptun-client/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Check if kcptun-client config file exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/kcptun-client/config/config.json&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/kcptun-client/config/config.json&quot;</span><span class="diff-line context">   register: kcptun_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Import config file if it doesnt exist&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: config.json.j2</span><span class="diff-line del">-    dest: /opt/kcptun-client/config/config.json</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/kcptun-client/config/config.json&quot;</span><span class="diff-line context">     force: true</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -44,11 +44,11 @@</span><span class="diff-line context">   community.docker.docker_container:</span><span class="diff-line context">     name: kcptun-client</span><span class="diff-line context">     image: horjulf/kcptun:latest</span><span class="diff-line del">-    pull: yes</span><span class="diff-line add">+    pull: true</span><span class="diff-line context">     env:</span><span class="diff-line context">       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">     volumes:</span><span class="diff-line del">-      - &quot;/opt/kcptun-client/config:/config&quot;</span><span class="diff-line add">+      - &quot;{{ server_appdata_path }}/kcptun-client/config:/config&quot;</span><span class="diff-line context">     command: &quot;/bin/client -c /config/config.json&quot;</span><span class="diff-line context">     labels:</span><span class="diff-line context">       &quot;com.github.saltbox.saltbox_managed&quot;: &quot;true&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-210">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kcptun_server/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -22,18 +22,18 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   with_items:</span><span class="diff-line del">-    - /opt/kcptun-server</span><span class="diff-line del">-    - /opt/kcptun-server/config</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/kcptun-server&quot;</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/kcptun-server/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Check if kcptun-server config file exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/kcptun-server/config/config.json&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/kcptun-server/config/config.json&quot;</span><span class="diff-line context">   register: kcptun_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Import config file if it doesnt exist&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: config.json.j2</span><span class="diff-line del">-    dest: /opt/kcptun-server/config/config.json</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/kcptun-server/config/config.json&quot;</span><span class="diff-line context">     force: true</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -48,7 +48,7 @@</span><span class="diff-line context">     env:</span><span class="diff-line context">       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">     volumes:</span><span class="diff-line del">-      - &quot;/opt/kcptun-server/config:/config&quot;</span><span class="diff-line add">+      - &quot;{{ server_appdata_path }}/kcptun-server/config:/config&quot;</span><span class="diff-line context">     command: &quot;/bin/server -c /config/config.json&quot;</span><span class="diff-line context">     labels:</span><span class="diff-line context">       &quot;com.github.saltbox.saltbox_managed&quot;: &quot;true&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-211">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kitana/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,90 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kitana_paths_folder: &quot;{{ kitana_name }}&quot;</span><span class="diff-line del">-kitana_paths_location: &quot;{{ server_appdata_path }}/{{ kitana_paths_folder }}&quot;</span><span class="diff-line del">-kitana_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ kitana_paths_location }}&quot;</span><span class="diff-line del">-kitana_paths_config_location: &quot;{{ kitana_paths_location }}/config.yml&quot;</span><span class="diff-line add">+kitana_role_paths_folder: &quot;{{ kitana_name }}&quot;</span><span class="diff-line add">+kitana_role_paths_location: &quot;{{ server_appdata_path }}/{{ kitana_role_paths_folder }}&quot;</span><span class="diff-line add">+kitana_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ kitana_role_paths_location }}&quot;</span><span class="diff-line add">+kitana_role_paths_config_location: &quot;{{ kitana_role_paths_location }}/config.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kitana_web_subdomain: &quot;{{ kitana_name }}&quot;</span><span class="diff-line del">-kitana_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-kitana_web_port: &quot;31337&quot;</span><span class="diff-line del">-kitana_web_url: &quot;{{ &#x27;https://&#x27; + (kitana_web_subdomain + &#x27;.&#x27; + kitana_web_domain</span><span class="diff-line del">-                 if (kitana_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else kitana_web_domain) }}&quot;</span><span class="diff-line add">+kitana_role_web_subdomain: &quot;{{ kitana_name }}&quot;</span><span class="diff-line add">+kitana_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+kitana_role_web_port: &quot;31337&quot;</span><span class="diff-line add">+kitana_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kitana&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kitana&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kitana&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kitana&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kitana_dns_record: &quot;{{ kitana_web_subdomain }}&quot;</span><span class="diff-line del">-kitana_dns_zone: &quot;{{ kitana_web_domain }}&quot;</span><span class="diff-line del">-kitana_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+kitana_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line add">+kitana_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line add">+kitana_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kitana_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-kitana_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-kitana_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-kitana_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-kitana_traefik_enabled: true</span><span class="diff-line del">-kitana_traefik_api_enabled: false</span><span class="diff-line del">-kitana_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+kitana_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+kitana_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+kitana_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+kitana_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+kitana_role_traefik_enabled: true</span><span class="diff-line add">+kitana_role_traefik_api_enabled: false</span><span class="diff-line add">+kitana_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-kitana_docker_container: &quot;{{ kitana_name }}&quot;</span><span class="diff-line add">+kitana_role_docker_container: &quot;{{ kitana_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-kitana_docker_image_pull: true</span><span class="diff-line del">-kitana_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-kitana_docker_image: &quot;pannal/kitana:{{ kitana_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-kitana_docker_ports_defaults: []</span><span class="diff-line del">-kitana_docker_ports_custom: []</span><span class="diff-line del">-kitana_docker_ports: &quot;{{ kitana_docker_ports_defaults</span><span class="diff-line del">-                         + kitana_docker_ports_custom }}&quot;</span><span class="diff-line add">+kitana_role_docker_image_pull: true</span><span class="diff-line add">+kitana_role_docker_image_repo: &quot;pannal/kitana&quot;</span><span class="diff-line add">+kitana_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+kitana_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;kitana&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-kitana_docker_envs_default:</span><span class="diff-line add">+kitana_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-kitana_docker_envs_custom: {}</span><span class="diff-line del">-kitana_docker_envs: &quot;{{ kitana_docker_envs_default</span><span class="diff-line del">-                        | combine(kitana_docker_envs_custom) }}&quot;</span><span class="diff-line add">+kitana_role_docker_envs_custom: {}</span><span class="diff-line add">+kitana_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;kitana&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;kitana&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Commands</span><span class="diff-line del">-kitana_docker_commands_default:</span><span class="diff-line add">+kitana_role_docker_commands_default:</span><span class="diff-line context">   - &quot;-P&quot;</span><span class="diff-line del">-kitana_docker_commands_custom: []</span><span class="diff-line del">-kitana_docker_commands: &quot;{{ kitana_docker_commands_default</span><span class="diff-line del">-                            + kitana_docker_commands_custom }}&quot;</span><span class="diff-line add">+kitana_role_docker_commands_custom: []</span><span class="diff-line add">+kitana_role_docker_commands: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_default&#x27;, role=&#x27;kitana&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_custom&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-kitana_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ kitana_paths_location }}:/app/data&quot;</span><span class="diff-line del">-kitana_docker_volumes_custom: []</span><span class="diff-line del">-kitana_docker_volumes: &quot;{{ kitana_docker_volumes_default</span><span class="diff-line del">-                           + kitana_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-kitana_docker_devices_default: []</span><span class="diff-line del">-kitana_docker_devices_custom: []</span><span class="diff-line del">-kitana_docker_devices: &quot;{{ kitana_docker_devices_default</span><span class="diff-line del">-                           + kitana_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-kitana_docker_hosts_default: {}</span><span class="diff-line del">-kitana_docker_hosts_custom: {}</span><span class="diff-line del">-kitana_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(kitana_docker_hosts_default)</span><span class="diff-line del">-                         | combine(kitana_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-kitana_docker_labels_default: {}</span><span class="diff-line del">-kitana_docker_labels_custom: {}</span><span class="diff-line del">-kitana_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(kitana_docker_labels_default)</span><span class="diff-line del">-                          | combine(kitana_docker_labels_custom) }}&quot;</span><span class="diff-line add">+kitana_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kitana&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+kitana_role_docker_volumes_custom: []</span><span class="diff-line add">+kitana_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;kitana&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-kitana_docker_hostname: &quot;{{ kitana_name }}&quot;</span><span class="diff-line add">+kitana_role_docker_hostname: &quot;{{ kitana_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-kitana_docker_networks_alias: &quot;{{ kitana_name }}&quot;</span><span class="diff-line del">-kitana_docker_networks_default: []</span><span class="diff-line del">-kitana_docker_networks_custom: []</span><span class="diff-line del">-kitana_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + kitana_docker_networks_default</span><span class="diff-line del">-                            + kitana_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-kitana_docker_capabilities_default: []</span><span class="diff-line del">-kitana_docker_capabilities_custom: []</span><span class="diff-line del">-kitana_docker_capabilities: &quot;{{ kitana_docker_capabilities_default</span><span class="diff-line del">-                                + kitana_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-kitana_docker_security_opts_default: []</span><span class="diff-line del">-kitana_docker_security_opts_custom: []</span><span class="diff-line del">-kitana_docker_security_opts: &quot;{{ kitana_docker_security_opts_default</span><span class="diff-line del">-                                 + kitana_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+kitana_role_docker_networks_alias: &quot;{{ kitana_name }}&quot;</span><span class="diff-line add">+kitana_role_docker_networks_default: []</span><span class="diff-line add">+kitana_role_docker_networks_custom: []</span><span class="diff-line add">+kitana_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;kitana&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;kitana&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-kitana_docker_restart_policy: unless-stopped</span><span class="diff-line add">+kitana_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-kitana_docker_state: started</span><span class="diff-line add">+kitana_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-212">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kitana/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-213">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/koel/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,145 +17,102 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-koel_paths_folder: &quot;{{ koel_name }}&quot;</span><span class="diff-line del">-koel_paths_location: &quot;{{ server_appdata_path }}/{{ koel_paths_folder }}&quot;</span><span class="diff-line del">-koel_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}/app&quot;</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}/app/covers&quot;</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}/app/search-indexes&quot;</span><span class="diff-line add">+koel_role_paths_folder: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+koel_role_paths_location: &quot;{{ server_appdata_path }}/{{ koel_role_paths_folder }}&quot;</span><span class="diff-line add">+koel_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ koel_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ koel_role_paths_location }}/app&quot;</span><span class="diff-line add">+  - &quot;{{ koel_role_paths_location }}/app/covers&quot;</span><span class="diff-line add">+  - &quot;{{ koel_role_paths_location }}/app/search-indexes&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Music&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-koel_web_subdomain: &quot;{{ koel_name }}&quot;</span><span class="diff-line del">-koel_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-koel_web_port: &quot;80&quot;</span><span class="diff-line del">-koel_web_url: &quot;{{ &#x27;https://&#x27; + (koel_web_subdomain + &#x27;.&#x27; + koel_web_domain</span><span class="diff-line del">-               if (koel_web_subdomain | length &gt; 0)</span><span class="diff-line del">-               else koel_web_domain) }}&quot;</span><span class="diff-line add">+koel_role_web_subdomain: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+koel_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+koel_role_web_port: &quot;80&quot;</span><span class="diff-line add">+koel_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;koel&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;koel&#x27;)</span><span class="diff-line add">+                    if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;koel&#x27;) | length &gt; 0)</span><span class="diff-line add">+                    else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;koel&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-koel_dns_record: &quot;{{ koel_web_subdomain }}&quot;</span><span class="diff-line del">-koel_dns_zone: &quot;{{ koel_web_domain }}&quot;</span><span class="diff-line del">-koel_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+koel_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line add">+koel_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line add">+koel_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-koel_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-koel_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-koel_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-koel_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-koel_traefik_enabled: true</span><span class="diff-line del">-koel_traefik_api_enabled: true</span><span class="diff-line del">-koel_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+koel_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+koel_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+koel_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+koel_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+koel_role_traefik_enabled: true</span><span class="diff-line add">+koel_role_traefik_api_enabled: true</span><span class="diff-line add">+koel_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-koel_docker_container: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+koel_role_docker_container: &quot;{{ koel_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-koel_docker_image_pull: true</span><span class="diff-line del">-koel_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-koel_docker_image: &quot;phanan/koel:{{ koel_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-koel_docker_ports_defaults: []</span><span class="diff-line del">-koel_docker_ports_custom: []</span><span class="diff-line del">-koel_docker_ports: &quot;{{ koel_docker_ports_defaults</span><span class="diff-line del">-                       + koel_docker_ports_custom }}&quot;</span><span class="diff-line add">+koel_role_docker_image_pull: true</span><span class="diff-line add">+koel_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+koel_role_docker_image_repo: &quot;phanan/koel&quot;</span><span class="diff-line add">+koel_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;koel&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-koel_docker_envs_default:</span><span class="diff-line add">+koel_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   DB_CONNECTION: &quot;mysql&quot;</span><span class="diff-line context">   DB_HOST: &quot;{{ koel_name }}-mariadb&quot;</span><span class="diff-line context">   DB_PORT: &quot;3306&quot;</span><span class="diff-line context">   DB_DATABASE: &quot;{{ koel_name }}&quot;</span><span class="diff-line context">   DB_USERNAME: &quot;root&quot;</span><span class="diff-line del">-  DB_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+  DB_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">   APP_KEY: &quot;base64:{{ koel_secret_key }}&quot;</span><span class="diff-line del">-  APP_URL: &quot;{{ koel_web_url }}&quot;</span><span class="diff-line add">+  APP_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line context">   FORCE_HTTPS: &quot;true&quot;</span><span class="diff-line del">-koel_docker_envs_custom: {}</span><span class="diff-line del">-koel_docker_envs: &quot;{{ koel_docker_envs_default</span><span class="diff-line del">-                      | combine(koel_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-koel_docker_commands_default: []</span><span class="diff-line del">-koel_docker_commands_custom: []</span><span class="diff-line del">-koel_docker_commands: &quot;{{ koel_docker_commands_default</span><span class="diff-line del">-                          + koel_docker_commands_custom }}&quot;</span><span class="diff-line add">+koel_role_docker_envs_custom: {}</span><span class="diff-line add">+koel_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;koel&#x27;)</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;koel&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-koel_docker_volumes_default:</span><span class="diff-line add">+koel_role_docker_volumes_default:</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Music:/music:ro&quot;</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}/app/covers:/var/www/html/public/img/covers&quot;</span><span class="diff-line del">-  - &quot;{{ koel_paths_location }}/app/search-indexes:/var/www/html/storage/search-indexes&quot;</span><span class="diff-line del">-koel_docker_volumes_custom: []</span><span class="diff-line del">-koel_docker_volumes: &quot;{{ koel_docker_volumes_default</span><span class="diff-line del">-                         + koel_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-koel_docker_devices_default: []</span><span class="diff-line del">-koel_docker_devices_custom: []</span><span class="diff-line del">-koel_docker_devices: &quot;{{ koel_docker_devices_default</span><span class="diff-line del">-                         + koel_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-koel_docker_hosts_default: {}</span><span class="diff-line del">-koel_docker_hosts_custom: {}</span><span class="diff-line del">-koel_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                       | combine(koel_docker_hosts_default)</span><span class="diff-line del">-                       | combine(koel_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-koel_docker_labels_default: {}</span><span class="diff-line del">-koel_docker_labels_custom: {}</span><span class="diff-line del">-koel_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                        | combine(koel_docker_labels_default)</span><span class="diff-line del">-                        | combine(koel_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) }}/app/covers:/var/www/html/public/img/covers&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) }}/app/search-indexes:/var/www/html/storage/search-indexes&quot;</span><span class="diff-line add">+koel_role_docker_volumes_custom: []</span><span class="diff-line add">+koel_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;koel&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-koel_docker_hostname: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+koel_role_docker_hostname: &quot;{{ koel_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-koel_docker_networks_alias: &quot;{{ koel_name }}&quot;</span><span class="diff-line del">-koel_docker_networks_default: []</span><span class="diff-line del">-koel_docker_networks_custom: []</span><span class="diff-line del">-koel_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                          + koel_docker_networks_default</span><span class="diff-line del">-                          + koel_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-koel_docker_capabilities_default: []</span><span class="diff-line del">-koel_docker_capabilities_custom: []</span><span class="diff-line del">-koel_docker_capabilities: &quot;{{ koel_docker_capabilities_default</span><span class="diff-line del">-                              + koel_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-koel_docker_security_opts_default: []</span><span class="diff-line del">-koel_docker_security_opts_custom: []</span><span class="diff-line del">-koel_docker_security_opts: &quot;{{ koel_docker_security_opts_default</span><span class="diff-line del">-                               + koel_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+koel_role_docker_networks_alias: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+koel_role_docker_networks_default: []</span><span class="diff-line add">+koel_role_docker_networks_custom: []</span><span class="diff-line add">+koel_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;koel&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;koel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-koel_docker_restart_policy: unless-stopped</span><span class="diff-line add">+koel_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-koel_docker_state: started</span><span class="diff-line add">+koel_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-koel_depends_on: &quot;{{ koel_name }}-mariadb&quot;</span><span class="diff-line del">-koel_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-koel_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+koel_role_depends_on: &quot;{{ koel_name }}-mariadb&quot;</span><span class="diff-line add">+koel_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+koel_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-214">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/koel/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,33 +9,33 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Check if db folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ server_appdata_path }}/{{ koel_paths_folder }}/db&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folder&#x27;, role=&#x27;koel&#x27;) }}/db&quot;</span><span class="diff-line context">   register: stat_koel_db_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy MariaDB Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ koel_name }}_mariadb&quot;</span><span class="diff-line add">+    container_name: &quot;{{ koel_name }}_mariadb&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: mariadb</span><span class="diff-line context">   vars:</span><span class="diff-line context">     mariadb_instances: [&quot;{{ koel_name }}-mariadb&quot;]</span><span class="diff-line del">-    mariadb_paths_folder: &quot;{{ koel_name }}&quot;</span><span class="diff-line del">-    mariadb_paths_location: &quot;{{ server_appdata_path }}/{{ koel_paths_folder }}/db&quot;</span><span class="diff-line add">+    mariadb_role_paths_folder: &quot;{{ koel_name }}&quot;</span><span class="diff-line add">+    mariadb_role_paths_location: &quot;{{ server_appdata_path }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_folder&#x27;, role=&#x27;koel&#x27;) }}/db&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB | Create koel database</span><span class="diff-line context">   community.mysql.mysql_db:</span><span class="diff-line context">     name: &quot;koel&quot;</span><span class="diff-line context">     login_host: &quot;{{ koel_name }}-mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if db folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ koel_paths_location }}/vars.ini&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) }}/vars.ini&quot;</span><span class="diff-line context">   register: stat_vars_ini</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Generate Secret Key for sessions&quot;</span><span class="diff-line hunk">@@ -43,9 +43,9 @@</span><span class="diff-line context">   register: generate_koel_secret_key</span><span class="diff-line context">   when: not stat_vars_ini.stat.exists</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Add Secret Key to &#x27;{{ koel_paths_location }}/vars.ini&#x27;&quot;</span><span class="diff-line add">+- name: &quot;Add Secret Key to &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) }}/vars.ini&#x27;&quot;</span><span class="diff-line context">   community.general.ini_file:</span><span class="diff-line del">-    path: &quot;{{ koel_paths_location }}/vars.ini&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) }}/vars.ini&quot;</span><span class="diff-line context">     section: &quot;general&quot;</span><span class="diff-line context">     option: app_key</span><span class="diff-line context">     value: &quot;{{ generate_koel_secret_key.stdout }}&quot;</span><span class="diff-line hunk">@@ -56,14 +56,14 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Set koel_secret_key variable&quot;</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    koel_secret_key: &quot;{{ lookup(&#x27;ini&#x27;, &#x27;app_key section=general file=&#x27; + koel_paths_location + &#x27;/vars.ini&#x27;) | default(generate_koel_secret_key.stdout) }}&quot;</span><span class="diff-line add">+    koel_secret_key: &quot;{{ lookup(&#x27;ini&#x27;, &#x27;app_key section=general file=&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;koel&#x27;) + &#x27;/vars.ini&#x27;) | default(generate_koel_secret_key.stdout) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -103,6 +103,6 @@</span><span class="diff-line context">     login_db: &quot;koel&quot;</span><span class="diff-line context">     login_host: &quot;{{ koel_name }}-mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     query: &#x27;UPDATE `users` SET `id` = &quot;1&quot;, `name` = &quot;{{ user.name }}&quot;, `email` = &quot;{{ user.email }}&quot;, `password` = &quot;{{ koel_admin_password_hash.stdout }}&quot;, `preferences` = NULL, `remember_token` = NULL, `created_at` = &quot;{{ koel_date.stdout }}&quot;, `updated_at` = &quot;{{ koel_date.stdout }}&quot; WHERE ((`id` = &quot;1&quot;));&#x27;</span><span class="diff-line context">   when: not stat_koel_db_folder.stat.exists</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-215">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kometa/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,112 +17,63 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kometa_time: &quot;03:00&quot;</span><span class="diff-line add">+kometa_role_time: &quot;03:00&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-kometa_paths_folder: &quot;{{ kometa_name }}&quot;</span><span class="diff-line del">-kometa_paths_location: &quot;{{ server_appdata_path }}/{{ kometa_paths_folder }}&quot;</span><span class="diff-line del">-kometa_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ kometa_paths_location }}&quot;</span><span class="diff-line del">-kometa_paths_recursive: true</span><span class="diff-line add">+kometa_role_paths_folder: &quot;{{ kometa_name }}&quot;</span><span class="diff-line add">+kometa_role_paths_location: &quot;{{ server_appdata_path }}/{{ kometa_role_paths_folder }}&quot;</span><span class="diff-line add">+kometa_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ kometa_role_paths_location }}&quot;</span><span class="diff-line add">+kometa_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-kometa_docker_container: &quot;{{ kometa_name }}&quot;</span><span class="diff-line add">+kometa_role_docker_container: &quot;{{ kometa_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-kometa_docker_image_pull: true</span><span class="diff-line del">-kometa_docker_image_repo: &quot;kometateam/kometa&quot;</span><span class="diff-line del">-kometa_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-kometa_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_image_repo&#x27;, default=kometa_docker_image_repo)</span><span class="diff-line del">-                      + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_image_tag&#x27;, default=kometa_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-kometa_docker_ports_defaults: []</span><span class="diff-line del">-kometa_docker_ports_custom: []</span><span class="diff-line del">-kometa_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_ports_defaults&#x27;, default=kometa_docker_ports_defaults)</span><span class="diff-line del">-                      + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_ports_custom&#x27;, default=kometa_docker_ports_custom) }}&quot;</span><span class="diff-line add">+kometa_role_docker_image_pull: true</span><span class="diff-line add">+kometa_role_docker_image_repo: &quot;kometateam/kometa&quot;</span><span class="diff-line add">+kometa_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+kometa_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;kometa&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;kometa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-kometa_docker_envs_default:</span><span class="diff-line add">+kometa_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   LOG_LEVEL: &quot;DEBUG&quot;</span><span class="diff-line del">-  KOMETA_TIMES: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_time&#x27;, default=kometa_time) }}&quot;</span><span class="diff-line del">-kometa_docker_envs_custom: {}</span><span class="diff-line del">-kometa_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_envs_default&#x27;, default=kometa_docker_envs_default)</span><span class="diff-line del">-                     | combine(lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_envs_custom&#x27;, default=kometa_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-kometa_docker_commands_default: []</span><span class="diff-line del">-kometa_docker_commands_custom: []</span><span class="diff-line del">-kometa_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_commands_default&#x27;, default=kometa_docker_commands_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_commands_custom&#x27;, default=kometa_docker_commands_custom) }}&quot;</span><span class="diff-line add">+  KOMETA_TIMES: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_time&#x27;, role=&#x27;kometa&#x27;) }}&quot;</span><span class="diff-line add">+kometa_role_docker_envs_custom: {}</span><span class="diff-line add">+kometa_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;kometa&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;kometa&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-kometa_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ kometa_paths_location }}:/config&quot;</span><span class="diff-line del">-kometa_docker_volumes_custom: []</span><span class="diff-line del">-kometa_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_volumes_default&#x27;, default=kometa_docker_volumes_default)</span><span class="diff-line del">-                        + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_volumes_custom&#x27;, default=kometa_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-kometa_docker_devices_default: []</span><span class="diff-line del">-kometa_docker_devices_custom: []</span><span class="diff-line del">-kometa_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_devices_default&#x27;, default=kometa_docker_devices_default)</span><span class="diff-line del">-                        + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_devices_custom&#x27;, default=kometa_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-kometa_docker_hosts_default: {}</span><span class="diff-line del">-kometa_docker_hosts_custom: {}</span><span class="diff-line del">-kometa_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                      | combine(lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_hosts_default&#x27;, default=kometa_docker_hosts_default))</span><span class="diff-line del">-                      | combine(lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_hosts_custom&#x27;, default=kometa_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-kometa_docker_labels_default: {}</span><span class="diff-line del">-kometa_docker_labels_custom: {}</span><span class="diff-line del">-kometa_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_labels_default&#x27;, default=kometa_docker_labels_default))</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_labels_custom&#x27;, default=kometa_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+kometa_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kometa&#x27;) }}:/config&quot;</span><span class="diff-line add">+kometa_role_docker_volumes_custom: []</span><span class="diff-line add">+kometa_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;kometa&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;kometa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-kometa_docker_hostname: &quot;{{ kometa_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-kometa_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-kometa_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_network_mode_default&#x27;, default=kometa_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+kometa_role_docker_hostname: &quot;{{ kometa_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-kometa_docker_networks_alias: &quot;{{ kometa_name }}&quot;</span><span class="diff-line del">-kometa_docker_networks_default: []</span><span class="diff-line del">-kometa_docker_networks_custom: []</span><span class="diff-line del">-kometa_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_networks_default&#x27;, default=kometa_docker_networks_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_networks_custom&#x27;, default=kometa_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-kometa_docker_capabilities_default: []</span><span class="diff-line del">-kometa_docker_capabilities_custom: []</span><span class="diff-line del">-kometa_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_capabilities_default&#x27;, default=kometa_docker_capabilities_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_capabilities_custom&#x27;, default=kometa_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-kometa_docker_security_opts_default: []</span><span class="diff-line del">-kometa_docker_security_opts_custom: []</span><span class="diff-line del">-kometa_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_security_opts_default&#x27;, default=kometa_docker_security_opts_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, kometa_name + &#x27;_docker_security_opts_custom&#x27;, default=kometa_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+kometa_role_docker_networks_alias: &quot;{{ kometa_name }}&quot;</span><span class="diff-line add">+kometa_role_docker_networks_default: []</span><span class="diff-line add">+kometa_role_docker_networks_custom: []</span><span class="diff-line add">+kometa_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;kometa&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;kometa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-kometa_docker_restart_policy: unless-stopped</span><span class="diff-line add">+kometa_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-kometa_docker_state: started</span><span class="diff-line add">+kometa_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-kometa_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+kometa_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-216">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/kometa/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,7 +10,7 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;plex-meta-manager&quot;</span><span class="diff-line add">+    container_name: &quot;plex-meta-manager&quot;</span><span class="diff-line context">   when: kometa_name == &#x27;kometa&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> - name: Download config.yml.template</span><span class="diff-line context">   ansible.builtin.get_url:</span><span class="diff-line context">     url: https://raw.githubusercontent.com/Kometa-Team/Kometa/master/config/config.yml.template</span><span class="diff-line del">-    dest: &quot;{{ kometa_paths_location }}/config.yml.template&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kometa&#x27;) }}/config.yml.template&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -30,9 +30,9 @@</span><span class="diff-line context">     validate_certs: false</span><span class="diff-line context">   ignore_errors: true</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Checking if &#x27;config.yml&#x27; exists in {{ kometa_paths_location }}&quot;</span><span class="diff-line add">+- name: &quot;Checking if &#x27;config.yml&#x27; exists in {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kometa&#x27;) }}&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ kometa_paths_location }}/config.yml&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kometa&#x27;) }}/config.yml&quot;</span><span class="diff-line context">   register: kometa_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Fail when &#x27;config.yml&#x27; is not present&quot;</span><span class="diff-line hunk">@@ -47,4 +47,4 @@</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line context">     msg:</span><span class="diff-line context">       - &quot;You should attempt a manual run first to ensure the config is working and to use oAuth for Trakt config etc. To do this run the below command&quot;</span><span class="diff-line del">-      - &quot;docker run --rm -it --network=saltbox -u &#x27;{{ uid }}:{{ gid }}&#x27; -e &#x27;TZ={{ tz }}&#x27; -v {{ kometa_paths_location }}:/config {{ kometa_docker_image }} --run&quot;</span><span class="diff-line add">+      - &quot;docker run --rm -it --network=saltbox -u &#x27;{{ uid }}:{{ gid }}&#x27; -e &#x27;TZ={{ tz }}&#x27; -v {{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;kometa&#x27;) }}:/config {{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image&#x27;, role=&#x27;kometa&#x27;) }} --run&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-217">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/komga/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-komga_paths_folder: &quot;{{ komga_name }}&quot;</span><span class="diff-line del">-komga_paths_location: &quot;{{ server_appdata_path }}/{{ komga_paths_folder }}&quot;</span><span class="diff-line del">-komga_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ komga_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/Media/Comics&quot;</span><span class="diff-line add">+komga_role_paths_folder: &quot;{{ komga_name }}&quot;</span><span class="diff-line add">+komga_role_paths_location: &quot;{{ server_appdata_path }}/{{ komga_role_paths_folder }}&quot;</span><span class="diff-line add">+komga_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ komga_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Comics&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-komga_web_subdomain: &quot;{{ komga_name }}&quot;</span><span class="diff-line del">-komga_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-komga_web_port: &quot;25600&quot;</span><span class="diff-line del">-komga_web_url: &quot;{{ &#x27;https://&#x27; + (komga_web_subdomain + &#x27;.&#x27; + komga_web_domain</span><span class="diff-line del">-                if (komga_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else komga_web_domain) }}&quot;</span><span class="diff-line add">+komga_role_web_subdomain: &quot;{{ komga_name }}&quot;</span><span class="diff-line add">+komga_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+komga_role_web_port: &quot;25600&quot;</span><span class="diff-line add">+komga_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;komga&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;komga&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;komga&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;komga&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-komga_dns_record: &quot;{{ komga_web_subdomain }}&quot;</span><span class="diff-line del">-komga_dns_zone: &quot;{{ komga_web_domain }}&quot;</span><span class="diff-line del">-komga_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+komga_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;komga&#x27;) }}&quot;</span><span class="diff-line add">+komga_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;komga&#x27;) }}&quot;</span><span class="diff-line add">+komga_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-komga_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-komga_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-komga_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-komga_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-komga_traefik_enabled: true</span><span class="diff-line del">-komga_traefik_api_enabled: false</span><span class="diff-line del">-komga_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+komga_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+komga_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+komga_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+komga_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+komga_role_traefik_enabled: true</span><span class="diff-line add">+komga_role_traefik_api_enabled: false</span><span class="diff-line add">+komga_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-komga_docker_container: &quot;{{ komga_name }}&quot;</span><span class="diff-line add">+komga_role_docker_container: &quot;{{ komga_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-komga_docker_image_pull: true</span><span class="diff-line del">-komga_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-komga_docker_image: &quot;gotson/komga:{{ komga_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-komga_docker_ports_defaults: []</span><span class="diff-line del">-komga_docker_ports_custom: []</span><span class="diff-line del">-komga_docker_ports: &quot;{{ komga_docker_ports_defaults</span><span class="diff-line del">-                        + komga_docker_ports_custom }}&quot;</span><span class="diff-line add">+komga_role_docker_image_pull: true</span><span class="diff-line add">+komga_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+komga_role_docker_image_repo: &quot;gotson/komga&quot;</span><span class="diff-line add">+komga_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;komga&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;komga&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-komga_docker_envs_default: {}</span><span class="diff-line del">-komga_docker_envs_custom: {}</span><span class="diff-line del">-komga_docker_envs: &quot;{{ komga_docker_envs_default</span><span class="diff-line del">-                       | combine(komga_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-komga_docker_commands_default: []</span><span class="diff-line del">-komga_docker_commands_custom: []</span><span class="diff-line del">-komga_docker_commands: &quot;{{ komga_docker_commands_default</span><span class="diff-line del">-                           + komga_docker_commands_custom }}&quot;</span><span class="diff-line add">+komga_role_docker_envs_default:</span><span class="diff-line add">+  KOMGA_CORS_ALLOWEDORIGINS: &quot;*&quot;</span><span class="diff-line add">+komga_role_docker_envs_custom: {}</span><span class="diff-line add">+komga_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;komga&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;komga&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-komga_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ komga_paths_location }}:/config&quot;</span><span class="diff-line add">+komga_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;komga&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Comics:/comics&quot;</span><span class="diff-line del">-komga_docker_volumes_custom: []</span><span class="diff-line del">-komga_docker_volumes: &quot;{{ komga_docker_volumes_default</span><span class="diff-line del">-                          + komga_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-komga_docker_devices_default: []</span><span class="diff-line del">-komga_docker_devices_custom: []</span><span class="diff-line del">-komga_docker_devices: &quot;{{ komga_docker_devices_default</span><span class="diff-line del">-                          + komga_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-komga_docker_hosts_default: {}</span><span class="diff-line del">-komga_docker_hosts_custom: {}</span><span class="diff-line del">-komga_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(komga_docker_hosts_default)</span><span class="diff-line del">-                        | combine(komga_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-komga_docker_labels_default: {}</span><span class="diff-line del">-komga_docker_labels_custom: {}</span><span class="diff-line del">-komga_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(komga_docker_labels_default)</span><span class="diff-line del">-                         | combine(komga_docker_labels_custom) }}&quot;</span><span class="diff-line add">+komga_role_docker_volumes_custom: []</span><span class="diff-line add">+komga_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;komga&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;komga&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-komga_docker_hostname: &quot;{{ komga_name }}&quot;</span><span class="diff-line add">+komga_role_docker_hostname: &quot;{{ komga_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-komga_docker_networks_alias: &quot;{{ komga_name }}&quot;</span><span class="diff-line del">-komga_docker_networks_default: []</span><span class="diff-line del">-komga_docker_networks_custom: []</span><span class="diff-line del">-komga_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + komga_docker_networks_default</span><span class="diff-line del">-                           + komga_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-komga_docker_capabilities_default: []</span><span class="diff-line del">-komga_docker_capabilities_custom: []</span><span class="diff-line del">-komga_docker_capabilities: &quot;{{ komga_docker_capabilities_default</span><span class="diff-line del">-                               + komga_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-komga_docker_security_opts_default: []</span><span class="diff-line del">-komga_docker_security_opts_custom: []</span><span class="diff-line del">-komga_docker_security_opts: &quot;{{ komga_docker_security_opts_default</span><span class="diff-line del">-                                + komga_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+komga_role_docker_networks_alias: &quot;{{ komga_name }}&quot;</span><span class="diff-line add">+komga_role_docker_networks_default: []</span><span class="diff-line add">+komga_role_docker_networks_custom: []</span><span class="diff-line add">+komga_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;komga&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;komga&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-komga_docker_restart_policy: unless-stopped</span><span class="diff-line add">+komga_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-komga_docker_state: started</span><span class="diff-line add">+komga_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-komga_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+komga_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-218">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/komga/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-219">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/krusader/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,80 +8,75 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Docker Socket Proxy</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-krusader_docker_socket_proxy_envs:</span><span class="diff-line del">-  CONTAINERS: &quot;1&quot;</span><span class="diff-line del">-  POST: &quot;0&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> krusader_name: krusader</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Docker Socket Proxy</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+krusader_role_docker_socket_proxy_envs:</span><span class="diff-line add">+  CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+  POST: &quot;0&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-krusader_paths_folder: &quot;{{ krusader_name }}&quot;</span><span class="diff-line del">-krusader_paths_location: &quot;{{ server_appdata_path }}/{{ krusader_paths_folder }}&quot;</span><span class="diff-line del">-krusader_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ krusader_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ krusader_paths_location }}/config&quot;</span><span class="diff-line add">+krusader_role_paths_folder: &quot;{{ krusader_name }}&quot;</span><span class="diff-line add">+krusader_role_paths_location: &quot;{{ server_appdata_path }}/{{ krusader_role_paths_folder }}&quot;</span><span class="diff-line add">+krusader_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ krusader_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ krusader_role_paths_location }}/config&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-krusader_web_subdomain: &quot;{{ krusader_name }}&quot;</span><span class="diff-line del">-krusader_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-krusader_web_port: &quot;6080&quot;</span><span class="diff-line del">-krusader_web_url: &quot;{{ &#x27;https://&#x27; + (krusader_web_subdomain + &#x27;.&#x27; + krusader_web_domain</span><span class="diff-line del">-                   if (krusader_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else krusader_web_domain) }}&quot;</span><span class="diff-line add">+krusader_role_web_subdomain: &quot;{{ krusader_name }}&quot;</span><span class="diff-line add">+krusader_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+krusader_role_web_port: &quot;6080&quot;</span><span class="diff-line add">+krusader_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;krusader&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;krusader&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;krusader&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;krusader&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-krusader_dns_record: &quot;{{ krusader_web_subdomain }}&quot;</span><span class="diff-line del">-krusader_dns_zone: &quot;{{ krusader_web_domain }}&quot;</span><span class="diff-line del">-krusader_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+krusader_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line add">+krusader_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line add">+krusader_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-krusader_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-krusader_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-krusader_traefik_middleware_api: &quot;{{ traefik_global_middleware }}&quot;</span><span class="diff-line del">-krusader_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-krusader_traefik_enabled: true</span><span class="diff-line del">-krusader_traefik_api_enabled: false</span><span class="diff-line del">-krusader_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+krusader_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+krusader_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+krusader_role_traefik_middleware_api: &quot;{{ traefik_global_middleware }}&quot;</span><span class="diff-line add">+krusader_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+krusader_role_traefik_enabled: true</span><span class="diff-line add">+krusader_role_traefik_api_enabled: false</span><span class="diff-line add">+krusader_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-krusader_docker_container: &quot;{{ krusader_name }}&quot;</span><span class="diff-line add">+krusader_role_docker_container: &quot;{{ krusader_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-krusader_docker_image_pull: true</span><span class="diff-line del">-krusader_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-krusader_docker_image: &quot;binhex/arch-krusader:{{ krusader_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-krusader_docker_ports_defaults: []</span><span class="diff-line del">-krusader_docker_ports_custom: []</span><span class="diff-line del">-krusader_docker_ports: &quot;{{ krusader_docker_ports_defaults</span><span class="diff-line del">-                           + krusader_docker_ports_custom }}&quot;</span><span class="diff-line add">+krusader_role_docker_image_pull: true</span><span class="diff-line add">+krusader_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+krusader_role_docker_image_repo: &quot;binhex/arch-krusader&quot;</span><span class="diff-line add">+krusader_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;krusader&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-krusader_docker_envs_default:</span><span class="diff-line add">+krusader_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line hunk">@@ -89,73 +84,35 @@</span><span class="diff-line context">   DOCKER_HOST: &quot;tcp://{{ krusader_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line context">   WEBPAGE_TITLE: &quot;Krusader File Manager Web&quot;</span><span class="diff-line context">   TEMP_FOLDER: &quot;/tmp&quot;</span><span class="diff-line del">-krusader_docker_envs_custom: {}</span><span class="diff-line del">-krusader_docker_envs: &quot;{{ krusader_docker_envs_default</span><span class="diff-line del">-                          | combine(krusader_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-krusader_docker_commands_default: []</span><span class="diff-line del">-krusader_docker_commands_custom: []</span><span class="diff-line del">-krusader_docker_commands: &quot;{{ krusader_docker_commands_default</span><span class="diff-line del">-                              + krusader_docker_commands_custom }}&quot;</span><span class="diff-line add">+krusader_role_docker_envs_custom: {}</span><span class="diff-line add">+krusader_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;krusader&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;krusader&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-krusader_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ krusader_paths_location }}/config:/config&quot;</span><span class="diff-line del">-krusader_docker_volumes_custom: []</span><span class="diff-line del">-krusader_docker_volumes: &quot;{{ krusader_docker_volumes_default</span><span class="diff-line del">-                             + krusader_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-krusader_docker_devices_default: []</span><span class="diff-line del">-krusader_docker_devices_custom: []</span><span class="diff-line del">-krusader_docker_devices: &quot;{{ krusader_docker_devices_default</span><span class="diff-line del">-                             + krusader_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-krusader_docker_hosts_default: {}</span><span class="diff-line del">-krusader_docker_hosts_custom: {}</span><span class="diff-line del">-krusader_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(krusader_docker_hosts_default)</span><span class="diff-line del">-                           | combine(krusader_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-krusader_docker_labels_default: {}</span><span class="diff-line del">-krusader_docker_labels_custom: {}</span><span class="diff-line del">-krusader_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(krusader_docker_labels_default)</span><span class="diff-line del">-                            | combine(krusader_docker_labels_custom) }}&quot;</span><span class="diff-line add">+krusader_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;krusader&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+krusader_role_docker_volumes_custom: []</span><span class="diff-line add">+krusader_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;krusader&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-krusader_docker_hostname: &quot;{{ krusader_name }}&quot;</span><span class="diff-line add">+krusader_role_docker_hostname: &quot;{{ krusader_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-krusader_docker_networks_alias: &quot;{{ krusader_name }}&quot;</span><span class="diff-line del">-krusader_docker_networks_default: []</span><span class="diff-line del">-krusader_docker_networks_custom: []</span><span class="diff-line del">-krusader_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + krusader_docker_networks_default</span><span class="diff-line del">-                              + krusader_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-krusader_docker_capabilities_default: []</span><span class="diff-line del">-krusader_docker_capabilities_custom: []</span><span class="diff-line del">-krusader_docker_capabilities: &quot;{{ krusader_docker_capabilities_default</span><span class="diff-line del">-                                  + krusader_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-krusader_docker_security_opts_default: []</span><span class="diff-line del">-krusader_docker_security_opts_custom: []</span><span class="diff-line del">-krusader_docker_security_opts: &quot;{{ krusader_docker_security_opts_default</span><span class="diff-line del">-                                   + krusader_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+krusader_role_docker_networks_alias: &quot;{{ krusader_name }}&quot;</span><span class="diff-line add">+krusader_role_docker_networks_default: []</span><span class="diff-line add">+krusader_role_docker_networks_custom: []</span><span class="diff-line add">+krusader_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;krusader&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-krusader_docker_restart_policy: unless-stopped</span><span class="diff-line add">+krusader_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-krusader_docker_state: started</span><span class="diff-line add">+krusader_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-krusader_depends_on: &quot;{{ krusader_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-krusader_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-krusader_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+krusader_role_depends_on: &quot;{{ krusader_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+krusader_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+krusader_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-220">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/krusader/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,14 +12,14 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ krusader_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs: &quot;{{ krusader_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_socket_proxy_envs&#x27;, role=&#x27;krusader&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-221">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/lazylibrarian/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lazylibrarian_paths_folder: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line del">-lazylibrarian_paths_location: &quot;{{ server_appdata_path }}/{{ lazylibrarian_paths_folder }}&quot;</span><span class="diff-line del">-lazylibrarian_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ lazylibrarian_paths_location }}&quot;</span><span class="diff-line add">+lazylibrarian_role_paths_folder: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line add">+lazylibrarian_role_paths_location: &quot;{{ server_appdata_path }}/{{ lazylibrarian_role_paths_folder }}&quot;</span><span class="diff-line add">+lazylibrarian_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ lazylibrarian_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lazylibrarian_web_subdomain: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line del">-lazylibrarian_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-lazylibrarian_web_port: &quot;5299&quot;</span><span class="diff-line del">-lazylibrarian_web_url: &quot;{{ &#x27;https://&#x27; + (lazylibrarian_web_subdomain + &#x27;.&#x27; + lazylibrarian_web_domain</span><span class="diff-line del">-                        if (lazylibrarian_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else lazylibrarian_web_domain) }}&quot;</span><span class="diff-line add">+lazylibrarian_role_web_subdomain: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line add">+lazylibrarian_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+lazylibrarian_role_web_port: &quot;5299&quot;</span><span class="diff-line add">+lazylibrarian_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;lazylibrarian&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;lazylibrarian&#x27;)</span><span class="diff-line add">+                             if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;lazylibrarian&#x27;) | length &gt; 0)</span><span class="diff-line add">+                             else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;lazylibrarian&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lazylibrarian_dns_record: &quot;{{ lazylibrarian_web_subdomain }}&quot;</span><span class="diff-line del">-lazylibrarian_dns_zone: &quot;{{ lazylibrarian_web_domain }}&quot;</span><span class="diff-line del">-lazylibrarian_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+lazylibrarian_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;lazylibrarian&#x27;) }}&quot;</span><span class="diff-line add">+lazylibrarian_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;lazylibrarian&#x27;) }}&quot;</span><span class="diff-line add">+lazylibrarian_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lazylibrarian_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-lazylibrarian_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-lazylibrarian_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-lazylibrarian_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-lazylibrarian_traefik_enabled: true</span><span class="diff-line del">-lazylibrarian_traefik_api_enabled: false</span><span class="diff-line del">-lazylibrarian_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+lazylibrarian_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+lazylibrarian_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+lazylibrarian_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+lazylibrarian_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+lazylibrarian_role_traefik_enabled: true</span><span class="diff-line add">+lazylibrarian_role_traefik_api_enabled: false</span><span class="diff-line add">+lazylibrarian_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-lazylibrarian_docker_container: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_container: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-lazylibrarian_docker_image_pull: true</span><span class="diff-line del">-lazylibrarian_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-lazylibrarian_docker_image: &quot;lscr.io/linuxserver/lazylibrarian:{{ lazylibrarian_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-lazylibrarian_docker_ports_defaults: []</span><span class="diff-line del">-lazylibrarian_docker_ports_custom: []</span><span class="diff-line del">-lazylibrarian_docker_ports: &quot;{{ lazylibrarian_docker_ports_defaults</span><span class="diff-line del">-                                + lazylibrarian_docker_ports_custom }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_image_pull: true</span><span class="diff-line add">+lazylibrarian_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_image_repo: &quot;lscr.io/linuxserver/lazylibrarian&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;lazylibrarian&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;lazylibrarian&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-lazylibrarian_docker_envs_default:</span><span class="diff-line add">+lazylibrarian_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   DOCKER_MODS: &quot;linuxserver/mods:universal-calibre|linuxserver/mods:lazylibrarian-ffmpeg&quot;</span><span class="diff-line del">-lazylibrarian_docker_envs_custom: {}</span><span class="diff-line del">-lazylibrarian_docker_envs: &quot;{{ lazylibrarian_docker_envs_default</span><span class="diff-line del">-                               | combine(lazylibrarian_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-lazylibrarian_docker_commands_default: []</span><span class="diff-line del">-lazylibrarian_docker_commands_custom: []</span><span class="diff-line del">-lazylibrarian_docker_commands: &quot;{{ lazylibrarian_docker_commands_default</span><span class="diff-line del">-                                   + lazylibrarian_docker_commands_custom }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_envs_custom: {}</span><span class="diff-line add">+lazylibrarian_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;lazylibrarian&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;lazylibrarian&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-lazylibrarian_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ lazylibrarian_paths_location }}:/config&quot;</span><span class="diff-line del">-lazylibrarian_docker_volumes_custom: []</span><span class="diff-line del">-lazylibrarian_docker_volumes: &quot;{{ lazylibrarian_docker_volumes_default</span><span class="diff-line del">-                                  + lazylibrarian_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-lazylibrarian_docker_devices_default: []</span><span class="diff-line del">-lazylibrarian_docker_devices_custom: []</span><span class="diff-line del">-lazylibrarian_docker_devices: &quot;{{ lazylibrarian_docker_devices_default</span><span class="diff-line del">-                                  + lazylibrarian_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-lazylibrarian_docker_hosts_default: {}</span><span class="diff-line del">-lazylibrarian_docker_hosts_custom: {}</span><span class="diff-line del">-lazylibrarian_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(lazylibrarian_docker_hosts_default)</span><span class="diff-line del">-                                | combine(lazylibrarian_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-lazylibrarian_docker_labels_default: {}</span><span class="diff-line del">-lazylibrarian_docker_labels_custom: {}</span><span class="diff-line del">-lazylibrarian_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(lazylibrarian_docker_labels_default)</span><span class="diff-line del">-                                 | combine(lazylibrarian_docker_labels_custom) }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;lazylibrarian&#x27;) }}:/config&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_volumes_custom: []</span><span class="diff-line add">+lazylibrarian_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;lazylibrarian&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;lazylibrarian&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-lazylibrarian_docker_hostname: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_hostname: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-lazylibrarian_docker_networks_alias: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line del">-lazylibrarian_docker_networks_default: []</span><span class="diff-line del">-lazylibrarian_docker_networks_custom: []</span><span class="diff-line del">-lazylibrarian_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + lazylibrarian_docker_networks_default</span><span class="diff-line del">-                                   + lazylibrarian_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-lazylibrarian_docker_capabilities_default: []</span><span class="diff-line del">-lazylibrarian_docker_capabilities_custom: []</span><span class="diff-line del">-lazylibrarian_docker_capabilities: &quot;{{ lazylibrarian_docker_capabilities_default</span><span class="diff-line del">-                                       + lazylibrarian_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-lazylibrarian_docker_security_opts_default: []</span><span class="diff-line del">-lazylibrarian_docker_security_opts_custom: []</span><span class="diff-line del">-lazylibrarian_docker_security_opts: &quot;{{ lazylibrarian_docker_security_opts_default</span><span class="diff-line del">-                                        + lazylibrarian_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_networks_alias: &quot;{{ lazylibrarian_name }}&quot;</span><span class="diff-line add">+lazylibrarian_role_docker_networks_default: []</span><span class="diff-line add">+lazylibrarian_role_docker_networks_custom: []</span><span class="diff-line add">+lazylibrarian_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;lazylibrarian&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;lazylibrarian&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-lazylibrarian_docker_restart_policy: unless-stopped</span><span class="diff-line add">+lazylibrarian_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-lazylibrarian_docker_state: started</span><span class="diff-line add">+lazylibrarian_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-222">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/lazylibrarian/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-223">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/lgsm/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,114 +17,59 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lgsm_paths_folder: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line del">-lgsm_paths_location: &quot;{{ server_appdata_path }}/{{ lgsm_paths_folder }}&quot;</span><span class="diff-line del">-lgsm_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ lgsm_paths_location }}&quot;</span><span class="diff-line add">+lgsm_role_paths_folder: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line add">+lgsm_role_paths_location: &quot;{{ server_appdata_path }}/{{ lgsm_role_paths_folder }}&quot;</span><span class="diff-line add">+lgsm_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ lgsm_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lgsm_web_subdomain: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line del">-lgsm_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+lgsm_role_web_subdomain: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line add">+lgsm_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-lgsm_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_web_subdomain&#x27;, default=lgsm_web_subdomain) }}&quot;</span><span class="diff-line del">-lgsm_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_web_domain&#x27;, default=lgsm_web_domain) }}&quot;</span><span class="diff-line del">-lgsm_dns_proxy: false</span><span class="diff-line add">+lgsm_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;lgsm&#x27;) }}&quot;</span><span class="diff-line add">+lgsm_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;lgsm&#x27;) }}&quot;</span><span class="diff-line add">+lgsm_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-lgsm_docker_container: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line add">+lgsm_role_docker_container: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-lgsm_docker_image_pull: true</span><span class="diff-line del">-lgsm_docker_image_repo: &quot;gameservermanagers/gameserver&quot;</span><span class="diff-line del">-lgsm_docker_image_tag: &quot;{{ lgsm_name | replace(&#x27;lgsm_&#x27;, &#x27;&#x27;) }}&quot;</span><span class="diff-line del">-lgsm_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_image_repo&#x27;, default=lgsm_docker_image_repo)</span><span class="diff-line del">-                             + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_image_tag&#x27;, default=lgsm_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-lgsm_docker_ports_defaults: []</span><span class="diff-line del">-lgsm_docker_ports_custom: []</span><span class="diff-line del">-lgsm_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_ports_defaults&#x27;, default=lgsm_docker_ports_defaults)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_ports_custom&#x27;, default=lgsm_docker_ports_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-lgsm_docker_envs_default: {}</span><span class="diff-line del">-lgsm_docker_envs_custom: {}</span><span class="diff-line del">-lgsm_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_envs_default&#x27;, default=lgsm_docker_envs_default)</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_envs_custom&#x27;, default=lgsm_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-lgsm_docker_commands_default: []</span><span class="diff-line del">-lgsm_docker_commands_custom: []</span><span class="diff-line del">-lgsm_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_commands_default&#x27;, default=lgsm_docker_commands_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_commands_custom&#x27;, default=lgsm_docker_commands_custom) }}&quot;</span><span class="diff-line add">+lgsm_role_docker_image_pull: true</span><span class="diff-line add">+lgsm_role_docker_image_repo: &quot;gameservermanagers/gameserver&quot;</span><span class="diff-line add">+lgsm_role_docker_image_tag: &quot;{{ lgsm_name | replace(&#x27;lgsm_&#x27;, &#x27;&#x27;) }}&quot;</span><span class="diff-line add">+lgsm_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;lgsm&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;lgsm&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-lgsm_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ lgsm_paths_location }}:/data&quot;</span><span class="diff-line del">-lgsm_docker_volumes_custom: []</span><span class="diff-line del">-lgsm_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_volumes_default&#x27;, default=lgsm_docker_volumes_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_volumes_custom&#x27;, default=lgsm_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-lgsm_docker_devices_default: []</span><span class="diff-line del">-lgsm_docker_devices_custom: []</span><span class="diff-line del">-lgsm_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_devices_default&#x27;, default=lgsm_docker_devices_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_devices_custom&#x27;, default=lgsm_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-lgsm_docker_hosts_default: {}</span><span class="diff-line del">-lgsm_docker_hosts_custom: {}</span><span class="diff-line del">-lgsm_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_hosts_default&#x27;, default=lgsm_docker_hosts_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_hosts_custom&#x27;, default=lgsm_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-lgsm_docker_labels_default: {}</span><span class="diff-line del">-lgsm_docker_labels_custom: {}</span><span class="diff-line del">-lgsm_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_labels_default&#x27;, default=lgsm_docker_labels_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_labels_custom&#x27;, default=lgsm_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+lgsm_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;lgsm&#x27;) }}:/data&quot;</span><span class="diff-line add">+lgsm_role_docker_volumes_custom: []</span><span class="diff-line add">+lgsm_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;lgsm&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;lgsm&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-lgsm_docker_hostname: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-lgsm_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-lgsm_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_network_mode_default&#x27;, default=lgsm_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+lgsm_role_docker_hostname: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-lgsm_docker_networks_alias: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line del">-lgsm_docker_networks_default: []</span><span class="diff-line del">-lgsm_docker_networks_custom: []</span><span class="diff-line del">-lgsm_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_networks_default&#x27;, default=lgsm_docker_networks_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_networks_custom&#x27;, default=lgsm_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-lgsm_docker_capabilities_default: []</span><span class="diff-line del">-lgsm_docker_capabilities_custom: []</span><span class="diff-line del">-lgsm_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_capabilities_default&#x27;, default=lgsm_docker_capabilities_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_capabilities_custom&#x27;, default=lgsm_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-lgsm_docker_security_opts_default: []</span><span class="diff-line del">-lgsm_docker_security_opts_custom: []</span><span class="diff-line del">-lgsm_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_security_opts_default&#x27;, default=lgsm_docker_security_opts_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, lgsm_name + &#x27;_docker_security_opts_custom&#x27;, default=lgsm_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+lgsm_role_docker_networks_alias: &quot;{{ lgsm_name }}&quot;</span><span class="diff-line add">+lgsm_role_docker_networks_default: []</span><span class="diff-line add">+lgsm_role_docker_networks_custom: []</span><span class="diff-line add">+lgsm_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;lgsm&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;lgsm&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-lgsm_docker_restart_policy: unless-stopped</span><span class="diff-line add">+lgsm_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-lgsm_docker_state: started</span><span class="diff-line add">+lgsm_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-224">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/lgsm/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-225">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/linkding/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,64 +17,59 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkding_paths_folder: &quot;{{ linkding_name }}&quot;</span><span class="diff-line del">-linkding_paths_location: &quot;{{ server_appdata_path }}/{{ linkding_paths_folder }}&quot;</span><span class="diff-line del">-linkding_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ linkding_paths_location }}&quot;</span><span class="diff-line add">+linkding_role_paths_folder: &quot;{{ linkding_name }}&quot;</span><span class="diff-line add">+linkding_role_paths_location: &quot;{{ server_appdata_path }}/{{ linkding_role_paths_folder }}&quot;</span><span class="diff-line add">+linkding_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ linkding_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkding_web_subdomain: &quot;{{ linkding_name }}&quot;</span><span class="diff-line del">-linkding_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-linkding_web_port: &quot;9090&quot;</span><span class="diff-line del">-linkding_web_url: &quot;{{ &#x27;https://&#x27; + (linkding_web_subdomain + &#x27;.&#x27; + linkding_web_domain</span><span class="diff-line del">-                   if (linkding_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else linkding_web_domain) }}&quot;</span><span class="diff-line add">+linkding_role_web_subdomain: &quot;{{ linkding_name }}&quot;</span><span class="diff-line add">+linkding_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+linkding_role_web_port: &quot;9090&quot;</span><span class="diff-line add">+linkding_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkding&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkding&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkding&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkding&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkding_dns_record: &quot;{{ linkding_web_subdomain }}&quot;</span><span class="diff-line del">-linkding_dns_zone: &quot;{{ linkding_web_domain }}&quot;</span><span class="diff-line del">-linkding_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+linkding_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line add">+linkding_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line add">+linkding_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkding_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-linkding_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-linkding_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-linkding_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-linkding_traefik_enabled: true</span><span class="diff-line del">-linkding_traefik_api_enabled: true</span><span class="diff-line del">-linkding_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line del">-linkding_traefik_api_middleware_http: &quot;{{ &#x27;dropsecurityheaders@file,&#x27; + traefik_default_middleware_http_api }}&quot;</span><span class="diff-line del">-linkding_traefik_api_middleware: &quot;{{ &#x27;dropsecurityheaders@file,&#x27; + traefik_default_middleware_api }}&quot;</span><span class="diff-line add">+linkding_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+linkding_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+linkding_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+linkding_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+linkding_role_traefik_enabled: true</span><span class="diff-line add">+linkding_role_traefik_api_enabled: true</span><span class="diff-line add">+linkding_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+linkding_role_traefik_api_middleware_http: &quot;{{ &#x27;dropsecurityheaders@file,&#x27; + traefik_default_middleware_http_api }}&quot;</span><span class="diff-line add">+linkding_role_traefik_api_middleware: &quot;{{ &#x27;dropsecurityheaders@file,&#x27; + traefik_default_middleware_api }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-linkding_docker_container: &quot;{{ linkding_name }}&quot;</span><span class="diff-line add">+linkding_role_docker_container: &quot;{{ linkding_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-linkding_docker_image_pull: true</span><span class="diff-line del">-linkding_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-linkding_docker_image: &quot;sissbruecker/linkding:{{ linkding_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-linkding_docker_ports_defaults: []</span><span class="diff-line del">-linkding_docker_ports_custom: []</span><span class="diff-line del">-linkding_docker_ports: &quot;{{ linkding_docker_ports_defaults</span><span class="diff-line del">-                           + linkding_docker_ports_custom }}&quot;</span><span class="diff-line add">+linkding_role_docker_image_pull: true</span><span class="diff-line add">+linkding_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+linkding_role_docker_image_repo: &quot;sissbruecker/linkding&quot;</span><span class="diff-line add">+linkding_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;linkding&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-linkding_docker_envs_default:</span><span class="diff-line add">+linkding_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   LD_CONTAINER_NAME: &quot;{{ linkding_name }}&quot;</span><span class="diff-line context">   LD_HOST_PORT: &quot;9090&quot;</span><span class="diff-line hunk">@@ -84,69 +79,31 @@</span><span class="diff-line context">   LD_DISABLE_BACKGROUND_TASKS: &quot;false&quot;</span><span class="diff-line context">   LD_DISABLE_URL_VALIDATION: &quot;false&quot;</span><span class="diff-line context">   LD_ENABLE_AUTH_PROXY: &quot;false&quot;</span><span class="diff-line del">-  LD_CSRF_TRUSTED_ORIGINS: &quot;{{ linkding_web_url }}&quot;</span><span class="diff-line del">-linkding_docker_envs_custom: {}</span><span class="diff-line del">-linkding_docker_envs: &quot;{{ linkding_docker_envs_default</span><span class="diff-line del">-                          | combine(linkding_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-linkding_docker_commands_default: []</span><span class="diff-line del">-linkding_docker_commands_custom: []</span><span class="diff-line del">-linkding_docker_commands: &quot;{{ linkding_docker_commands_default</span><span class="diff-line del">-                              + linkding_docker_commands_custom }}&quot;</span><span class="diff-line add">+  LD_CSRF_TRUSTED_ORIGINS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line add">+linkding_role_docker_envs_custom: {}</span><span class="diff-line add">+linkding_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;linkding&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;linkding&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-linkding_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ linkding_paths_location }}:/etc/linkding/data&quot;</span><span class="diff-line del">-linkding_docker_volumes_custom: []</span><span class="diff-line del">-linkding_docker_volumes: &quot;{{ linkding_docker_volumes_default</span><span class="diff-line del">-                             + linkding_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-linkding_docker_devices_default: []</span><span class="diff-line del">-linkding_docker_devices_custom: []</span><span class="diff-line del">-linkding_docker_devices: &quot;{{ linkding_docker_devices_default</span><span class="diff-line del">-                             + linkding_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-linkding_docker_hosts_default: {}</span><span class="diff-line del">-linkding_docker_hosts_custom: {}</span><span class="diff-line del">-linkding_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(linkding_docker_hosts_default)</span><span class="diff-line del">-                           | combine(linkding_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-linkding_docker_labels_default: {}</span><span class="diff-line del">-linkding_docker_labels_custom: {}</span><span class="diff-line del">-linkding_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(linkding_docker_labels_default)</span><span class="diff-line del">-                            | combine(linkding_docker_labels_custom) }}&quot;</span><span class="diff-line add">+linkding_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;linkding&#x27;) }}:/etc/linkding/data&quot;</span><span class="diff-line add">+linkding_role_docker_volumes_custom: []</span><span class="diff-line add">+linkding_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;linkding&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-linkding_docker_hostname: &quot;{{ linkding_name }}&quot;</span><span class="diff-line add">+linkding_role_docker_hostname: &quot;{{ linkding_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-linkding_docker_networks_alias: &quot;{{ linkding_name }}&quot;</span><span class="diff-line del">-linkding_docker_networks_default: []</span><span class="diff-line del">-linkding_docker_networks_custom: []</span><span class="diff-line del">-linkding_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + linkding_docker_networks_default</span><span class="diff-line del">-                              + linkding_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-linkding_docker_capabilities_default: []</span><span class="diff-line del">-linkding_docker_capabilities_custom: []</span><span class="diff-line del">-linkding_docker_capabilities: &quot;{{ linkding_docker_capabilities_default</span><span class="diff-line del">-                                  + linkding_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-linkding_docker_security_opts_default: []</span><span class="diff-line del">-linkding_docker_security_opts_custom: []</span><span class="diff-line del">-linkding_docker_security_opts: &quot;{{ linkding_docker_security_opts_default</span><span class="diff-line del">-                                   + linkding_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+linkding_role_docker_networks_alias: &quot;{{ linkding_name }}&quot;</span><span class="diff-line add">+linkding_role_docker_networks_default: []</span><span class="diff-line add">+linkding_role_docker_networks_custom: []</span><span class="diff-line add">+linkding_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;linkding&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;linkding&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-linkding_docker_restart_policy: unless-stopped</span><span class="diff-line add">+linkding_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-linkding_docker_state: started</span><span class="diff-line add">+linkding_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-226">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/linkding/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-227">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/linkwarden/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,148 +17,112 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkwarden_postgres_name: &quot;{{ linkwarden_name }}-postgres&quot;</span><span class="diff-line del">-linkwarden_postgres_docker_env_user: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_postgres_docker_env_password: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_postgres_docker_env_db: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_postgres_docker_image_tag: &quot;16-alpine&quot;</span><span class="diff-line del">-linkwarden_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-linkwarden_postgres_paths_folder: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+linkwarden_role_postgres_deploy: true</span><span class="diff-line add">+linkwarden_role_postgres_name: &quot;{{ linkwarden_name }}-postgres&quot;</span><span class="diff-line add">+linkwarden_role_postgres_user: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_postgres_password: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_postgres_docker_env_db: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_postgres_docker_image_tag: &quot;16-alpine&quot;</span><span class="diff-line add">+linkwarden_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+linkwarden_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;linkwarden&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+linkwarden_role_postgres_paths_folder: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ linkwarden_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkwarden_paths_folder: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_paths_location: &quot;{{ server_appdata_path }}/{{ linkwarden_paths_folder }}&quot;</span><span class="diff-line del">-linkwarden_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ linkwarden_paths_location }}&quot;</span><span class="diff-line add">+linkwarden_role_paths_folder: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_paths_location: &quot;{{ server_appdata_path }}/{{ linkwarden_role_paths_folder }}&quot;</span><span class="diff-line add">+linkwarden_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ linkwarden_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkwarden_web_subdomain: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-linkwarden_web_port: &quot;3000&quot;</span><span class="diff-line del">-linkwarden_web_url: &quot;{{ &#x27;https://&#x27; + (linkwarden_web_subdomain + &#x27;.&#x27; + linkwarden_web_domain</span><span class="diff-line del">-                     if (linkwarden_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else linkwarden_web_domain) }}&quot;</span><span class="diff-line add">+linkwarden_role_web_subdomain: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+linkwarden_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+linkwarden_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkwarden&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkwarden&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkwarden&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkwarden&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkwarden_dns_record: &quot;{{ linkwarden_web_subdomain }}&quot;</span><span class="diff-line del">-linkwarden_dns_zone: &quot;{{ linkwarden_web_domain }}&quot;</span><span class="diff-line del">-linkwarden_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+linkwarden_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+linkwarden_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+linkwarden_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-linkwarden_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-linkwarden_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-linkwarden_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-linkwarden_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-linkwarden_traefik_enabled: true</span><span class="diff-line del">-linkwarden_traefik_api_enabled: true</span><span class="diff-line del">-linkwarden_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+linkwarden_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+linkwarden_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+linkwarden_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+linkwarden_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+linkwarden_role_traefik_enabled: true</span><span class="diff-line add">+linkwarden_role_traefik_api_enabled: true</span><span class="diff-line add">+linkwarden_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-linkwarden_docker_container: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_container: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-linkwarden_docker_image_pull: true</span><span class="diff-line del">-linkwarden_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-linkwarden_docker_image: &quot;ghcr.io/linkwarden/linkwarden:{{ linkwarden_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-linkwarden_docker_ports_defaults: []</span><span class="diff-line del">-linkwarden_docker_ports_custom: []</span><span class="diff-line del">-linkwarden_docker_ports: &quot;{{ linkwarden_docker_ports_defaults</span><span class="diff-line del">-                             + linkwarden_docker_ports_custom }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_image_pull: true</span><span class="diff-line add">+linkwarden_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+linkwarden_role_docker_image_repo: &quot;ghcr.io/linkwarden/linkwarden&quot;</span><span class="diff-line add">+linkwarden_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;linkwarden&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-linkwarden_docker_envs_default:</span><span class="diff-line add">+linkwarden_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   NEXT_PUBLIC_CREDENTIALS_ENABLED: &quot;true&quot;</span><span class="diff-line context">   STORAGE_FOLDER: &quot;/data&quot;</span><span class="diff-line context">   NEXTAUTH_SECRET: &quot;{{ linkwarden_secret_key.stdout }}&quot;</span><span class="diff-line del">-  NEXTAUTH_URL: &quot;{{ linkwarden_web_url }}/api/v1/auth&quot;</span><span class="diff-line del">-  DATABASE_URL: &quot;postgresql://{{ linkwarden_postgres_docker_env_user }}:{{ linkwarden_postgres_docker_env_password }}@{{ linkwarden_postgres_name }}:5432/{{ linkwarden_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-linkwarden_docker_envs_custom: {}</span><span class="diff-line del">-linkwarden_docker_envs: &quot;{{ linkwarden_docker_envs_default</span><span class="diff-line del">-                            | combine(linkwarden_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-linkwarden_docker_commands_default: []</span><span class="diff-line del">-linkwarden_docker_commands_custom: []</span><span class="diff-line del">-linkwarden_docker_commands: &quot;{{ linkwarden_docker_commands_default</span><span class="diff-line del">-                                + linkwarden_docker_commands_custom }}&quot;</span><span class="diff-line add">+  NEXTAUTH_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;linkwarden&#x27;) }}/api/v1/auth&quot;</span><span class="diff-line add">+  DATABASE_URL: &quot;postgresql://{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;linkwarden&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;linkwarden&#x27;) }}@{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;linkwarden&#x27;) }}:5432/{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_envs_custom: {}</span><span class="diff-line add">+linkwarden_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;linkwarden&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;linkwarden&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-linkwarden_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ linkwarden_paths_location }}:/data/data&quot;</span><span class="diff-line del">-linkwarden_docker_volumes_custom: []</span><span class="diff-line del">-linkwarden_docker_volumes: &quot;{{ linkwarden_docker_volumes_default</span><span class="diff-line del">-                               + linkwarden_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-linkwarden_docker_devices_default: []</span><span class="diff-line del">-linkwarden_docker_devices_custom: []</span><span class="diff-line del">-linkwarden_docker_devices: &quot;{{ linkwarden_docker_devices_default</span><span class="diff-line del">-                               + linkwarden_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-linkwarden_docker_hosts_default: {}</span><span class="diff-line del">-linkwarden_docker_hosts_custom: {}</span><span class="diff-line del">-linkwarden_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(linkwarden_docker_hosts_default)</span><span class="diff-line del">-                             | combine(linkwarden_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-linkwarden_docker_labels_default: {}</span><span class="diff-line del">-linkwarden_docker_labels_custom: {}</span><span class="diff-line del">-linkwarden_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(linkwarden_docker_labels_default)</span><span class="diff-line del">-                              | combine(linkwarden_docker_labels_custom) }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;linkwarden&#x27;) }}:/data/data&quot;</span><span class="diff-line add">+linkwarden_role_docker_volumes_custom: []</span><span class="diff-line add">+linkwarden_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;linkwarden&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-linkwarden_docker_hostname: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_hostname: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-linkwarden_docker_networks_alias: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line del">-linkwarden_docker_networks_default: []</span><span class="diff-line del">-linkwarden_docker_networks_custom: []</span><span class="diff-line del">-linkwarden_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + linkwarden_docker_networks_default</span><span class="diff-line del">-                                + linkwarden_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-linkwarden_docker_capabilities_default: []</span><span class="diff-line del">-linkwarden_docker_capabilities_custom: []</span><span class="diff-line del">-linkwarden_docker_capabilities: &quot;{{ linkwarden_docker_capabilities_default</span><span class="diff-line del">-                                    + linkwarden_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-linkwarden_docker_security_opts_default: []</span><span class="diff-line del">-linkwarden_docker_security_opts_custom: []</span><span class="diff-line del">-linkwarden_docker_security_opts: &quot;{{ linkwarden_docker_security_opts_default</span><span class="diff-line del">-                                     + linkwarden_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_networks_alias: &quot;{{ linkwarden_name }}&quot;</span><span class="diff-line add">+linkwarden_role_docker_networks_default: []</span><span class="diff-line add">+linkwarden_role_docker_networks_custom: []</span><span class="diff-line add">+linkwarden_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;linkwarden&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-linkwarden_docker_restart_policy: unless-stopped</span><span class="diff-line add">+linkwarden_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-linkwarden_docker_state: started</span><span class="diff-line add">+linkwarden_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-linkwarden_depends_on: &quot;{{ linkwarden_postgres_name }}&quot;</span><span class="diff-line del">-linkwarden_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-linkwarden_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+linkwarden_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+linkwarden_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+linkwarden_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-228">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/linkwarden/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,18 +7,20 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ linkwarden_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_user: &quot;{{ linkwarden_postgres_docker_env_user }}&quot;</span><span class="diff-line del">-    postgres_docker_env_password: &quot;{{ linkwarden_postgres_docker_env_password }}&quot;</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ linkwarden_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ linkwarden_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ linkwarden_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ linkwarden_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ linkwarden_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;linkwarden&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;linkwarden&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Generate Secret Key&quot;</span><span class="diff-line context">   ansible.builtin.shell: &quot;openssl rand -base64 45&quot;</span><span class="diff-line hunk">@@ -27,9 +29,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-229">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/maintainerr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,134 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-maintainerr_paths_folder: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line del">-maintainerr_paths_location: &quot;{{ server_appdata_path }}/{{ maintainerr_paths_folder }}&quot;</span><span class="diff-line del">-maintainerr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ maintainerr_paths_location }}&quot;</span><span class="diff-line add">+maintainerr_role_paths_folder: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line add">+maintainerr_role_paths_location: &quot;{{ server_appdata_path }}/{{ maintainerr_role_paths_folder }}&quot;</span><span class="diff-line add">+maintainerr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ maintainerr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-maintainerr_web_subdomain: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line del">-maintainerr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-maintainerr_web_port: &quot;6246&quot;</span><span class="diff-line del">-maintainerr_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_subdomain&#x27;, default=maintainerr_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_domain&#x27;, default=maintainerr_web_domain)</span><span class="diff-line del">-                      if (lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_subdomain&#x27;, default=maintainerr_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                      else lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_domain&#x27;, default=maintainerr_web_domain)) }}&quot;</span><span class="diff-line add">+maintainerr_role_web_subdomain: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line add">+maintainerr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+maintainerr_role_web_port: &quot;6246&quot;</span><span class="diff-line add">+maintainerr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;maintainerr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;maintainerr&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;maintainerr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;maintainerr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-maintainerr_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_subdomain&#x27;, default=maintainerr_web_subdomain) }}&quot;</span><span class="diff-line del">-maintainerr_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_web_domain&#x27;, default=maintainerr_web_domain) }}&quot;</span><span class="diff-line del">-maintainerr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+maintainerr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;maintainerr&#x27;) }}&quot;</span><span class="diff-line add">+maintainerr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;maintainerr&#x27;) }}&quot;</span><span class="diff-line add">+maintainerr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-maintainerr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-maintainerr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-maintainerr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-maintainerr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-maintainerr_traefik_enabled: true</span><span class="diff-line del">-maintainerr_traefik_api_enabled: false</span><span class="diff-line del">-maintainerr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+maintainerr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+maintainerr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+maintainerr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+maintainerr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+maintainerr_role_traefik_enabled: true</span><span class="diff-line add">+maintainerr_role_traefik_api_enabled: false</span><span class="diff-line add">+maintainerr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-maintainerr_docker_container: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_container: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-maintainerr_docker_image_pull: true</span><span class="diff-line del">-maintainerr_docker_image_repo: &quot;jorenn92/maintainerr&quot;</span><span class="diff-line del">-maintainerr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-maintainerr_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_image_repo&#x27;, default=maintainerr_docker_image_repo)</span><span class="diff-line del">-                              + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_image_tag&#x27;, default=maintainerr_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-maintainerr_docker_ports_defaults: []</span><span class="diff-line del">-maintainerr_docker_ports_custom: []</span><span class="diff-line del">-maintainerr_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_ports_defaults&#x27;, default=maintainerr_docker_ports_defaults)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_ports_custom&#x27;, default=maintainerr_docker_ports_custom) }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_image_pull: true</span><span class="diff-line add">+maintainerr_role_docker_image_repo: &quot;jorenn92/maintainerr&quot;</span><span class="diff-line add">+maintainerr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+maintainerr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;maintainerr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;maintainerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-maintainerr_docker_envs_default:</span><span class="diff-line add">+maintainerr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-maintainerr_docker_envs_custom: {}</span><span class="diff-line del">-maintainerr_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_envs_default&#x27;, default=maintainerr_docker_envs_default)</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_envs_custom&#x27;, default=maintainerr_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-maintainerr_docker_commands_default: []</span><span class="diff-line del">-maintainerr_docker_commands_custom: []</span><span class="diff-line del">-maintainerr_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_commands_default&#x27;, default=maintainerr_docker_commands_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_commands_custom&#x27;, default=maintainerr_docker_commands_custom) }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_envs_custom: {}</span><span class="diff-line add">+maintainerr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;maintainerr&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;maintainerr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-maintainerr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ maintainerr_paths_location }}:/opt/data&quot;</span><span class="diff-line del">-maintainerr_docker_volumes_custom: []</span><span class="diff-line del">-maintainerr_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_volumes_default&#x27;, default=maintainerr_docker_volumes_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_volumes_custom&#x27;, default=maintainerr_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-maintainerr_docker_devices_default: []</span><span class="diff-line del">-maintainerr_docker_devices_custom: []</span><span class="diff-line del">-maintainerr_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_devices_default&#x27;, default=maintainerr_docker_devices_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_devices_custom&#x27;, default=maintainerr_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-maintainerr_docker_hosts_default: {}</span><span class="diff-line del">-maintainerr_docker_hosts_custom: {}</span><span class="diff-line del">-maintainerr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_hosts_default&#x27;, default=maintainerr_docker_hosts_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_hosts_custom&#x27;, default=maintainerr_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-maintainerr_docker_labels_default: {}</span><span class="diff-line del">-maintainerr_docker_labels_custom: {}</span><span class="diff-line del">-maintainerr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_labels_default&#x27;, default=maintainerr_docker_labels_default))</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_labels_custom&#x27;, default=maintainerr_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;maintainerr&#x27;) }}:/opt/data&quot;</span><span class="diff-line add">+maintainerr_role_docker_volumes_custom: []</span><span class="diff-line add">+maintainerr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;maintainerr&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;maintainerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-maintainerr_docker_hostname: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-maintainerr_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-maintainerr_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_network_mode_default&#x27;, default=maintainerr_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_hostname: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-maintainerr_docker_networks_alias: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line del">-maintainerr_docker_networks_default: []</span><span class="diff-line del">-maintainerr_docker_networks_custom: []</span><span class="diff-line del">-maintainerr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_networks_default&#x27;, default=maintainerr_docker_networks_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_networks_custom&#x27;, default=maintainerr_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-maintainerr_docker_capabilities_default: []</span><span class="diff-line del">-maintainerr_docker_capabilities_custom: []</span><span class="diff-line del">-maintainerr_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_capabilities_default&#x27;, default=maintainerr_docker_capabilities_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_capabilities_custom&#x27;, default=maintainerr_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-maintainerr_docker_security_opts_default: []</span><span class="diff-line del">-maintainerr_docker_security_opts_custom: []</span><span class="diff-line del">-maintainerr_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_security_opts_default&#x27;, default=maintainerr_docker_security_opts_default)</span><span class="diff-line del">-                                      + lookup(&#x27;vars&#x27;, maintainerr_name + &#x27;_docker_security_opts_custom&#x27;, default=maintainerr_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_networks_alias: &quot;{{ maintainerr_name }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_networks_default: []</span><span class="diff-line add">+maintainerr_role_docker_networks_custom: []</span><span class="diff-line add">+maintainerr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;maintainerr&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;maintainerr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-maintainerr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+maintainerr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-maintainerr_docker_state: started</span><span class="diff-line add">+maintainerr_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-maintainerr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+maintainerr_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-230">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/maintainerr/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-231">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/makemkv/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-makemkv_paths_folder: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line del">-makemkv_paths_location: &quot;{{ server_appdata_path }}/{{ makemkv_paths_folder }}&quot;</span><span class="diff-line del">-makemkv_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ makemkv_paths_location }}&quot;</span><span class="diff-line add">+makemkv_role_paths_folder: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line add">+makemkv_role_paths_location: &quot;{{ server_appdata_path }}/{{ makemkv_role_paths_folder }}&quot;</span><span class="diff-line add">+makemkv_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ makemkv_role_paths_location }}&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/makemkv&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-makemkv_web_subdomain: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line del">-makemkv_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-makemkv_web_port: &quot;5800&quot;</span><span class="diff-line del">-makemkv_web_url: &quot;{{ &#x27;https://&#x27; + (makemkv_web_subdomain + &#x27;.&#x27; + makemkv_web_domain</span><span class="diff-line del">-                  if (makemkv_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else makemkv_web_domain) }}&quot;</span><span class="diff-line add">+makemkv_role_web_subdomain: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line add">+makemkv_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+makemkv_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+makemkv_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;makemkv&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;makemkv&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;makemkv&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;makemkv&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-makemkv_dns_record: &quot;{{ makemkv_web_subdomain }}&quot;</span><span class="diff-line del">-makemkv_dns_zone: &quot;{{ makemkv_web_domain }}&quot;</span><span class="diff-line del">-makemkv_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+makemkv_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;makemkv&#x27;) }}&quot;</span><span class="diff-line add">+makemkv_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;makemkv&#x27;) }}&quot;</span><span class="diff-line add">+makemkv_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-makemkv_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-makemkv_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-makemkv_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-makemkv_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-makemkv_traefik_enabled: true</span><span class="diff-line del">-makemkv_traefik_api_enabled: false</span><span class="diff-line del">-makemkv_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+makemkv_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+makemkv_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+makemkv_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+makemkv_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+makemkv_role_traefik_enabled: true</span><span class="diff-line add">+makemkv_role_traefik_api_enabled: false</span><span class="diff-line add">+makemkv_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-makemkv_docker_container: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line add">+makemkv_role_docker_container: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-makemkv_docker_image_pull: true</span><span class="diff-line del">-makemkv_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-makemkv_docker_image: &quot;jlesage/makemkv:{{ makemkv_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-makemkv_docker_ports_defaults: []</span><span class="diff-line del">-makemkv_docker_ports_custom: []</span><span class="diff-line del">-makemkv_docker_ports: &quot;{{ makemkv_docker_ports_defaults</span><span class="diff-line del">-                          + makemkv_docker_ports_custom }}&quot;</span><span class="diff-line add">+makemkv_role_docker_image_pull: true</span><span class="diff-line add">+makemkv_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+makemkv_role_docker_image_repo: &quot;jlesage/makemkv&quot;</span><span class="diff-line add">+makemkv_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;makemkv&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;makemkv&#x27;) }}&quot;</span><span class="diff-line context"> # Envs</span><span class="diff-line del">-makemkv_docker_envs_default:</span><span class="diff-line add">+makemkv_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   KEEP_APP_RUNNING: &quot;1&quot;</span><span class="diff-line del">-makemkv_docker_envs_custom: {}</span><span class="diff-line del">-makemkv_docker_envs: &quot;{{ makemkv_docker_envs_default</span><span class="diff-line del">-                         | combine(makemkv_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-makemkv_docker_commands_default: []</span><span class="diff-line del">-makemkv_docker_commands_custom: []</span><span class="diff-line del">-makemkv_docker_commands: &quot;{{ makemkv_docker_commands_default</span><span class="diff-line del">-                             + makemkv_docker_commands_custom }}&quot;</span><span class="diff-line add">+makemkv_role_docker_envs_custom: {}</span><span class="diff-line add">+makemkv_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;makemkv&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;makemkv&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-makemkv_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ makemkv_paths_location }}:/docker/appdata/makemkv&quot;</span><span class="diff-line add">+makemkv_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;makemkv&#x27;) }}:/docker/appdata/makemkv&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs:/storage:ro&quot;</span><span class="diff-line del">-  - &quot;/mnt/unionfs/makemkv:/output:rw&quot;</span><span class="diff-line del">-makemkv_docker_volumes_custom: []</span><span class="diff-line del">-makemkv_docker_volumes: &quot;{{ makemkv_docker_volumes_default</span><span class="diff-line del">-                            + makemkv_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-makemkv_docker_devices_default: []</span><span class="diff-line del">-makemkv_docker_devices_custom: []</span><span class="diff-line del">-makemkv_docker_devices: &quot;{{ makemkv_docker_devices_default</span><span class="diff-line del">-                            + makemkv_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-makemkv_docker_hosts_default: {}</span><span class="diff-line del">-makemkv_docker_hosts_custom: {}</span><span class="diff-line del">-makemkv_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(makemkv_docker_hosts_default)</span><span class="diff-line del">-                          | combine(makemkv_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-makemkv_docker_labels_default: {}</span><span class="diff-line del">-makemkv_docker_labels_custom: {}</span><span class="diff-line del">-makemkv_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(makemkv_docker_labels_default)</span><span class="diff-line del">-                           | combine(makemkv_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;/mnt/unionfs/makemkv:/output&quot;</span><span class="diff-line add">+makemkv_role_docker_volumes_custom: []</span><span class="diff-line add">+makemkv_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;makemkv&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;makemkv&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-makemkv_docker_hostname: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line add">+makemkv_role_docker_hostname: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-makemkv_docker_networks_alias: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line del">-makemkv_docker_networks_default: []</span><span class="diff-line del">-makemkv_docker_networks_custom: []</span><span class="diff-line del">-makemkv_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + makemkv_docker_networks_default</span><span class="diff-line del">-                             + makemkv_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-makemkv_docker_capabilities_default: []</span><span class="diff-line del">-makemkv_docker_capabilities_custom: []</span><span class="diff-line del">-makemkv_docker_capabilities: &quot;{{ makemkv_docker_capabilities_default</span><span class="diff-line del">-                                 + makemkv_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-makemkv_docker_security_opts_default: []</span><span class="diff-line del">-makemkv_docker_security_opts_custom: []</span><span class="diff-line del">-makemkv_docker_security_opts: &quot;{{ makemkv_docker_security_opts_default</span><span class="diff-line del">-                                  + makemkv_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+makemkv_role_docker_networks_alias: &quot;{{ makemkv_name }}&quot;</span><span class="diff-line add">+makemkv_role_docker_networks_default: []</span><span class="diff-line add">+makemkv_role_docker_networks_custom: []</span><span class="diff-line add">+makemkv_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;makemkv&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;makemkv&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-makemkv_docker_restart_policy: unless-stopped</span><span class="diff-line add">+makemkv_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-makemkv_docker_state: started</span><span class="diff-line add">+makemkv_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-232">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/makemkv/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-233">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mealie/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,123 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mealie_paths_folder: &quot;{{ mealie_name }}&quot;</span><span class="diff-line del">-mealie_paths_location: &quot;{{ server_appdata_path }}/{{ mealie_paths_folder }}&quot;</span><span class="diff-line del">-mealie_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ mealie_paths_location }}&quot;</span><span class="diff-line add">+mealie_role_paths_folder: &quot;{{ mealie_name }}&quot;</span><span class="diff-line add">+mealie_role_paths_location: &quot;{{ server_appdata_path }}/{{ mealie_role_paths_folder }}&quot;</span><span class="diff-line add">+mealie_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ mealie_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mealie_web_subdomain: &quot;{{ mealie_name }}&quot;</span><span class="diff-line del">-mealie_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-mealie_web_port: &quot;9000&quot;</span><span class="diff-line del">-mealie_web_url: &quot;{{ &#x27;https://&#x27; + (mealie_web_subdomain + &#x27;.&#x27; + mealie_web_domain</span><span class="diff-line del">-                      if (mealie_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else mealie_web_domain) }}&quot;</span><span class="diff-line add">+mealie_role_web_subdomain: &quot;{{ mealie_name }}&quot;</span><span class="diff-line add">+mealie_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+mealie_role_web_port: &quot;9000&quot;</span><span class="diff-line add">+mealie_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mealie&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mealie&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mealie&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mealie&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mealie_dns_record: &quot;{{ mealie_web_subdomain }}&quot;</span><span class="diff-line del">-mealie_dns_zone: &quot;{{ mealie_web_domain }}&quot;</span><span class="diff-line del">-mealie_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+mealie_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line add">+mealie_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line add">+mealie_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mealie_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-mealie_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-mealie_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-mealie_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-mealie_traefik_enabled: true</span><span class="diff-line del">-mealie_traefik_api_enabled: false</span><span class="diff-line del">-mealie_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+mealie_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+mealie_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+mealie_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+mealie_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+mealie_role_traefik_enabled: true</span><span class="diff-line add">+mealie_role_traefik_api_enabled: false</span><span class="diff-line add">+mealie_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-mealie_docker_container: &quot;{{ mealie_name }}&quot;</span><span class="diff-line add">+mealie_role_docker_container: &quot;{{ mealie_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-mealie_docker_image_pull: true</span><span class="diff-line del">-mealie_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-mealie_docker_image: &quot;ghcr.io/mealie-recipes/mealie:{{ mealie_docker_image_tag }}&quot;</span><span class="diff-line add">+mealie_role_docker_image_pull: true</span><span class="diff-line add">+mealie_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+mealie_role_docker_image_repo: &quot;ghcr.io/mealie-recipes/mealie&quot;</span><span class="diff-line add">+mealie_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;mealie&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-mealie_docker_envs_default:</span><span class="diff-line add">+mealie_role_docker_envs_default:</span><span class="diff-line context">   ALLOW_SIGNUP: &quot;false&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  BASE_URL: &quot;{{ mealie_web_url }}&quot;</span><span class="diff-line del">-mealie_docker_envs_custom: {}</span><span class="diff-line del">-mealie_docker_envs: &quot;{{ mealie_docker_envs_default</span><span class="diff-line del">-                              | combine(mealie_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-mealie_docker_commands_default: []</span><span class="diff-line del">-mealie_docker_commands_custom: []</span><span class="diff-line del">-mealie_docker_commands: &quot;{{ mealie_docker_commands_default</span><span class="diff-line del">-                                  + mealie_docker_commands_custom }}&quot;</span><span class="diff-line add">+  BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line add">+mealie_role_docker_envs_custom: {}</span><span class="diff-line add">+mealie_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;mealie&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;mealie&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-mealie_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ mealie_paths_location }}:/app/data&quot;</span><span class="diff-line del">-mealie_docker_volumes_custom: []</span><span class="diff-line del">-mealie_docker_volumes: &quot;{{ mealie_docker_volumes_default</span><span class="diff-line del">-                                 + mealie_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-mealie_docker_devices_default: []</span><span class="diff-line del">-mealie_docker_devices_custom: []</span><span class="diff-line del">-mealie_docker_devices: &quot;{{ mealie_docker_devices_default</span><span class="diff-line del">-                                 + mealie_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-mealie_docker_hosts_default: {}</span><span class="diff-line del">-mealie_docker_hosts_custom: {}</span><span class="diff-line del">-mealie_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(mealie_docker_hosts_default)</span><span class="diff-line del">-                               | combine(mealie_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-mealie_docker_labels_default: {}</span><span class="diff-line del">-mealie_docker_labels_custom: {}</span><span class="diff-line del">-mealie_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(mealie_docker_labels_default)</span><span class="diff-line del">-                                | combine(mealie_docker_labels_custom) }}&quot;</span><span class="diff-line add">+mealie_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mealie&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+mealie_role_docker_volumes_custom: []</span><span class="diff-line add">+mealie_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;mealie&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-mealie_docker_hostname: &quot;{{ mealie_name }}&quot;</span><span class="diff-line add">+mealie_role_docker_hostname: &quot;{{ mealie_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-mealie_docker_networks_alias: &quot;{{ mealie_name }}&quot;</span><span class="diff-line del">-mealie_docker_networks_default: []</span><span class="diff-line del">-mealie_docker_networks_custom: []</span><span class="diff-line del">-mealie_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + mealie_docker_networks_default</span><span class="diff-line del">-                                  + mealie_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-mealie_docker_capabilities_default: []</span><span class="diff-line del">-mealie_docker_capabilities_custom: []</span><span class="diff-line del">-mealie_docker_capabilities: &quot;{{ mealie_docker_capabilities_default</span><span class="diff-line del">-                                      + mealie_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-mealie_docker_security_opts_default: []</span><span class="diff-line del">-mealie_docker_security_opts_custom: []</span><span class="diff-line del">-mealie_docker_security_opts: &quot;{{ mealie_docker_security_opts_default</span><span class="diff-line del">-                                       + mealie_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+mealie_role_docker_networks_alias: &quot;{{ mealie_name }}&quot;</span><span class="diff-line add">+mealie_role_docker_networks_default: []</span><span class="diff-line add">+mealie_role_docker_networks_custom: []</span><span class="diff-line add">+mealie_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;mealie&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;mealie&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-mealie_docker_restart_policy: unless-stopped</span><span class="diff-line add">+mealie_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-mealie_docker_state: started</span><span class="diff-line add">+mealie_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-234">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mealie/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-235">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/medusa/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-medusa_paths_folder: &quot;{{ medusa_name }}&quot;</span><span class="diff-line del">-medusa_paths_location: &quot;{{ server_appdata_path }}/{{ medusa_paths_folder }}&quot;</span><span class="diff-line del">-medusa_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ medusa_paths_location }}&quot;</span><span class="diff-line add">+medusa_role_paths_folder: &quot;{{ medusa_name }}&quot;</span><span class="diff-line add">+medusa_role_paths_location: &quot;{{ server_appdata_path }}/{{ medusa_role_paths_folder }}&quot;</span><span class="diff-line add">+medusa_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ medusa_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-medusa_web_subdomain: &quot;{{ medusa_name }}&quot;</span><span class="diff-line del">-medusa_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-medusa_web_port: &quot;8081&quot;</span><span class="diff-line del">-medusa_web_url: &quot;{{ &#x27;https://&#x27; + (medusa_web_subdomain + &#x27;.&#x27; + medusa_web_domain</span><span class="diff-line del">-                 if (medusa_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else medusa_web_domain) }}&quot;</span><span class="diff-line add">+medusa_role_web_subdomain: &quot;{{ medusa_name }}&quot;</span><span class="diff-line add">+medusa_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+medusa_role_web_port: &quot;8081&quot;</span><span class="diff-line add">+medusa_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;medusa&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;medusa&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;medusa&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;medusa&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-medusa_dns_record: &quot;{{ medusa_web_subdomain }}&quot;</span><span class="diff-line del">-medusa_dns_zone: &quot;{{ medusa_web_domain }}&quot;</span><span class="diff-line del">-medusa_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+medusa_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;medusa&#x27;) }}&quot;</span><span class="diff-line add">+medusa_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;medusa&#x27;) }}&quot;</span><span class="diff-line add">+medusa_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-medusa_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-medusa_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-medusa_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-medusa_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-medusa_traefik_enabled: true</span><span class="diff-line del">-medusa_traefik_api_enabled: false</span><span class="diff-line del">-medusa_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+medusa_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+medusa_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+medusa_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+medusa_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+medusa_role_traefik_enabled: true</span><span class="diff-line add">+medusa_role_traefik_api_enabled: false</span><span class="diff-line add">+medusa_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-medusa_docker_container: &quot;{{ medusa_name }}&quot;</span><span class="diff-line add">+medusa_role_docker_container: &quot;{{ medusa_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-medusa_docker_image_pull: true</span><span class="diff-line del">-medusa_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-medusa_docker_image: &quot;lscr.io/linuxserver/medusa:{{ medusa_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-medusa_docker_ports_defaults: []</span><span class="diff-line del">-medusa_docker_ports_custom: []</span><span class="diff-line del">-medusa_docker_ports: &quot;{{ medusa_docker_ports_defaults</span><span class="diff-line del">-                         + medusa_docker_ports_custom }}&quot;</span><span class="diff-line add">+medusa_role_docker_image_pull: true</span><span class="diff-line add">+medusa_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+medusa_role_docker_image_repo: &quot;lscr.io/linuxserver/medusa&quot;</span><span class="diff-line add">+medusa_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;medusa&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;medusa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-medusa_docker_envs_default:</span><span class="diff-line add">+medusa_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line del">-medusa_docker_envs_custom: {}</span><span class="diff-line del">-medusa_docker_envs: &quot;{{ medusa_docker_envs_default</span><span class="diff-line del">-                        | combine(medusa_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-medusa_docker_commands_default: []</span><span class="diff-line del">-medusa_docker_commands_custom: []</span><span class="diff-line del">-medusa_docker_commands: &quot;{{ medusa_docker_commands_default</span><span class="diff-line del">-                            + medusa_docker_commands_custom }}&quot;</span><span class="diff-line add">+medusa_role_docker_envs_custom: {}</span><span class="diff-line add">+medusa_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;medusa&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;medusa&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-medusa_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ medusa_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;/opt/scripts:/scripts&quot;</span><span class="diff-line add">+medusa_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;medusa&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/TV:/tv&quot;</span><span class="diff-line del">-medusa_docker_volumes_custom: []</span><span class="diff-line del">-medusa_docker_volumes: &quot;{{ medusa_docker_volumes_default</span><span class="diff-line del">-                           + medusa_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-medusa_docker_devices_default: []</span><span class="diff-line del">-medusa_docker_devices_custom: []</span><span class="diff-line del">-medusa_docker_devices: &quot;{{ medusa_docker_devices_default</span><span class="diff-line del">-                           + medusa_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-medusa_docker_hosts_default: {}</span><span class="diff-line del">-medusa_docker_hosts_custom: {}</span><span class="diff-line del">-medusa_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(medusa_docker_hosts_default)</span><span class="diff-line del">-                         | combine(medusa_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-medusa_docker_labels_default: {}</span><span class="diff-line del">-medusa_docker_labels_custom: {}</span><span class="diff-line del">-medusa_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(medusa_docker_labels_default)</span><span class="diff-line del">-                          | combine(medusa_docker_labels_custom) }}&quot;</span><span class="diff-line add">+medusa_role_docker_volumes_custom: []</span><span class="diff-line add">+medusa_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;medusa&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;medusa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-medusa_docker_hostname: &quot;{{ medusa_name }}&quot;</span><span class="diff-line add">+medusa_role_docker_hostname: &quot;{{ medusa_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-medusa_docker_networks_alias: &quot;{{ medusa_name }}&quot;</span><span class="diff-line del">-medusa_docker_networks_default: []</span><span class="diff-line del">-medusa_docker_networks_custom: []</span><span class="diff-line del">-medusa_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + medusa_docker_networks_default</span><span class="diff-line del">-                            + medusa_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-medusa_docker_capabilities_default: []</span><span class="diff-line del">-medusa_docker_capabilities_custom: []</span><span class="diff-line del">-medusa_docker_capabilities: &quot;{{ medusa_docker_capabilities_default</span><span class="diff-line del">-                                + medusa_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-medusa_docker_security_opts_default: []</span><span class="diff-line del">-medusa_docker_security_opts_custom: []</span><span class="diff-line del">-medusa_docker_security_opts: &quot;{{ medusa_docker_security_opts_default</span><span class="diff-line del">-                                 + medusa_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+medusa_role_docker_networks_alias: &quot;{{ medusa_name }}&quot;</span><span class="diff-line add">+medusa_role_docker_networks_default: []</span><span class="diff-line add">+medusa_role_docker_networks_custom: []</span><span class="diff-line add">+medusa_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;medusa&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;medusa&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-medusa_docker_restart_policy: unless-stopped</span><span class="diff-line add">+medusa_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-medusa_docker_state: started</span><span class="diff-line add">+medusa_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-236">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/medusa/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,9 +9,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-237">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/meilisearch/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,98 +17,55 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-meilisearch_paths_folder: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line del">-meilisearch_paths_location: &quot;{{ server_appdata_path }}/{{ meilisearch_paths_folder }}&quot;</span><span class="diff-line del">-meilisearch_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ meilisearch_paths_location }}&quot;</span><span class="diff-line add">+meilisearch_role_paths_folder: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line add">+meilisearch_role_paths_location: &quot;{{ server_appdata_path }}/{{ meilisearch_role_paths_folder }}&quot;</span><span class="diff-line add">+meilisearch_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ meilisearch_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-meilisearch_docker_container: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_container: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-meilisearch_docker_image_pull: true</span><span class="diff-line del">-meilisearch_docker_image: &quot;getmeili/meilisearch:{{ meilisearch_docker_image_tag }}&quot;</span><span class="diff-line del">-meilisearch_docker_image_tag: &quot;v1.11.1&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-meilisearch_docker_ports_defaults: []</span><span class="diff-line del">-meilisearch_docker_ports_custom: []</span><span class="diff-line del">-meilisearch_docker_ports: &quot;{{ meilisearch_docker_ports_defaults</span><span class="diff-line del">-                          + meilisearch_docker_ports_custom }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_image_pull: true</span><span class="diff-line add">+meilisearch_role_docker_image_repo: &quot;getmeili/meilisearch&quot;</span><span class="diff-line add">+meilisearch_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;meilisearch&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;meilisearch&#x27;) }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_image_tag: &quot;v1.11.1&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-meilisearch_docker_envs_default:</span><span class="diff-line add">+meilisearch_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   MEILI_NO_ANALYTICS: &quot;true&quot;</span><span class="diff-line context">   MEILI_MASTER_KEY: &quot;{{ meilisearch_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line del">-meilisearch_docker_envs_custom: {}</span><span class="diff-line del">-meilisearch_docker_envs: &quot;{{ meilisearch_docker_envs_default</span><span class="diff-line del">-                         | combine(meilisearch_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-meilisearch_docker_commands_default: []</span><span class="diff-line del">-meilisearch_docker_commands_custom: []</span><span class="diff-line del">-meilisearch_docker_commands: &quot;{{ meilisearch_docker_commands_default</span><span class="diff-line del">-                             + meilisearch_docker_commands_custom }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_envs_custom: {}</span><span class="diff-line add">+meilisearch_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;meilisearch&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;meilisearch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-meilisearch_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ meilisearch_paths_location }}/data:/meili_data&quot;</span><span class="diff-line del">-meilisearch_docker_volumes_custom: []</span><span class="diff-line del">-meilisearch_docker_volumes: &quot;{{ meilisearch_docker_volumes_default</span><span class="diff-line del">-                            + meilisearch_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-meilisearch_docker_devices_default: []</span><span class="diff-line del">-meilisearch_docker_devices_custom: []</span><span class="diff-line del">-meilisearch_docker_devices: &quot;{{ meilisearch_docker_devices_default</span><span class="diff-line del">-                            + meilisearch_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-meilisearch_docker_hosts_default: {}</span><span class="diff-line del">-meilisearch_docker_hosts_custom: {}</span><span class="diff-line del">-meilisearch_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(meilisearch_docker_hosts_default)</span><span class="diff-line del">-                          | combine(meilisearch_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-meilisearch_docker_labels_default: {}</span><span class="diff-line del">-meilisearch_docker_labels_custom: {}</span><span class="diff-line del">-meilisearch_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(meilisearch_docker_labels_default)</span><span class="diff-line del">-                           | combine(meilisearch_docker_labels_custom) }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;meilisearch&#x27;) }}/data:/meili_data&quot;</span><span class="diff-line add">+meilisearch_role_docker_volumes_custom: []</span><span class="diff-line add">+meilisearch_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;meilisearch&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;meilisearch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-meilisearch_docker_hostname: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_hostname: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-meilisearch_docker_networks_alias: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line del">-meilisearch_docker_networks_default: []</span><span class="diff-line del">-meilisearch_docker_networks_custom: []</span><span class="diff-line del">-meilisearch_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + meilisearch_docker_networks_default</span><span class="diff-line del">-                             + meilisearch_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-meilisearch_docker_capabilities_default: []</span><span class="diff-line del">-meilisearch_docker_capabilities_custom: []</span><span class="diff-line del">-meilisearch_docker_capabilities: &quot;{{ meilisearch_docker_capabilities_default</span><span class="diff-line del">-                                 + meilisearch_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-meilisearch_docker_security_opts_default: []</span><span class="diff-line del">-meilisearch_docker_security_opts_custom: []</span><span class="diff-line del">-meilisearch_docker_security_opts: &quot;{{ meilisearch_docker_security_opts_default</span><span class="diff-line del">-                                  + meilisearch_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_networks_alias: &quot;{{ meilisearch_name }}&quot;</span><span class="diff-line add">+meilisearch_role_docker_networks_default: []</span><span class="diff-line add">+meilisearch_role_docker_networks_custom: []</span><span class="diff-line add">+meilisearch_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;meilisearch&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;meilisearch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-meilisearch_docker_restart_policy: unless-stopped</span><span class="diff-line add">+meilisearch_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-meilisearch_docker_state: started</span><span class="diff-line add">+meilisearch_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-238">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/meilisearch/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,6 +16,7 @@</span><span class="diff-line context">       secret_key: &quot;{{ lookup(&#x27;ansible.builtin.password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_letters&#x27;, &#x27;digits&#x27;], length=36) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: meilisearch_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-239">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/membarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,103 +14,66 @@</span><span class="diff-line context"> membarr_name: membarr</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+membarr_role_discord_token: &quot;your_discord_bot_token&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-membarr_paths_folder: &quot;{{ membarr_name }}&quot;</span><span class="diff-line del">-membarr_paths_location: &quot;{{ server_appdata_path }}/{{ membarr_paths_folder }}&quot;</span><span class="diff-line del">-membarr_paths_recursive: true</span><span class="diff-line del">-membarr_paths_config_location: &quot;{{ membarr_paths_location }}/config.ini&quot;</span><span class="diff-line del">-membarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ membarr_paths_location }}&quot;</span><span class="diff-line add">+membarr_role_paths_folder: &quot;{{ membarr_name }}&quot;</span><span class="diff-line add">+membarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ membarr_role_paths_folder }}&quot;</span><span class="diff-line add">+membarr_role_paths_recursive: true</span><span class="diff-line add">+membarr_role_paths_config_location: &quot;{{ membarr_role_paths_location }}/config.ini&quot;</span><span class="diff-line add">+membarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ membarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-membarr_docker_container: &quot;{{ membarr_name }}&quot;</span><span class="diff-line add">+membarr_role_docker_container: &quot;{{ membarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-membarr_docker_image_pull: true</span><span class="diff-line del">-membarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-membarr_docker_image: &quot;yoruio/membarr:{{ membarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-membarr_docker_ports_defaults: []</span><span class="diff-line del">-membarr_docker_ports_custom: []</span><span class="diff-line del">-membarr_docker_ports: &quot;{{ membarr_docker_ports_defaults</span><span class="diff-line del">-                          + membarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+membarr_role_docker_image_pull: true</span><span class="diff-line add">+membarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+membarr_role_docker_image_repo: &quot;yoruio/membarr&quot;</span><span class="diff-line add">+membarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;membarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-membarr_docker_envs_default:</span><span class="diff-line add">+membarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  token: &quot;{{ membarr.discord_token }}&quot;</span><span class="diff-line del">-membarr_docker_envs_custom: {}</span><span class="diff-line del">-membarr_docker_envs: &quot;{{ membarr_docker_envs_default</span><span class="diff-line del">-                         | combine(membarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-membarr_docker_commands_default: []</span><span class="diff-line del">-membarr_docker_commands_custom: []</span><span class="diff-line del">-membarr_docker_commands: &quot;{{ membarr_docker_commands_default</span><span class="diff-line del">-                             + membarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+  token: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_discord_token&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line add">+membarr_role_docker_envs_custom: {}</span><span class="diff-line add">+membarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;membarr&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;membarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-membarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ membarr_paths_location }}:/app/app/config&quot;</span><span class="diff-line del">-membarr_docker_volumes_custom: []</span><span class="diff-line del">-membarr_docker_volumes: &quot;{{ membarr_docker_volumes_default</span><span class="diff-line del">-                            + membarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-membarr_docker_devices_default: []</span><span class="diff-line del">-membarr_docker_devices_custom: []</span><span class="diff-line del">-membarr_docker_devices: &quot;{{ membarr_docker_devices_default</span><span class="diff-line del">-                            + membarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-membarr_docker_hosts_default: {}</span><span class="diff-line del">-membarr_docker_hosts_custom: {}</span><span class="diff-line del">-membarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(membarr_docker_hosts_default)</span><span class="diff-line del">-                          | combine(membarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-membarr_docker_labels_default: {}</span><span class="diff-line del">-membarr_docker_labels_custom: {}</span><span class="diff-line del">-membarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(membarr_docker_labels_default)</span><span class="diff-line del">-                           | combine(membarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+membarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;membarr&#x27;) }}:/app/app/config&quot;</span><span class="diff-line add">+membarr_role_docker_volumes_custom: []</span><span class="diff-line add">+membarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;membarr&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-membarr_docker_hostname: &quot;{{ membarr_name }}&quot;</span><span class="diff-line add">+membarr_role_docker_hostname: &quot;{{ membarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-membarr_docker_networks_alias: &quot;{{ membarr_name }}&quot;</span><span class="diff-line del">-membarr_docker_networks_default: []</span><span class="diff-line del">-membarr_docker_networks_custom: []</span><span class="diff-line del">-membarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + membarr_docker_networks_default</span><span class="diff-line del">-                             + membarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-membarr_docker_capabilities_default: []</span><span class="diff-line del">-membarr_docker_capabilities_custom: []</span><span class="diff-line del">-membarr_docker_capabilities: &quot;{{ membarr_docker_capabilities_default</span><span class="diff-line del">-                                 + membarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-membarr_docker_security_opts_default: []</span><span class="diff-line del">-membarr_docker_security_opts_custom: []</span><span class="diff-line del">-membarr_docker_security_opts: &quot;{{ membarr_docker_security_opts_default</span><span class="diff-line del">-                                  + membarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+membarr_role_docker_networks_alias: &quot;{{ membarr_name }}&quot;</span><span class="diff-line add">+membarr_role_docker_networks_default: []</span><span class="diff-line add">+membarr_role_docker_networks_custom: []</span><span class="diff-line add">+membarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;membarr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-membarr_docker_restart_policy: always</span><span class="diff-line add">+membarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-membarr_docker_state: started</span><span class="diff-line add">+membarr_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-membarr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+membarr_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-240">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/membarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,11 +7,10 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Fail when default membarr.discord_token is specified</span><span class="diff-line add">+- name: Fail when default membarr_role_discord_token is specified</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You must specify a Discord bot token in the settings under membarr.discord_token.&quot;</span><span class="diff-line del">-  when: (membarr.discord_token == &#x27;your_discord_bot_token&#x27;) and</span><span class="diff-line del">-        (not continuous_integration)</span><span class="diff-line add">+    msg: &quot;You must specify a Discord bot token in membarr_role_discord_token using the inventory.&quot;</span><span class="diff-line add">+  when: (lookup(&#x27;role_var&#x27;, &#x27;_discord_token&#x27;, role=&#x27;membarr&#x27;) == &#x27;your_discord_bot_token&#x27;) and (not continuous_integration)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-241">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/membarr/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,12 +10,12 @@</span><span class="diff-line context"> - name: Set Default Plex instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     plex_name: &quot;{{ plex_instances[0] }}&quot;</span><span class="diff-line del">-  when: not plex_name is defined</span><span class="diff-line add">+  when: (not plex_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> # Plex Tasks</span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ plex_paths_config_location | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Settings | Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;plex&#x27;) | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;plex&#x27;) }}&quot;</span><span class="diff-line context">   register: preferences_xml</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Settings | {{ plex_name }} info tasks</span><span class="diff-line hunk">@@ -23,15 +23,11 @@</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Settings | Fetch {{ plex_name }} info</span><span class="diff-line context">       community.general.xml:</span><span class="diff-line del">-        path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;plex&#x27;) }}&quot;</span><span class="diff-line context">         xpath: /Preferences</span><span class="diff-line context">         content: attribute</span><span class="diff-line context">       register: preferences_xml_resp</span><span class="diff-line context">       ignore_errors: true</span><span class="diff-line del">-</span><span class="diff-line del">-    - name: Settings | Register {{ plex_name }} Auth Token Value</span><span class="diff-line del">-      ansible.builtin.set_fact:</span><span class="diff-line del">-        plex_auth_token: &quot;{{ preferences_xml_resp.matches[0].Preferences.PlexOnlineToken }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Settings | Register {{ plex_name }} Friendly Server Name</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line hunk">@@ -41,18 +37,23 @@</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line context">         plex_online_username: &quot;{{ preferences_xml_resp.matches[0].Preferences.PlexOnlineUsername }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | Check if `{{ membarr_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;membarr&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ membarr_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line context">   register: membarr_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ membarr_paths_config_location | basename }}` tasks</span><span class="diff-line del">-  when: not membarr_config.stat.exists</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;membarr&#x27;) | basename }}` tasks</span><span class="diff-line add">+  when: (not membarr_config.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Settings | Import default `{{ membarr_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import Plex Auth Token role</span><span class="diff-line add">+      ansible.builtin.include_role:</span><span class="diff-line add">+        name: plex_auth_token</span><span class="diff-line add">+      when: plex_account_is_enabled</span><span class="diff-line add">+</span><span class="diff-line add">+    - name: Settings | Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;membarr&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: config.ini.j2</span><span class="diff-line del">-        dest: &quot;{{ membarr_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;membarr&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-242">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/membarr/templates/config.ini.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,7 +1,7 @@</span><span class="diff-line context"> [bot_envs]</span><span class="diff-line del">-Discord_bot_token = {{ membarr.discord_token }}</span><span class="diff-line add">+Discord_bot_token = {{ lookup(&#x27;role_var&#x27;, &#x27;_discord_token&#x27;, role=&#x27;membarr&#x27;) }}</span><span class="diff-line context"> {% if plex_auth_token is defined %}</span><span class="diff-line del">-plex_base_url = {{ plex_web_url }}</span><span class="diff-line add">+plex_base_url = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}</span><span class="diff-line context"> plex_token = {{ plex_auth_token }}</span><span class="diff-line context"> plex_server_name = {{ plex_friendly_name }}</span><span class="diff-line context"> plex_user = {{ plex_online_username }}</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-243">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/minecraft/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,150 +11,112 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> minecraft_instances: [&quot;minecraft&quot;]</span><span class="diff-line del">-minecraft_dynmap_router_enabled: false</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+minecraft_role_dynmap_router_enabled: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_paths_folder: &quot;minecraft&quot;</span><span class="diff-line del">-minecraft_paths_location: &quot;{{ server_appdata_path }}/{{ minecraft_paths_folder }}&quot;</span><span class="diff-line del">-minecraft_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ minecraft_paths_location }}/&quot;</span><span class="diff-line del">-  - &quot;{{ minecraft_paths_location }}/{{ minecraft_name }}&quot;</span><span class="diff-line del">-  - &quot;{{ minecraft_paths_location }}/{{ minecraft_name }}/data&quot;</span><span class="diff-line del">-minecraft_paths_recursive: true</span><span class="diff-line add">+minecraft_role_paths_folder: &quot;minecraft&quot;</span><span class="diff-line add">+minecraft_role_paths_location: &quot;{{ server_appdata_path }}/{{ minecraft_role_paths_folder }}&quot;</span><span class="diff-line add">+minecraft_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ minecraft_role_paths_location }}/&quot;</span><span class="diff-line add">+  - &quot;{{ minecraft_role_paths_location }}/{{ minecraft_name }}&quot;</span><span class="diff-line add">+  - &quot;{{ minecraft_role_paths_location }}/{{ minecraft_name }}/data&quot;</span><span class="diff-line add">+minecraft_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_web_subdomain: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line del">-minecraft_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+minecraft_role_web_subdomain: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line add">+minecraft_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line context"> # Dynmap</span><span class="diff-line del">-minecraft_web_port: &quot;8123&quot;</span><span class="diff-line add">+minecraft_role_web_port: &quot;8123&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_web_subdomain&#x27;, default=minecraft_web_subdomain) }}&quot;</span><span class="diff-line del">-minecraft_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_web_domain&#x27;, default=minecraft_web_domain) }}&quot;</span><span class="diff-line del">-minecraft_dns_proxy: false</span><span class="diff-line add">+minecraft_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line add">+minecraft_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line add">+minecraft_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-minecraft_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-minecraft_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-minecraft_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-minecraft_traefik_enabled: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_dynmap_router_enabled&#x27;, default=minecraft_dynmap_router_enabled) }}&quot;</span><span class="diff-line add">+minecraft_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+minecraft_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+minecraft_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+minecraft_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+minecraft_role_traefik_enabled: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dynmap_router_enabled&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Ports</span><span class="diff-line context"> ################################</span><span class="diff-line del">-minecraft_docker_ports_25565: &quot;{{ port_lookup_minecraft_tcp.meta.port</span><span class="diff-line del">-                               if (port_lookup_minecraft_tcp.meta.port is defined) and (port_lookup_minecraft_tcp.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                               else &#x27;25565&#x27; }}&quot;</span><span class="diff-line add">+minecraft_role_docker_ports_25565: &quot;{{ port_lookup_minecraft_tcp.meta.port</span><span class="diff-line add">+                                    if (port_lookup_minecraft_tcp.meta.port is defined) and (port_lookup_minecraft_tcp.meta.port | trim | length &gt; 0)</span><span class="diff-line add">+                                    else &#x27;25565&#x27; }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-minecraft_docker_container: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line add">+minecraft_role_docker_container: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-minecraft_docker_image_pull: true</span><span class="diff-line del">-minecraft_docker_image_repo: &quot;itzg/minecraft-server&quot;</span><span class="diff-line del">-minecraft_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-minecraft_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_image_repo&#x27;, default=minecraft_docker_image_repo)</span><span class="diff-line del">-                            + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_image_tag&#x27;, default=minecraft_docker_image_tag) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_image_pull: true</span><span class="diff-line add">+minecraft_role_docker_image_repo: &quot;itzg/minecraft-server&quot;</span><span class="diff-line add">+minecraft_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+minecraft_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;minecraft&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-minecraft_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ minecraft_docker_ports_25565 }}:25565/tcp&quot;</span><span class="diff-line del">-minecraft_docker_ports_custom: []</span><span class="diff-line del">-minecraft_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_ports_defaults&#x27;, default=minecraft_docker_ports_defaults)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_ports_custom&#x27;, default=minecraft_docker_ports_custom) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_25565&#x27;, role=&#x27;minecraft&#x27;) }}:25565/tcp&quot;</span><span class="diff-line add">+minecraft_role_docker_ports_custom: []</span><span class="diff-line add">+minecraft_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;minecraft&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-minecraft_docker_envs_default:</span><span class="diff-line add">+minecraft_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   EULA: &quot;TRUE&quot;</span><span class="diff-line context">   UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-minecraft_docker_envs_custom: {}</span><span class="diff-line del">-minecraft_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_envs_default&#x27;, default=minecraft_docker_envs_default)</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_envs_custom&#x27;, default=minecraft_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-minecraft_docker_commands_default: []</span><span class="diff-line del">-minecraft_docker_commands_custom: []</span><span class="diff-line del">-minecraft_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_commands_default&#x27;, default=minecraft_docker_commands_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_commands_custom&#x27;, default=minecraft_docker_commands_custom) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_envs_custom: {}</span><span class="diff-line add">+minecraft_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;minecraft&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;minecraft&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-minecraft_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ minecraft_paths_location }}/{{ minecraft_name }}/data:/data&quot;</span><span class="diff-line del">-minecraft_docker_volumes_custom: []</span><span class="diff-line del">-minecraft_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_volumes_default&#x27;, default=minecraft_docker_volumes_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_volumes_custom&#x27;, default=minecraft_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-minecraft_docker_devices_default: []</span><span class="diff-line del">-minecraft_docker_devices_custom: []</span><span class="diff-line del">-minecraft_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_devices_default&#x27;, default=minecraft_docker_devices_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_devices_custom&#x27;, default=minecraft_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-minecraft_docker_hosts_default: {}</span><span class="diff-line del">-minecraft_docker_hosts_custom: {}</span><span class="diff-line del">-minecraft_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_hosts_default&#x27;, default=minecraft_docker_hosts_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_hosts_custom&#x27;, default=minecraft_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-minecraft_docker_labels_default: {}</span><span class="diff-line del">-minecraft_docker_labels_custom: {}</span><span class="diff-line del">-minecraft_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_labels_default&#x27;, default=minecraft_docker_labels_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_labels_custom&#x27;, default=minecraft_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;minecraft&#x27;) }}/{{ minecraft_name }}/data:/data&quot;</span><span class="diff-line add">+minecraft_role_docker_volumes_custom: []</span><span class="diff-line add">+minecraft_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;minecraft&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-minecraft_docker_hostname: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-minecraft_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-minecraft_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_network_mode_default&#x27;, default=minecraft_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_hostname: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-minecraft_docker_networks_alias: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line del">-minecraft_docker_networks_default: []</span><span class="diff-line del">-minecraft_docker_networks_custom: []</span><span class="diff-line del">-minecraft_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_networks_default&#x27;, default=minecraft_docker_networks_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_networks_custom&#x27;, default=minecraft_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-minecraft_docker_capabilities_default: []</span><span class="diff-line del">-minecraft_docker_capabilities_custom: []</span><span class="diff-line del">-minecraft_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_capabilities_default&#x27;, default=minecraft_docker_capabilities_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_capabilities_custom&#x27;, default=minecraft_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-minecraft_docker_security_opts_default: []</span><span class="diff-line del">-minecraft_docker_security_opts_custom: []</span><span class="diff-line del">-minecraft_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_security_opts_default&#x27;, default=minecraft_docker_security_opts_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, minecraft_name + &#x27;_docker_security_opts_custom&#x27;, default=minecraft_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+minecraft_role_docker_networks_alias: &quot;{{ minecraft_name }}&quot;</span><span class="diff-line add">+minecraft_role_docker_networks_default: []</span><span class="diff-line add">+minecraft_role_docker_networks_custom: []</span><span class="diff-line add">+minecraft_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;minecraft&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-minecraft_docker_restart_policy: unless-stopped</span><span class="diff-line add">+minecraft_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-minecraft_docker_stop_timeout: 900</span><span class="diff-line add">+minecraft_role_docker_stop_timeout: 900</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-minecraft_docker_state: started</span><span class="diff-line add">+minecraft_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-244">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/minecraft/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,14 +9,14 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Get next available port within the range of &#x27;25565-25665&#x27; # noqa fqcn[action]</span><span class="diff-line add">+- name: Get next available port within the range of &#x27;25565-25665&#x27;</span><span class="diff-line context">   find_open_port:</span><span class="diff-line context">     low_bound: 25565</span><span class="diff-line context">     high_bound: 25665</span><span class="diff-line hunk">@@ -27,7 +27,7 @@</span><span class="diff-line context">   community.general.cloudflare_dns:</span><span class="diff-line context">     account_api_key: &quot;{{ cloudflare.api }}&quot;</span><span class="diff-line context">     account_email: &quot;{{ cloudflare.email }}&quot;</span><span class="diff-line del">-    port: &quot;{{ minecraft_docker_ports_25565 }}&quot;</span><span class="diff-line add">+    port: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_25565&#x27;, role=&#x27;minecraft&#x27;) }}&quot;</span><span class="diff-line context">     priority: 1</span><span class="diff-line context">     proto: tcp</span><span class="diff-line context">     proxied: false</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-245">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/minecraft_bedrock/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,120 +12,88 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> minecraft_bedrock_name: minecraft-bedrock</span><span class="diff-line del">-minecraft_bedrock_version: &quot;LATEST&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+minecraft_bedrock_role_version: &quot;LATEST&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_bedrock_paths_folder: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line del">-minecraft_bedrock_paths_location: &quot;{{ server_appdata_path }}/{{ minecraft_bedrock_paths_folder }}&quot;</span><span class="diff-line del">-minecraft_bedrock_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ minecraft_bedrock_paths_location }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_paths_folder: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_paths_location: &quot;{{ server_appdata_path }}/{{ minecraft_bedrock_role_paths_folder }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ minecraft_bedrock_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_bedrock_web_subdomain: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line del">-minecraft_bedrock_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_web_subdomain: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-minecraft_bedrock_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_bedrock_name + &#x27;_web_subdomain&#x27;, default=minecraft_bedrock_web_subdomain) }}&quot;</span><span class="diff-line del">-minecraft_bedrock_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, minecraft_bedrock_name + &#x27;_web_domain&#x27;, default=minecraft_bedrock_web_domain) }}&quot;</span><span class="diff-line del">-minecraft_bedrock_dns_proxy: false</span><span class="diff-line add">+minecraft_bedrock_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-minecraft_bedrock_docker_container: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_container: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-minecraft_bedrock_docker_image_pull: true</span><span class="diff-line del">-minecraft_bedrock_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-minecraft_bedrock_docker_image: &quot;itzg/minecraft-bedrock-server:{{ minecraft_bedrock_docker_image_tag }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_image_pull: true</span><span class="diff-line add">+minecraft_bedrock_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_image_repo: &quot;itzg/minecraft-bedrock-server&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-minecraft_bedrock_docker_ports_defaults:</span><span class="diff-line add">+minecraft_bedrock_role_docker_ports_default:</span><span class="diff-line context">   - &quot;19132:19132/udp&quot;</span><span class="diff-line del">-minecraft_bedrock_docker_ports_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_ports: &quot;{{ minecraft_bedrock_docker_ports_defaults</span><span class="diff-line del">-                                    + minecraft_bedrock_docker_ports_custom }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_ports_custom: []</span><span class="diff-line add">+minecraft_bedrock_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;minecraft_bedrock&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-minecraft_bedrock_docker_envs_default:</span><span class="diff-line add">+minecraft_bedrock_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   EULA: &quot;TRUE&quot;</span><span class="diff-line del">-  VERSION: &quot;{{ minecraft_bedrock_version }}&quot;</span><span class="diff-line del">-minecraft_bedrock_docker_envs_custom: {}</span><span class="diff-line del">-minecraft_bedrock_docker_envs: &quot;{{ minecraft_bedrock_docker_envs_default</span><span class="diff-line del">-                                   | combine(minecraft_bedrock_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-minecraft_bedrock_docker_commands_default: []</span><span class="diff-line del">-minecraft_bedrock_docker_commands_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_commands: &quot;{{ minecraft_bedrock_docker_commands_default</span><span class="diff-line del">-                                       + minecraft_bedrock_docker_commands_custom }}&quot;</span><span class="diff-line add">+  VERSION: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_version&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_envs_custom: {}</span><span class="diff-line add">+minecraft_bedrock_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;minecraft_bedrock&#x27;)</span><span class="diff-line add">+                                        | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;minecraft_bedrock&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-minecraft_bedrock_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ minecraft_bedrock_paths_location }}:/data&quot;</span><span class="diff-line del">-minecraft_bedrock_docker_volumes_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_volumes: &quot;{{ minecraft_bedrock_docker_volumes_default</span><span class="diff-line del">-                                      + minecraft_bedrock_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-minecraft_bedrock_docker_devices_default: []</span><span class="diff-line del">-minecraft_bedrock_docker_devices_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_devices: &quot;{{ minecraft_bedrock_docker_devices_default</span><span class="diff-line del">-                                      + minecraft_bedrock_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-minecraft_bedrock_docker_hosts_default: {}</span><span class="diff-line del">-minecraft_bedrock_docker_hosts_custom: {}</span><span class="diff-line del">-minecraft_bedrock_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                    | combine(minecraft_bedrock_docker_hosts_default)</span><span class="diff-line del">-                                    | combine(minecraft_bedrock_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-minecraft_bedrock_docker_labels_default: {}</span><span class="diff-line del">-minecraft_bedrock_docker_labels_custom: {}</span><span class="diff-line del">-minecraft_bedrock_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                     | combine(minecraft_bedrock_docker_labels_default)</span><span class="diff-line del">-                                     | combine(minecraft_bedrock_docker_labels_custom) }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}:/data&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_volumes_custom: []</span><span class="diff-line add">+minecraft_bedrock_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;minecraft_bedrock&#x27;)</span><span class="diff-line add">+                                           + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-minecraft_bedrock_docker_hostname: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_hostname: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-minecraft_bedrock_docker_networks_alias: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line del">-minecraft_bedrock_docker_networks_default: []</span><span class="diff-line del">-minecraft_bedrock_docker_networks_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                       + minecraft_bedrock_docker_networks_default</span><span class="diff-line del">-                                       + minecraft_bedrock_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-minecraft_bedrock_docker_capabilities_default: []</span><span class="diff-line del">-minecraft_bedrock_docker_capabilities_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_capabilities: &quot;{{ minecraft_bedrock_docker_capabilities_default</span><span class="diff-line del">-                                           + minecraft_bedrock_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-minecraft_bedrock_docker_security_opts_default: []</span><span class="diff-line del">-minecraft_bedrock_docker_security_opts_custom: []</span><span class="diff-line del">-minecraft_bedrock_docker_security_opts: &quot;{{ minecraft_bedrock_docker_security_opts_default</span><span class="diff-line del">-                                            + minecraft_bedrock_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_networks_alias: &quot;{{ minecraft_bedrock_name }}&quot;</span><span class="diff-line add">+minecraft_bedrock_role_docker_networks_default: []</span><span class="diff-line add">+minecraft_bedrock_role_docker_networks_custom: []</span><span class="diff-line add">+minecraft_bedrock_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                            + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;minecraft_bedrock&#x27;)</span><span class="diff-line add">+                                            + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;minecraft_bedrock&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-minecraft_bedrock_docker_restart_policy: unless-stopped</span><span class="diff-line add">+minecraft_bedrock_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-minecraft_bedrock_docker_state: started</span><span class="diff-line add">+minecraft_bedrock_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-246">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/minecraft_bedrock/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -6,15 +6,15 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Remove existing Docker container</span><span class="diff-line del">-  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Remove existing Docker container</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-247">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/miniflux/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,152 +17,121 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-miniflux_admin_username: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-miniflux_admin_password: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-miniflux_create_admin: &quot;1&quot;</span><span class="diff-line del">-miniflux_run_migrations: &quot;1&quot;</span><span class="diff-line del">-miniflux_postgres_username: &quot;{{ lookup(&#x27;vars&#x27;, miniflux_name + &#x27;_postgres_docker_env_user&#x27;, default=postgres_docker_env_user) }}&quot;</span><span class="diff-line del">-miniflux_postgres_password: &quot;{{ lookup(&#x27;vars&#x27;, miniflux_name + &#x27;_postgres_docker_env_password&#x27;, default=postgres_docker_env_password) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-miniflux_postgres_name: &quot;{{ miniflux_name }}-postgres&quot;</span><span class="diff-line del">-miniflux_postgres_docker_env_db: &quot;miniflux&quot;</span><span class="diff-line del">-miniflux_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line del">-miniflux_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-miniflux_postgres_paths_folder: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line del">-miniflux_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+miniflux_role_admin_username: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+miniflux_role_admin_password: &quot;{{ user.pass }}&quot;</span><span class="diff-line add">+miniflux_role_create_admin: &quot;1&quot;</span><span class="diff-line add">+miniflux_role_run_migrations: &quot;1&quot;</span><span class="diff-line add">+miniflux_role_postgres_deploy: true</span><span class="diff-line add">+miniflux_role_postgres_name: &quot;{{ miniflux_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+miniflux_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+miniflux_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+miniflux_role_postgres_docker_env_db: &quot;miniflux&quot;</span><span class="diff-line add">+miniflux_role_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line add">+miniflux_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+miniflux_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;miniflux&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;miniflux&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;miniflux&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+miniflux_role_postgres_paths_folder: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ miniflux_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-miniflux_paths_folder: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line del">-miniflux_paths_location: &quot;{{ server_appdata_path }}/{{ miniflux_paths_folder }}&quot;</span><span class="diff-line del">-miniflux_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ miniflux_paths_location }}&quot;</span><span class="diff-line add">+miniflux_role_paths_folder: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_paths_location: &quot;{{ server_appdata_path }}/{{ miniflux_role_paths_folder }}&quot;</span><span class="diff-line add">+miniflux_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ miniflux_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-miniflux_web_subdomain: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line del">-miniflux_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-miniflux_web_port: &quot;8080&quot;</span><span class="diff-line del">-miniflux_web_url: &quot;{{ &#x27;https://&#x27; + (miniflux_web_subdomain + &#x27;.&#x27; + miniflux_web_domain</span><span class="diff-line del">-                   if (miniflux_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else miniflux_web_domain) }}&quot;</span><span class="diff-line add">+miniflux_role_web_subdomain: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+miniflux_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+miniflux_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;miniflux&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;miniflux&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;miniflux&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-miniflux_dns_record: &quot;{{ miniflux_web_subdomain }}&quot;</span><span class="diff-line del">-miniflux_dns_zone: &quot;{{ miniflux_web_domain }}&quot;</span><span class="diff-line del">-miniflux_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+miniflux_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+miniflux_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+miniflux_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-miniflux_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-miniflux_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-miniflux_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-miniflux_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-miniflux_traefik_enabled: true</span><span class="diff-line del">-miniflux_traefik_api_enabled: false</span><span class="diff-line del">-miniflux_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+miniflux_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+miniflux_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+miniflux_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+miniflux_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+miniflux_role_traefik_enabled: true</span><span class="diff-line add">+miniflux_role_traefik_api_enabled: false</span><span class="diff-line add">+miniflux_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-miniflux_docker_container: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_docker_container: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-miniflux_docker_image_pull: true</span><span class="diff-line del">-miniflux_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-miniflux_docker_image: &quot;miniflux/miniflux:{{ miniflux_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-miniflux_docker_ports_defaults: []</span><span class="diff-line del">-miniflux_docker_ports_custom: []</span><span class="diff-line del">-miniflux_docker_ports: &quot;{{ miniflux_docker_ports_defaults</span><span class="diff-line del">-                           + miniflux_docker_ports_custom }}&quot;</span><span class="diff-line add">+miniflux_role_docker_image_pull: true</span><span class="diff-line add">+miniflux_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+miniflux_role_docker_image_repo: &quot;miniflux/miniflux&quot;</span><span class="diff-line add">+miniflux_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;miniflux&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-miniflux_docker_envs_default:</span><span class="diff-line del">-  DATABASE_URL: &quot;postgres://{{ miniflux_postgres_username }}:{{ miniflux_postgres_password }}@{{ miniflux_postgres_name }}/{{ miniflux_postgres_docker_env_db }}?sslmode=disable&quot;</span><span class="diff-line del">-  RUN_MIGRATIONS: &quot;{{ miniflux_run_migrations }}&quot;</span><span class="diff-line del">-  CREATE_ADMIN: &quot;{{ miniflux_create_admin }}&quot;</span><span class="diff-line del">-  ADMIN_USERNAME: &quot;{{ miniflux_admin_username }}&quot;</span><span class="diff-line del">-  ADMIN_PASSWORD: &quot;{{ miniflux_admin_password }}&quot;</span><span class="diff-line del">-miniflux_docker_envs_custom: {}</span><span class="diff-line del">-miniflux_docker_envs: &quot;{{ miniflux_docker_envs_default</span><span class="diff-line del">-                          | combine(miniflux_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-miniflux_docker_commands_default: []</span><span class="diff-line del">-miniflux_docker_commands_custom: []</span><span class="diff-line del">-miniflux_docker_commands: &quot;{{ miniflux_docker_commands_default</span><span class="diff-line del">-                              + miniflux_docker_commands_custom }}&quot;</span><span class="diff-line add">+miniflux_role_docker_envs_default:</span><span class="diff-line add">+  DATABASE_URL: &quot;postgres://{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;miniflux&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;miniflux&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}@{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;miniflux&#x27;) }}/{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;miniflux&#x27;) }}?sslmode=disable&quot;</span><span class="diff-line add">+  RUN_MIGRATIONS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_run_migrations&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+  CREATE_ADMIN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_create_admin&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+  ADMIN_USERNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_admin_username&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+  ADMIN_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_admin_password&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+miniflux_role_docker_envs_custom: {}</span><span class="diff-line add">+miniflux_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;miniflux&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-miniflux_docker_volumes_default:</span><span class="diff-line add">+miniflux_role_docker_volumes_default:</span><span class="diff-line context">   - /etc/localtime:/etc/localtime:ro</span><span class="diff-line del">-miniflux_docker_volumes_custom: []</span><span class="diff-line del">-miniflux_docker_volumes: &quot;{{ miniflux_docker_volumes_default</span><span class="diff-line del">-                             + miniflux_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-miniflux_docker_devices_default: []</span><span class="diff-line del">-miniflux_docker_devices_custom: []</span><span class="diff-line del">-miniflux_docker_devices: &quot;{{ miniflux_docker_devices_default</span><span class="diff-line del">-                             + miniflux_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-miniflux_docker_hosts_default: {}</span><span class="diff-line del">-miniflux_docker_hosts_custom: {}</span><span class="diff-line del">-miniflux_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(miniflux_docker_hosts_default)</span><span class="diff-line del">-                           | combine(miniflux_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-miniflux_docker_labels_default: {}</span><span class="diff-line del">-miniflux_docker_labels_custom: {}</span><span class="diff-line del">-miniflux_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(miniflux_docker_labels_default)</span><span class="diff-line del">-                            | combine(miniflux_docker_labels_custom) }}&quot;</span><span class="diff-line add">+miniflux_role_docker_volumes_custom: []</span><span class="diff-line add">+miniflux_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-miniflux_docker_hostname: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_docker_hostname: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-miniflux_docker_networks_alias: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line del">-miniflux_docker_networks_default: []</span><span class="diff-line del">-miniflux_docker_networks_custom: []</span><span class="diff-line del">-miniflux_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + miniflux_docker_networks_default</span><span class="diff-line del">-                              + miniflux_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-miniflux_docker_capabilities_default: []</span><span class="diff-line del">-miniflux_docker_capabilities_custom: []</span><span class="diff-line del">-miniflux_docker_capabilities: &quot;{{ miniflux_docker_capabilities_default</span><span class="diff-line del">-                                  + miniflux_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-miniflux_docker_security_opts_default: []</span><span class="diff-line del">-miniflux_docker_security_opts_custom: []</span><span class="diff-line del">-miniflux_docker_security_opts: &quot;{{ miniflux_docker_security_opts_default</span><span class="diff-line del">-                                   + miniflux_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+miniflux_role_docker_networks_alias: &quot;{{ miniflux_name }}&quot;</span><span class="diff-line add">+miniflux_role_docker_networks_default: []</span><span class="diff-line add">+miniflux_role_docker_networks_custom: []</span><span class="diff-line add">+miniflux_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-miniflux_docker_restart_policy: unless-stopped</span><span class="diff-line add">+miniflux_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-miniflux_docker_state: started</span><span class="diff-line add">+miniflux_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-minuflux_depends_on: &quot;{{ minuflux_postgres_name }}&quot;</span><span class="diff-line del">-minuflux_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-minuflux_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+minuflux_role_depends_on: &quot;{{ minuflux_role_postgres_name }}&quot;</span><span class="diff-line add">+minuflux_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+minuflux_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-248">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/miniflux/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,23 +12,27 @@</span><span class="diff-line context">   vars:</span><span class="diff-line context">     _var_prefix: &quot;{{ miniflux_name }}-postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ miniflux_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ miniflux_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ miniflux_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ miniflux_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ miniflux_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ miniflux_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;miniflux&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;miniflux&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;miniflux&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-249">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mkvtoolnix/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,62 +17,57 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mkvtoolnix_paths_folder: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line del">-mkvtoolnix_paths_location: &quot;{{ server_appdata_path }}/{{ mkvtoolnix_paths_folder }}&quot;</span><span class="diff-line del">-mkvtoolnix_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ mkvtoolnix_paths_location }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_paths_folder: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_paths_location: &quot;{{ server_appdata_path }}/{{ mkvtoolnix_role_paths_folder }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ mkvtoolnix_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mkvtoolnix_web_subdomain: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line del">-mkvtoolnix_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-mkvtoolnix_web_port: &quot;5800&quot;</span><span class="diff-line del">-mkvtoolnix_web_url: &quot;{{ &#x27;https://&#x27; + (mkvtoolnix_web_subdomain + &#x27;.&#x27; + mkvtoolnix_web_domain</span><span class="diff-line del">-                     if (mkvtoolnix_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else mkvtoolnix_web_domain) }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_web_subdomain: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_web_port: &quot;5800&quot;</span><span class="diff-line add">+mkvtoolnix_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mkvtoolnix&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mkvtoolnix&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mkvtoolnix&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mkvtoolnix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mkvtoolnix_dns_record: &quot;{{ mkvtoolnix_web_subdomain }}&quot;</span><span class="diff-line del">-mkvtoolnix_dns_zone: &quot;{{ mkvtoolnix_web_domain }}&quot;</span><span class="diff-line del">-mkvtoolnix_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mkvtoolnix&#x27;) }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mkvtoolnix&#x27;) }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mkvtoolnix_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-mkvtoolnix_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-mkvtoolnix_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-mkvtoolnix_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-mkvtoolnix_traefik_enabled: true</span><span class="diff-line del">-mkvtoolnix_traefik_api_enabled: false</span><span class="diff-line del">-mkvtoolnix_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+mkvtoolnix_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+mkvtoolnix_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_traefik_enabled: true</span><span class="diff-line add">+mkvtoolnix_role_traefik_api_enabled: false</span><span class="diff-line add">+mkvtoolnix_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-mkvtoolnix_docker_container: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_container: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-mkvtoolnix_docker_image_pull: true</span><span class="diff-line del">-mkvtoolnix_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-mkvtoolnix_docker_image: &quot;jlesage/mkvtoolnix:{{ mkvtoolnix_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-mkvtoolnix_docker_ports_defaults: []</span><span class="diff-line del">-mkvtoolnix_docker_ports_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_ports: &quot;{{ mkvtoolnix_docker_ports_defaults</span><span class="diff-line del">-                             + mkvtoolnix_docker_ports_custom }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_image_pull: true</span><span class="diff-line add">+mkvtoolnix_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_image_repo: &quot;jlesage/mkvtoolnix&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;mkvtoolnix&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;mkvtoolnix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-mkvtoolnix_docker_envs_default:</span><span class="diff-line add">+mkvtoolnix_role_docker_envs_default:</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line hunk">@@ -81,69 +76,31 @@</span><span class="diff-line context">   CLEAN_TMP_DIR: &quot;1&quot;</span><span class="diff-line context">   UMASK: &quot;000&quot;</span><span class="diff-line context">   ENABLE_CJK_FONT: &quot;1&quot;</span><span class="diff-line del">-mkvtoolnix_docker_envs_custom: {}</span><span class="diff-line del">-mkvtoolnix_docker_envs: &quot;{{ mkvtoolnix_docker_envs_default</span><span class="diff-line del">-                            | combine(mkvtoolnix_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-mkvtoolnix_docker_commands_default: []</span><span class="diff-line del">-mkvtoolnix_docker_commands_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_commands: &quot;{{ mkvtoolnix_docker_commands_default</span><span class="diff-line del">-                                + mkvtoolnix_docker_commands_custom }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_envs_custom: {}</span><span class="diff-line add">+mkvtoolnix_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;mkvtoolnix&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;mkvtoolnix&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-mkvtoolnix_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ mkvtoolnix_paths_location }}:/config:rw&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mkvtoolnix&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs:/storage&quot;</span><span class="diff-line del">-mkvtoolnix_docker_volumes_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_volumes: &quot;{{ mkvtoolnix_docker_volumes_default</span><span class="diff-line del">-                               + mkvtoolnix_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-mkvtoolnix_docker_devices_default: []</span><span class="diff-line del">-mkvtoolnix_docker_devices_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_devices: &quot;{{ mkvtoolnix_docker_devices_default</span><span class="diff-line del">-                               + mkvtoolnix_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-mkvtoolnix_docker_hosts_default: {}</span><span class="diff-line del">-mkvtoolnix_docker_hosts_custom: {}</span><span class="diff-line del">-mkvtoolnix_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(mkvtoolnix_docker_hosts_default)</span><span class="diff-line del">-                             | combine(mkvtoolnix_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-mkvtoolnix_docker_labels_default: {}</span><span class="diff-line del">-mkvtoolnix_docker_labels_custom: {}</span><span class="diff-line del">-mkvtoolnix_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(mkvtoolnix_docker_labels_default)</span><span class="diff-line del">-                              | combine(mkvtoolnix_docker_labels_custom) }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_volumes_custom: []</span><span class="diff-line add">+mkvtoolnix_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;mkvtoolnix&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;mkvtoolnix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-mkvtoolnix_docker_hostname: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_hostname: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-mkvtoolnix_docker_networks_alias: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line del">-mkvtoolnix_docker_networks_default: []</span><span class="diff-line del">-mkvtoolnix_docker_networks_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + mkvtoolnix_docker_networks_default</span><span class="diff-line del">-                                + mkvtoolnix_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-mkvtoolnix_docker_capabilities_default: []</span><span class="diff-line del">-mkvtoolnix_docker_capabilities_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_capabilities: &quot;{{ mkvtoolnix_docker_capabilities_default</span><span class="diff-line del">-                                    + mkvtoolnix_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-mkvtoolnix_docker_security_opts_default: []</span><span class="diff-line del">-mkvtoolnix_docker_security_opts_custom: []</span><span class="diff-line del">-mkvtoolnix_docker_security_opts: &quot;{{ mkvtoolnix_docker_security_opts_default</span><span class="diff-line del">-                                     + mkvtoolnix_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_networks_alias: &quot;{{ mkvtoolnix_name }}&quot;</span><span class="diff-line add">+mkvtoolnix_role_docker_networks_default: []</span><span class="diff-line add">+mkvtoolnix_role_docker_networks_custom: []</span><span class="diff-line add">+mkvtoolnix_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;mkvtoolnix&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;mkvtoolnix&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-mkvtoolnix_docker_restart_policy: unless-stopped</span><span class="diff-line add">+mkvtoolnix_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-mkvtoolnix_docker_state: started</span><span class="diff-line add">+mkvtoolnix_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-250">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mkvtoolnix/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-251">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/monitorr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-monitorr_paths_folder: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line del">-monitorr_paths_location: &quot;{{ server_appdata_path }}/{{ monitorr_paths_folder }}&quot;</span><span class="diff-line del">-monitorr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ monitorr_paths_location }}&quot;</span><span class="diff-line add">+monitorr_role_paths_folder: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line add">+monitorr_role_paths_location: &quot;{{ server_appdata_path }}/{{ monitorr_role_paths_folder }}&quot;</span><span class="diff-line add">+monitorr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ monitorr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-monitorr_web_subdomain: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line del">-monitorr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-monitorr_web_port: &quot;80&quot;</span><span class="diff-line del">-monitorr_web_url: &quot;{{ &#x27;https://&#x27; + (monitorr_web_subdomain + &#x27;.&#x27; + monitorr_web_domain</span><span class="diff-line del">-                   if (monitorr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else monitorr_web_domain) }}&quot;</span><span class="diff-line add">+monitorr_role_web_subdomain: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line add">+monitorr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+monitorr_role_web_port: &quot;80&quot;</span><span class="diff-line add">+monitorr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;monitorr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;monitorr&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;monitorr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;monitorr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-monitorr_dns_record: &quot;{{ monitorr_web_subdomain }}&quot;</span><span class="diff-line del">-monitorr_dns_zone: &quot;{{ monitorr_web_domain }}&quot;</span><span class="diff-line del">-monitorr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+monitorr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;monitorr&#x27;) }}&quot;</span><span class="diff-line add">+monitorr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;monitorr&#x27;) }}&quot;</span><span class="diff-line add">+monitorr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-monitorr_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-monitorr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-monitorr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-monitorr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-monitorr_traefik_enabled: true</span><span class="diff-line del">-monitorr_traefik_api_enabled: false</span><span class="diff-line del">-monitorr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+monitorr_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+monitorr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+monitorr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+monitorr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+monitorr_role_traefik_enabled: true</span><span class="diff-line add">+monitorr_role_traefik_api_enabled: false</span><span class="diff-line add">+monitorr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-monitorr_docker_container: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line add">+monitorr_role_docker_container: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-monitorr_docker_image_pull: true</span><span class="diff-line del">-monitorr_docker_image_tag: &quot;develop&quot;</span><span class="diff-line del">-monitorr_docker_image: &quot;monitorr/monitorr:{{ monitorr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-monitorr_docker_ports_defaults: []</span><span class="diff-line del">-monitorr_docker_ports_custom: []</span><span class="diff-line del">-monitorr_docker_ports: &quot;{{ monitorr_docker_ports_defaults</span><span class="diff-line del">-                           + monitorr_docker_ports_custom }}&quot;</span><span class="diff-line add">+monitorr_role_docker_image_pull: true</span><span class="diff-line add">+monitorr_role_docker_image_tag: &quot;develop&quot;</span><span class="diff-line add">+monitorr_role_docker_image_repo: &quot;monitorr/monitorr&quot;</span><span class="diff-line add">+monitorr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;monitorr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;monitorr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-monitorr_docker_envs_default:</span><span class="diff-line add">+monitorr_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-monitorr_docker_envs_custom: {}</span><span class="diff-line del">-monitorr_docker_envs: &quot;{{ monitorr_docker_envs_default</span><span class="diff-line del">-                          | combine(monitorr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-monitorr_docker_commands_default: []</span><span class="diff-line del">-monitorr_docker_commands_custom: []</span><span class="diff-line del">-monitorr_docker_commands: &quot;{{ monitorr_docker_commands_default</span><span class="diff-line del">-                              + monitorr_docker_commands_custom }}&quot;</span><span class="diff-line add">+monitorr_role_docker_envs_custom: {}</span><span class="diff-line add">+monitorr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;monitorr&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;monitorr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-monitorr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ monitorr_paths_location }}:/app&quot;</span><span class="diff-line del">-monitorr_docker_volumes_custom: []</span><span class="diff-line del">-monitorr_docker_volumes: &quot;{{ monitorr_docker_volumes_default</span><span class="diff-line del">-                             + monitorr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-monitorr_docker_devices_default: []</span><span class="diff-line del">-monitorr_docker_devices_custom: []</span><span class="diff-line del">-monitorr_docker_devices: &quot;{{ monitorr_docker_devices_default</span><span class="diff-line del">-                             + monitorr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-monitorr_docker_hosts_default: {}</span><span class="diff-line del">-monitorr_docker_hosts_custom: {}</span><span class="diff-line del">-monitorr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(monitorr_docker_hosts_default)</span><span class="diff-line del">-                           | combine(monitorr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-monitorr_docker_labels_default: {}</span><span class="diff-line del">-monitorr_docker_labels_custom: {}</span><span class="diff-line del">-monitorr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(monitorr_docker_labels_default)</span><span class="diff-line del">-                            | combine(monitorr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+monitorr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;monitorr&#x27;) }}:/app&quot;</span><span class="diff-line add">+monitorr_role_docker_volumes_custom: []</span><span class="diff-line add">+monitorr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;monitorr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;monitorr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-monitorr_docker_hostname: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line add">+monitorr_role_docker_hostname: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-monitorr_docker_networks_alias: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line del">-monitorr_docker_networks_default: []</span><span class="diff-line del">-monitorr_docker_networks_custom: []</span><span class="diff-line del">-monitorr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + monitorr_docker_networks_default</span><span class="diff-line del">-                              + monitorr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-monitorr_docker_capabilities_default: []</span><span class="diff-line del">-monitorr_docker_capabilities_custom: []</span><span class="diff-line del">-monitorr_docker_capabilities: &quot;{{ monitorr_docker_capabilities_default</span><span class="diff-line del">-                                  + monitorr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-monitorr_docker_security_opts_default: []</span><span class="diff-line del">-monitorr_docker_security_opts_custom: []</span><span class="diff-line del">-monitorr_docker_security_opts: &quot;{{ monitorr_docker_security_opts_default</span><span class="diff-line del">-                                   + monitorr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+monitorr_role_docker_networks_alias: &quot;{{ monitorr_name }}&quot;</span><span class="diff-line add">+monitorr_role_docker_networks_default: []</span><span class="diff-line add">+monitorr_role_docker_networks_custom: []</span><span class="diff-line add">+monitorr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;monitorr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;monitorr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-monitorr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+monitorr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-monitorr_docker_state: started</span><span class="diff-line add">+monitorr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-252">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/monitorr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,9 +8,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-253">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/moviematch/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,133 +14,91 @@</span><span class="diff-line context"> moviematch_name: moviematch</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+moviematch_role_plex_url: &quot;http://plex:32400&quot;</span><span class="diff-line add">+moviematch_role_libraries: &quot;Movies&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-moviematch_paths_folder: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line del">-moviematch_paths_location: &quot;{{ server_appdata_path }}/{{ moviematch_paths_folder }}&quot;</span><span class="diff-line del">-moviematch_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ moviematch_paths_location }}&quot;</span><span class="diff-line add">+moviematch_role_paths_folder: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line add">+moviematch_role_paths_location: &quot;{{ server_appdata_path }}/{{ moviematch_role_paths_folder }}&quot;</span><span class="diff-line add">+moviematch_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ moviematch_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-moviematch_web_subdomain: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line del">-moviematch_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-moviematch_web_port: &quot;8000&quot;</span><span class="diff-line del">-moviematch_web_url: &quot;{{ &#x27;https://&#x27; + (moviematch_web_subdomain + &#x27;.&#x27; + moviematch_web_domain</span><span class="diff-line del">-                     if (moviematch_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else moviematch_web_domain) }}&quot;</span><span class="diff-line add">+moviematch_role_web_subdomain: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line add">+moviematch_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+moviematch_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+moviematch_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;moviematch&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;moviematch&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;moviematch&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;moviematch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-moviematch_dns_record: &quot;{{ moviematch_web_subdomain }}&quot;</span><span class="diff-line del">-moviematch_dns_zone: &quot;{{ moviematch_web_domain }}&quot;</span><span class="diff-line del">-moviematch_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+moviematch_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line add">+moviematch_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line add">+moviematch_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-moviematch_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-moviematch_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-moviematch_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-moviematch_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-moviematch_traefik_enabled: true</span><span class="diff-line del">-moviematch_traefik_api_enabled: false</span><span class="diff-line del">-moviematch_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+moviematch_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+moviematch_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+moviematch_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+moviematch_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+moviematch_role_traefik_enabled: true</span><span class="diff-line add">+moviematch_role_traefik_api_enabled: false</span><span class="diff-line add">+moviematch_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-moviematch_docker_container: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line add">+moviematch_role_docker_container: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-moviematch_docker_image_pull: true</span><span class="diff-line del">-moviematch_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-moviematch_docker_image: &quot;lukechannings/moviematch:{{ moviematch_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-moviematch_docker_ports_defaults: []</span><span class="diff-line del">-moviematch_docker_ports_custom: []</span><span class="diff-line del">-moviematch_docker_ports: &quot;{{ moviematch_docker_ports_defaults</span><span class="diff-line del">-                             + moviematch_docker_ports_custom }}&quot;</span><span class="diff-line add">+moviematch_role_docker_image_pull: true</span><span class="diff-line add">+moviematch_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+moviematch_role_docker_image_repo: &quot;lukechannings/moviematch&quot;</span><span class="diff-line add">+moviematch_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;moviematch&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-moviematch_docker_envs_default:</span><span class="diff-line add">+moviematch_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  PLEX_URL: &quot;{{ moviematch.plex_url }}&quot;</span><span class="diff-line del">-  PLEX_TOKEN: &quot;{{ plex_auth_token }}&quot;</span><span class="diff-line add">+  PLEX_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_plex_url&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line add">+  PLEX_TOKEN: &quot;{{ plex_auth_token | default(&#x27;failed getting token&#x27;) }}&quot;</span><span class="diff-line context">   LOG_LEVEL: DEBUG</span><span class="diff-line del">-  LIBRARY_FILTER: &quot;{{ moviematch.libraries }}&quot;</span><span class="diff-line del">-moviematch_docker_envs_custom: {}</span><span class="diff-line del">-moviematch_docker_envs: &quot;{{ moviematch_docker_envs_default</span><span class="diff-line del">-                            | combine(moviematch_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-moviematch_docker_commands_default: []</span><span class="diff-line del">-moviematch_docker_commands_custom: []</span><span class="diff-line del">-moviematch_docker_commands: &quot;{{ moviematch_docker_commands_default</span><span class="diff-line del">-                                + moviematch_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-moviematch_docker_volumes_default: []</span><span class="diff-line del">-moviematch_docker_volumes_custom: []</span><span class="diff-line del">-moviematch_docker_volumes: &quot;{{ moviematch_docker_volumes_default</span><span class="diff-line del">-                               + moviematch_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-moviematch_docker_devices_default: []</span><span class="diff-line del">-moviematch_docker_devices_custom: []</span><span class="diff-line del">-moviematch_docker_devices: &quot;{{ moviematch_docker_devices_default</span><span class="diff-line del">-                               + moviematch_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-moviematch_docker_hosts_default: {}</span><span class="diff-line del">-moviematch_docker_hosts_custom: {}</span><span class="diff-line del">-moviematch_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(moviematch_docker_hosts_default)</span><span class="diff-line del">-                             | combine(moviematch_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-moviematch_docker_labels_default: {}</span><span class="diff-line del">-moviematch_docker_labels_custom: {}</span><span class="diff-line del">-moviematch_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(moviematch_docker_labels_default)</span><span class="diff-line del">-                              | combine(moviematch_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  LIBRARY_FILTER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_libraries&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line add">+moviematch_role_docker_envs_custom: {}</span><span class="diff-line add">+moviematch_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;moviematch&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;moviematch&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-moviematch_docker_hostname: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line add">+moviematch_role_docker_hostname: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-moviematch_docker_networks_alias: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line del">-moviematch_docker_networks_default: []</span><span class="diff-line del">-moviematch_docker_networks_custom: []</span><span class="diff-line del">-moviematch_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + moviematch_docker_networks_default</span><span class="diff-line del">-                                + moviematch_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-moviematch_docker_capabilities_default: []</span><span class="diff-line del">-moviematch_docker_capabilities_custom: []</span><span class="diff-line del">-moviematch_docker_capabilities: &quot;{{ moviematch_docker_capabilities_default</span><span class="diff-line del">-                                    + moviematch_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-moviematch_docker_security_opts_default: []</span><span class="diff-line del">-moviematch_docker_security_opts_custom: []</span><span class="diff-line del">-moviematch_docker_security_opts: &quot;{{ moviematch_docker_security_opts_default</span><span class="diff-line del">-                                     + moviematch_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+moviematch_role_docker_networks_alias: &quot;{{ moviematch_name }}&quot;</span><span class="diff-line add">+moviematch_role_docker_networks_default: []</span><span class="diff-line add">+moviematch_role_docker_networks_custom: []</span><span class="diff-line add">+moviematch_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;moviematch&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;moviematch&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-moviematch_docker_restart_policy: unless-stopped</span><span class="diff-line add">+moviematch_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-moviematch_docker_state: started</span><span class="diff-line add">+moviematch_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-254">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/moviematch/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,37 +10,29 @@</span><span class="diff-line context"> - name: Report Plex Account Status</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line context">     msg: Requires Plex Account credentials to be entered in accounts.yml</span><span class="diff-line del">-  when: not plex_account_is_enabled</span><span class="diff-line add">+  when: (not plex_account_is_enabled)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if Plex instance is defined</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     plex_name: &quot;{{ plex_name | default(plex_instances[0]) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Run Role</span><span class="diff-line add">+- name: Add DNS record</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line add">+  vars:</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Remove existing Docker container</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Create directories</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Import Plex Auth Token role</span><span class="diff-line add">+  ansible.builtin.include_role:</span><span class="diff-line add">+    name: plex_auth_token</span><span class="diff-line context">   when: plex_account_is_enabled</span><span class="diff-line del">-  block:</span><span class="diff-line del">-    - name: Add DNS record</span><span class="diff-line del">-      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line del">-      vars:</span><span class="diff-line del">-        dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-        dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-        dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Remove existing Docker container</span><span class="diff-line del">-      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-    - name: Create directories</span><span class="diff-line del">-      ansible.builtin.file:</span><span class="diff-line del">-        path: &quot;{{ item }}&quot;</span><span class="diff-line del">-        state: directory</span><span class="diff-line del">-        owner: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-        group: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-        mode: &quot;0775&quot;</span><span class="diff-line del">-      with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-    - name: Import Plex Auth Token role</span><span class="diff-line del">-      ansible.builtin.include_role:</span><span class="diff-line del">-        name: plex_auth_token</span><span class="diff-line del">-</span><span class="diff-line del">-    - name: Create Docker container</span><span class="diff-line del">-      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line add">+- name: Create Docker container</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-255">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mqtt/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,103 +17,60 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mqtt_paths_folder: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line del">-mqtt_paths_location: &quot;{{ server_appdata_path }}/{{ mqtt_paths_folder }}&quot;</span><span class="diff-line del">-mqtt_paths_config_location: &quot;{{ mqtt_paths_location }}/config/mosquitto.conf&quot;</span><span class="diff-line del">-mqtt_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/data&quot;</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/log&quot;</span><span class="diff-line add">+mqtt_role_paths_folder: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line add">+mqtt_role_paths_location: &quot;{{ server_appdata_path }}/{{ mqtt_role_paths_folder }}&quot;</span><span class="diff-line add">+mqtt_role_paths_config_location: &quot;{{ mqtt_role_paths_location }}/config/mosquitto.conf&quot;</span><span class="diff-line add">+mqtt_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ mqtt_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ mqtt_role_paths_location }}/data&quot;</span><span class="diff-line add">+  - &quot;{{ mqtt_role_paths_location }}/log&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-mqtt_docker_container: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line add">+mqtt_role_docker_container: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-mqtt_docker_image_pull: true</span><span class="diff-line del">-mqtt_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-mqtt_docker_image: &quot;eclipse-mosquitto:{{ mqtt_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-mqtt_docker_ports_defaults: []</span><span class="diff-line del">-mqtt_docker_ports_custom: []</span><span class="diff-line del">-mqtt_docker_ports: &quot;{{ mqtt_docker_ports_defaults</span><span class="diff-line del">-                       + mqtt_docker_ports_custom }}&quot;</span><span class="diff-line add">+mqtt_role_docker_image_pull: true</span><span class="diff-line add">+mqtt_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+mqtt_role_docker_image_repo: &quot;eclipse-mosquitto&quot;</span><span class="diff-line add">+mqtt_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;mqtt&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;mqtt&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-mqtt_docker_envs_default:</span><span class="diff-line add">+mqtt_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-mqtt_docker_envs_custom: {}</span><span class="diff-line del">-mqtt_docker_envs: &quot;{{ mqtt_docker_envs_default</span><span class="diff-line del">-                      | combine(mqtt_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-mqtt_docker_commands_default: []</span><span class="diff-line del">-mqtt_docker_commands_custom: []</span><span class="diff-line del">-mqtt_docker_commands: &quot;{{ mqtt_docker_commands_default</span><span class="diff-line del">-                          + mqtt_docker_commands_custom }}&quot;</span><span class="diff-line add">+mqtt_role_docker_envs_custom: {}</span><span class="diff-line add">+mqtt_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;mqtt&#x27;)</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;mqtt&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-mqtt_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/config:/mosquitto/config&quot;</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/data:/mosquitto/data&quot;</span><span class="diff-line del">-  - &quot;{{ mqtt_paths_location }}/log:/mosquitto/log&quot;</span><span class="diff-line add">+mqtt_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mqtt&#x27;) }}/config:/mosquitto/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mqtt&#x27;) }}/data:/mosquitto/data&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mqtt&#x27;) }}/log:/mosquitto/log&quot;</span><span class="diff-line context">   - &quot;/etc/localtime:/etc/localtime:ro&quot;</span><span class="diff-line del">-mqtt_docker_volumes_custom: []</span><span class="diff-line del">-mqtt_docker_volumes: &quot;{{ mqtt_docker_volumes_default</span><span class="diff-line del">-                         + mqtt_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-mqtt_docker_devices_default: []</span><span class="diff-line del">-mqtt_docker_devices_custom: []</span><span class="diff-line del">-mqtt_docker_devices: &quot;{{ mqtt_docker_devices_default</span><span class="diff-line del">-                         + mqtt_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-mqtt_docker_hosts_default: {}</span><span class="diff-line del">-mqtt_docker_hosts_custom: {}</span><span class="diff-line del">-mqtt_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                       | combine(mqtt_docker_hosts_default)</span><span class="diff-line del">-                       | combine(mqtt_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-mqtt_docker_labels_default: {}</span><span class="diff-line del">-mqtt_docker_labels_custom: {}</span><span class="diff-line del">-mqtt_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                        | combine(mqtt_docker_labels_default)</span><span class="diff-line del">-                        | combine(mqtt_docker_labels_custom) }}&quot;</span><span class="diff-line add">+mqtt_role_docker_volumes_custom: []</span><span class="diff-line add">+mqtt_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;mqtt&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;mqtt&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-mqtt_docker_hostname: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line add">+mqtt_role_docker_hostname: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-mqtt_docker_networks_alias: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line del">-mqtt_docker_networks_default: []</span><span class="diff-line del">-mqtt_docker_networks_custom: []</span><span class="diff-line del">-mqtt_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                          + mqtt_docker_networks_default</span><span class="diff-line del">-                          + mqtt_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-mqtt_docker_capabilities_default: []</span><span class="diff-line del">-mqtt_docker_capabilities_custom: []</span><span class="diff-line del">-mqtt_docker_capabilities: &quot;{{ mqtt_docker_capabilities_default</span><span class="diff-line del">-                              + mqtt_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-mqtt_docker_security_opts_default: []</span><span class="diff-line del">-mqtt_docker_security_opts_custom: []</span><span class="diff-line del">-mqtt_docker_security_opts: &quot;{{ mqtt_docker_security_opts_default</span><span class="diff-line del">-                               + mqtt_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+mqtt_role_docker_networks_alias: &quot;{{ mqtt_name }}&quot;</span><span class="diff-line add">+mqtt_role_docker_networks_default: []</span><span class="diff-line add">+mqtt_role_docker_networks_custom: []</span><span class="diff-line add">+mqtt_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;mqtt&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;mqtt&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-mqtt_docker_restart_policy: unless-stopped</span><span class="diff-line add">+mqtt_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-mqtt_docker_state: started</span><span class="diff-line add">+mqtt_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-mqtt_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+mqtt_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-256">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mqtt/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -13,15 +13,15 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ mqtt_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;mqtt&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ mqtt_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;mqtt&#x27;) }}&quot;</span><span class="diff-line context">   register: mqtt_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import default config</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: mosquitto.conf.j2</span><span class="diff-line del">-    dest: &quot;{{ mqtt_paths_config_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;mqtt&#x27;) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-257">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mylar3/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mylar3_paths_folder: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line del">-mylar3_paths_location: &quot;{{ server_appdata_path }}/{{ mylar3_paths_folder }}&quot;</span><span class="diff-line del">-mylar3_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ mylar3_paths_location }}&quot;</span><span class="diff-line del">-  - /mnt/local/Media/Comics</span><span class="diff-line add">+mylar3_role_paths_folder: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line add">+mylar3_role_paths_location: &quot;{{ server_appdata_path }}/{{ mylar3_role_paths_folder }}&quot;</span><span class="diff-line add">+mylar3_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ mylar3_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Comics&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mylar3_web_subdomain: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line del">-mylar3_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-mylar3_web_port: &quot;8090&quot;</span><span class="diff-line del">-mylar3_web_url: &quot;{{ &#x27;https://&#x27; + (mylar3_web_subdomain + &#x27;.&#x27; + mylar3_web_domain</span><span class="diff-line del">-                 if (mylar3_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else mylar3_web_domain) }}&quot;</span><span class="diff-line add">+mylar3_role_web_subdomain: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line add">+mylar3_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+mylar3_role_web_port: &quot;8090&quot;</span><span class="diff-line add">+mylar3_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mylar3&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mylar3&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mylar3&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mylar3&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mylar3_dns_record: &quot;{{ mylar3_web_subdomain }}&quot;</span><span class="diff-line del">-mylar3_dns_zone: &quot;{{ mylar3_web_domain }}&quot;</span><span class="diff-line del">-mylar3_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+mylar3_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;mylar3&#x27;) }}&quot;</span><span class="diff-line add">+mylar3_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;mylar3&#x27;) }}&quot;</span><span class="diff-line add">+mylar3_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-mylar3_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-mylar3_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-mylar3_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-mylar3_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-mylar3_traefik_enabled: true</span><span class="diff-line del">-mylar3_traefik_api_enabled: false</span><span class="diff-line del">-mylar3_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+mylar3_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+mylar3_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+mylar3_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+mylar3_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+mylar3_role_traefik_enabled: true</span><span class="diff-line add">+mylar3_role_traefik_api_enabled: false</span><span class="diff-line add">+mylar3_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-mylar3_docker_container: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line add">+mylar3_role_docker_container: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-mylar3_docker_image_pull: true</span><span class="diff-line del">-mylar3_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-mylar3_docker_image: &quot;lscr.io/linuxserver/mylar3:{{ mylar3_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-mylar3_docker_ports_defaults: []</span><span class="diff-line del">-mylar3_docker_ports_custom: []</span><span class="diff-line del">-mylar3_docker_ports: &quot;{{ mylar3_docker_ports_defaults</span><span class="diff-line del">-                         + mylar3_docker_ports_custom }}&quot;</span><span class="diff-line add">+mylar3_role_docker_image_pull: true</span><span class="diff-line add">+mylar3_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+mylar3_role_docker_image_repo: &quot;lscr.io/linuxserver/mylar3&quot;</span><span class="diff-line add">+mylar3_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;mylar3&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;mylar3&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-mylar3_docker_envs_default:</span><span class="diff-line add">+mylar3_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-mylar3_docker_envs_custom: {}</span><span class="diff-line del">-mylar3_docker_envs: &quot;{{ mylar3_docker_envs_default</span><span class="diff-line del">-                        | combine(mylar3_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-mylar3_docker_commands_default: []</span><span class="diff-line del">-mylar3_docker_commands_custom: []</span><span class="diff-line del">-mylar3_docker_commands: &quot;{{ mylar3_docker_commands_default</span><span class="diff-line del">-                            + mylar3_docker_commands_custom }}&quot;</span><span class="diff-line add">+mylar3_role_docker_envs_custom: {}</span><span class="diff-line add">+mylar3_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;mylar3&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;mylar3&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-mylar3_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ mylar3_paths_location }}:/config&quot;</span><span class="diff-line add">+mylar3_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;mylar3&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Comics:/comics&quot;</span><span class="diff-line del">-mylar3_docker_volumes_custom: []</span><span class="diff-line del">-mylar3_docker_volumes: &quot;{{ mylar3_docker_volumes_default</span><span class="diff-line del">-                           + mylar3_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-mylar3_docker_devices_default: []</span><span class="diff-line del">-mylar3_docker_devices_custom: []</span><span class="diff-line del">-mylar3_docker_devices: &quot;{{ mylar3_docker_devices_default</span><span class="diff-line del">-                           + mylar3_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-mylar3_docker_hosts_default: {}</span><span class="diff-line del">-mylar3_docker_hosts_custom: {}</span><span class="diff-line del">-mylar3_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(mylar3_docker_hosts_default)</span><span class="diff-line del">-                         | combine(mylar3_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-mylar3_docker_labels_default: {}</span><span class="diff-line del">-mylar3_docker_labels_custom: {}</span><span class="diff-line del">-mylar3_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(mylar3_docker_labels_default)</span><span class="diff-line del">-                          | combine(mylar3_docker_labels_custom) }}&quot;</span><span class="diff-line add">+mylar3_role_docker_volumes_custom: []</span><span class="diff-line add">+mylar3_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;mylar3&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;mylar3&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-mylar3_docker_hostname: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line add">+mylar3_role_docker_hostname: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-mylar3_docker_networks_alias: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line del">-mylar3_docker_networks_default: []</span><span class="diff-line del">-mylar3_docker_networks_custom: []</span><span class="diff-line del">-mylar3_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + mylar3_docker_networks_default</span><span class="diff-line del">-                            + mylar3_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-mylar3_docker_capabilities_default: []</span><span class="diff-line del">-mylar3_docker_capabilities_custom: []</span><span class="diff-line del">-mylar3_docker_capabilities: &quot;{{ mylar3_docker_capabilities_default</span><span class="diff-line del">-                                + mylar3_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-mylar3_docker_security_opts_default: []</span><span class="diff-line del">-mylar3_docker_security_opts_custom: []</span><span class="diff-line del">-mylar3_docker_security_opts: &quot;{{ mylar3_docker_security_opts_default</span><span class="diff-line del">-                                 + mylar3_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+mylar3_role_docker_networks_alias: &quot;{{ mylar3_name }}&quot;</span><span class="diff-line add">+mylar3_role_docker_networks_default: []</span><span class="diff-line add">+mylar3_role_docker_networks_custom: []</span><span class="diff-line add">+mylar3_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;mylar3&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;mylar3&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-mylar3_docker_restart_policy: unless-stopped</span><span class="diff-line add">+mylar3_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-mylar3_docker_state: started</span><span class="diff-line add">+mylar3_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-258">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/mylar3/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,9 +8,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-259">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/n8n/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,161 +17,133 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-n8n_postgres_name: &quot;{{ n8n_name }}-postgres&quot;</span><span class="diff-line del">-n8n_postgres_docker_env_db: &quot;{{ n8n_name }}&quot;</span><span class="diff-line del">-n8n_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line del">-n8n_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-n8n_postgres_paths_folder: &quot;{{ n8n_name }}&quot;</span><span class="diff-line del">-n8n_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+n8n_role_postgres_deploy: true</span><span class="diff-line add">+n8n_role_postgres_name: &quot;{{ n8n_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+n8n_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+n8n_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+n8n_role_postgres_docker_env_db: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line add">+n8n_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+n8n_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;n8n&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;n8n&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;n8n&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+n8n_role_postgres_paths_folder: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ n8n_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-n8n_paths_folder: &quot;{{ n8n_name }}&quot;</span><span class="diff-line del">-n8n_paths_location: &quot;{{ server_appdata_path }}/{{ n8n_paths_folder }}&quot;</span><span class="diff-line del">-n8n_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ n8n_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ n8n_paths_location }}/data&quot;</span><span class="diff-line add">+n8n_role_paths_folder: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_paths_location: &quot;{{ server_appdata_path }}/{{ n8n_role_paths_folder }}&quot;</span><span class="diff-line add">+n8n_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ n8n_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ n8n_role_paths_location }}/data&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-n8n_web_subdomain: &quot;{{ n8n_name }}&quot;</span><span class="diff-line del">-n8n_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-n8n_web_port: &quot;5678&quot;</span><span class="diff-line del">-n8n_web_url: &quot;{{ &#x27;https://&#x27; + (n8n_web_subdomain + &#x27;.&#x27; + n8n_web_domain</span><span class="diff-line del">-              if (n8n_web_subdomain | length &gt; 0)</span><span class="diff-line del">-              else n8n_web_domain) }}&quot;</span><span class="diff-line add">+n8n_role_web_subdomain: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+n8n_role_web_port: &quot;5678&quot;</span><span class="diff-line add">+n8n_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;n8n&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                   if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;n8n&#x27;) | length &gt; 0)</span><span class="diff-line add">+                   else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;n8n&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-n8n_dns_record: &quot;{{ n8n_web_subdomain }}&quot;</span><span class="diff-line del">-n8n_dns_zone: &quot;{{ n8n_web_domain }}&quot;</span><span class="diff-line del">-n8n_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+n8n_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+n8n_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+n8n_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-n8n_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-n8n_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-n8n_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-n8n_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-n8n_traefik_enabled: true</span><span class="diff-line del">-n8n_traefik_api_enabled: true</span><span class="diff-line del">-n8n_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/webhook`)&quot;</span><span class="diff-line add">+n8n_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+n8n_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+n8n_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+n8n_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+n8n_role_traefik_enabled: true</span><span class="diff-line add">+n8n_role_traefik_api_enabled: true</span><span class="diff-line add">+n8n_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/webhook`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-n8n_docker_container: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_docker_container: &quot;{{ n8n_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-n8n_docker_image_pull: true</span><span class="diff-line del">-n8n_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-n8n_docker_image: &quot;n8nio/n8n:{{ n8n_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-n8n_docker_ports_defaults: []</span><span class="diff-line del">-n8n_docker_ports_custom: []</span><span class="diff-line del">-n8n_docker_ports: &quot;{{ n8n_docker_ports_defaults</span><span class="diff-line del">-                      + n8n_docker_ports_custom }}&quot;</span><span class="diff-line add">+n8n_role_docker_image_pull: true</span><span class="diff-line add">+n8n_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+n8n_role_docker_image_repo: &quot;n8nio/n8n&quot;</span><span class="diff-line add">+n8n_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;n8n&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-n8n_docker_envs_default:</span><span class="diff-line add">+n8n_role_docker_envs_default:</span><span class="diff-line context">   GENERIC_TIMEZONE: &quot;{{ tz }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   DB_TYPE: &quot;postgresdb&quot;</span><span class="diff-line del">-  DB_POSTGRESDB_DATABASE: &quot;{{ n8n_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-  DB_POSTGRESDB_HOST: &quot;{{ n8n_postgres_name }}&quot;</span><span class="diff-line add">+  DB_POSTGRESDB_DATABASE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+  DB_POSTGRESDB_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line context">   DB_POSTGRESDB_PORT: &quot;5432&quot;</span><span class="diff-line del">-  DB_POSTGRESDB_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  DB_POSTGRESDB_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  N8N_EDITOR_BASE_URL: &quot;{{ n8n_web_url }}&quot;</span><span class="diff-line add">+  DB_POSTGRESDB_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;n8n&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DB_POSTGRESDB_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;n8n&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  N8N_EDITOR_BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line context">   N8N_DIAGNOSTICS_ENABLED: &quot;false&quot;</span><span class="diff-line context">   N8N_HIRING_BANNER_ENABLED: &quot;false&quot;</span><span class="diff-line context">   N8N_USER_MANAGEMENT_DISABLED: &quot;true&quot;</span><span class="diff-line context">   N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS: &quot;true&quot;</span><span class="diff-line del">-  WEBHOOK_URL: &quot;{{ n8n_web_url }}/&quot;</span><span class="diff-line add">+  WEBHOOK_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;n8n&#x27;) }}/&quot;</span><span class="diff-line context">   N8N_PROXY_HOPS: &quot;1&quot;</span><span class="diff-line context">   N8N_RUNNERS_ENABLED: &quot;true&quot;</span><span class="diff-line context">   N8N_USER_FOLDER: &quot;/data&quot;</span><span class="diff-line del">-n8n_docker_envs_custom: {}</span><span class="diff-line del">-n8n_docker_envs: &quot;{{ n8n_docker_envs_default</span><span class="diff-line del">-                     | combine(n8n_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-n8n_docker_commands_default: []</span><span class="diff-line del">-n8n_docker_commands_custom: []</span><span class="diff-line del">-n8n_docker_commands: &quot;{{ n8n_docker_commands_default</span><span class="diff-line del">-                         + n8n_docker_commands_custom }}&quot;</span><span class="diff-line add">+n8n_role_docker_envs_custom: {}</span><span class="diff-line add">+n8n_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;n8n&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-n8n_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ n8n_paths_location }}/data:/data&quot;</span><span class="diff-line del">-n8n_docker_volumes_custom: []</span><span class="diff-line del">-n8n_docker_volumes: &quot;{{ n8n_docker_volumes_default</span><span class="diff-line del">-                        + n8n_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-n8n_docker_devices_default: []</span><span class="diff-line del">-n8n_docker_devices_custom: []</span><span class="diff-line del">-n8n_docker_devices: &quot;{{ n8n_docker_devices_default</span><span class="diff-line del">-                        + n8n_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-n8n_docker_hosts_default: {}</span><span class="diff-line del">-n8n_docker_hosts_custom: {}</span><span class="diff-line del">-n8n_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                      | combine(n8n_docker_hosts_default)</span><span class="diff-line del">-                      | combine(n8n_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-n8n_docker_labels_default: {}</span><span class="diff-line del">-n8n_docker_labels_custom: {}</span><span class="diff-line del">-n8n_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                       | combine(n8n_docker_labels_default)</span><span class="diff-line del">-                       | combine(n8n_docker_labels_custom) }}&quot;</span><span class="diff-line add">+n8n_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;n8n&#x27;) }}/data:/data&quot;</span><span class="diff-line add">+n8n_role_docker_volumes_custom: []</span><span class="diff-line add">+n8n_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-n8n_docker_hostname: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_docker_hostname: &quot;{{ n8n_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-n8n_docker_networks_alias: &quot;{{ n8n_name }}&quot;</span><span class="diff-line del">-n8n_docker_networks_default: []</span><span class="diff-line del">-n8n_docker_networks_custom: []</span><span class="diff-line del">-n8n_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                         + n8n_docker_networks_default</span><span class="diff-line del">-                         + n8n_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-n8n_docker_capabilities_default: []</span><span class="diff-line del">-n8n_docker_capabilities_custom: []</span><span class="diff-line del">-n8n_docker_capabilities: &quot;{{ n8n_docker_capabilities_default</span><span class="diff-line del">-                             + n8n_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-n8n_docker_security_opts_default: []</span><span class="diff-line del">-n8n_docker_security_opts_custom: []</span><span class="diff-line del">-n8n_docker_security_opts: &quot;{{ n8n_docker_security_opts_default</span><span class="diff-line del">-                              + n8n_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+n8n_role_docker_networks_alias: &quot;{{ n8n_name }}&quot;</span><span class="diff-line add">+n8n_role_docker_networks_default: []</span><span class="diff-line add">+n8n_role_docker_networks_custom: []</span><span class="diff-line add">+n8n_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-n8n_docker_restart_policy: unless-stopped</span><span class="diff-line add">+n8n_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-n8n_docker_state: started</span><span class="diff-line add">+n8n_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-n8n_depends_on: &quot;{{ n8n_postgres_name }}&quot;</span><span class="diff-line del">-n8n_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-n8n_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+n8n_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+n8n_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+n8n_role_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-n8n_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+n8n_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-260">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/n8n/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,38 +10,42 @@</span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ n8n_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ n8n_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check legacy path</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ n8n_paths_location }}/app&quot;</span><span class="diff-line add">+    path: &quot;{{ n8n_role_paths_location }}/app&quot;</span><span class="diff-line context">   register: stat_n8n_legacy_path</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ n8n_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ n8n_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ n8n_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ n8n_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ n8n_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ n8n_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;n8n&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;n8n&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;n8n&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate n8n legacy directory</span><span class="diff-line context">   migrate_folder:</span><span class="diff-line del">-    legacy_path: &quot;{{ n8n_paths_location }}/app&quot;</span><span class="diff-line del">-    new_path: &quot;{{ n8n_paths_location }}/data/.n8n&quot;</span><span class="diff-line add">+    legacy_path: &quot;{{ n8n_role_paths_location }}/app&quot;</span><span class="diff-line add">+    new_path: &quot;{{ n8n_role_paths_location }}/data/.n8n&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-261">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/nabarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,92 +17,55 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nabarr_paths_folder: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line del">-nabarr_paths_location: &quot;{{ server_appdata_path }}/{{ nabarr_paths_folder }}&quot;</span><span class="diff-line del">-nabarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ nabarr_paths_location }}&quot;</span><span class="diff-line del">-nabarr_paths_config_location: &quot;{{ nabarr_paths_location }}/config.yml&quot;</span><span class="diff-line add">+nabarr_role_paths_folder: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line add">+nabarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ nabarr_role_paths_folder }}&quot;</span><span class="diff-line add">+nabarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ nabarr_role_paths_location }}&quot;</span><span class="diff-line add">+nabarr_role_paths_config_location: &quot;{{ nabarr_role_paths_location }}/config.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-nabarr_docker_container: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line add">+nabarr_role_docker_container: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-nabarr_docker_image_pull: true</span><span class="diff-line del">-nabarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-nabarr_docker_image: &quot;saltydk/nabarr:{{ nabarr_docker_image_tag }}&quot;</span><span class="diff-line add">+nabarr_role_docker_image_pull: true</span><span class="diff-line add">+nabarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+nabarr_role_docker_image_repo: &quot;saltydk/nabarr&quot;</span><span class="diff-line add">+nabarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;nabarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;nabarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-nabarr_docker_envs_default:</span><span class="diff-line add">+nabarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   APP_VERBOSITY: &quot;0&quot;</span><span class="diff-line del">-nabarr_docker_envs_custom: {}</span><span class="diff-line del">-nabarr_docker_envs: &quot;{{ nabarr_docker_envs_default</span><span class="diff-line del">-                        | combine(nabarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-nabarr_docker_commands_default: []</span><span class="diff-line del">-nabarr_docker_commands_custom: []</span><span class="diff-line del">-nabarr_docker_commands: &quot;{{ nabarr_docker_commands_default</span><span class="diff-line del">-                            + nabarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+nabarr_role_docker_envs_custom: {}</span><span class="diff-line add">+nabarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;nabarr&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;nabarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-nabarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ nabarr_paths_location }}:/config&quot;</span><span class="diff-line del">-nabarr_docker_volumes_custom: []</span><span class="diff-line del">-nabarr_docker_volumes: &quot;{{ nabarr_docker_volumes_default</span><span class="diff-line del">-                           + nabarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-nabarr_docker_devices_default: []</span><span class="diff-line del">-nabarr_docker_devices_custom: []</span><span class="diff-line del">-nabarr_docker_devices: &quot;{{ nabarr_docker_devices_default</span><span class="diff-line del">-                           + nabarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-nabarr_docker_hosts_default: {}</span><span class="diff-line del">-nabarr_docker_hosts_custom: {}</span><span class="diff-line del">-nabarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(nabarr_docker_hosts_default)</span><span class="diff-line del">-                         | combine(nabarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-nabarr_docker_labels_default: {}</span><span class="diff-line del">-nabarr_docker_labels_custom: {}</span><span class="diff-line del">-nabarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(nabarr_docker_labels_default)</span><span class="diff-line del">-                          | combine(nabarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+nabarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;nabarr&#x27;) }}:/config&quot;</span><span class="diff-line add">+nabarr_role_docker_volumes_custom: []</span><span class="diff-line add">+nabarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;nabarr&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;nabarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-nabarr_docker_hostname: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line add">+nabarr_role_docker_hostname: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-nabarr_docker_networks_alias: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line del">-nabarr_docker_networks_default: []</span><span class="diff-line del">-nabarr_docker_networks_custom: []</span><span class="diff-line del">-nabarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + nabarr_docker_networks_default</span><span class="diff-line del">-                            + nabarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-nabarr_docker_capabilities_default: []</span><span class="diff-line del">-nabarr_docker_capabilities_custom: []</span><span class="diff-line del">-nabarr_docker_capabilities: &quot;{{ nabarr_docker_capabilities_default</span><span class="diff-line del">-                                + nabarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-nabarr_docker_security_opts_default: []</span><span class="diff-line del">-nabarr_docker_security_opts_custom: []</span><span class="diff-line del">-nabarr_docker_security_opts: &quot;{{ nabarr_docker_security_opts_default</span><span class="diff-line del">-                                 + nabarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+nabarr_role_docker_networks_alias: &quot;{{ nabarr_name }}&quot;</span><span class="diff-line add">+nabarr_role_docker_networks_default: []</span><span class="diff-line add">+nabarr_role_docker_networks_custom: []</span><span class="diff-line add">+nabarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;nabarr&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;nabarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-nabarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+nabarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-nabarr_docker_state: started</span><span class="diff-line add">+nabarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-262">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/nabarr/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,18 +7,18 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                      #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Settings | Check if `{{ nabarr_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;nabarr&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ nabarr_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;nabarr&#x27;) }}&quot;</span><span class="diff-line context">   register: nabarr_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ nabarr_paths_config_location | basename }}` tasks</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;nabarr&#x27;) | basename }}` tasks</span><span class="diff-line context">   when: not nabarr_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Settings | Import default `{{ nabarr_paths_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;nabarr&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.copy:</span><span class="diff-line context">         src: config.yml.sample</span><span class="diff-line del">-        dest: &quot;{{ nabarr_paths_location }}/config.yml.sample&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;nabarr&#x27;) }}/config.yml.sample&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-263">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/navidrome/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,79 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-navidrome_paths_folder: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line del">-navidrome_paths_location: &quot;{{ server_appdata_path }}/{{ navidrome_paths_folder }}&quot;</span><span class="diff-line del">-navidrome_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ navidrome_paths_location }}&quot;</span><span class="diff-line add">+navidrome_role_paths_folder: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line add">+navidrome_role_paths_location: &quot;{{ server_appdata_path }}/{{ navidrome_role_paths_folder }}&quot;</span><span class="diff-line add">+navidrome_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ navidrome_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-navidrome_web_subdomain: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line del">-navidrome_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-navidrome_web_port: &quot;4533&quot;</span><span class="diff-line del">-navidrome_web_url: &quot;{{ &#x27;https://&#x27; + (navidrome_web_subdomain + &#x27;.&#x27; + navidrome_web_domain</span><span class="diff-line del">-                    if (navidrome_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else navidrome_web_domain) }}&quot;</span><span class="diff-line add">+navidrome_role_web_subdomain: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line add">+navidrome_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+navidrome_role_web_port: &quot;4533&quot;</span><span class="diff-line add">+navidrome_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;navidrome&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;navidrome&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;navidrome&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;navidrome&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-navidrome_dns_record: &quot;{{ navidrome_web_subdomain }}&quot;</span><span class="diff-line del">-navidrome_dns_zone: &quot;{{ navidrome_web_domain }}&quot;</span><span class="diff-line del">-navidrome_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+navidrome_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;navidrome&#x27;) }}&quot;</span><span class="diff-line add">+navidrome_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;navidrome&#x27;) }}&quot;</span><span class="diff-line add">+navidrome_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-navidrome_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-navidrome_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-navidrome_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-navidrome_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-navidrome_traefik_enabled: true</span><span class="diff-line del">-navidrome_traefik_api_enabled: false</span><span class="diff-line del">-navidrome_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+navidrome_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+navidrome_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+navidrome_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+navidrome_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+navidrome_role_traefik_enabled: true</span><span class="diff-line add">+navidrome_role_traefik_api_enabled: false</span><span class="diff-line add">+navidrome_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-navidrome_docker_container: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line add">+navidrome_role_docker_container: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-navidrome_docker_image_pull: true</span><span class="diff-line del">-navidrome_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-navidrome_docker_image: &quot;deluan/navidrome:{{ navidrome_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-navidrome_docker_ports_defaults: []</span><span class="diff-line del">-navidrome_docker_ports_custom: []</span><span class="diff-line del">-navidrome_docker_ports: &quot;{{ navidrome_docker_ports_defaults</span><span class="diff-line del">-                            + navidrome_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-navidrome_docker_envs_default: {}</span><span class="diff-line del">-navidrome_docker_envs_custom: {}</span><span class="diff-line del">-navidrome_docker_envs: &quot;{{ navidrome_docker_envs_default</span><span class="diff-line del">-                           | combine(navidrome_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-navidrome_docker_commands_default: []</span><span class="diff-line del">-navidrome_docker_commands_custom: []</span><span class="diff-line del">-navidrome_docker_commands: &quot;{{ navidrome_docker_commands_default</span><span class="diff-line del">-                               + navidrome_docker_commands_custom }}&quot;</span><span class="diff-line add">+navidrome_role_docker_image_pull: true</span><span class="diff-line add">+navidrome_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+navidrome_role_docker_image_repo: &quot;deluan/navidrome&quot;</span><span class="diff-line add">+navidrome_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;navidrome&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;navidrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-navidrome_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ navidrome_paths_location }}:/data&quot;</span><span class="diff-line add">+navidrome_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;navidrome&#x27;) }}:/data&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Music:/music&quot;</span><span class="diff-line del">-navidrome_docker_volumes_custom: []</span><span class="diff-line del">-navidrome_docker_volumes: &quot;{{ navidrome_docker_volumes_default</span><span class="diff-line del">-                              + navidrome_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-navidrome_docker_devices_default: []</span><span class="diff-line del">-navidrome_docker_devices_custom: []</span><span class="diff-line del">-navidrome_docker_devices: &quot;{{ navidrome_docker_devices_default</span><span class="diff-line del">-                              + navidrome_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-navidrome_docker_hosts_default: {}</span><span class="diff-line del">-navidrome_docker_hosts_custom: {}</span><span class="diff-line del">-navidrome_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(navidrome_docker_hosts_default)</span><span class="diff-line del">-                            | combine(navidrome_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-navidrome_docker_labels_default: {}</span><span class="diff-line del">-navidrome_docker_labels_custom: {}</span><span class="diff-line del">-navidrome_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(navidrome_docker_labels_default)</span><span class="diff-line del">-                             | combine(navidrome_docker_labels_custom) }}&quot;</span><span class="diff-line add">+navidrome_role_docker_volumes_custom: []</span><span class="diff-line add">+navidrome_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;navidrome&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;navidrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-navidrome_docker_hostname: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line add">+navidrome_role_docker_hostname: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-navidrome_docker_networks_alias: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line del">-navidrome_docker_networks_default: []</span><span class="diff-line del">-navidrome_docker_networks_custom: []</span><span class="diff-line del">-navidrome_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + navidrome_docker_networks_default</span><span class="diff-line del">-                               + navidrome_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-navidrome_docker_capabilities_default: []</span><span class="diff-line del">-navidrome_docker_capabilities_custom: []</span><span class="diff-line del">-navidrome_docker_capabilities: &quot;{{ navidrome_docker_capabilities_default</span><span class="diff-line del">-                                   + navidrome_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-navidrome_docker_security_opts_default: []</span><span class="diff-line del">-navidrome_docker_security_opts_custom: []</span><span class="diff-line del">-navidrome_docker_security_opts: &quot;{{ navidrome_docker_security_opts_default</span><span class="diff-line del">-                                    + navidrome_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+navidrome_role_docker_networks_alias: &quot;{{ navidrome_name }}&quot;</span><span class="diff-line add">+navidrome_role_docker_networks_default: []</span><span class="diff-line add">+navidrome_role_docker_networks_custom: []</span><span class="diff-line add">+navidrome_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;navidrome&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;navidrome&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-navidrome_docker_restart_policy: unless-stopped</span><span class="diff-line add">+navidrome_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-navidrome_docker_state: started</span><span class="diff-line add">+navidrome_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-navidrome_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+navidrome_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-264">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/navidrome/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-265">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/nextcloud/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,157 +17,120 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nextcloud_data_directory: &quot;/var/www/html/data&quot;</span><span class="diff-line del">-nextcloud_php_memory_limit: &quot;512M&quot;</span><span class="diff-line del">-nextcloud_php_upload_limit: &quot;512M&quot;</span><span class="diff-line add">+nextcloud_role_data_directory: &quot;/var/www/html/data&quot;</span><span class="diff-line add">+nextcloud_role_php_memory_limit: &quot;512M&quot;</span><span class="diff-line add">+nextcloud_role_php_upload_limit: &quot;512M&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nextcloud_paths_folder: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line del">-nextcloud_paths_location: &quot;{{ server_appdata_path }}/{{ nextcloud_paths_folder }}&quot;</span><span class="diff-line del">-nextcloud_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ nextcloud_paths_location }}&quot;</span><span class="diff-line add">+nextcloud_role_paths_folder: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line add">+nextcloud_role_paths_location: &quot;{{ server_appdata_path }}/{{ nextcloud_role_paths_folder }}&quot;</span><span class="diff-line add">+nextcloud_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ nextcloud_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nextcloud_web_subdomain: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line del">-nextcloud_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-nextcloud_web_port: &quot;80&quot;</span><span class="diff-line del">-nextcloud_web_url: &quot;{{ &#x27;https://&#x27; + (nextcloud_web_subdomain + &#x27;.&#x27; + nextcloud_web_domain</span><span class="diff-line del">-                    if (nextcloud_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else nextcloud_web_domain) }}&quot;</span><span class="diff-line add">+nextcloud_role_web_subdomain: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line add">+nextcloud_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+nextcloud_role_web_port: &quot;80&quot;</span><span class="diff-line add">+nextcloud_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;nextcloud&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;nextcloud&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;nextcloud&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;nextcloud&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nextcloud_dns_record: &quot;{{ nextcloud_web_subdomain }}&quot;</span><span class="diff-line del">-nextcloud_dns_zone: &quot;{{ nextcloud_web_domain }}&quot;</span><span class="diff-line del">-nextcloud_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+nextcloud_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line add">+nextcloud_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line add">+nextcloud_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-nextcloud_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-nextcloud_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-nextcloud_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-nextcloud_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-nextcloud_traefik_enabled: true</span><span class="diff-line del">-nextcloud_traefik_api_enabled: false</span><span class="diff-line del">-nextcloud_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+nextcloud_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+nextcloud_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+nextcloud_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+nextcloud_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+nextcloud_role_traefik_enabled: true</span><span class="diff-line add">+nextcloud_role_traefik_api_enabled: false</span><span class="diff-line add">+nextcloud_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-nextcloud_docker_container: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_container: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-nextcloud_docker_image_pull: true</span><span class="diff-line del">-nextcloud_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-nextcloud_docker_image: &quot;nextcloud:{{ nextcloud_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-nextcloud_docker_ports_defaults: []</span><span class="diff-line del">-nextcloud_docker_ports_custom: []</span><span class="diff-line del">-nextcloud_docker_ports: &quot;{{ nextcloud_docker_ports_defaults</span><span class="diff-line del">-                            + nextcloud_docker_ports_custom }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_image_pull: true</span><span class="diff-line add">+nextcloud_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+nextcloud_role_docker_image_repo: &quot;nextcloud&quot;</span><span class="diff-line add">+nextcloud_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;nextcloud&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-nextcloud_docker_envs_default:</span><span class="diff-line add">+nextcloud_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   NEXTCLOUD_ADMIN_USER: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   NEXTCLOUD_ADMIN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-  NEXTCLOUD_TRUSTED_DOMAINS: &quot;{{ nextcloud_web_subdomain + &#x27;.&#x27; + nextcloud_web_domain }}&quot;</span><span class="diff-line del">-  NEXTCLOUD_DATA_DIR: &quot;{{ nextcloud_data_directory }}&quot;</span><span class="diff-line add">+  NEXTCLOUD_TRUSTED_DOMAINS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;nextcloud&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line add">+  NEXTCLOUD_DATA_DIR: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_data_directory&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context">   MYSQL_DATABASE: &quot;nextcloud&quot;</span><span class="diff-line context">   MYSQL_USER: &quot;root&quot;</span><span class="diff-line del">-  MYSQL_PASSWORD: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+  MYSQL_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">   MYSQL_HOST: &quot;mariadb&quot;</span><span class="diff-line del">-  OVERWRITEHOST: &quot;{{ nextcloud_web_subdomain + &#x27;.&#x27; + nextcloud_web_domain }}&quot;</span><span class="diff-line add">+  OVERWRITEHOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;nextcloud&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context">   OVERWRITEPROTOCOL: &quot;https&quot;</span><span class="diff-line del">-  OVERWRITECLIURL: &quot;https://{{ nextcloud_web_subdomain + &#x27;.&#x27; + nextcloud_web_domain }}&quot;</span><span class="diff-line del">-  PHP_MEMORY_LIMIT: &quot;{{ nextcloud_php_memory_limit }}&quot;</span><span class="diff-line del">-  PHP_UPLOAD_LIMIT: &quot;{{ nextcloud_php_upload_limit }}&quot;</span><span class="diff-line add">+  OVERWRITECLIURL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line add">+  PHP_MEMORY_LIMIT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_php_memory_limit&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line add">+  PHP_UPLOAD_LIMIT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_php_upload_limit&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context">   TRUSTED_PROXIES: &quot;172.19.0.0/16&quot;</span><span class="diff-line del">-nextcloud_docker_envs_custom: {}</span><span class="diff-line del">-nextcloud_docker_envs: &quot;{{ nextcloud_docker_envs_default</span><span class="diff-line del">-                           | combine(nextcloud_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-nextcloud_docker_commands_default: []</span><span class="diff-line del">-nextcloud_docker_commands_custom: []</span><span class="diff-line del">-nextcloud_docker_commands: &quot;{{ nextcloud_docker_commands_default</span><span class="diff-line del">-                               + nextcloud_docker_commands_custom }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_envs_custom: {}</span><span class="diff-line add">+nextcloud_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;nextcloud&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;nextcloud&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-nextcloud_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ nextcloud_paths_location }}:/var/www/html&quot;</span><span class="diff-line del">-nextcloud_docker_volumes_custom: []</span><span class="diff-line del">-nextcloud_docker_volumes: &quot;{{ nextcloud_docker_volumes_default</span><span class="diff-line del">-                              + nextcloud_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-nextcloud_docker_devices_default: []</span><span class="diff-line del">-nextcloud_docker_devices_custom: []</span><span class="diff-line del">-nextcloud_docker_devices: &quot;{{ nextcloud_docker_devices_default</span><span class="diff-line del">-                              + nextcloud_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-nextcloud_docker_hosts_default: {}</span><span class="diff-line del">-nextcloud_docker_hosts_custom: {}</span><span class="diff-line del">-nextcloud_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(nextcloud_docker_hosts_default)</span><span class="diff-line del">-                            | combine(nextcloud_docker_hosts_custom) }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;nextcloud&#x27;) }}:/var/www/html&quot;</span><span class="diff-line add">+nextcloud_role_docker_volumes_custom: []</span><span class="diff-line add">+nextcloud_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;nextcloud&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Labels</span><span class="diff-line del">-nextcloud_docker_labels_default:</span><span class="diff-line add">+nextcloud_role_docker_labels_default:</span><span class="diff-line context">   traefik.http.middlewares.nextcloud-caldav.replacepathregex.regex: &quot;^/.well-known/ca(l|rd)dav&quot;</span><span class="diff-line context">   traefik.http.middlewares.nextcloud-caldav.replacepathregex.replacement: &quot;/remote.php/dav/&quot;</span><span class="diff-line del">-nextcloud_docker_labels_custom: {}</span><span class="diff-line del">-nextcloud_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(nextcloud_docker_labels_default)</span><span class="diff-line del">-                             | combine(nextcloud_docker_labels_custom) }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_labels_custom: {}</span><span class="diff-line add">+nextcloud_role_docker_labels: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_default&#x27;, role=&#x27;nextcloud&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;nextcloud&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-nextcloud_docker_hostname: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_hostname: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-nextcloud_docker_networks_alias: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line del">-nextcloud_docker_networks_default: []</span><span class="diff-line del">-nextcloud_docker_networks_custom: []</span><span class="diff-line del">-nextcloud_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + nextcloud_docker_networks_default</span><span class="diff-line del">-                               + nextcloud_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-nextcloud_docker_capabilities_default: []</span><span class="diff-line del">-nextcloud_docker_capabilities_custom: []</span><span class="diff-line del">-nextcloud_docker_capabilities: &quot;{{ nextcloud_docker_capabilities_default</span><span class="diff-line del">-                                   + nextcloud_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-nextcloud_docker_security_opts_default: []</span><span class="diff-line del">-nextcloud_docker_security_opts_custom: []</span><span class="diff-line del">-nextcloud_docker_security_opts: &quot;{{ nextcloud_docker_security_opts_default</span><span class="diff-line del">-                                    + nextcloud_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_networks_alias: &quot;{{ nextcloud_name }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_networks_default: []</span><span class="diff-line add">+nextcloud_role_docker_networks_custom: []</span><span class="diff-line add">+nextcloud_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;nextcloud&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;nextcloud&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-nextcloud_docker_restart_policy: unless-stopped</span><span class="diff-line add">+nextcloud_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-nextcloud_docker_state: started</span><span class="diff-line add">+nextcloud_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-nextcloud_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+nextcloud_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-nextcloud_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-nextcloud_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-nextcloud_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+nextcloud_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+nextcloud_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+nextcloud_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-266">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/nextcloud/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,9 +14,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -32,7 +32,7 @@</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Set &#x27;_nextcloud_config_path&#x27; variable</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line del">-        _nextcloud_config_path: &quot;{{ nextcloud_paths_location }}/config/config.php&quot;</span><span class="diff-line add">+        _nextcloud_config_path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;nextcloud&#x27;) }}/config/config.php&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Wait for &#x27;config.php&#x27; to be created</span><span class="diff-line context">       ansible.builtin.wait_for:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-267">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/node_red/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-node_red_paths_folder: &quot;{{ node_red_name }}&quot;</span><span class="diff-line del">-node_red_paths_location: &quot;{{ server_appdata_path }}/{{ node_red_paths_folder }}&quot;</span><span class="diff-line del">-node_red_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ node_red_paths_location }}&quot;</span><span class="diff-line add">+node_red_role_paths_folder: &quot;{{ node_red_name }}&quot;</span><span class="diff-line add">+node_red_role_paths_location: &quot;{{ server_appdata_path }}/{{ node_red_role_paths_folder }}&quot;</span><span class="diff-line add">+node_red_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ node_red_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-node_red_web_subdomain: &quot;{{ node_red_name }}&quot;</span><span class="diff-line del">-node_red_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-node_red_web_port: &quot;1880&quot;</span><span class="diff-line del">-node_red_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_subdomain&#x27;, default=node_red_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_domain&#x27;, default=node_red_web_domain)</span><span class="diff-line del">-                   if (lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_subdomain&#x27;, default=node_red_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                   else lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_domain&#x27;, default=node_red_web_domain)) }}&quot;</span><span class="diff-line add">+node_red_role_web_subdomain: &quot;{{ node_red_name }}&quot;</span><span class="diff-line add">+node_red_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+node_red_role_web_port: &quot;1880&quot;</span><span class="diff-line add">+node_red_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;node_red&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;node_red&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;node_red&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;node_red&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-node_red_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_subdomain&#x27;, default=node_red_web_subdomain) }}&quot;</span><span class="diff-line del">-node_red_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_web_domain&#x27;, default=node_red_web_domain) }}&quot;</span><span class="diff-line del">-node_red_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+node_red_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;node_red&#x27;) }}&quot;</span><span class="diff-line add">+node_red_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;node_red&#x27;) }}&quot;</span><span class="diff-line add">+node_red_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-node_red_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-node_red_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-node_red_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-node_red_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-node_red_traefik_enabled: true</span><span class="diff-line del">-node_red_traefik_api_enabled: true</span><span class="diff-line del">-node_red_traefik_api_endpoint: &quot;PathPrefix(`/auth`) || PathPrefix(`/settings`) || PathPrefix(`/flows`) || PathPrefix(`/flow`) || PathPrefix(`/nodes`)&quot;</span><span class="diff-line add">+node_red_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+node_red_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+node_red_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+node_red_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+node_red_role_traefik_enabled: true</span><span class="diff-line add">+node_red_role_traefik_api_enabled: true</span><span class="diff-line add">+node_red_role_traefik_api_endpoint: &quot;PathPrefix(`/auth`) || PathPrefix(`/settings`) || PathPrefix(`/flows`) || PathPrefix(`/flow`) || PathPrefix(`/nodes`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-node_red_docker_container: &quot;{{ node_red_name }}&quot;</span><span class="diff-line add">+node_red_role_docker_container: &quot;{{ node_red_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-node_red_docker_image_pull: true</span><span class="diff-line del">-node_red_docker_image_repo: &quot;nodered/node-red&quot;</span><span class="diff-line del">-node_red_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-node_red_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_image_repo&#x27;, default=node_red_docker_image_repo)</span><span class="diff-line del">-                           + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_image_tag&#x27;, default=node_red_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-node_red_docker_ports_defaults: []</span><span class="diff-line del">-node_red_docker_ports_custom: []</span><span class="diff-line del">-node_red_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_ports_defaults&#x27;, default=node_red_docker_ports_defaults)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_ports_custom&#x27;, default=node_red_docker_ports_custom) }}&quot;</span><span class="diff-line add">+node_red_role_docker_image_pull: true</span><span class="diff-line add">+node_red_role_docker_image_repo: &quot;nodered/node-red&quot;</span><span class="diff-line add">+node_red_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+node_red_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;node_red&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;node_red&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-node_red_docker_envs_default:</span><span class="diff-line add">+node_red_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-node_red_docker_envs_custom: {}</span><span class="diff-line del">-node_red_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_envs_default&#x27;, default=node_red_docker_envs_default)</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_envs_custom&#x27;, default=node_red_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-node_red_docker_commands_default: []</span><span class="diff-line del">-node_red_docker_commands_custom: []</span><span class="diff-line del">-node_red_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_commands_default&#x27;, default=node_red_docker_commands_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_commands_custom&#x27;, default=node_red_docker_commands_custom) }}&quot;</span><span class="diff-line add">+node_red_role_docker_envs_custom: {}</span><span class="diff-line add">+node_red_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;node_red&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;node_red&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-node_red_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ node_red_paths_location }}:/data&quot;</span><span class="diff-line del">-node_red_docker_volumes_custom: []</span><span class="diff-line del">-node_red_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_volumes_default&#x27;, default=node_red_docker_volumes_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_volumes_custom&#x27;, default=node_red_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-node_red_docker_devices_default: []</span><span class="diff-line del">-node_red_docker_devices_custom: []</span><span class="diff-line del">-node_red_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_devices_default&#x27;, default=node_red_docker_devices_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_devices_custom&#x27;, default=node_red_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-node_red_docker_hosts_default: {}</span><span class="diff-line del">-node_red_docker_hosts_custom: {}</span><span class="diff-line del">-node_red_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_hosts_default&#x27;, default=node_red_docker_hosts_default))</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_hosts_custom&#x27;, default=node_red_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-node_red_docker_labels_default: {}</span><span class="diff-line del">-node_red_docker_labels_custom: {}</span><span class="diff-line del">-node_red_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_labels_default&#x27;, default=node_red_docker_labels_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_labels_custom&#x27;, default=node_red_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+node_red_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;node_red&#x27;) }}:/data&quot;</span><span class="diff-line add">+node_red_role_docker_volumes_custom: []</span><span class="diff-line add">+node_red_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;node_red&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;node_red&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-node_red_docker_hostname: &quot;{{ node_red_name }}&quot;</span><span class="diff-line add">+node_red_role_docker_hostname: &quot;{{ node_red_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-node_red_docker_networks_alias: &quot;{{ node_red_name }}&quot;</span><span class="diff-line del">-node_red_docker_networks_default: []</span><span class="diff-line del">-node_red_docker_networks_custom: []</span><span class="diff-line del">-node_red_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_networks_default&#x27;, default=node_red_docker_networks_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_networks_custom&#x27;, default=node_red_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-node_red_docker_capabilities_default: []</span><span class="diff-line del">-node_red_docker_capabilities_custom: []</span><span class="diff-line del">-node_red_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_capabilities_default&#x27;, default=node_red_docker_capabilities_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_capabilities_custom&#x27;, default=node_red_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-node_red_docker_security_opts_default: []</span><span class="diff-line del">-node_red_docker_security_opts_custom: []</span><span class="diff-line del">-node_red_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_security_opts_default&#x27;, default=node_red_docker_security_opts_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, node_red_name + &#x27;_docker_security_opts_custom&#x27;, default=node_red_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+node_red_role_docker_networks_alias: &quot;{{ node_red_name }}&quot;</span><span class="diff-line add">+node_red_role_docker_networks_default: []</span><span class="diff-line add">+node_red_role_docker_networks_custom: []</span><span class="diff-line add">+node_red_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;node_red&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;node_red&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-node_red_docker_restart_policy: unless-stopped</span><span class="diff-line add">+node_red_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-node_red_docker_state: started</span><span class="diff-line add">+node_red_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-node_red_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+node_red_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-268">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/node_red/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-269">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/notifiarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,152 +17,110 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-notifiarr_privileged: false</span><span class="diff-line add">+notifiarr_role_privileged: false</span><span class="diff-line add">+notifiarr_role_api_key: &quot;api-key-from-notifiarr.com&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-notifiarr_paths_folder: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line del">-notifiarr_paths_location: &quot;{{ server_appdata_path }}/{{ notifiarr_paths_folder }}&quot;</span><span class="diff-line del">-notifiarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ notifiarr_paths_location }}&quot;</span><span class="diff-line del">-notifiarr_paths_recursive: true</span><span class="diff-line del">-notifiarr_paths_config_location: &quot;{{ notifiarr_paths_location }}/notifiarr.conf&quot;</span><span class="diff-line del">-notifiarr_radarr_config: &quot;{{ radarr_paths_location }}/config.xml&quot;</span><span class="diff-line del">-notifiarr_sonarr_config: &quot;{{ sonarr_paths_location }}/config.xml&quot;</span><span class="diff-line del">-notifiarr_tautulli_config: &quot;{{ tautulli_paths_location }}/config.ini&quot;</span><span class="diff-line del">-tautulli_api_key: &quot;{{ (lookup(&#x27;ini&#x27;, &#x27;api_key section=General file={{ notifiarr_tautulli_config }}&#x27;)) if tautulli_config.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line add">+notifiarr_role_paths_folder: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line add">+notifiarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ notifiarr_role_paths_folder }}&quot;</span><span class="diff-line add">+notifiarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ notifiarr_role_paths_location }}&quot;</span><span class="diff-line add">+notifiarr_role_paths_recursive: true</span><span class="diff-line add">+notifiarr_role_paths_config_location: &quot;{{ notifiarr_role_paths_location }}/notifiarr.conf&quot;</span><span class="diff-line add">+notifiarr_role_radarr_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;radarr&#x27;) }}/config.xml&quot;</span><span class="diff-line add">+notifiarr_role_sonarr_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;sonarr&#x27;) }}/config.xml&quot;</span><span class="diff-line add">+notifiarr_role_tautulli_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tautulli&#x27;) }}/config.ini&quot;</span><span class="diff-line add">+notifiarr_role_tautulli_api_key: &quot;{{ lookup(&#x27;ini&#x27;, &#x27;api_key section=General file=&#x27; ~ lookup(&#x27;role_var&#x27;, &#x27;_tautulli_config&#x27;, role=&#x27;notifiarr&#x27;)) if notifiarr_tautulli_config_stat.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-notifiarr_web_subdomain: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line del">-notifiarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-notifiarr_web_port: &quot;5454&quot;</span><span class="diff-line del">-notifiarr_web_url: &quot;{{ &#x27;https://&#x27; + (notifiarr_web_subdomain + &#x27;.&#x27; + notifiarr_web_domain</span><span class="diff-line del">-                    if (notifiarr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else notifiarr_web_domain) }}&quot;</span><span class="diff-line add">+notifiarr_role_web_subdomain: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line add">+notifiarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+notifiarr_role_web_port: &quot;5454&quot;</span><span class="diff-line add">+notifiarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;notifiarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;notifiarr&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;notifiarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;notifiarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-notifiarr_dns_record: &quot;{{ notifiarr_web_subdomain }}&quot;</span><span class="diff-line del">-notifiarr_dns_zone: &quot;{{ notifiarr_web_domain }}&quot;</span><span class="diff-line del">-notifiarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+notifiarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line add">+notifiarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line add">+notifiarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-notifiarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-notifiarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-notifiarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-notifiarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-notifiarr_traefik_enabled: true</span><span class="diff-line del">-notifiarr_traefik_api_enabled: true</span><span class="diff-line del">-notifiarr_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/plex`)&quot;</span><span class="diff-line add">+notifiarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+notifiarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+notifiarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+notifiarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+notifiarr_role_traefik_enabled: true</span><span class="diff-line add">+notifiarr_role_traefik_api_enabled: true</span><span class="diff-line add">+notifiarr_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/plex`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-notifiarr_docker_container: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_container: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-notifiarr_docker_image_pull: true</span><span class="diff-line del">-notifiarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-notifiarr_docker_image: &quot;golift/notifiarr:{{ notifiarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-notifiarr_docker_ports_defaults: []</span><span class="diff-line del">-notifiarr_docker_ports_custom: []</span><span class="diff-line del">-notifiarr_docker_ports: &quot;{{ notifiarr_docker_ports_defaults</span><span class="diff-line del">-                            + notifiarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_image_pull: true</span><span class="diff-line add">+notifiarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+notifiarr_role_docker_image_repo: &quot;golift/notifiarr&quot;</span><span class="diff-line add">+notifiarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;notifiarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-notifiarr_docker_envs_default:</span><span class="diff-line add">+notifiarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-notifiarr_docker_envs_custom: {}</span><span class="diff-line del">-notifiarr_docker_envs: &quot;{{ notifiarr_docker_envs_default</span><span class="diff-line del">-                           | combine(notifiarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-notifiarr_docker_commands_default: []</span><span class="diff-line del">-notifiarr_docker_commands_custom: []</span><span class="diff-line del">-notifiarr_docker_commands: &quot;{{ notifiarr_docker_commands_default</span><span class="diff-line del">-                               + notifiarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_envs_custom: {}</span><span class="diff-line add">+notifiarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;notifiarr&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;notifiarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-notifiarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ notifiarr_paths_location }}:/config&quot;</span><span class="diff-line add">+notifiarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;notifiarr&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;/var/run/utmp:/var/run/utmp&quot;</span><span class="diff-line del">-notifiarr_docker_volumes_custom: []</span><span class="diff-line del">-notifiarr_docker_volumes: &quot;{{ notifiarr_docker_volumes_default</span><span class="diff-line del">-                              + notifiarr_docker_volumes_custom }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_volumes_custom: []</span><span class="diff-line add">+notifiarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;notifiarr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Mounts</span><span class="diff-line del">-notifiarr_docker_mounts_default:</span><span class="diff-line add">+notifiarr_role_docker_mounts_default:</span><span class="diff-line context">   - target: /tmp</span><span class="diff-line context">     type: tmpfs</span><span class="diff-line del">-notifiarr_docker_mounts_custom: []</span><span class="diff-line del">-notifiarr_docker_mounts: &quot;{{ notifiarr_docker_mounts_default</span><span class="diff-line del">-                             + notifiarr_docker_mounts_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-notifiarr_docker_devices_default: []</span><span class="diff-line del">-notifiarr_docker_devices_custom: []</span><span class="diff-line del">-notifiarr_docker_devices: &quot;{{ notifiarr_docker_devices_default</span><span class="diff-line del">-                              + notifiarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-notifiarr_docker_hosts_default: {}</span><span class="diff-line del">-notifiarr_docker_hosts_custom: {}</span><span class="diff-line del">-notifiarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(notifiarr_docker_hosts_default)</span><span class="diff-line del">-                            | combine(notifiarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-notifiarr_docker_labels_default: {}</span><span class="diff-line del">-notifiarr_docker_labels_custom: {}</span><span class="diff-line del">-notifiarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(notifiarr_docker_labels_default)</span><span class="diff-line del">-                             | combine(notifiarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_mounts_custom: []</span><span class="diff-line add">+notifiarr_role_docker_mounts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_default&#x27;, role=&#x27;notifiarr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_custom&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-notifiarr_docker_hostname: &quot;{{ traefik_host }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_hostname: &quot;{{ traefik_host }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-notifiarr_docker_networks_alias: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line del">-notifiarr_docker_networks_default: []</span><span class="diff-line del">-notifiarr_docker_networks_custom: []</span><span class="diff-line del">-notifiarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + notifiarr_docker_networks_default</span><span class="diff-line del">-                               + notifiarr_docker_networks_custom }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_networks_alias: &quot;{{ notifiarr_name }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_networks_default: []</span><span class="diff-line add">+notifiarr_role_docker_networks_custom: []</span><span class="diff-line add">+notifiarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;notifiarr&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-notifiarr_docker_capabilities_default: []</span><span class="diff-line del">-notifiarr_docker_capabilities_custom: []</span><span class="diff-line del">-notifiarr_docker_capabilities: &quot;{{ notifiarr_docker_capabilities_default</span><span class="diff-line del">-                                   + notifiarr_docker_capabilities_custom }}&quot;</span><span class="diff-line add">+# Restart Policy</span><span class="diff-line add">+notifiarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line add">+</span><span class="diff-line add">+# State</span><span class="diff-line add">+notifiarr_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# User</span><span class="diff-line add">+notifiarr_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Privileged</span><span class="diff-line del">-notifiarr_docker_privileged: &quot;{{ notifiarr_privileged | bool }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-notifiarr_docker_security_opts_default: []</span><span class="diff-line del">-notifiarr_docker_security_opts_custom: []</span><span class="diff-line del">-notifiarr_docker_security_opts: &quot;{{ notifiarr_docker_security_opts_default</span><span class="diff-line del">-                                    + notifiarr_docker_security_opts_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Restart Policy</span><span class="diff-line del">-notifiarr_docker_restart_policy: unless-stopped</span><span class="diff-line del">-</span><span class="diff-line del">-# State</span><span class="diff-line del">-notifiarr_docker_state: started</span><span class="diff-line del">-</span><span class="diff-line del">-# User</span><span class="diff-line del">-notifiarr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+notifiarr_role_docker_privileged: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_privileged&#x27;, role=&#x27;notifiarr&#x27;) | bool }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-270">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/notifiarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-271">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/notifiarr/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,48 +10,26 @@</span><span class="diff-line context"> - name: Set Default Tautulli instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     tautulli_name: &quot;{{ tautulli_instances[0] }}&quot;</span><span class="diff-line del">-  when: not tautulli_name is defined</span><span class="diff-line add">+  when: (not tautulli_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Default Plex instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    plex_name: &quot;{{ plex_name | default(plex_instances[0]) }}&quot;</span><span class="diff-line del">-  when: not plex_name is defined</span><span class="diff-line add">+    plex_name: &quot;{{ plex_instances[0] }}&quot;</span><span class="diff-line add">+  when: (not plex_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> # Tautulli Tasks</span><span class="diff-line context"> - name: &quot;Check if tautulli exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ notifiarr_tautulli_config }}&quot;</span><span class="diff-line del">-  register: tautulli_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_tautulli_config&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line add">+  register: notifiarr_tautulli_config_stat</span><span class="diff-line context"> </span><span class="diff-line del">-# Plex Tasks</span><span class="diff-line del">-</span><span class="diff-line del">-- name: &quot;Settings | Check if &#x27;{{ plex_paths_config_location | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: Settings | Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;notifiarr&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line del">-  register: preferences_xml</span><span class="diff-line del">-</span><span class="diff-line del">-- name: Settings | {{ plex_name }} auth token tasks</span><span class="diff-line del">-  when: preferences_xml.stat.exists</span><span class="diff-line del">-  block:</span><span class="diff-line del">-    - name: Settings | Fetch {{ plex_name }} auth token</span><span class="diff-line del">-      community.general.xml:</span><span class="diff-line del">-        path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line del">-        xpath: /Preferences</span><span class="diff-line del">-        content: attribute</span><span class="diff-line del">-      register: preferences_xml_resp</span><span class="diff-line del">-      ignore_errors: true</span><span class="diff-line del">-</span><span class="diff-line del">-    - name: Settings | Register {{ plex_name }} auth token value</span><span class="diff-line del">-      ansible.builtin.set_fact:</span><span class="diff-line del">-        plex_auth_token: &quot;{{ preferences_xml_resp.matches[0].Preferences.PlexOnlineToken }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-- name: Settings | Check if `{{ notifiarr_paths_config_location | basename }}` exists</span><span class="diff-line del">-  ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ notifiarr_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context">   register: notifiarr_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ notifiarr_paths_config_location | basename }}` tasks</span><span class="diff-line del">-  when: not notifiarr_config.stat.exists</span><span class="diff-line add">+- name: Settings | New `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;notifiarr&#x27;) | basename }}` tasks</span><span class="diff-line add">+  when: (not notifiarr_config.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Get Instance Info</span><span class="diff-line context">       ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/instances/get_info.yml&quot;</span><span class="diff-line hunk">@@ -61,10 +39,15 @@</span><span class="diff-line context">           - radarr</span><span class="diff-line context">           - lidarr</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Settings | Import default `{{ notifiarr_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import Plex Auth Token role</span><span class="diff-line add">+      ansible.builtin.include_role:</span><span class="diff-line add">+        name: plex_auth_token</span><span class="diff-line add">+      when: plex_account_is_enabled</span><span class="diff-line add">+</span><span class="diff-line add">+    - name: Settings | Import default `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;notifiarr&#x27;) | basename }}`</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: notifiarr.conf.j2</span><span class="diff-line del">-        dest: &quot;{{ notifiarr_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-272">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/notifiarr/templates/notifiarr.conf.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -4,7 +4,7 @@</span><span class="diff-line context"> ###############################################</span><span class="diff-line context"> </span><span class="diff-line context"> ## This API key must be copied from your notifiarr.com account.</span><span class="diff-line del">-api_key = &quot;{{ notifiarr.api_key }}&quot;</span><span class="diff-line add">+api_key = &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_api_key&#x27;, role=&#x27;notifiarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ## Setting a UI password enables the human accessible web GUI. Must be at least 9 characters.</span><span class="diff-line context"> ## The default username is admin; change it by setting ui_password to &quot;username:password&quot;</span><span class="diff-line hunk">@@ -179,7 +179,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> {% if plex_auth_token is defined %}</span><span class="diff-line context"> [plex]</span><span class="diff-line del">-  url     = &quot;{{ plex_web_url }}&quot;     # Your plex URL</span><span class="diff-line add">+  url     = &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}&quot;     # Your plex URL</span><span class="diff-line context">   token   = &quot;{{ plex_auth_token }}&quot;  # your plex token; get this from a web inspector</span><span class="diff-line context"> {% endif %}</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -193,7 +193,7 @@</span><span class="diff-line context"> {% if tautulli_api_key is defined %}</span><span class="diff-line context"> [tautulli]</span><span class="diff-line context">   name    = &quot;tautulli&quot; # only set a name to enable service checks.</span><span class="diff-line del">-  url     = &quot;{{ tautulli_web_url }}&quot; # Your Tautulli URL</span><span class="diff-line add">+  url     = &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;tautulli&#x27;) }}&quot; # Your Tautulli URL</span><span class="diff-line context">   api_key = &quot;{{ tautulli_api_key }}&quot; # your tautulli api key; get this from settings</span><span class="diff-line context"> {% endif %}</span><span class="diff-line context"> </span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-273">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/olivetin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,132 +17,89 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-olivetin_paths_folder: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line del">-olivetin_paths_location: &quot;{{ server_appdata_path }}/{{ olivetin_paths_folder }}&quot;</span><span class="diff-line del">-olivetin_config_location: &quot;{{ olivetin_paths_location }}/config.yaml&quot;</span><span class="diff-line del">-olivetin_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ olivetin_paths_location }}&quot;</span><span class="diff-line add">+olivetin_role_paths_folder: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line add">+olivetin_role_paths_location: &quot;{{ server_appdata_path }}/{{ olivetin_role_paths_folder }}&quot;</span><span class="diff-line add">+olivetin_role_paths_config_location: &quot;{{ olivetin_role_paths_location }}/config.yaml&quot;</span><span class="diff-line add">+olivetin_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ olivetin_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-olivetin_web_subdomain: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line del">-olivetin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-olivetin_web_port: &quot;1337&quot;</span><span class="diff-line del">-olivetin_web_url: &quot;{{ &#x27;https://&#x27; + (olivetin_web_subdomain + &#x27;.&#x27; + olivetin_web_domain</span><span class="diff-line del">-                   if (olivetin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else olivetin_web_domain) }}&quot;</span><span class="diff-line add">+olivetin_role_web_subdomain: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line add">+olivetin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+olivetin_role_web_port: &quot;1337&quot;</span><span class="diff-line add">+olivetin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;olivetin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;olivetin&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;olivetin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;olivetin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-olivetin_dns_record: &quot;{{ olivetin_web_subdomain }}&quot;</span><span class="diff-line del">-olivetin_dns_zone: &quot;{{ olivetin_web_domain }}&quot;</span><span class="diff-line del">-olivetin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+olivetin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line add">+olivetin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line add">+olivetin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-olivetin_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-olivetin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-olivetin_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-olivetin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-olivetin_traefik_enabled: true</span><span class="diff-line del">-olivetin_traefik_api_enabled: false</span><span class="diff-line del">-olivetin_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+olivetin_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+olivetin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+olivetin_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+olivetin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+olivetin_role_traefik_enabled: true</span><span class="diff-line add">+olivetin_role_traefik_api_enabled: false</span><span class="diff-line add">+olivetin_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-olivetin_traefik_middleware_api: &quot;{{ traefik_global_middleware }}&quot;</span><span class="diff-line add">+olivetin_role_traefik_middleware_api: &quot;{{ traefik_global_middleware }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-olivetin_docker_container: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line add">+olivetin_role_docker_container: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-olivetin_docker_image_pull: true</span><span class="diff-line del">-olivetin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-olivetin_docker_image: &quot;jamesread/olivetin:{{ olivetin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-olivetin_docker_ports_defaults: []</span><span class="diff-line del">-olivetin_docker_ports_custom: []</span><span class="diff-line del">-olivetin_docker_ports: &quot;{{ olivetin_docker_ports_defaults</span><span class="diff-line del">-                           + olivetin_docker_ports_custom }}&quot;</span><span class="diff-line add">+olivetin_role_docker_image_pull: true</span><span class="diff-line add">+olivetin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+olivetin_role_docker_image_repo: &quot;jamesread/olivetin&quot;</span><span class="diff-line add">+olivetin_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;olivetin&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-olivetin_docker_envs_default:</span><span class="diff-line add">+olivetin_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-olivetin_docker_envs_custom: {}</span><span class="diff-line del">-olivetin_docker_envs: &quot;{{ olivetin_docker_envs_default</span><span class="diff-line del">-                          | combine(olivetin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-olivetin_docker_commands_default: []</span><span class="diff-line del">-olivetin_docker_commands_custom: []</span><span class="diff-line del">-olivetin_docker_commands: &quot;{{ olivetin_docker_commands_default</span><span class="diff-line del">-                              + olivetin_docker_commands_custom }}&quot;</span><span class="diff-line add">+olivetin_role_docker_envs_custom: {}</span><span class="diff-line add">+olivetin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;olivetin&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;olivetin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-olivetin_docker_volumes_default:</span><span class="diff-line add">+olivetin_role_docker_volumes_default:</span><span class="diff-line context">   - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="diff-line del">-  - &quot;{{ olivetin_paths_location }}:/config&quot;</span><span class="diff-line del">-olivetin_docker_volumes_custom: []</span><span class="diff-line del">-olivetin_docker_volumes: &quot;{{ olivetin_docker_volumes_default</span><span class="diff-line del">-                             + olivetin_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-olivetin_docker_devices_default: []</span><span class="diff-line del">-olivetin_docker_devices_custom: []</span><span class="diff-line del">-olivetin_docker_devices: &quot;{{ olivetin_docker_devices_default</span><span class="diff-line del">-                             + olivetin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-olivetin_docker_hosts_default: {}</span><span class="diff-line del">-olivetin_docker_hosts_custom: {}</span><span class="diff-line del">-olivetin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(olivetin_docker_hosts_default)</span><span class="diff-line del">-                           | combine(olivetin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-olivetin_docker_labels_default: {}</span><span class="diff-line del">-olivetin_docker_labels_custom: {}</span><span class="diff-line del">-olivetin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(olivetin_docker_labels_default)</span><span class="diff-line del">-                            | combine(olivetin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;olivetin&#x27;) }}:/config&quot;</span><span class="diff-line add">+olivetin_role_docker_volumes_custom: []</span><span class="diff-line add">+olivetin_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;olivetin&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-olivetin_docker_hostname: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line add">+olivetin_role_docker_hostname: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-olivetin_docker_networks_alias: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line del">-olivetin_docker_networks_default: []</span><span class="diff-line del">-olivetin_docker_networks_custom: []</span><span class="diff-line del">-olivetin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + olivetin_docker_networks_default</span><span class="diff-line del">-                              + olivetin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-olivetin_docker_capabilities_default: []</span><span class="diff-line del">-olivetin_docker_capabilities_custom: []</span><span class="diff-line del">-olivetin_docker_capabilities: &quot;{{ olivetin_docker_capabilities_default</span><span class="diff-line del">-                                  + olivetin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-olivetin_docker_security_opts_default: []</span><span class="diff-line del">-olivetin_docker_security_opts_custom: []</span><span class="diff-line del">-olivetin_docker_security_opts: &quot;{{ olivetin_docker_security_opts_default</span><span class="diff-line del">-                                   + olivetin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+olivetin_role_docker_networks_alias: &quot;{{ olivetin_name }}&quot;</span><span class="diff-line add">+olivetin_role_docker_networks_default: []</span><span class="diff-line add">+olivetin_role_docker_networks_custom: []</span><span class="diff-line add">+olivetin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;olivetin&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-olivetin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+olivetin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-olivetin_docker_state: started</span><span class="diff-line add">+olivetin_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-olivetin_docker_user: &quot;0:0&quot;</span><span class="diff-line add">+olivetin_role_docker_user: &quot;0:0&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-274">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/olivetin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,16 +10,16 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ olivetin_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line context">   register: olivetin_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line hunk">@@ -28,7 +28,7 @@</span><span class="diff-line context"> - name: Import default config</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: config.yaml.j2</span><span class="diff-line del">-    dest: &quot;{{ olivetin_config_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;olivetin&#x27;) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-275">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/ombi/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ombi_paths_folder: &quot;{{ ombi_name }}&quot;</span><span class="diff-line del">-ombi_paths_location: &quot;{{ server_appdata_path }}/{{ ombi_paths_folder }}&quot;</span><span class="diff-line del">-ombi_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ ombi_paths_location }}&quot;</span><span class="diff-line add">+ombi_role_paths_folder: &quot;{{ ombi_name }}&quot;</span><span class="diff-line add">+ombi_role_paths_location: &quot;{{ server_appdata_path }}/{{ ombi_role_paths_folder }}&quot;</span><span class="diff-line add">+ombi_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ ombi_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ombi_web_subdomain: &quot;{{ ombi_name }}&quot;</span><span class="diff-line del">-ombi_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-ombi_web_port: &quot;3579&quot;</span><span class="diff-line del">-ombi_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_subdomain&#x27;, default=ombi_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_domain&#x27;, default=ombi_web_domain)</span><span class="diff-line del">-               if (lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_subdomain&#x27;, default=ombi_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-               else lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_domain&#x27;, default=ombi_web_domain)) }}&quot;</span><span class="diff-line add">+ombi_role_web_subdomain: &quot;{{ ombi_name }}&quot;</span><span class="diff-line add">+ombi_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+ombi_role_web_port: &quot;3579&quot;</span><span class="diff-line add">+ombi_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ombi&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ombi&#x27;)</span><span class="diff-line add">+                    if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ombi&#x27;) | length &gt; 0)</span><span class="diff-line add">+                    else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ombi&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ombi_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_subdomain&#x27;, default=ombi_web_subdomain) }}&quot;</span><span class="diff-line del">-ombi_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_web_domain&#x27;, default=ombi_web_domain) }}&quot;</span><span class="diff-line del">-ombi_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+ombi_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ombi&#x27;) }}&quot;</span><span class="diff-line add">+ombi_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ombi&#x27;) }}&quot;</span><span class="diff-line add">+ombi_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ombi_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-ombi_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-ombi_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-ombi_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-ombi_traefik_enabled: true</span><span class="diff-line del">-ombi_traefik_api_enabled: false</span><span class="diff-line del">-ombi_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+ombi_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+ombi_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+ombi_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+ombi_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+ombi_role_traefik_enabled: true</span><span class="diff-line add">+ombi_role_traefik_api_enabled: false</span><span class="diff-line add">+ombi_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-ombi_docker_container: &quot;{{ ombi_name }}&quot;</span><span class="diff-line add">+ombi_role_docker_container: &quot;{{ ombi_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-ombi_docker_image_pull: true</span><span class="diff-line del">-ombi_docker_image_repo: &quot;lscr.io/linuxserver/ombi&quot;</span><span class="diff-line del">-ombi_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-ombi_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_image_repo&#x27;, default=ombi_docker_image_repo)</span><span class="diff-line del">-                       + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_image_tag&#x27;, default=ombi_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-ombi_docker_ports_defaults: []</span><span class="diff-line del">-ombi_docker_ports_custom: []</span><span class="diff-line del">-ombi_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_ports_defaults&#x27;, default=ombi_docker_ports_defaults)</span><span class="diff-line del">-                       + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_ports_custom&#x27;, default=ombi_docker_ports_custom) }}&quot;</span><span class="diff-line add">+ombi_role_docker_image_pull: true</span><span class="diff-line add">+ombi_role_docker_image_repo: &quot;lscr.io/linuxserver/ombi&quot;</span><span class="diff-line add">+ombi_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+ombi_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;ombi&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;ombi&#x27;) }}&quot;</span><span class="diff-line context"> # Envs</span><span class="diff-line del">-ombi_docker_envs_default:</span><span class="diff-line add">+ombi_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-ombi_docker_envs_custom: {}</span><span class="diff-line del">-ombi_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_envs_default&#x27;, default=ombi_docker_envs_default)</span><span class="diff-line del">-                      | combine(lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_envs_custom&#x27;, default=ombi_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-ombi_docker_commands_default: []</span><span class="diff-line del">-ombi_docker_commands_custom: []</span><span class="diff-line del">-ombi_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_commands_default&#x27;, default=ombi_docker_commands_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_commands_custom&#x27;, default=ombi_docker_commands_custom) }}&quot;</span><span class="diff-line add">+ombi_role_docker_envs_custom: {}</span><span class="diff-line add">+ombi_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;ombi&#x27;)</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;ombi&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-ombi_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ ombi_paths_location }}:/config&quot;</span><span class="diff-line del">-ombi_docker_volumes_custom: []</span><span class="diff-line del">-ombi_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_volumes_default&#x27;, default=ombi_docker_volumes_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_volumes_custom&#x27;, default=ombi_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-ombi_docker_devices_default: []</span><span class="diff-line del">-ombi_docker_devices_custom: []</span><span class="diff-line del">-ombi_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_devices_default&#x27;, default=ombi_docker_devices_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_devices_custom&#x27;, default=ombi_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-ombi_docker_hosts_default: {}</span><span class="diff-line del">-ombi_docker_hosts_custom: {}</span><span class="diff-line del">-ombi_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_hosts_default&#x27;, default=ombi_docker_hosts_default))</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_hosts_custom&#x27;, default=ombi_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-ombi_docker_labels_default: {}</span><span class="diff-line del">-ombi_docker_labels_custom: {}</span><span class="diff-line del">-ombi_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_labels_default&#x27;, default=ombi_docker_labels_default))</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_labels_custom&#x27;, default=ombi_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+ombi_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;ombi&#x27;) }}:/config&quot;</span><span class="diff-line add">+ombi_role_docker_volumes_custom: []</span><span class="diff-line add">+ombi_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;ombi&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;ombi&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-ombi_docker_hostname: &quot;{{ ombi_name }}&quot;</span><span class="diff-line add">+ombi_role_docker_hostname: &quot;{{ ombi_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-ombi_docker_networks_alias: &quot;{{ ombi_name }}&quot;</span><span class="diff-line del">-ombi_docker_networks_default: []</span><span class="diff-line del">-ombi_docker_networks_custom: []</span><span class="diff-line del">-ombi_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_networks_default&#x27;, default=ombi_docker_networks_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_networks_custom&#x27;, default=ombi_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-ombi_docker_capabilities_default: []</span><span class="diff-line del">-ombi_docker_capabilities_custom: []</span><span class="diff-line del">-ombi_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_capabilities_default&#x27;, default=ombi_docker_capabilities_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_capabilities_custom&#x27;, default=ombi_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-ombi_docker_security_opts_default: []</span><span class="diff-line del">-ombi_docker_security_opts_custom: []</span><span class="diff-line del">-ombi_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_security_opts_default&#x27;, default=ombi_docker_security_opts_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, ombi_name + &#x27;_docker_security_opts_custom&#x27;, default=ombi_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+ombi_role_docker_networks_alias: &quot;{{ ombi_name }}&quot;</span><span class="diff-line add">+ombi_role_docker_networks_default: []</span><span class="diff-line add">+ombi_role_docker_networks_custom: []</span><span class="diff-line add">+ombi_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;ombi&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;ombi&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-ombi_docker_restart_policy: unless-stopped</span><span class="diff-line add">+ombi_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-ombi_docker_state: started</span><span class="diff-line add">+ombi_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-276">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/ombi/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-277">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/openobserve/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,86 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-openobserve_paths_folder: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line del">-openobserve_paths_location: &quot;{{ server_appdata_path }}/{{ openobserve_paths_folder }}&quot;</span><span class="diff-line del">-openobserve_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ openobserve_paths_location }}&quot;</span><span class="diff-line add">+openobserve_role_paths_folder: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line add">+openobserve_role_paths_location: &quot;{{ server_appdata_path }}/{{ openobserve_role_paths_folder }}&quot;</span><span class="diff-line add">+openobserve_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ openobserve_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-openobserve_web_subdomain: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line del">-openobserve_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-openobserve_web_port: &quot;5080&quot;</span><span class="diff-line del">-openobserve_web_url: &quot;{{ &#x27;https://&#x27; + (openobserve_web_subdomain + &#x27;.&#x27; + openobserve_web_domain</span><span class="diff-line del">-                      if (openobserve_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else openobserve_web_domain) }}&quot;</span><span class="diff-line add">+openobserve_role_web_subdomain: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line add">+openobserve_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+openobserve_role_web_port: &quot;5080&quot;</span><span class="diff-line add">+openobserve_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;openobserve&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;openobserve&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;openobserve&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;openobserve&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-openobserve_dns_record: &quot;{{ openobserve_web_subdomain }}&quot;</span><span class="diff-line del">-openobserve_dns_zone: &quot;{{ openobserve_web_domain }}&quot;</span><span class="diff-line del">-openobserve_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+openobserve_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;openobserve&#x27;) }}&quot;</span><span class="diff-line add">+openobserve_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;openobserve&#x27;) }}&quot;</span><span class="diff-line add">+openobserve_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-openobserve_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-openobserve_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-openobserve_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-openobserve_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-openobserve_traefik_enabled: true</span><span class="diff-line del">-openobserve_traefik_api_enabled: false</span><span class="diff-line del">-openobserve_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+openobserve_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+openobserve_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+openobserve_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+openobserve_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+openobserve_role_traefik_enabled: true</span><span class="diff-line add">+openobserve_role_traefik_api_enabled: false</span><span class="diff-line add">+openobserve_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-openobserve_docker_container: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line add">+openobserve_role_docker_container: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-openobserve_docker_image_pull: true</span><span class="diff-line del">-openobserve_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-openobserve_docker_image: &quot;public.ecr.aws/zinclabs/openobserve:{{ openobserve_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-openobserve_docker_ports_defaults: []</span><span class="diff-line del">-openobserve_docker_ports_custom: []</span><span class="diff-line del">-openobserve_docker_ports: &quot;{{ openobserve_docker_ports_defaults</span><span class="diff-line del">-                         + openobserve_docker_ports_custom }}&quot;</span><span class="diff-line add">+openobserve_role_docker_image_pull: true</span><span class="diff-line add">+openobserve_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+openobserve_role_docker_image_repo: &quot;public.ecr.aws/zinclabs/openobserve&quot;</span><span class="diff-line add">+openobserve_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;openobserve&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;openobserve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-openobserve_docker_envs_default:</span><span class="diff-line add">+openobserve_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   ZO_ROOT_USER_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   ZO_ROOT_USER_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-openobserve_docker_envs_custom: {}</span><span class="diff-line del">-openobserve_docker_envs: &quot;{{ openobserve_docker_envs_default</span><span class="diff-line del">-                        | combine(openobserve_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-openobserve_docker_commands_default: []</span><span class="diff-line del">-openobserve_docker_commands_custom: []</span><span class="diff-line del">-openobserve_docker_commands: &quot;{{ openobserve_docker_commands_default</span><span class="diff-line del">-                            + openobserve_docker_commands_custom }}&quot;</span><span class="diff-line add">+openobserve_role_docker_envs_custom: {}</span><span class="diff-line add">+openobserve_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;openobserve&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;openobserve&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-openobserve_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ openobserve_paths_location }}:/data&quot;</span><span class="diff-line del">-openobserve_docker_volumes_custom: []</span><span class="diff-line del">-openobserve_docker_volumes: &quot;{{ openobserve_docker_volumes_default</span><span class="diff-line del">-                           + openobserve_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-openobserve_docker_devices_default: []</span><span class="diff-line del">-openobserve_docker_devices_custom: []</span><span class="diff-line del">-openobserve_docker_devices: &quot;{{ openobserve_docker_devices_default</span><span class="diff-line del">-                           + openobserve_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-openobserve_docker_hosts_default: {}</span><span class="diff-line del">-openobserve_docker_hosts_custom: {}</span><span class="diff-line del">-openobserve_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(openobserve_docker_hosts_default)</span><span class="diff-line del">-                         | combine(openobserve_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-openobserve_docker_labels_default: {}</span><span class="diff-line del">-openobserve_docker_labels_custom: {}</span><span class="diff-line del">-openobserve_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(openobserve_docker_labels_default)</span><span class="diff-line del">-                          | combine(openobserve_docker_labels_custom) }}&quot;</span><span class="diff-line add">+openobserve_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;openobserve&#x27;) }}:/data&quot;</span><span class="diff-line add">+openobserve_role_docker_volumes_custom: []</span><span class="diff-line add">+openobserve_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;openobserve&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;openobserve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-openobserve_docker_hostname: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line add">+openobserve_role_docker_hostname: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-openobserve_docker_networks_alias: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line del">-openobserve_docker_networks_default: []</span><span class="diff-line del">-openobserve_docker_networks_custom: []</span><span class="diff-line del">-openobserve_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + openobserve_docker_networks_default</span><span class="diff-line del">-                            + openobserve_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-openobserve_docker_capabilities_default: []</span><span class="diff-line del">-openobserve_docker_capabilities_custom: []</span><span class="diff-line del">-openobserve_docker_capabilities: &quot;{{ openobserve_docker_capabilities_default</span><span class="diff-line del">-                                + openobserve_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-openobserve_docker_security_opts_default: []</span><span class="diff-line del">-openobserve_docker_security_opts_custom: []</span><span class="diff-line del">-openobserve_docker_security_opts: &quot;{{ openobserve_docker_security_opts_default</span><span class="diff-line del">-                                 + openobserve_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+openobserve_role_docker_networks_alias: &quot;{{ openobserve_name }}&quot;</span><span class="diff-line add">+openobserve_role_docker_networks_default: []</span><span class="diff-line add">+openobserve_role_docker_networks_custom: []</span><span class="diff-line add">+openobserve_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;openobserve&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;openobserve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-openobserve_docker_restart_policy: unless-stopped</span><span class="diff-line add">+openobserve_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-openobserve_docker_state: started</span><span class="diff-line add">+openobserve_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-278">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/openobserve/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-279">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/paperless_ai/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ai_paths_folder: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line del">-paperless_ai_paths_location: &quot;{{ server_appdata_path }}/{{ paperless_ai_paths_folder }}&quot;</span><span class="diff-line del">-paperless_ai_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ paperless_ai_paths_location }}&quot;</span><span class="diff-line add">+paperless_ai_role_paths_folder: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line add">+paperless_ai_role_paths_location: &quot;{{ server_appdata_path }}/{{ paperless_ai_role_paths_folder }}&quot;</span><span class="diff-line add">+paperless_ai_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ paperless_ai_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ai_web_subdomain: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line del">-paperless_ai_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-paperless_ai_web_port: &quot;3000&quot;</span><span class="diff-line del">-paperless_ai_web_url: &quot;{{ &#x27;https://&#x27; + (paperless_ai_web_subdomain + &#x27;.&#x27; + paperless_ai_web_domain</span><span class="diff-line del">-                       if (paperless_ai_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else paperless_ai_web_domain) }}&quot;</span><span class="diff-line add">+paperless_ai_role_web_subdomain: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line add">+paperless_ai_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+paperless_ai_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+paperless_ai_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ai&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ai&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ai&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ai&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ai_dns_record: &quot;{{ paperless_ai_web_subdomain }}&quot;</span><span class="diff-line del">-paperless_ai_dns_zone: &quot;{{ paperless_ai_web_domain }}&quot;</span><span class="diff-line del">-paperless_ai_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+paperless_ai_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ai&#x27;) }}&quot;</span><span class="diff-line add">+paperless_ai_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ai&#x27;) }}&quot;</span><span class="diff-line add">+paperless_ai_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ai_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-paperless_ai_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-paperless_ai_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-paperless_ai_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-paperless_ai_traefik_enabled: true</span><span class="diff-line del">-paperless_ai_traefik_api_enabled: false</span><span class="diff-line del">-paperless_ai_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+paperless_ai_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+paperless_ai_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+paperless_ai_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+paperless_ai_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+paperless_ai_role_traefik_enabled: true</span><span class="diff-line add">+paperless_ai_role_traefik_api_enabled: false</span><span class="diff-line add">+paperless_ai_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-paperless_ai_docker_container: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_container: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-paperless_ai_docker_image_pull: true</span><span class="diff-line del">-paperless_ai_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-paperless_ai_docker_image: &quot;clusterzx/paperless-ai:{{ paperless_ai_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-paperless_ai_docker_ports_defaults: []</span><span class="diff-line del">-paperless_ai_docker_ports_custom: []</span><span class="diff-line del">-paperless_ai_docker_ports: &quot;{{ paperless_ai_docker_ports_defaults</span><span class="diff-line del">-                               + paperless_ai_docker_ports_custom }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_image_pull: true</span><span class="diff-line add">+paperless_ai_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+paperless_ai_role_docker_image_repo: &quot;clusterzx/paperless-ai&quot;</span><span class="diff-line add">+paperless_ai_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;paperless_ai&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;paperless_ai&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-paperless_ai_docker_envs_default:</span><span class="diff-line add">+paperless_ai_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-paperless_ai_docker_envs_custom: {}</span><span class="diff-line del">-paperless_ai_docker_envs: &quot;{{ paperless_ai_docker_envs_default</span><span class="diff-line del">-                              | combine(paperless_ai_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-paperless_ai_docker_commands_default: []</span><span class="diff-line del">-paperless_ai_docker_commands_custom: []</span><span class="diff-line del">-paperless_ai_docker_commands: &quot;{{ paperless_ai_docker_commands_default</span><span class="diff-line del">-                                  + paperless_ai_docker_commands_custom }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_envs_custom: {}</span><span class="diff-line add">+paperless_ai_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;paperless_ai&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;paperless_ai&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-paperless_ai_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ paperless_ai_paths_location }}:/app/data&quot;</span><span class="diff-line del">-paperless_ai_docker_volumes_custom: []</span><span class="diff-line del">-paperless_ai_docker_volumes: &quot;{{ paperless_ai_docker_volumes_default</span><span class="diff-line del">-                                 + paperless_ai_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-paperless_ai_docker_devices_default: []</span><span class="diff-line del">-paperless_ai_docker_devices_custom: []</span><span class="diff-line del">-paperless_ai_docker_devices: &quot;{{ paperless_ai_docker_devices_default</span><span class="diff-line del">-                                 + paperless_ai_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-paperless_ai_docker_hosts_default: {}</span><span class="diff-line del">-paperless_ai_docker_hosts_custom: {}</span><span class="diff-line del">-paperless_ai_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(paperless_ai_docker_hosts_default)</span><span class="diff-line del">-                               | combine(paperless_ai_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-paperless_ai_docker_labels_default: {}</span><span class="diff-line del">-paperless_ai_docker_labels_custom: {}</span><span class="diff-line del">-paperless_ai_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(paperless_ai_docker_labels_default)</span><span class="diff-line del">-                                | combine(paperless_ai_docker_labels_custom) }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ai&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+paperless_ai_role_docker_volumes_custom: []</span><span class="diff-line add">+paperless_ai_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;paperless_ai&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;paperless_ai&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-paperless_ai_docker_hostname: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_hostname: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-paperless_ai_docker_networks_alias: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line del">-paperless_ai_docker_networks_default: []</span><span class="diff-line del">-paperless_ai_docker_networks_custom: []</span><span class="diff-line del">-paperless_ai_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + paperless_ai_docker_networks_default</span><span class="diff-line del">-                                  + paperless_ai_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-paperless_ai_docker_capabilities_default: []</span><span class="diff-line del">-paperless_ai_docker_capabilities_custom: []</span><span class="diff-line del">-paperless_ai_docker_capabilities: &quot;{{ paperless_ai_docker_capabilities_default</span><span class="diff-line del">-                                      + paperless_ai_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-paperless_ai_docker_security_opts_default: []</span><span class="diff-line del">-paperless_ai_docker_security_opts_custom: []</span><span class="diff-line del">-paperless_ai_docker_security_opts: &quot;{{ paperless_ai_docker_security_opts_default</span><span class="diff-line del">-                                       + paperless_ai_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_networks_alias: &quot;{{ paperless_ai_name }}&quot;</span><span class="diff-line add">+paperless_ai_role_docker_networks_default: []</span><span class="diff-line add">+paperless_ai_role_docker_networks_custom: []</span><span class="diff-line add">+paperless_ai_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;paperless_ai&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;paperless_ai&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-paperless_ai_docker_restart_policy: unless-stopped</span><span class="diff-line add">+paperless_ai_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-paperless_ai_docker_state: started</span><span class="diff-line add">+paperless_ai_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# Create Docker Container Timeout</span><span class="diff-line add">+paperless_ai_docker_create_timeout: 300</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-280">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/paperless_ai/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-281">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/paperless_ngx/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,88 +17,98 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ngx_postgres_name: &quot;{{ paperless_ngx_name }}-postgres&quot;</span><span class="diff-line del">-paperless_ngx_postgres_docker_env_db: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-paperless_ngx_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line del">-paperless_ngx_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-paperless_ngx_postgres_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-paperless_ngx_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_deploy: true</span><span class="diff-line add">+paperless_ngx_role_postgres_name: &quot;{{ paperless_ngx_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+paperless_ngx_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+paperless_ngx_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_docker_env_db: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_docker_image_tag: &quot;14-alpine&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;paperless_ngx&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;paperless_ngx&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;paperless_ngx&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+paperless_ngx_role_postgres_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ paperless_ngx_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ngx_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-paperless_ngx_paths_location: &quot;{{ server_appdata_path }}/{{ paperless_ngx_paths_folder }}/app&quot;</span><span class="diff-line del">-paperless_ngx_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/data&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/consume&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/media&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/trash&quot;</span><span class="diff-line add">+paperless_ngx_role_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_paths_location: &quot;{{ server_appdata_path }}/{{ paperless_ngx_role_paths_folder }}/app&quot;</span><span class="diff-line add">+paperless_ngx_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}/data&quot;</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}/consume&quot;</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}/media&quot;</span><span class="diff-line add">+  - &quot;{{ paperless_ngx_role_paths_location }}/trash&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ngx_web_subdomain: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-paperless_ngx_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-paperless_ngx_web_port: &quot;8000&quot;</span><span class="diff-line del">-paperless_ngx_web_url: &quot;{{ &#x27;https://&#x27; + (paperless_ngx_web_subdomain + &#x27;.&#x27; + paperless_ngx_web_domain</span><span class="diff-line del">-                        if (paperless_ngx_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else paperless_ngx_web_domain) }}&quot;</span><span class="diff-line add">+paperless_ngx_role_web_subdomain: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+paperless_ngx_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+paperless_ngx_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ngx&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                             if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ngx&#x27;) | length &gt; 0)</span><span class="diff-line add">+                             else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ngx&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ngx_dns_record: &quot;{{ paperless_ngx_web_subdomain }}&quot;</span><span class="diff-line del">-paperless_ngx_dns_zone: &quot;{{ paperless_ngx_web_domain }}&quot;</span><span class="diff-line del">-paperless_ngx_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+paperless_ngx_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+paperless_ngx_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+paperless_ngx_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-paperless_ngx_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-paperless_ngx_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-paperless_ngx_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-paperless_ngx_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-paperless_ngx_traefik_enabled: true</span><span class="diff-line del">-paperless_ngx_traefik_api_enabled: true</span><span class="diff-line del">-paperless_ngx_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/static`)&quot;</span><span class="diff-line add">+paperless_ngx_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+paperless_ngx_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+paperless_ngx_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+paperless_ngx_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+paperless_ngx_role_traefik_enabled: true</span><span class="diff-line add">+paperless_ngx_role_traefik_api_enabled: true</span><span class="diff-line add">+paperless_ngx_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/static`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-paperless_ngx_docker_container: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_container: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-paperless_ngx_docker_image_pull: true</span><span class="diff-line del">-paperless_ngx_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-paperless_ngx_docker_image: &quot;ghcr.io/paperless-ngx/paperless-ngx:{{ paperless_ngx_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-paperless_ngx_docker_ports_defaults: []</span><span class="diff-line del">-paperless_ngx_docker_ports_custom: []</span><span class="diff-line del">-paperless_ngx_docker_ports: &quot;{{ paperless_ngx_docker_ports_defaults</span><span class="diff-line del">-                                + paperless_ngx_docker_ports_custom }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_image_pull: true</span><span class="diff-line add">+paperless_ngx_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_image_repo: &quot;ghcr.io/paperless-ngx/paperless-ngx&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;paperless_ngx&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-paperless_ngx_docker_envs_default:</span><span class="diff-line add">+paperless_ngx_role_docker_envs_default:</span><span class="diff-line context">   PAPERLESS_TIME_ZONE: &quot;{{ tz }}&quot;</span><span class="diff-line context">   USERMAP_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   USERMAP_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   PAPERLESS_REDIS: &quot;redis://{{ paperless_ngx_name }}-redis:6379&quot;</span><span class="diff-line del">-  PAPERLESS_DBHOST: &quot;{{ paperless_ngx_postgres_name }}&quot;</span><span class="diff-line add">+  PAPERLESS_DBHOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line context">   PAPERLESS_DBPORT: &quot;5432&quot;</span><span class="diff-line del">-  PAPERLESS_DBNAME: &quot;{{ paperless_ngx_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-  PAPERLESS_DBPASS: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  PAPERLESS_DBUSER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  PAPERLESS_URL: &quot;{{ paperless_ngx_web_url }}&quot;</span><span class="diff-line add">+  PAPERLESS_DBNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+  PAPERLESS_DBPASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;paperless_ngx&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  PAPERLESS_DBUSER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;paperless_ngx&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  PAPERLESS_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line context">   PAPERLESS_ENABLE_UPDATE_CHECK: &quot;true&quot;</span><span class="diff-line context">   PAPERLESS_TRASH_DIR: &quot;../trash/&quot;</span><span class="diff-line context">   PAPERLESS_TIKA_ENABLED: &quot;1&quot;</span><span class="diff-line hunk">@@ -109,79 +119,44 @@</span><span class="diff-line context">   PAPERLESS_ADMIN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   PAPERLESS_SECRET_KEY: &quot;{{ paperless_ngx_secret_key.stdout }}&quot;</span><span class="diff-line context">   PAPERLESS_ALLOWED_HOSTS: &quot;*&quot;</span><span class="diff-line del">-  PAPERLESS_CORS_ALLOWED_HOSTS: &quot;http://127.0.0.1,http://::1,http://traefik,http://{{ paperless_ngx_name }},{{ paperless_ngx_web_url }}&quot;</span><span class="diff-line del">-  PAPERLESS_CSRF_TRUSTED_ORIGINS: &quot;http://127.0.0.1,http://::1,http://traefik,http://{{ paperless_ngx_name }},{{ paperless_ngx_web_url }}&quot;</span><span class="diff-line del">-paperless_ngx_docker_envs_custom: {}</span><span class="diff-line del">-paperless_ngx_docker_envs: &quot;{{ paperless_ngx_docker_envs_default</span><span class="diff-line del">-                               | combine(paperless_ngx_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-paperless_ngx_docker_commands_default: []</span><span class="diff-line del">-paperless_ngx_docker_commands_custom: []</span><span class="diff-line del">-paperless_ngx_docker_commands: &quot;{{ paperless_ngx_docker_commands_default</span><span class="diff-line del">-                                   + paperless_ngx_docker_commands_custom }}&quot;</span><span class="diff-line add">+  PAPERLESS_CORS_ALLOWED_HOSTS: &quot;http://127.0.0.1,http://::1,http://traefik,http://{{ paperless_ngx_name }},{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+  PAPERLESS_CSRF_TRUSTED_ORIGINS: &quot;http://127.0.0.1,http://::1,http://traefik,http://{{ paperless_ngx_name }},{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_envs_custom: {}</span><span class="diff-line add">+paperless_ngx_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;paperless_ngx&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-paperless_ngx_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/data:/usr/src/paperless/data&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/config:/usr/src/paperless/config&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/consume:/usr/src/paperless/consume&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/media:/usr/src/paperless/media&quot;</span><span class="diff-line del">-  - &quot;{{ paperless_ngx_paths_location }}/trash:/usr/src/paperless/trash&quot;</span><span class="diff-line del">-paperless_ngx_docker_volumes_custom: []</span><span class="diff-line del">-paperless_ngx_docker_volumes: &quot;{{ paperless_ngx_docker_volumes_default</span><span class="diff-line del">-                                  + paperless_ngx_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-paperless_ngx_docker_devices_default: []</span><span class="diff-line del">-paperless_ngx_docker_devices_custom: []</span><span class="diff-line del">-paperless_ngx_docker_devices: &quot;{{ paperless_ngx_docker_devices_default</span><span class="diff-line del">-                                  + paperless_ngx_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-paperless_ngx_docker_hosts_default: {}</span><span class="diff-line del">-paperless_ngx_docker_hosts_custom: {}</span><span class="diff-line del">-paperless_ngx_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(paperless_ngx_docker_hosts_default)</span><span class="diff-line del">-                                | combine(paperless_ngx_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-paperless_ngx_docker_labels_default: {}</span><span class="diff-line del">-paperless_ngx_docker_labels_custom: {}</span><span class="diff-line del">-paperless_ngx_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(paperless_ngx_docker_labels_default)</span><span class="diff-line del">-                                 | combine(paperless_ngx_docker_labels_custom) }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}/data:/usr/src/paperless/data&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}/config:/usr/src/paperless/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}/consume:/usr/src/paperless/consume&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}/media:/usr/src/paperless/media&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}/trash:/usr/src/paperless/trash&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_volumes_custom: []</span><span class="diff-line add">+paperless_ngx_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-paperless_ngx_docker_hostname: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_hostname: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-paperless_ngx_docker_networks_alias: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-paperless_ngx_docker_networks_default: []</span><span class="diff-line del">-paperless_ngx_docker_networks_custom: []</span><span class="diff-line del">-paperless_ngx_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + paperless_ngx_docker_networks_default</span><span class="diff-line del">-                                   + paperless_ngx_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-paperless_ngx_docker_capabilities_default: []</span><span class="diff-line del">-paperless_ngx_docker_capabilities_custom: []</span><span class="diff-line del">-paperless_ngx_docker_capabilities: &quot;{{ paperless_ngx_docker_capabilities_default</span><span class="diff-line del">-                                       + paperless_ngx_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-paperless_ngx_docker_security_opts_default: []</span><span class="diff-line del">-paperless_ngx_docker_security_opts_custom: []</span><span class="diff-line del">-paperless_ngx_docker_security_opts: &quot;{{ paperless_ngx_docker_security_opts_default</span><span class="diff-line del">-                                        + paperless_ngx_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_networks_alias: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+paperless_ngx_role_docker_networks_default: []</span><span class="diff-line add">+paperless_ngx_role_docker_networks_custom: []</span><span class="diff-line add">+paperless_ngx_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-paperless_ngx_docker_restart_policy: unless-stopped</span><span class="diff-line add">+paperless_ngx_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-paperless_ngx_docker_state: started</span><span class="diff-line add">+paperless_ngx_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-paperless_ngx_depends_on: &quot;{{ paperless_ngx_postgres_name }},{{ paperless_ngx_name }}-redis&quot;</span><span class="diff-line del">-paperless_ngx_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-paperless_ngx_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+paperless_ngx_role_depends_on: &quot;{{ paperless_ngx_role_postgres_name }},{{ paperless_ngx_name }}-redis&quot;</span><span class="diff-line add">+paperless_ngx_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+paperless_ngx_role_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+# Create Docker Container Timeout</span><span class="diff-line add">+paperless_ngx_docker_create_timeout: 300</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-282">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/paperless_ngx/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,45 +11,49 @@</span><span class="diff-line context"> - name: Remove legacy redis Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ paperless_ngx_name }}_redis&quot;</span><span class="diff-line add">+    container_name: &quot;{{ paperless_ngx_name }}_redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Redis Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: redis</span><span class="diff-line context">   vars:</span><span class="diff-line context">     redis_instances: [&quot;{{ paperless_ngx_name }}-redis&quot;]</span><span class="diff-line del">-    redis_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line del">-    redis_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line del">-    redis_paths_location: &quot;{{ server_appdata_path }}/{{ redis_paths_folder }}/redis&quot;</span><span class="diff-line add">+    redis_role_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line add">+    redis_role_paths_folder: &quot;{{ paperless_ngx_name }}&quot;</span><span class="diff-line add">+    redis_role_paths_location: &quot;{{ server_appdata_path }}/{{ redis_role_paths_folder }}/redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ paperless_ngx_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ paperless_ngx_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ paperless_ngx_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ paperless_ngx_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ paperless_ngx_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ paperless_ngx_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ paperless_ngx_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ paperless_ngx_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;paperless_ngx&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;paperless_ngx&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy Gotenberg Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ paperless_ngx_name }}_gotenberg&quot;</span><span class="diff-line add">+    container_name: &quot;{{ paperless_ngx_name }}_gotenberg&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Gotenberg Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: gotenberg</span><span class="diff-line context">   vars:</span><span class="diff-line context">     gotenberg_name: &quot;{{ paperless_ngx_name }}-gotenberg&quot;</span><span class="diff-line del">-    gotenberg_docker_image_tag: &quot;8.22&quot;</span><span class="diff-line del">-    gotenberg_docker_commands_default:</span><span class="diff-line add">+    gotenberg_role_docker_image_tag: &quot;8.22&quot;</span><span class="diff-line add">+    gotenberg_role_docker_commands:</span><span class="diff-line context">       - &quot;gotenberg&quot;</span><span class="diff-line context">       - &quot;--chromium-disable-javascript=true&quot;</span><span class="diff-line context">       - &quot;--chromium-allow-list=file:///tmp/.*&quot;</span><span class="diff-line hunk">@@ -58,14 +62,14 @@</span><span class="diff-line context"> - name: Remove legacy Tika Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ paperless_ngx_name }}_tika&quot;</span><span class="diff-line add">+    container_name: &quot;{{ paperless_ngx_name }}_tika&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Tika Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: tika</span><span class="diff-line context">   vars:</span><span class="diff-line context">     tika_name: &quot;{{ paperless_ngx_name }}-tika&quot;</span><span class="diff-line del">-    tika_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+    tika_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Generate Secret Key for sessions&quot;</span><span class="diff-line context">   ansible.builtin.shell: &quot;openssl rand -base64 45&quot;</span><span class="diff-line hunk">@@ -74,9 +78,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-283">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pgadmin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,117 +17,74 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pgadmin_web_subdomain: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line del">-pgadmin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-pgadmin_web_port: &quot;80&quot;</span><span class="diff-line del">-pgadmin_web_url: &quot;{{ &#x27;https://&#x27; + (pgadmin_web_subdomain + &#x27;.&#x27; + pgadmin_web_domain</span><span class="diff-line del">-                  if (pgadmin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else pgadmin_web_domain) }}&quot;</span><span class="diff-line add">+pgadmin_role_web_subdomain: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line add">+pgadmin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+pgadmin_role_web_port: &quot;80&quot;</span><span class="diff-line add">+pgadmin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pgadmin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pgadmin&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pgadmin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pgadmin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pgadmin_dns_record: &quot;{{ pgadmin_web_subdomain }}&quot;</span><span class="diff-line del">-pgadmin_dns_zone: &quot;{{ pgadmin_web_domain }}&quot;</span><span class="diff-line del">-pgadmin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+pgadmin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pgadmin&#x27;) }}&quot;</span><span class="diff-line add">+pgadmin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pgadmin&#x27;) }}&quot;</span><span class="diff-line add">+pgadmin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pgadmin_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-pgadmin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-pgadmin_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-pgadmin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-pgadmin_traefik_enabled: true</span><span class="diff-line del">-pgadmin_traefik_api_enabled: false</span><span class="diff-line del">-pgadmin_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+pgadmin_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+pgadmin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+pgadmin_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+pgadmin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+pgadmin_role_traefik_enabled: true</span><span class="diff-line add">+pgadmin_role_traefik_api_enabled: false</span><span class="diff-line add">+pgadmin_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-pgadmin_docker_container: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_container: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-pgadmin_docker_image_pull: true</span><span class="diff-line del">-pgadmin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-pgadmin_docker_image: &quot;dpage/pgadmin4:{{ pgadmin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-pgadmin_docker_ports_defaults: []</span><span class="diff-line del">-pgadmin_docker_ports_custom: []</span><span class="diff-line del">-pgadmin_docker_ports: &quot;{{ pgadmin_docker_ports_defaults</span><span class="diff-line del">-                          + pgadmin_docker_ports_custom }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_image_pull: true</span><span class="diff-line add">+pgadmin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+pgadmin_role_docker_image_repo: &quot;dpage/pgadmin4&quot;</span><span class="diff-line add">+pgadmin_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;pgadmin&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;pgadmin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-pgadmin_docker_envs_default:</span><span class="diff-line add">+pgadmin_role_docker_envs_default:</span><span class="diff-line context">   PGADMIN_DEFAULT_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   PGADMIN_DEFAULT_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-pgadmin_docker_envs_custom: {}</span><span class="diff-line del">-pgadmin_docker_envs: &quot;{{ pgadmin_docker_envs_default</span><span class="diff-line del">-                         | combine(pgadmin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-pgadmin_docker_commands_default: []</span><span class="diff-line del">-pgadmin_docker_commands_custom: []</span><span class="diff-line del">-pgadmin_docker_commands: &quot;{{ pgadmin_docker_commands_default</span><span class="diff-line del">-                             + pgadmin_docker_commands_custom }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_envs_custom: {}</span><span class="diff-line add">+pgadmin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;pgadmin&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;pgadmin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-pgadmin_docker_volumes_default:</span><span class="diff-line add">+pgadmin_role_docker_volumes_default:</span><span class="diff-line context">   - &quot;pgadmin:/var/lib/pgadmin&quot;</span><span class="diff-line del">-pgadmin_docker_volumes_custom: []</span><span class="diff-line del">-pgadmin_docker_volumes: &quot;{{ pgadmin_docker_volumes_default</span><span class="diff-line del">-                            + pgadmin_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-pgadmin_docker_devices_default: []</span><span class="diff-line del">-pgadmin_docker_devices_custom: []</span><span class="diff-line del">-pgadmin_docker_devices: &quot;{{ pgadmin_docker_devices_default</span><span class="diff-line del">-                            + pgadmin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-pgadmin_docker_hosts_default: {}</span><span class="diff-line del">-pgadmin_docker_hosts_custom: {}</span><span class="diff-line del">-pgadmin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(pgadmin_docker_hosts_default)</span><span class="diff-line del">-                          | combine(pgadmin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-pgadmin_docker_labels_default: {}</span><span class="diff-line del">-pgadmin_docker_labels_custom: {}</span><span class="diff-line del">-pgadmin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(pgadmin_docker_labels_default)</span><span class="diff-line del">-                           | combine(pgadmin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_volumes_custom: []</span><span class="diff-line add">+pgadmin_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;pgadmin&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;pgadmin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-pgadmin_docker_hostname: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_hostname: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-pgadmin_docker_networks_alias: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line del">-pgadmin_docker_networks_default: []</span><span class="diff-line del">-pgadmin_docker_networks_custom: []</span><span class="diff-line del">-pgadmin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + pgadmin_docker_networks_default</span><span class="diff-line del">-                             + pgadmin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-pgadmin_docker_capabilities_default: []</span><span class="diff-line del">-pgadmin_docker_capabilities_custom: []</span><span class="diff-line del">-pgadmin_docker_capabilities: &quot;{{ pgadmin_docker_capabilities_default</span><span class="diff-line del">-                                 + pgadmin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-pgadmin_docker_security_opts_default: []</span><span class="diff-line del">-pgadmin_docker_security_opts_custom: []</span><span class="diff-line del">-pgadmin_docker_security_opts: &quot;{{ pgadmin_docker_security_opts_default</span><span class="diff-line del">-                                  + pgadmin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_networks_alias: &quot;{{ pgadmin_name }}&quot;</span><span class="diff-line add">+pgadmin_role_docker_networks_default: []</span><span class="diff-line add">+pgadmin_role_docker_networks_custom: []</span><span class="diff-line add">+pgadmin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;pgadmin&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;pgadmin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-pgadmin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+pgadmin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-pgadmin_docker_state: started</span><span class="diff-line add">+pgadmin_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-284">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pgadmin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-285">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/photoprism/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,68 +17,63 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-photoprism_paths_folder: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line del">-photoprism_paths_location: &quot;{{ server_appdata_path }}/{{ photoprism_paths_folder }}&quot;</span><span class="diff-line del">-photoprism_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/originals&quot;</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/storage&quot;</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/import&quot;</span><span class="diff-line add">+photoprism_role_paths_folder: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line add">+photoprism_role_paths_location: &quot;{{ server_appdata_path }}/{{ photoprism_role_paths_folder }}&quot;</span><span class="diff-line add">+photoprism_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ photoprism_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ photoprism_role_paths_location }}/originals&quot;</span><span class="diff-line add">+  - &quot;{{ photoprism_role_paths_location }}/storage&quot;</span><span class="diff-line add">+  - &quot;{{ photoprism_role_paths_location }}/import&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-photoprism_web_subdomain: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line del">-photoprism_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-photoprism_web_port: &quot;2342&quot;</span><span class="diff-line del">-photoprism_web_url: &quot;{{ &#x27;https://&#x27; + (photoprism_web_subdomain + &#x27;.&#x27; + photoprism_web_domain</span><span class="diff-line del">-                     if (photoprism_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else photoprism_web_domain) }}&quot;</span><span class="diff-line add">+photoprism_role_web_subdomain: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line add">+photoprism_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+photoprism_role_web_port: &quot;2342&quot;</span><span class="diff-line add">+photoprism_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;photoprism&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;photoprism&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;photoprism&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;photoprism&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-photoprism_dns_record: &quot;{{ photoprism_web_subdomain }}&quot;</span><span class="diff-line del">-photoprism_dns_zone: &quot;{{ photoprism_web_domain }}&quot;</span><span class="diff-line del">-photoprism_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+photoprism_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line add">+photoprism_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line add">+photoprism_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-photoprism_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-photoprism_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-photoprism_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-photoprism_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-photoprism_traefik_enabled: true</span><span class="diff-line del">-photoprism_traefik_api_enabled: false</span><span class="diff-line del">-photoprism_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+photoprism_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+photoprism_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+photoprism_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+photoprism_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+photoprism_role_traefik_enabled: true</span><span class="diff-line add">+photoprism_role_traefik_api_enabled: false</span><span class="diff-line add">+photoprism_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-photoprism_docker_container: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line add">+photoprism_role_docker_container: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-photoprism_docker_image_pull: true</span><span class="diff-line del">-photoprism_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-photoprism_docker_image: &quot;photoprism/photoprism:{{ photoprism_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-photoprism_docker_ports_defaults: []</span><span class="diff-line del">-photoprism_docker_ports_custom: []</span><span class="diff-line del">-photoprism_docker_ports: &quot;{{ photoprism_docker_ports_defaults</span><span class="diff-line del">-                             + photoprism_docker_ports_custom }}&quot;</span><span class="diff-line add">+photoprism_role_docker_image_pull: true</span><span class="diff-line add">+photoprism_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+photoprism_role_docker_image_repo: &quot;photoprism/photoprism&quot;</span><span class="diff-line add">+photoprism_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;photoprism&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-photoprism_docker_envs_default:</span><span class="diff-line add">+photoprism_role_docker_envs_default:</span><span class="diff-line context">   PHOTOPRISM_ADMIN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   PHOTOPRISM_AUTH_MODE: &quot;password&quot;</span><span class="diff-line del">-  PHOTOPRISM_SITE_URL: &quot;{{ photoprism_web_url }}&quot;</span><span class="diff-line add">+  PHOTOPRISM_SITE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line context">   PHOTOPRISM_ORIGINALS_LIMIT: &quot;5000&quot;</span><span class="diff-line context">   PHOTOPRISM_HTTP_COMPRESSION: &quot;gzip&quot;</span><span class="diff-line context">   PHOTOPRISM_LOG_LEVEL: &quot;info&quot;</span><span class="diff-line hunk">@@ -104,83 +99,51 @@</span><span class="diff-line context">   PHOTOPRISM_SITE_DESCRIPTION: &quot;Trying out PhotoPrism!&quot;</span><span class="diff-line context">   PHOTOPRISM_SITE_AUTHOR: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   PHOTOPRISM_INIT: &quot;gpu tensorflow&quot;</span><span class="diff-line del">-photoprism_docker_envs_custom: {}</span><span class="diff-line del">-photoprism_docker_envs: &quot;{{ photoprism_docker_envs_default</span><span class="diff-line del">-                            | combine(photoprism_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-photoprism_docker_commands_default: []</span><span class="diff-line del">-photoprism_docker_commands_custom: []</span><span class="diff-line del">-photoprism_docker_commands: &quot;{{ photoprism_docker_commands_default</span><span class="diff-line del">-                                + photoprism_docker_commands_custom }}&quot;</span><span class="diff-line add">+photoprism_role_docker_envs_custom: {}</span><span class="diff-line add">+photoprism_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;photoprism&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;photoprism&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-photoprism_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/originals:/photoprism/originals&quot;</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/import:/photoprism/import&quot;</span><span class="diff-line del">-  - &quot;{{ photoprism_paths_location }}/storage:/photoprism/storage&quot;</span><span class="diff-line del">-photoprism_docker_volumes_custom: []</span><span class="diff-line del">-photoprism_docker_volumes: &quot;{{ photoprism_docker_volumes_default</span><span class="diff-line del">-                               + photoprism_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-photoprism_docker_devices_default: []</span><span class="diff-line del">-photoprism_docker_devices_custom: []</span><span class="diff-line del">-photoprism_docker_devices: &quot;{{ photoprism_docker_devices_default</span><span class="diff-line del">-                               + photoprism_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-photoprism_docker_hosts_default: {}</span><span class="diff-line del">-photoprism_docker_hosts_custom: {}</span><span class="diff-line del">-photoprism_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(photoprism_docker_hosts_default)</span><span class="diff-line del">-                             | combine(photoprism_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-photoprism_docker_labels_default: {}</span><span class="diff-line del">-photoprism_docker_labels_custom: {}</span><span class="diff-line del">-photoprism_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(photoprism_docker_labels_default)</span><span class="diff-line del">-                              | combine(photoprism_docker_labels_custom) }}&quot;</span><span class="diff-line add">+photoprism_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;photoprism&#x27;) }}/originals:/photoprism/originals&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;photoprism&#x27;) }}/import:/photoprism/import&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;photoprism&#x27;) }}/storage:/photoprism/storage&quot;</span><span class="diff-line add">+photoprism_role_docker_volumes_custom: []</span><span class="diff-line add">+photoprism_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;photoprism&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-photoprism_docker_hostname: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line add">+photoprism_role_docker_hostname: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-photoprism_docker_networks_alias: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line del">-photoprism_docker_networks_default: []</span><span class="diff-line del">-photoprism_docker_networks_custom: []</span><span class="diff-line del">-photoprism_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + photoprism_docker_networks_default</span><span class="diff-line del">-                                + photoprism_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-photoprism_docker_capabilities_default: []</span><span class="diff-line del">-photoprism_docker_capabilities_custom: []</span><span class="diff-line del">-photoprism_docker_capabilities: &quot;{{ photoprism_docker_capabilities_default</span><span class="diff-line del">-                                    + photoprism_docker_capabilities_custom }}&quot;</span><span class="diff-line add">+photoprism_role_docker_networks_alias: &quot;{{ photoprism_name }}&quot;</span><span class="diff-line add">+photoprism_role_docker_networks_default: []</span><span class="diff-line add">+photoprism_role_docker_networks_custom: []</span><span class="diff-line add">+photoprism_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;photoprism&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Security Opts</span><span class="diff-line del">-photoprism_docker_security_opts_default:</span><span class="diff-line add">+photoprism_role_docker_security_opts_default:</span><span class="diff-line context">   - &quot;seccomp=unconfined&quot;</span><span class="diff-line context">   - &quot;apparmor=unconfined&quot;</span><span class="diff-line del">-photoprism_docker_security_opts_custom: []</span><span class="diff-line del">-photoprism_docker_security_opts: &quot;{{ photoprism_docker_security_opts_default</span><span class="diff-line del">-                                     + photoprism_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+photoprism_role_docker_security_opts_custom: []</span><span class="diff-line add">+photoprism_role_docker_security_opts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_security_opts_default&#x27;, role=&#x27;photoprism&#x27;)</span><span class="diff-line add">+                                          + lookup(&#x27;role_var&#x27;, &#x27;_docker_security_opts_custom&#x27;, role=&#x27;photoprism&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Working Directory</span><span class="diff-line del">-photoprism_docker_working_dir: &quot;/photoprism&quot;</span><span class="diff-line add">+photoprism_role_docker_working_dir: &quot;/photoprism&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-photoprism_docker_restart_policy: unless-stopped</span><span class="diff-line add">+photoprism_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-photoprism_docker_state: started</span><span class="diff-line add">+photoprism_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-photoprism_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+photoprism_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-photoprism_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-photoprism_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-photoprism_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+photoprism_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+photoprism_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+photoprism_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-286">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/photoprism/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,7 +17,7 @@</span><span class="diff-line context">     name: &quot;photoprisms&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">   ignore_errors: true</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -31,9 +31,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -43,7 +43,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-287">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/phpmyadmin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,120 +18,71 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-phpmyadmin_web_subdomain: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line del">-phpmyadmin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-phpmyadmin_web_port: &quot;80&quot;</span><span class="diff-line del">-phpmyadmin_web_url: &quot;{{ &#x27;https://&#x27; + (phpmyadmin_web_subdomain + &#x27;.&#x27; + phpmyadmin_web_domain</span><span class="diff-line del">-                     if (phpmyadmin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else phpmyadmin_web_domain) }}&quot;</span><span class="diff-line add">+phpmyadmin_role_web_subdomain: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line add">+phpmyadmin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+phpmyadmin_role_web_port: &quot;80&quot;</span><span class="diff-line add">+phpmyadmin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;phpmyadmin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;phpmyadmin&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;phpmyadmin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;phpmyadmin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-phpmyadmin_dns_record: &quot;{{ phpmyadmin_web_subdomain }}&quot;</span><span class="diff-line del">-phpmyadmin_dns_zone: &quot;{{ phpmyadmin_web_domain }}&quot;</span><span class="diff-line del">-phpmyadmin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+phpmyadmin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;phpmyadmin&#x27;) }}&quot;</span><span class="diff-line add">+phpmyadmin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;phpmyadmin&#x27;) }}&quot;</span><span class="diff-line add">+phpmyadmin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-phpmyadmin_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-phpmyadmin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-phpmyadmin_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-phpmyadmin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-phpmyadmin_traefik_enabled: true</span><span class="diff-line del">-phpmyadmin_traefik_api_enabled: false</span><span class="diff-line del">-phpmyadmin_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+phpmyadmin_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+phpmyadmin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+phpmyadmin_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+phpmyadmin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+phpmyadmin_role_traefik_enabled: true</span><span class="diff-line add">+phpmyadmin_role_traefik_api_enabled: false</span><span class="diff-line add">+phpmyadmin_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-phpmyadmin_docker_container: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_container: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-phpmyadmin_docker_image_pull: true</span><span class="diff-line del">-phpmyadmin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-phpmyadmin_docker_image: &quot;phpmyadmin:{{ phpmyadmin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-phpmyadmin_docker_ports_defaults: []</span><span class="diff-line del">-phpmyadmin_docker_ports_custom: []</span><span class="diff-line del">-phpmyadmin_docker_ports: &quot;{{ phpmyadmin_docker_ports_defaults</span><span class="diff-line del">-                             + phpmyadmin_docker_ports_custom }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_image_pull: true</span><span class="diff-line add">+phpmyadmin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_image_repo: &quot;phpmyadmin&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;phpmyadmin&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;phpmyadmin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-phpmyadmin_docker_envs_default:</span><span class="diff-line add">+phpmyadmin_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PMA_ARBITRARY: &quot;1&quot;</span><span class="diff-line del">-  PMA_ABSOLUTE_URI: &quot;{{ phpmyadmin_web_url }}&quot;</span><span class="diff-line add">+  PMA_ABSOLUTE_URI: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;phpmyadmin&#x27;) }}&quot;</span><span class="diff-line context">   PMA_VERBOSE: &quot;Saltbox&quot;</span><span class="diff-line context">   PMA_PORT: &quot;3306&quot;</span><span class="diff-line context">   HIDE_PHP_VERSION: &quot;true&quot;</span><span class="diff-line del">-phpmyadmin_docker_envs_custom: {}</span><span class="diff-line del">-phpmyadmin_docker_envs: &quot;{{ phpmyadmin_docker_envs_default</span><span class="diff-line del">-                            | combine(phpmyadmin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-phpmyadmin_docker_commands_default: []</span><span class="diff-line del">-phpmyadmin_docker_commands_custom: []</span><span class="diff-line del">-phpmyadmin_docker_commands: &quot;{{ phpmyadmin_docker_commands_default</span><span class="diff-line del">-                                + phpmyadmin_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-phpmyadmin_docker_volumes_default: []</span><span class="diff-line del">-phpmyadmin_docker_volumes_custom: []</span><span class="diff-line del">-phpmyadmin_docker_volumes: &quot;{{ phpmyadmin_docker_volumes_default</span><span class="diff-line del">-                               + phpmyadmin_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-phpmyadmin_docker_devices_default: []</span><span class="diff-line del">-phpmyadmin_docker_devices_custom: []</span><span class="diff-line del">-phpmyadmin_docker_devices: &quot;{{ phpmyadmin_docker_devices_default</span><span class="diff-line del">-                               + phpmyadmin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-phpmyadmin_docker_hosts_default: {}</span><span class="diff-line del">-phpmyadmin_docker_hosts_custom: {}</span><span class="diff-line del">-phpmyadmin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(phpmyadmin_docker_hosts_default)</span><span class="diff-line del">-                             | combine(phpmyadmin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-phpmyadmin_docker_labels_default: {}</span><span class="diff-line del">-phpmyadmin_docker_labels_custom: {}</span><span class="diff-line del">-phpmyadmin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(phpmyadmin_docker_labels_default)</span><span class="diff-line del">-                              | combine(phpmyadmin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_envs_custom: {}</span><span class="diff-line add">+phpmyadmin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;phpmyadmin&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;phpmyadmin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-phpmyadmin_docker_hostname: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_hostname: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-phpmyadmin_docker_networks_alias: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line del">-phpmyadmin_docker_networks_default: []</span><span class="diff-line del">-phpmyadmin_docker_networks_custom: []</span><span class="diff-line del">-phpmyadmin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + phpmyadmin_docker_networks_default</span><span class="diff-line del">-                                + phpmyadmin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-phpmyadmin_docker_capabilities_default: []</span><span class="diff-line del">-phpmyadmin_docker_capabilities_custom: []</span><span class="diff-line del">-phpmyadmin_docker_capabilities: &quot;{{ phpmyadmin_docker_capabilities_default</span><span class="diff-line del">-                                    + phpmyadmin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-phpmyadmin_docker_security_opts_default: []</span><span class="diff-line del">-phpmyadmin_docker_security_opts_custom: []</span><span class="diff-line del">-phpmyadmin_docker_security_opts: &quot;{{ phpmyadmin_docker_security_opts_default</span><span class="diff-line del">-                                     + phpmyadmin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_networks_alias: &quot;{{ phpmyadmin_name }}&quot;</span><span class="diff-line add">+phpmyadmin_role_docker_networks_default: []</span><span class="diff-line add">+phpmyadmin_role_docker_networks_custom: []</span><span class="diff-line add">+phpmyadmin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;phpmyadmin&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;phpmyadmin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-phpmyadmin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+phpmyadmin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-phpmyadmin_docker_state: started</span><span class="diff-line add">+phpmyadmin_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-288">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/phpmyadmin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-289">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_auto_languages/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,95 +17,58 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plex_auto_languages_paths_folder: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line del">-plex_auto_languages_paths_location: &quot;{{ server_appdata_path }}/{{ plex_auto_languages_paths_folder }}&quot;</span><span class="diff-line del">-plex_auto_languages_config_location: &quot;{{ plex_auto_languages_paths_location }}/config.yaml&quot;</span><span class="diff-line del">-plex_auto_languages_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ plex_auto_languages_paths_location }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_paths_folder: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_paths_location: &quot;{{ server_appdata_path }}/{{ plex_auto_languages_role_paths_folder }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_paths_config_location: &quot;{{ plex_auto_languages_role_paths_location }}/config.yaml&quot;</span><span class="diff-line add">+plex_auto_languages_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ plex_auto_languages_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-plex_auto_languages_docker_container: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_container: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-plex_auto_languages_docker_image_pull: true</span><span class="diff-line del">-plex_auto_languages_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-plex_auto_languages_docker_image: &quot;journeyover/plex-auto-languages:{{ plex_auto_languages_docker_image_tag }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_image_repo: &quot;journeyover/plex-auto-languages&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;plex_auto_languages&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;plex_auto_languages&#x27;) }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_image_pull: true</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-plex_auto_languages_docker_envs_default:</span><span class="diff-line add">+plex_auto_languages_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-plex_auto_languages_docker_envs_custom: {}</span><span class="diff-line del">-plex_auto_languages_docker_envs: &quot;{{ plex_auto_languages_docker_envs_default</span><span class="diff-line del">-                                     | combine(plex_auto_languages_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-plex_auto_languages_docker_commands_default: []</span><span class="diff-line del">-plex_auto_languages_docker_commands_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_commands: &quot;{{ plex_auto_languages_docker_commands_default</span><span class="diff-line del">-                                         + plex_auto_languages_docker_commands_custom }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_envs_custom: {}</span><span class="diff-line add">+plex_auto_languages_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;plex_auto_languages&#x27;)</span><span class="diff-line add">+                                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;plex_auto_languages&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-plex_auto_languages_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ plex_auto_languages_paths_location }}:/config&quot;</span><span class="diff-line del">-plex_auto_languages_docker_volumes_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_volumes: &quot;{{ plex_auto_languages_docker_volumes_default</span><span class="diff-line del">-                                        + plex_auto_languages_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-plex_auto_languages_docker_devices_default: []</span><span class="diff-line del">-plex_auto_languages_docker_devices_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_devices: &quot;{{ plex_auto_languages_docker_devices_default</span><span class="diff-line del">-                                        + plex_auto_languages_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-plex_auto_languages_docker_hosts_default: {}</span><span class="diff-line del">-plex_auto_languages_docker_hosts_custom: {}</span><span class="diff-line del">-plex_auto_languages_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                      | combine(plex_auto_languages_docker_hosts_default)</span><span class="diff-line del">-                                      | combine(plex_auto_languages_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-plex_auto_languages_docker_labels_default: {}</span><span class="diff-line del">-plex_auto_languages_docker_labels_custom: {}</span><span class="diff-line del">-plex_auto_languages_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                       | combine(plex_auto_languages_docker_labels_default)</span><span class="diff-line del">-                                       | combine(plex_auto_languages_docker_labels_custom) }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;plex_auto_languages&#x27;) }}:/config&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_volumes_custom: []</span><span class="diff-line add">+plex_auto_languages_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;plex_auto_languages&#x27;)</span><span class="diff-line add">+                                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;plex_auto_languages&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-plex_auto_languages_docker_hostname: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_hostname: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-plex_auto_languages_docker_networks_alias: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line del">-plex_auto_languages_docker_networks_default: []</span><span class="diff-line del">-plex_auto_languages_docker_networks_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                         + plex_auto_languages_docker_networks_default</span><span class="diff-line del">-                                         + plex_auto_languages_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-plex_auto_languages_docker_capabilities_default: []</span><span class="diff-line del">-plex_auto_languages_docker_capabilities_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_capabilities: &quot;{{ plex_auto_languages_docker_capabilities_default</span><span class="diff-line del">-                                             + plex_auto_languages_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-plex_auto_languages_docker_security_opts_default: []</span><span class="diff-line del">-plex_auto_languages_docker_security_opts_custom: []</span><span class="diff-line del">-plex_auto_languages_docker_security_opts: &quot;{{ plex_auto_languages_docker_security_opts_default</span><span class="diff-line del">-                                              + plex_auto_languages_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_networks_alias: &quot;{{ plex_auto_languages_name }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_networks_default: []</span><span class="diff-line add">+plex_auto_languages_role_docker_networks_custom: []</span><span class="diff-line add">+plex_auto_languages_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;plex_auto_languages&#x27;)</span><span class="diff-line add">+                                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;plex_auto_languages&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-plex_auto_languages_docker_restart_policy: unless-stopped</span><span class="diff-line add">+plex_auto_languages_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-plex_auto_languages_docker_state: started</span><span class="diff-line add">+plex_auto_languages_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-plex_auto_languages_docker_stop_timeout: 10</span><span class="diff-line add">+plex_auto_languages_role_docker_stop_timeout: 10</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-plex_auto_languages_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+plex_auto_languages_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-290">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_auto_languages/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,7 +17,7 @@</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Check config exists</span><span class="diff-line context">       ansible.builtin.stat:</span><span class="diff-line del">-        path: &quot;{{ plex_auto_languages_config_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ plex_auto_languages_role_paths_config_location }}&quot;</span><span class="diff-line context">       register: plex_auto_languages_config</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Set Default Plex instance</span><span class="diff-line hunk">@@ -30,18 +30,12 @@</span><span class="diff-line context">       when: not plex_auto_languages_config.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Create directories</span><span class="diff-line del">-      ansible.builtin.file:</span><span class="diff-line del">-        path: &quot;{{ item }}&quot;</span><span class="diff-line del">-        state: directory</span><span class="diff-line del">-        owner: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-        group: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-        mode: &quot;0775&quot;</span><span class="diff-line del">-      with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line add">+      ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Import default config</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: config.yaml.j2</span><span class="diff-line del">-        dest: &quot;{{ plex_auto_languages_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ plex_auto_languages_role_paths_config_location }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-291">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_auto_languages/templates/config.yaml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -36,7 +36,7 @@</span><span class="diff-line context">   # Plex configuration</span><span class="diff-line context">   plex:</span><span class="diff-line context">     # A valid Plex URL (required)</span><span class="diff-line del">-    url: &quot;{{ plex_web_url }}&quot;</span><span class="diff-line add">+    url: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}&quot;</span><span class="diff-line context">     # A valid Plex Token (required)</span><span class="diff-line context">     token: &quot;{{ plex_auth_token | default(&#x27;&#x27;) }}&quot;</span><span class="diff-line context"> </span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-292">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_dupefinder/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -20,12 +20,12 @@</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">   with_items:</span><span class="diff-line del">-    - /opt/plex_dupefinder</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/plex_dupefinder&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Clone plex_dupefinder</span><span class="diff-line context">   ansible.builtin.git:</span><span class="diff-line context">     repo: https://github.com/l3uddz/plex_dupefinder.git</span><span class="diff-line del">-    dest: /opt/plex_dupefinder</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/plex_dupefinder&quot;</span><span class="diff-line context">     clone: true</span><span class="diff-line context">     version: HEAD</span><span class="diff-line context">     force: true</span><span class="diff-line hunk">@@ -52,28 +52,28 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Delete venv folder</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;/opt/plex_dupefinder/venv&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/plex_dupefinder/venv&quot;</span><span class="diff-line context">     state: absent</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create venv</span><span class="diff-line context">   ansible.builtin.command:</span><span class="diff-line del">-    cmd: &quot;{{ plex_dupefinder_python_install_path }} -m venv /opt/plex_dupefinder/venv&quot;</span><span class="diff-line add">+    cmd: &quot;{{ plex_dupefinder_python_install_path }} -m venv {{ server_appdata_path }}/plex_dupefinder/venv&quot;</span><span class="diff-line context">   args:</span><span class="diff-line del">-    creates: &quot;/opt/plex_dupefinder/venv&quot;</span><span class="diff-line add">+    creates: &quot;{{ server_appdata_path }}/plex_dupefinder/venv&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Install pip requirements</span><span class="diff-line context">   ansible.builtin.pip:</span><span class="diff-line del">-    requirements: &quot;/opt/plex_dupefinder/requirements.txt&quot;</span><span class="diff-line del">-    virtualenv: &quot;/opt/plex_dupefinder/venv&quot;</span><span class="diff-line del">-    virtualenv_command: &quot;/opt/plex_dupefinder/venv/bin/python3 -m pip&quot;</span><span class="diff-line add">+    requirements: &quot;{{ server_appdata_path }}/plex_dupefinder/requirements.txt&quot;</span><span class="diff-line add">+    virtualenv: &quot;{{ server_appdata_path }}/plex_dupefinder/venv&quot;</span><span class="diff-line add">+    virtualenv_command: &quot;{{ server_appdata_path }}/plex_dupefinder/venv/bin/python3 -m pip&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/plex_dupefinder/config.json&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/plex_dupefinder/config.json&quot;</span><span class="diff-line context">   register: plex_dupefinder_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import Plex Auth Token role</span><span class="diff-line hunk">@@ -84,7 +84,7 @@</span><span class="diff-line context"> - name: Import default config</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: config.json.j2</span><span class="diff-line del">-    dest: /opt/plex_dupefinder/config.json</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/plex_dupefinder/config.json&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -92,7 +92,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set plex_dupefinder.py as executable</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: /opt/plex_dupefinder/plex_dupefinder.py</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/plex_dupefinder/plex_dupefinder.py&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: a+x</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-293">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_dupefinder/templates/config.json.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -39,7 +39,7 @@</span><span class="diff-line context">     &quot;Movies&quot;: 1,</span><span class="diff-line context">     &quot;TV Shows&quot;: 2</span><span class="diff-line context">   },</span><span class="diff-line del">-  &quot;PLEX_SERVER&quot;: &quot;{{ plex_web_url }}&quot;,</span><span class="diff-line add">+  &quot;PLEX_SERVER&quot;: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}&quot;,</span><span class="diff-line context">   &quot;PLEX_TOKEN&quot;: &quot;{{ plex_auth_token | default(&#x27;&#x27;) }}&quot;,</span><span class="diff-line context">   &quot;SCORE_FILESIZE&quot;: true,</span><span class="diff-line context">   &quot;SKIP_LIST&quot;: [</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-294">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_dupefinder/templates/plex_dupefinder.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,2 +1,2 @@</span><span class="diff-line context"> #!/bin/bash</span><span class="diff-line del">-/opt/plex_dupefinder/venv/bin/python3 /opt/plex_dupefinder/plex_dupefinder.py</span><span class="diff-line add">+{{ server_appdata_path }}/plex_dupefinder/venv/bin/python3 {{ server_appdata_path }}/plex_dupefinder/plex_dupefinder.py</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-295">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_meta_manager/tasks/migration.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,42 +10,42 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;plex-meta-manager&quot;</span><span class="diff-line add">+    container_name: &quot;plex-meta-manager&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Check if &#x27;/opt/plex-meta-manager&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Check if &#x27;{{ server_appdata_path }}/plex-meta-manager&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/plex-meta-manager&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/plex-meta-manager&quot;</span><span class="diff-line context">   register: opt_pmm</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Check if overridden path exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/{{ plex_meta_manager_name }}&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ plex_meta_manager_name }}&quot;</span><span class="diff-line context">   register: opt_pmm_name</span><span class="diff-line context">   when: (plex_meta_manager_name is defined and plex_meta_manager_name | length &gt; 0)</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Check if &#x27;/opt/kometa&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Check if &#x27;{{ server_appdata_path }}/kometa&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/kometa&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/kometa&quot;</span><span class="diff-line context">   register: opt_kometa</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate PMM appdata</span><span class="diff-line context">   when: (opt_pmm.stat.exists or (opt_pmm_name is defined and opt_pmm_name.stat is defined and opt_pmm_name.stat.exists))</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Relocate &#x27;/opt/kometa&#x27; to &#x27;/opt/kometa_bak&#x27;</span><span class="diff-line del">-      ansible.builtin.shell: &quot;mv /opt/kometa /opt/kometa_bak&quot;</span><span class="diff-line add">+    - name: Relocate &#x27;{{ server_appdata_path }}/kometa&#x27; to &#x27;{{ server_appdata_path }}/kometa_bak&#x27;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;mv {{ server_appdata_path }}/kometa {{ server_appdata_path }}/kometa_bak&quot;</span><span class="diff-line context">       register: kometa_relocate</span><span class="diff-line context">       when: opt_kometa.stat.exists</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Relocate &#x27;/opt/plex-meta-manager&#x27; to &#x27;/opt/kometa&#x27;</span><span class="diff-line del">-      ansible.builtin.shell: &quot;mv /opt/plex-meta-manager /opt/kometa&quot;</span><span class="diff-line add">+    - name: Relocate &#x27;{{ server_appdata_path }}/plex-meta-manager&#x27; to &#x27;{{ server_appdata_path }}/kometa&#x27;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;mv {{ server_appdata_path }}/plex-meta-manager {{ server_appdata_path }}/kometa&quot;</span><span class="diff-line context">       register: pmm_relocate</span><span class="diff-line context">       when: opt_pmm.stat.exists</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Relocate &#x27;/opt/{{ plex_meta_manager_name }}&#x27; to &#x27;/opt/kometa&#x27;</span><span class="diff-line del">-      ansible.builtin.shell: &quot;mv /opt/{{ plex_meta_manager_name }} /opt/kometa&quot;</span><span class="diff-line add">+    - name: Relocate &#x27;{{ server_appdata_path }}/{{ plex_meta_manager_name }}&#x27; to &#x27;{{ server_appdata_path }}/kometa&#x27;</span><span class="diff-line add">+      ansible.builtin.shell: &quot;mv {{ server_appdata_path }}/{{ plex_meta_manager_name }} {{ server_appdata_path }}/kometa&quot;</span><span class="diff-line context">       register: pmm_name_relocate</span><span class="diff-line context">       when: opt_pmm_name is defined and opt_pmm_name.stat is defined and opt_pmm_name.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Print Kometa tag instructions</span><span class="diff-line context">       ansible.builtin.debug:</span><span class="diff-line del">-        msg: &quot;Your appdata has been migrated to &#x27;/opt/kometa&#x27;. You may now run &#x27;sb install sandbox-kometa&#x27; to deploy Kometa.&quot;</span><span class="diff-line add">+        msg: &quot;Your appdata has been migrated to &#x27;{{ server_appdata_path }}/kometa&#x27;. You may now run &#x27;sb install sandbox-kometa&#x27; to deploy Kometa.&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-296">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_patrol/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -23,13 +23,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if legacy folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/{{ plex_name }}_patrol&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ plex_name }}_patrol&quot;</span><span class="diff-line context">   register: plex_patrol_legacy_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate Plex Patrol directory</span><span class="diff-line context">   migrate_folder:</span><span class="diff-line del">-    legacy_path: &quot;/opt/{{ plex_name }}_patrol&quot;</span><span class="diff-line del">-    new_path: &quot;/opt/{{ plex_name }}-patrol&quot;</span><span class="diff-line add">+    legacy_path: &quot;{{ server_appdata_path }}/{{ plex_name }}_patrol&quot;</span><span class="diff-line add">+    new_path: &quot;{{ server_appdata_path }}/{{ plex_name }}-patrol&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span><span class="diff-line hunk">@@ -38,7 +38,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create plex_patrol directories</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;/opt/{{ plex_name }}-patrol&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ plex_name }}-patrol&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -46,7 +46,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/{{ plex_name }}-patrol/settings.ini&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ plex_name }}-patrol/settings.ini&quot;</span><span class="diff-line context">   register: plex_patrol_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import Plex Auth Token role</span><span class="diff-line hunk">@@ -57,7 +57,7 @@</span><span class="diff-line context"> - name: Import default config</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: settings.ini.j2</span><span class="diff-line del">-    dest: &quot;/opt/{{ plex_name }}-patrol/settings.ini&quot;</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/{{ plex_name }}-patrol/settings.ini&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -71,7 +71,7 @@</span><span class="diff-line context">     pull: true</span><span class="diff-line context">     user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context">     volumes:</span><span class="diff-line del">-      - &quot;/opt/{{ plex_name }}-patrol:/config&quot;</span><span class="diff-line add">+      - &quot;{{ server_appdata_path }}/{{ plex_name }}-patrol:/config&quot;</span><span class="diff-line context">     env:</span><span class="diff-line context">       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">     labels:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-297">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_utills/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plex_utills_paths_folder: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line del">-plex_utills_paths_location: &quot;{{ server_appdata_path }}/{{ plex_utills_paths_folder }}&quot;</span><span class="diff-line del">-plex_utills_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ plex_utills_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ plex_utills_paths_location }}/logs&quot;</span><span class="diff-line add">+plex_utills_role_paths_folder: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line add">+plex_utills_role_paths_location: &quot;{{ server_appdata_path }}/{{ plex_utills_role_paths_folder }}&quot;</span><span class="diff-line add">+plex_utills_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ plex_utills_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ plex_utills_role_paths_location }}/logs&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plex_utills_web_subdomain: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line del">-plex_utills_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-plex_utills_web_port: &quot;80&quot;</span><span class="diff-line del">-plex_utils_web_url: &quot;{{ &#x27;https://&#x27; + (plex_utils_web_subdomain + &#x27;.&#x27; + plex_utils_web_domain</span><span class="diff-line del">-                     if (plex_utils_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else plex_utils_web_domain) }}&quot;</span><span class="diff-line add">+plex_utills_role_web_subdomain: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line add">+plex_utills_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+plex_utills_role_web_port: &quot;80&quot;</span><span class="diff-line add">+plex_utills_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plex_utills&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plex_utills&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plex_utills&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plex_utills&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plex_utills_dns_record: &quot;{{ plex_utills_web_subdomain }}&quot;</span><span class="diff-line del">-plex_utills_dns_zone: &quot;{{ plex_utills_web_domain }}&quot;</span><span class="diff-line del">-plex_utills_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+plex_utills_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plex_utills&#x27;) }}&quot;</span><span class="diff-line add">+plex_utills_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plex_utills&#x27;) }}&quot;</span><span class="diff-line add">+plex_utills_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plex_utills_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-plex_utills_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-plex_utills_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-plex_utills_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-plex_utills_traefik_enabled: true</span><span class="diff-line del">-plex_utills_traefik_api_enabled: false</span><span class="diff-line del">-plex_utills_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+plex_utills_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+plex_utills_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+plex_utills_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+plex_utills_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+plex_utills_role_traefik_enabled: true</span><span class="diff-line add">+plex_utills_role_traefik_api_enabled: false</span><span class="diff-line add">+plex_utills_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-plex_utills_docker_container: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_container: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-plex_utills_docker_image_pull: true</span><span class="diff-line del">-plex_utills_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-plex_utills_docker_image: &quot;jkirkcaldy/plex-utills:{{ plex_utills_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-plex_utills_docker_ports_defaults: []</span><span class="diff-line del">-plex_utills_docker_ports_custom: []</span><span class="diff-line del">-plex_utills_docker_ports: &quot;{{ plex_utills_docker_ports_defaults</span><span class="diff-line del">-                              + plex_utills_docker_ports_custom }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_image_pull: true</span><span class="diff-line add">+plex_utills_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+plex_utills_role_docker_image_repo: &quot;jkirkcaldy/plex-utills&quot;</span><span class="diff-line add">+plex_utills_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;plex_utills&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;plex_utills&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-plex_utills_docker_envs_default:</span><span class="diff-line add">+plex_utills_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-plex_utills_docker_envs: &quot;{{ plex_utills_docker_envs_default</span><span class="diff-line del">-                             | combine(plex_utills_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-plex_utills_docker_commands_default: []</span><span class="diff-line del">-plex_utills_docker_commands_custom: []</span><span class="diff-line del">-plex_utills_docker_commands: &quot;{{ plex_utills_docker_commands_default</span><span class="diff-line del">-                                 + plex_utills_docker_commands_custom }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_envs_custom: {}</span><span class="diff-line add">+plex_utills_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;plex_utills&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;plex_utills&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-plex_utills_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ plex_utills_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ plex_utills_paths_location }}/logs:/logs&quot;</span><span class="diff-line add">+plex_utills_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;plex_utills&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;plex_utills&#x27;) }}/logs:/logs&quot;</span><span class="diff-line context">   - &quot;/mnt:/films&quot;</span><span class="diff-line del">-plex_utills_docker_volumes_custom: []</span><span class="diff-line del">-plex_utills_docker_volumes: &quot;{{ plex_utills_docker_volumes_default</span><span class="diff-line del">-                                + plex_utills_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-plex_utills_docker_devices_default: []</span><span class="diff-line del">-plex_utills_docker_devices_custom: []</span><span class="diff-line del">-plex_utills_docker_devices: &quot;{{ plex_utills_docker_devices_default</span><span class="diff-line del">-                                + plex_utills_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-plex_utills_docker_hosts_default: {}</span><span class="diff-line del">-plex_utills_docker_hosts_custom: {}</span><span class="diff-line del">-plex_utills_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(plex_utills_docker_hosts_default)</span><span class="diff-line del">-                              | combine(plex_utills_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-plex_utills_docker_labels_default: {}</span><span class="diff-line del">-plex_utills_docker_labels_custom: {}</span><span class="diff-line del">-plex_utills_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(plex_utills_docker_labels_default)</span><span class="diff-line del">-                               | combine(plex_utills_docker_labels_custom) }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_volumes_custom: []</span><span class="diff-line add">+plex_utills_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;plex_utills&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;plex_utills&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-plex_utills_docker_hostname: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_hostname: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-plex_utills_docker_networks_alias: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line del">-plex_utills_docker_networks_default: []</span><span class="diff-line del">-plex_utills_docker_networks_custom: []</span><span class="diff-line del">-plex_utills_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + plex_utills_docker_networks_default</span><span class="diff-line del">-                                 + plex_utills_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-plex_utills_docker_capabilities_default: []</span><span class="diff-line del">-plex_utills_docker_capabilities_custom: []</span><span class="diff-line del">-plex_utills_docker_capabilities: &quot;{{ plex_utills_docker_capabilities_default</span><span class="diff-line del">-                                     + plex_utills_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-plex_utills_docker_security_opts_default: []</span><span class="diff-line del">-plex_utills_docker_security_opts_custom: []</span><span class="diff-line del">-plex_utills_docker_security_opts: &quot;{{ plex_utills_docker_security_opts_default</span><span class="diff-line del">-                                      + plex_utills_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_networks_alias: &quot;{{ plex_utills_name }}&quot;</span><span class="diff-line add">+plex_utills_role_docker_networks_default: []</span><span class="diff-line add">+plex_utills_role_docker_networks_custom: []</span><span class="diff-line add">+plex_utills_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;plex_utills&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;plex_utills&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-plex_utills_docker_restart_policy: unless-stopped</span><span class="diff-line add">+plex_utills_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-plex_utills_docker_state: started</span><span class="diff-line add">+plex_utills_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-298">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plex_utills/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-299">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plexshare/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,62 +17,57 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plexshare_paths_folder: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line del">-plexshare_paths_location: &quot;{{ server_appdata_path }}/{{ plexshare_paths_folder }}&quot;</span><span class="diff-line del">-plexshare_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ plexshare_paths_location }}&quot;</span><span class="diff-line add">+plexshare_role_paths_folder: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+plexshare_role_paths_location: &quot;{{ server_appdata_path }}/{{ plexshare_role_paths_folder }}&quot;</span><span class="diff-line add">+plexshare_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ plexshare_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plexshare_web_subdomain: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line del">-plexshare_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-plexshare_web_port: &quot;80&quot;</span><span class="diff-line del">-plexshare_web_url: &quot;{{ &#x27;https://&#x27; + (plexshare_web_subdomain + &#x27;.&#x27; + plexshare_web_domain</span><span class="diff-line del">-                    if (plexshare_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else plexshare_web_domain) }}&quot;</span><span class="diff-line add">+plexshare_role_web_subdomain: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+plexshare_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+plexshare_role_web_port: &quot;80&quot;</span><span class="diff-line add">+plexshare_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plexshare&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plexshare&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plexshare&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plexshare&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plexshare_dns_record: &quot;{{ plexshare_web_subdomain }}&quot;</span><span class="diff-line del">-plexshare_dns_zone: &quot;{{ plexshare_web_domain }}&quot;</span><span class="diff-line del">-plexshare_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+plexshare_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;plexshare&#x27;) }}&quot;</span><span class="diff-line add">+plexshare_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;plexshare&#x27;) }}&quot;</span><span class="diff-line add">+plexshare_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plexshare_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-plexshare_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-plexshare_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-plexshare_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-plexshare_traefik_enabled: true</span><span class="diff-line del">-plexshare_traefik_api_enabled: false</span><span class="diff-line del">-plexshare_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+plexshare_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+plexshare_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+plexshare_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+plexshare_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+plexshare_role_traefik_enabled: true</span><span class="diff-line add">+plexshare_role_traefik_api_enabled: false</span><span class="diff-line add">+plexshare_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-plexshare_docker_container: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+plexshare_role_docker_container: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-plexshare_docker_image_pull: true</span><span class="diff-line del">-plexshare_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-plexshare_docker_image: &quot;chewbaka/plexshare:{{ plexshare_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-plexshare_docker_ports_defaults: []</span><span class="diff-line del">-plexshare_docker_ports_custom: []</span><span class="diff-line del">-plexshare_docker_ports: &quot;{{ plexshare_docker_ports_defaults</span><span class="diff-line del">-                            + plexshare_docker_ports_custom }}&quot;</span><span class="diff-line add">+plexshare_role_docker_image_pull: true</span><span class="diff-line add">+plexshare_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+plexshare_role_docker_image_repo: &quot;chewbaka/plexshare&quot;</span><span class="diff-line add">+plexshare_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;plexshare&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;plexshare&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-plexshare_docker_envs_default:</span><span class="diff-line add">+plexshare_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   WEB_DOCUMENT_ROOT: &quot;/app/public&quot;</span><span class="diff-line context">   WEB_DOCUMENT_INDEX: &quot;index.php&quot;</span><span class="diff-line hunk">@@ -83,73 +78,29 @@</span><span class="diff-line context">   PHP_MAX_EXECUTION_TIME: &quot;300&quot;</span><span class="diff-line context">   PHP_DATE_TIMEZONE: &quot;{{ tz }}&quot;</span><span class="diff-line context">   COMPOSER_VERSION: &quot;1&quot;</span><span class="diff-line del">-  BASE_URL: &quot;{{ plexshare_web_url }}/&quot;</span><span class="diff-line del">-plexshare_docker_envs_custom: {}</span><span class="diff-line del">-plexshare_docker_envs: &quot;{{ plexshare_docker_envs_default</span><span class="diff-line del">-                           | combine(plexshare_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-plexshare_docker_commands_default: []</span><span class="diff-line del">-plexshare_docker_commands_custom: []</span><span class="diff-line del">-plexshare_docker_commands: &quot;{{ plexshare_docker_commands_default</span><span class="diff-line del">-                               + plexshare_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-plexshare_docker_volumes_default: []</span><span class="diff-line del">-plexshare_docker_volumes_custom: []</span><span class="diff-line del">-plexshare_docker_volumes: &quot;{{ plexshare_docker_volumes_default</span><span class="diff-line del">-                              + plexshare_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-plexshare_docker_devices_default: []</span><span class="diff-line del">-plexshare_docker_devices_custom: []</span><span class="diff-line del">-plexshare_docker_devices: &quot;{{ plexshare_docker_devices_default</span><span class="diff-line del">-                              + plexshare_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-plexshare_docker_hosts_default: {}</span><span class="diff-line del">-plexshare_docker_hosts_custom: {}</span><span class="diff-line del">-plexshare_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(plexshare_docker_hosts_default)</span><span class="diff-line del">-                            | combine(plexshare_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-plexshare_docker_labels_default: {}</span><span class="diff-line del">-plexshare_docker_labels_custom: {}</span><span class="diff-line del">-plexshare_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(plexshare_docker_labels_default)</span><span class="diff-line del">-                             | combine(plexshare_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  BASE_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plexshare&#x27;) }}/&quot;</span><span class="diff-line add">+plexshare_role_docker_envs_custom: {}</span><span class="diff-line add">+plexshare_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;plexshare&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;plexshare&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-plexshare_docker_hostname: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+plexshare_role_docker_hostname: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-plexshare_docker_networks_alias: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line del">-plexshare_docker_networks_default: []</span><span class="diff-line del">-plexshare_docker_networks_custom: []</span><span class="diff-line del">-plexshare_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + plexshare_docker_networks_default</span><span class="diff-line del">-                               + plexshare_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-plexshare_docker_capabilities_default: []</span><span class="diff-line del">-plexshare_docker_capabilities_custom: []</span><span class="diff-line del">-plexshare_docker_capabilities: &quot;{{ plexshare_docker_capabilities_default</span><span class="diff-line del">-                                   + plexshare_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-plexshare_docker_security_opts_default: []</span><span class="diff-line del">-plexshare_docker_security_opts_custom: []</span><span class="diff-line del">-plexshare_docker_security_opts: &quot;{{ plexshare_docker_security_opts_default</span><span class="diff-line del">-                                    + plexshare_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+plexshare_role_docker_networks_alias: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+plexshare_role_docker_networks_default: []</span><span class="diff-line add">+plexshare_role_docker_networks_custom: []</span><span class="diff-line add">+plexshare_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;plexshare&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;plexshare&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-plexshare_docker_restart_policy: unless-stopped</span><span class="diff-line add">+plexshare_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-plexshare_docker_state: started</span><span class="diff-line add">+plexshare_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-plexshare_depends_on: &quot;{{ plexshare_name }}-mariadb&quot;</span><span class="diff-line del">-plexshare_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-plexshare_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+plexshare_role_depends_on: &quot;{{ plexshare_name }}-mariadb&quot;</span><span class="diff-line add">+plexshare_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+plexshare_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-300">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plexshare/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,38 +10,38 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Check if db folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ server_appdata_path }}/{{ plexshare_paths_folder }}/mariadb&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/{{ plexshare_role_paths_folder }}/mariadb&quot;</span><span class="diff-line context">   register: stat_plexshare_db_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy MariaDB Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ plexshare_name }}_mariadb&quot;</span><span class="diff-line add">+    container_name: &quot;{{ plexshare_name }}_mariadb&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: mariadb</span><span class="diff-line context">   vars:</span><span class="diff-line context">     mariadb_instances: [&quot;{{ plexshare_name }}-mariadb&quot;]</span><span class="diff-line del">-    mariadb_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-    mariadb_paths_folder: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line del">-    mariadb_paths_location: &quot;{{ server_appdata_path }}/{{ plexshare_paths_folder }}/mariadb&quot;</span><span class="diff-line add">+    mariadb_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+    mariadb_role_paths_folder: &quot;{{ plexshare_name }}&quot;</span><span class="diff-line add">+    mariadb_role_paths_location: &quot;{{ server_appdata_path }}/{{ plexshare_role_paths_folder }}/mariadb&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MariaDB | Create plexshare database</span><span class="diff-line context">   community.mysql.mysql_db:</span><span class="diff-line context">     name: &quot;plexshare&quot;</span><span class="diff-line context">     login_host: &quot;{{ plexshare_name }}-mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;mariadb&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">   when: not stat_plexshare_db_folder.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-301">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plextraktsync/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,91 +17,60 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-plextraktsync_paths_folder: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line del">-plextraktsync_paths_location: &quot;{{ server_appdata_path }}/{{ plextraktsync_paths_folder }}&quot;</span><span class="diff-line del">-plextraktsync_paths_env: &quot;{{ plextraktsync_paths_location }}/.env&quot;</span><span class="diff-line del">-plextraktsync_paths_log: &quot;{{ plextraktsync_paths_location }}/plextraktsync.log&quot;</span><span class="diff-line del">-plextraktsync_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ plextraktsync_paths_location }}&quot;</span><span class="diff-line add">+plextraktsync_role_paths_folder: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line add">+plextraktsync_role_paths_location: &quot;{{ server_appdata_path }}/{{ plextraktsync_role_paths_folder }}&quot;</span><span class="diff-line add">+plextraktsync_role_paths_env: &quot;{{ plextraktsync_role_paths_location }}/.env&quot;</span><span class="diff-line add">+plextraktsync_role_paths_log: &quot;{{ plextraktsync_role_paths_location }}/plextraktsync.log&quot;</span><span class="diff-line add">+plextraktsync_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ plextraktsync_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-plextraktsync_docker_container: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_container: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-plextraktsync_docker_image_pull: true</span><span class="diff-line del">-plextraktsync_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-plextraktsync_docker_image: &quot;ghcr.io/taxel/plextraktsync:{{ plextraktsync_docker_image_tag }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_image_pull: true</span><span class="diff-line add">+plextraktsync_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+plextraktsync_role_docker_image_repo: &quot;ghcr.io/taxel/plextraktsync&quot;</span><span class="diff-line add">+plextraktsync_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;plextraktsync&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;plextraktsync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-plextraktsync_docker_envs_default:</span><span class="diff-line add">+plextraktsync_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-plextraktsync_docker_envs_custom: {}</span><span class="diff-line del">-plextraktsync_docker_envs: &quot;{{ plextraktsync_docker_envs_default</span><span class="diff-line del">-                               | combine(plextraktsync_docker_envs_custom) }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_envs_custom: {}</span><span class="diff-line add">+plextraktsync_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;plextraktsync&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;plextraktsync&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Commands</span><span class="diff-line del">-plextraktsync_docker_commands_default:</span><span class="diff-line add">+plextraktsync_role_docker_commands_default:</span><span class="diff-line context">   - watch</span><span class="diff-line del">-plextraktsync_docker_commands_custom: []</span><span class="diff-line del">-plextraktsync_docker_commands: &quot;{{ plextraktsync_docker_commands_default</span><span class="diff-line del">-                                   + plextraktsync_docker_commands_custom }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_commands_custom: []</span><span class="diff-line add">+plextraktsync_role_docker_commands: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_default&#x27;, role=&#x27;plextraktsync&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_commands_custom&#x27;, role=&#x27;plextraktsync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-plextraktsync_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ plextraktsync_paths_location }}:/app/config&quot;</span><span class="diff-line del">-plextraktsync_docker_volumes_custom: []</span><span class="diff-line del">-plextraktsync_docker_volumes: &quot;{{ plextraktsync_docker_volumes_default</span><span class="diff-line del">-                                  + plextraktsync_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-plextraktsync_docker_devices_default: []</span><span class="diff-line del">-plextraktsync_docker_devices_custom: []</span><span class="diff-line del">-plextraktsync_docker_devices: &quot;{{ plextraktsync_docker_devices_default</span><span class="diff-line del">-                                  + plextraktsync_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-plextraktsync_docker_hosts_default: {}</span><span class="diff-line del">-plextraktsync_docker_hosts_custom: {}</span><span class="diff-line del">-plextraktsync_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(plextraktsync_docker_hosts_default)</span><span class="diff-line del">-                                | combine(plextraktsync_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-plextraktsync_docker_labels_default: {}</span><span class="diff-line del">-plextraktsync_docker_labels_custom: {}</span><span class="diff-line del">-plextraktsync_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(plextraktsync_docker_labels_default)</span><span class="diff-line del">-                                 | combine(plextraktsync_docker_labels_custom) }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;plextraktsync&#x27;) }}:/app/config&quot;</span><span class="diff-line add">+plextraktsync_role_docker_volumes_custom: []</span><span class="diff-line add">+plextraktsync_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;plextraktsync&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;plextraktsync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-plextraktsync_docker_hostname: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_hostname: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-plextraktsync_docker_networks_alias: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line del">-plextraktsync_docker_networks_default: []</span><span class="diff-line del">-plextraktsync_docker_networks_custom: []</span><span class="diff-line del">-plextraktsync_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + plextraktsync_docker_networks_default</span><span class="diff-line del">-                                   + plextraktsync_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-plextraktsync_docker_capabilities_default: []</span><span class="diff-line del">-plextraktsync_docker_capabilities_custom: []</span><span class="diff-line del">-plextraktsync_docker_capabilities: &quot;{{ plextraktsync_docker_capabilities_default</span><span class="diff-line del">-                                       + plextraktsync_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-plextraktsync_docker_security_opts_default: []</span><span class="diff-line del">-plextraktsync_docker_security_opts_custom: []</span><span class="diff-line del">-plextraktsync_docker_security_opts: &quot;{{ plextraktsync_docker_security_opts_default</span><span class="diff-line del">-                                        + plextraktsync_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_networks_alias: &quot;{{ plextraktsync_name }}&quot;</span><span class="diff-line add">+plextraktsync_role_docker_networks_default: []</span><span class="diff-line add">+plextraktsync_role_docker_networks_custom: []</span><span class="diff-line add">+plextraktsync_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;plextraktsync&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;plextraktsync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-plextraktsync_docker_restart_policy: unless-stopped</span><span class="diff-line add">+plextraktsync_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-plextraktsync_docker_state: started</span><span class="diff-line add">+plextraktsync_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-302">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plextraktsync/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -13,9 +13,9 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ plextraktsync_paths_env | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ plextraktsync_role_paths_env | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ plextraktsync_paths_env }}&quot;</span><span class="diff-line add">+    path: &quot;{{ plextraktsync_role_paths_env }}&quot;</span><span class="diff-line context">   register: plextraktsync_env</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pre-Install Tasks</span><span class="diff-line hunk">@@ -27,7 +27,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Wait for directory to be populated</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ plextraktsync_paths_log }}&quot;</span><span class="diff-line add">+    path: &quot;{{ plextraktsync_role_paths_log }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Sleep 3 seconds</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line hunk">@@ -35,7 +35,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Reset files ownership</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ plextraktsync_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ plextraktsync_role_paths_location }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     recurse: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-303">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plextraktsync/tasks/subtasks/pre-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,18 +11,18 @@</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     plex_name: &quot;{{ plex_name | default(plex_instances[0]) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if {{ plex_paths_config_location | basename }} exists</span><span class="diff-line add">+- name: Check if {{ plex_role_paths_config_location | basename }} exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ plex_role_paths_config_location }}&quot;</span><span class="diff-line context">   register: preferences_xml</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Get default Plex username</span><span class="diff-line context">   ignore_errors: true</span><span class="diff-line context">   when: preferences_xml.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Get {{ plex_paths_config_location | basename }} XML data</span><span class="diff-line add">+    - name: Get {{ plex_role_paths_config_location | basename }} XML data</span><span class="diff-line context">       community.general.xml:</span><span class="diff-line del">-        path: &quot;{{ plex_paths_config_location }}&quot;</span><span class="diff-line add">+        path: &quot;{{ plex_role_paths_config_location }}&quot;</span><span class="diff-line context">         xpath: /Preferences</span><span class="diff-line context">         content: attribute</span><span class="diff-line context">       register: preferences_xml_resp</span><span class="diff-line hunk">@@ -36,8 +36,8 @@</span><span class="diff-line context">     name: plex_auth_token</span><span class="diff-line context">   when: plex_account_is_enabled</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Create {{ plextraktsync_paths_env | basename }}</span><span class="diff-line add">+- name: Create {{ plextraktsync_role_paths_env | basename }}</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: env.j2</span><span class="diff-line del">-    dest: &quot;{{ plextraktsync_paths_env }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ plextraktsync_role_paths_env }}&quot;</span><span class="diff-line context">     mode: &quot;0644&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-304">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/plextraktsync/templates/env.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,3 +1,3 @@</span><span class="diff-line del">-PLEX_BASEURL=http://{{ plex_docker_networks_alias }}:{{ plex_web_port }}</span><span class="diff-line add">+PLEX_BASEURL=http://{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_alias&#x27;, role=&#x27;plex&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;plex&#x27;) }}</span><span class="diff-line context"> PLEX_TOKEN={{ plex_auth_token | d(&#x27;&#x27;) }}</span><span class="diff-line context"> PLEX_USERNAME={{ plex_owner_username | d(&#x27;&#x27;) | escape }}</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-305">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/privatebin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,144 +17,100 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-privatebin_paths_folder: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line del">-privatebin_paths_location: &quot;{{ server_appdata_path }}/{{ privatebin_paths_folder }}&quot;</span><span class="diff-line del">-privatebin_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ privatebin_paths_location }}&quot;</span><span class="diff-line add">+privatebin_role_paths_folder: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line add">+privatebin_role_paths_location: &quot;{{ server_appdata_path }}/{{ privatebin_role_paths_folder }}&quot;</span><span class="diff-line add">+privatebin_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ privatebin_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-privatebin_web_subdomain: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line del">-privatebin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-privatebin_web_port: &quot;8080&quot;</span><span class="diff-line del">-privatebin_web_url: &quot;{{ &#x27;https://&#x27; + (privatebin_web_subdomain + &#x27;.&#x27; + privatebin_web_domain</span><span class="diff-line del">-                     if (privatebin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else privatebin_web_domain) }}&quot;</span><span class="diff-line add">+privatebin_role_web_subdomain: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line add">+privatebin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+privatebin_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+privatebin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;privatebin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;privatebin&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;privatebin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;privatebin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-privatebin_dns_record: &quot;{{ privatebin_web_subdomain }}&quot;</span><span class="diff-line del">-privatebin_dns_zone: &quot;{{ privatebin_web_domain }}&quot;</span><span class="diff-line del">-privatebin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+privatebin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line add">+privatebin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line add">+privatebin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-privatebin_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-privatebin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-privatebin_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-privatebin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-privatebin_traefik_enabled: true</span><span class="diff-line del">-privatebin_traefik_api_enabled: false</span><span class="diff-line del">-privatebin_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+privatebin_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+privatebin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+privatebin_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+privatebin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+privatebin_role_traefik_enabled: true</span><span class="diff-line add">+privatebin_role_traefik_api_enabled: false</span><span class="diff-line add">+privatebin_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-privatebin_docker_container: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line add">+privatebin_role_docker_container: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-privatebin_docker_image_pull: true</span><span class="diff-line del">-privatebin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-privatebin_docker_image: &quot;privatebin/nginx-fpm-alpine:{{ privatebin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-privatebin_docker_ports_defaults: []</span><span class="diff-line del">-privatebin_docker_ports_custom: []</span><span class="diff-line del">-privatebin_docker_ports: &quot;{{ privatebin_docker_ports_defaults</span><span class="diff-line del">-                             + privatebin_docker_ports_custom }}&quot;</span><span class="diff-line add">+privatebin_role_docker_image_pull: true</span><span class="diff-line add">+privatebin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+privatebin_role_docker_image: &quot;privatebin/nginx-fpm-alpine:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-privatebin_docker_envs_default:</span><span class="diff-line add">+privatebin_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PHP_TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-privatebin_docker_envs_custom: {}</span><span class="diff-line del">-privatebin_docker_envs: &quot;{{ privatebin_docker_envs_default</span><span class="diff-line del">-                            | combine(privatebin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-privatebin_docker_commands_default: []</span><span class="diff-line del">-privatebin_docker_commands_custom: []</span><span class="diff-line del">-privatebin_docker_commands: &quot;{{ privatebin_docker_commands_default</span><span class="diff-line del">-                                + privatebin_docker_commands_custom }}&quot;</span><span class="diff-line add">+privatebin_role_docker_envs_custom: {}</span><span class="diff-line add">+privatebin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;privatebin&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;privatebin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-privatebin_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ privatebin_paths_location }}:/srv/data&quot;</span><span class="diff-line del">-  - &quot;{{ privatebin_paths_location }}/conf.php:/srv/cfg/conf.php:ro&quot;</span><span class="diff-line del">-  - &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_docker_container&#x27;) }}_tmpfs_run:/run&quot;</span><span class="diff-line del">-privatebin_docker_volumes_custom: []</span><span class="diff-line del">-privatebin_docker_volumes: &quot;{{ privatebin_docker_volumes_default</span><span class="diff-line del">-                               + privatebin_docker_volumes_custom }}&quot;</span><span class="diff-line add">+privatebin_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;privatebin&#x27;) }}:/srv/data&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;privatebin&#x27;) }}/conf.php:/srv/cfg/conf.php:ro&quot;</span><span class="diff-line add">+  - &quot;{{ privatebin_name }}_tmpfs_run:/run&quot;</span><span class="diff-line add">+privatebin_role_docker_volumes_custom: []</span><span class="diff-line add">+privatebin_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;privatebin&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Mounts</span><span class="diff-line del">-privatebin_docker_mounts_default:</span><span class="diff-line add">+privatebin_role_docker_mounts_default:</span><span class="diff-line context">   - target: /tmp</span><span class="diff-line context">     type: tmpfs</span><span class="diff-line context">   - target: /var/lib/nginx/tmp</span><span class="diff-line context">     type: tmpfs</span><span class="diff-line del">-privatebin_docker_mounts_custom: []</span><span class="diff-line del">-privatebin_docker_mounts: &quot;{{ privatebin_docker_mounts_default</span><span class="diff-line del">-                              + privatebin_docker_mounts_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-privatebin_docker_devices_default: []</span><span class="diff-line del">-privatebin_docker_devices_custom: []</span><span class="diff-line del">-privatebin_docker_devices: &quot;{{ privatebin_docker_devices_default</span><span class="diff-line del">-                               + privatebin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-privatebin_docker_hosts_default: {}</span><span class="diff-line del">-privatebin_docker_hosts_custom: {}</span><span class="diff-line del">-privatebin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(privatebin_docker_hosts_default)</span><span class="diff-line del">-                             | combine(privatebin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-privatebin_docker_labels_default: {}</span><span class="diff-line del">-privatebin_docker_labels_custom: {}</span><span class="diff-line del">-privatebin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(privatebin_docker_labels_default)</span><span class="diff-line del">-                              | combine(privatebin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+privatebin_role_docker_mounts_custom: []</span><span class="diff-line add">+privatebin_role_docker_mounts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_default&#x27;, role=&#x27;privatebin&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_custom&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-privatebin_docker_hostname: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line add">+privatebin_role_docker_hostname: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-privatebin_docker_networks_alias: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line del">-privatebin_docker_networks_default: []</span><span class="diff-line del">-privatebin_docker_networks_custom: []</span><span class="diff-line del">-privatebin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + privatebin_docker_networks_default</span><span class="diff-line del">-                                + privatebin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-privatebin_docker_capabilities_default: []</span><span class="diff-line del">-privatebin_docker_capabilities_custom: []</span><span class="diff-line del">-privatebin_docker_capabilities: &quot;{{ privatebin_docker_capabilities_default</span><span class="diff-line del">-                                    + privatebin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-privatebin_docker_security_opts_default: []</span><span class="diff-line del">-privatebin_docker_security_opts_custom: []</span><span class="diff-line del">-privatebin_docker_security_opts: &quot;{{ privatebin_docker_security_opts_default</span><span class="diff-line del">-                                     + privatebin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+privatebin_role_docker_networks_alias: &quot;{{ privatebin_name }}&quot;</span><span class="diff-line add">+privatebin_role_docker_networks_default: []</span><span class="diff-line add">+privatebin_role_docker_networks_custom: []</span><span class="diff-line add">+privatebin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;privatebin&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;privatebin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Read Only</span><span class="diff-line del">-privatebin_docker_read_only: yes</span><span class="diff-line add">+privatebin_role_docker_read_only: true</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-privatebin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+privatebin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-privatebin_docker_state: started</span><span class="diff-line add">+privatebin_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-privatebin_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+privatebin_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-306">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/privatebin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,28 +10,25 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line del">-  community.docker.docker_container:</span><span class="diff-line del">-    name: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_docker_container&#x27;) }}&quot;</span><span class="diff-line del">-    state: absent</span><span class="diff-line del">-    container_default_behavior: compatibility</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check &#x27;conf.php&#x27;&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ privatebin_paths_location }}/conf.php&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;privatebin&#x27;) }}/conf.php&quot;</span><span class="diff-line context">   register: conf_php</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import default &#x27;conf.php&#x27;</span><span class="diff-line context">   ansible.builtin.get_url:</span><span class="diff-line context">     url: https://raw.githubusercontent.com/PrivateBin/PrivateBin/master/cfg/conf.sample.php</span><span class="diff-line del">-    dest: &quot;{{ privatebin_paths_location }}/conf.php&quot;</span><span class="diff-line add">+    dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;privatebin&#x27;) }}/conf.php&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     validate_certs: false</span><span class="diff-line hunk">@@ -41,7 +38,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create a volume with options</span><span class="diff-line context">   community.docker.docker_volume:</span><span class="diff-line del">-    name: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_docker_container&#x27;) }}_tmpfs_run&quot;</span><span class="diff-line add">+    name: &quot;{{ privatebin_name }}_tmpfs_run&quot;</span><span class="diff-line context">     driver_options:</span><span class="diff-line context">       type: tmpfs</span><span class="diff-line context">       device: tmpfs</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-307">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/profilarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-profilarr_paths_folder: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line del">-profilarr_paths_location: &quot;{{ server_appdata_path }}/{{ profilarr_paths_folder }}&quot;</span><span class="diff-line del">-profilarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ profilarr_paths_location }}&quot;</span><span class="diff-line add">+profilarr_role_paths_folder: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line add">+profilarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ profilarr_role_paths_folder }}&quot;</span><span class="diff-line add">+profilarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ profilarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-profilarr_web_subdomain: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line del">-profilarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-profilarr_web_port: &quot;6868&quot;</span><span class="diff-line del">-profilarr_web_url: &quot;{{ &#x27;https://&#x27; + (profilarr_web_subdomain + &#x27;.&#x27; + profilarr_web_domain</span><span class="diff-line del">-                    if (profilarr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else profilarr_web_domain) }}&quot;</span><span class="diff-line add">+profilarr_role_web_subdomain: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line add">+profilarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+profilarr_role_web_port: &quot;6868&quot;</span><span class="diff-line add">+profilarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;profilarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;profilarr&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;profilarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;profilarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-profilarr_dns_record: &quot;{{ profilarr_web_subdomain }}&quot;</span><span class="diff-line del">-profilarr_dns_zone: &quot;{{ profilarr_web_domain }}&quot;</span><span class="diff-line del">-profilarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+profilarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;profilarr&#x27;) }}&quot;</span><span class="diff-line add">+profilarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;profilarr&#x27;) }}&quot;</span><span class="diff-line add">+profilarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-profilarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-profilarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-profilarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-profilarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-profilarr_traefik_enabled: true</span><span class="diff-line del">-profilarr_traefik_api_enabled: true</span><span class="diff-line del">-profilarr_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+profilarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+profilarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+profilarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+profilarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+profilarr_role_traefik_enabled: true</span><span class="diff-line add">+profilarr_role_traefik_api_enabled: true</span><span class="diff-line add">+profilarr_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-profilarr_docker_container: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line add">+profilarr_role_docker_container: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-profilarr_docker_image_pull: true</span><span class="diff-line del">-profilarr_docker_image_repo: &quot;santiagosayshey/profilarr&quot;</span><span class="diff-line del">-profilarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-profilarr_docker_image: &quot;{{ profilarr_docker_image_repo }}:{{ profilarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-profilarr_docker_ports_defaults: []</span><span class="diff-line del">-profilarr_docker_ports_custom: []</span><span class="diff-line del">-profilarr_docker_ports: &quot;{{ profilarr_docker_ports_defaults</span><span class="diff-line del">-                            + profilarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+profilarr_role_docker_image_pull: true</span><span class="diff-line add">+profilarr_role_docker_image_repo: &quot;santiagosayshey/profilarr&quot;</span><span class="diff-line add">+profilarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+profilarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;profilarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;profilarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-profilarr_docker_envs_default:</span><span class="diff-line add">+profilarr_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-profilarr_docker_envs_custom: {}</span><span class="diff-line del">-profilarr_docker_envs: &quot;{{ profilarr_docker_envs_default</span><span class="diff-line del">-                           | combine(profilarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-profilarr_docker_commands_default: []</span><span class="diff-line del">-profilarr_docker_commands_custom: []</span><span class="diff-line del">-profilarr_docker_commands: &quot;{{ profilarr_docker_commands_default</span><span class="diff-line del">-                               + profilarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+profilarr_role_docker_envs_custom: {}</span><span class="diff-line add">+profilarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;profilarr&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;profilarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-profilarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ profilarr_paths_location }}:/config&quot;</span><span class="diff-line del">-profilarr_docker_volumes_custom: []</span><span class="diff-line del">-profilarr_docker_volumes: &quot;{{ profilarr_docker_volumes_default</span><span class="diff-line del">-                              + profilarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-profilarr_docker_devices_default: []</span><span class="diff-line del">-profilarr_docker_devices_custom: []</span><span class="diff-line del">-profilarr_docker_devices: &quot;{{ profilarr_docker_devices_default</span><span class="diff-line del">-                              + profilarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-profilarr_docker_hosts_default: []</span><span class="diff-line del">-profilarr_docker_hosts_custom: []</span><span class="diff-line del">-profilarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(profilarr_docker_hosts_default)</span><span class="diff-line del">-                            | combine(profilarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-profilarr_docker_labels_default: {}</span><span class="diff-line del">-profilarr_docker_labels_custom: {}</span><span class="diff-line del">-profilarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(profilarr_docker_labels_default)</span><span class="diff-line del">-                             | combine(profilarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+profilarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ profilarr_role_paths_location }}:/config&quot;</span><span class="diff-line add">+profilarr_role_docker_volumes_custom: []</span><span class="diff-line add">+profilarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;profilarr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;profilarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-profilarr_docker_hostname: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line add">+profilarr_role_docker_hostname: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-profilarr_docker_networks_alias: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line del">-profilarr_docker_networks_default: []</span><span class="diff-line del">-profilarr_docker_networks_custom: []</span><span class="diff-line del">-profilarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + profilarr_docker_networks_default</span><span class="diff-line del">-                               + profilarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-profilarr_docker_capabilities_default: []</span><span class="diff-line del">-profilarr_docker_capabilities_custom: []</span><span class="diff-line del">-profilarr_docker_capabilities: &quot;{{ profilarr_docker_capabilities_default</span><span class="diff-line del">-                                   + profilarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-profilarr_docker_security_opts_default: []</span><span class="diff-line del">-profilarr_docker_security_opts_custom: []</span><span class="diff-line del">-profilarr_docker_security_opts: &quot;{{ profilarr_docker_security_opts_default</span><span class="diff-line del">-                                    + profilarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+profilarr_role_docker_networks_alias: &quot;{{ profilarr_name }}&quot;</span><span class="diff-line add">+profilarr_role_docker_networks_default: []</span><span class="diff-line add">+profilarr_role_docker_networks_custom: []</span><span class="diff-line add">+profilarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;profilarr&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;profilarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-profilarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+profilarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-profilarr_docker_state: started</span><span class="diff-line add">+profilarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-308">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/profilarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-309">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/puddletag/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,87 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-puddletag_paths_folder: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line del">-puddletag_paths_location: &quot;{{ server_appdata_path }}/{{ puddletag_paths_folder }}&quot;</span><span class="diff-line del">-puddletag_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ puddletag_paths_location }}&quot;</span><span class="diff-line add">+puddletag_role_paths_folder: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line add">+puddletag_role_paths_location: &quot;{{ server_appdata_path }}/{{ puddletag_role_paths_folder }}&quot;</span><span class="diff-line add">+puddletag_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ puddletag_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-puddletag_web_subdomain: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line del">-puddletag_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-puddletag_web_port: &quot;8080&quot;</span><span class="diff-line del">-puddletag_web_url: &quot;{{ &#x27;https://&#x27; + (puddletag_web_subdomain + &#x27;.&#x27; + puddletag_web_domain</span><span class="diff-line del">-                    if (puddletag_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else puddletag_web_domain) }}&quot;</span><span class="diff-line add">+puddletag_role_web_subdomain: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line add">+puddletag_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+puddletag_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+puddletag_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;puddletag&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;puddletag&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;puddletag&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;puddletag&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-puddletag_dns_record: &quot;{{ puddletag_web_subdomain }}&quot;</span><span class="diff-line del">-puddletag_dns_zone: &quot;{{ puddletag_web_domain }}&quot;</span><span class="diff-line del">-puddletag_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+puddletag_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;puddletag&#x27;) }}&quot;</span><span class="diff-line add">+puddletag_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;puddletag&#x27;) }}&quot;</span><span class="diff-line add">+puddletag_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-puddletag_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-puddletag_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-puddletag_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-puddletag_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-puddletag_traefik_enabled: true</span><span class="diff-line del">-puddletag_traefik_api_enabled: false</span><span class="diff-line del">-puddletag_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+puddletag_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+puddletag_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+puddletag_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+puddletag_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+puddletag_role_traefik_enabled: true</span><span class="diff-line add">+puddletag_role_traefik_api_enabled: false</span><span class="diff-line add">+puddletag_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-puddletag_docker_container: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line add">+puddletag_role_docker_container: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-puddletag_docker_image_pull: true</span><span class="diff-line del">-puddletag_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-puddletag_docker_image: &quot;xirg/docker-puddletag:{{ puddletag_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-puddletag_docker_ports_defaults: []</span><span class="diff-line del">-puddletag_docker_ports_custom: []</span><span class="diff-line del">-puddletag_docker_ports: &quot;{{ puddletag_docker_ports_defaults</span><span class="diff-line del">-                            + puddletag_docker_ports_custom }}&quot;</span><span class="diff-line add">+puddletag_role_docker_image_pull: true</span><span class="diff-line add">+puddletag_role_docker_image_repo: &quot;xirg/docker-puddletag&quot;</span><span class="diff-line add">+puddletag_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+puddletag_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;puddletag&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;puddletag&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-puddletag_docker_envs_default:</span><span class="diff-line add">+puddletag_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   APPNAME: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line context">   GUAC_USER: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   GUAC_PASS: &quot;{{ user.pass | hash(&#x27;md5&#x27;) }}&quot;</span><span class="diff-line del">-puddletag_docker_envs_custom: {}</span><span class="diff-line del">-puddletag_docker_envs: &quot;{{ puddletag_docker_envs_default</span><span class="diff-line del">-                           | combine(puddletag_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-puddletag_docker_commands_default: []</span><span class="diff-line del">-puddletag_docker_commands_custom: []</span><span class="diff-line del">-puddletag_docker_commands: &quot;{{ puddletag_docker_commands_default</span><span class="diff-line del">-                               + puddletag_docker_commands_custom }}&quot;</span><span class="diff-line add">+puddletag_role_docker_envs_custom: {}</span><span class="diff-line add">+puddletag_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;puddletag&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;puddletag&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-puddletag_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ puddletag_paths_location }}:/config&quot;</span><span class="diff-line del">-puddletag_docker_volumes_custom: []</span><span class="diff-line del">-puddletag_docker_volumes: &quot;{{ puddletag_docker_volumes_default</span><span class="diff-line del">-                              + puddletag_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-puddletag_docker_devices_default: []</span><span class="diff-line del">-puddletag_docker_devices_custom: []</span><span class="diff-line del">-puddletag_docker_devices: &quot;{{ puddletag_docker_devices_default</span><span class="diff-line del">-                              + puddletag_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-puddletag_docker_hosts_default: {}</span><span class="diff-line del">-puddletag_docker_hosts_custom: {}</span><span class="diff-line del">-puddletag_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(puddletag_docker_hosts_default)</span><span class="diff-line del">-                            | combine(puddletag_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-puddletag_docker_labels_default: {}</span><span class="diff-line del">-puddletag_docker_labels_custom: {}</span><span class="diff-line del">-puddletag_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(puddletag_docker_labels_default)</span><span class="diff-line del">-                             | combine(puddletag_docker_labels_custom) }}&quot;</span><span class="diff-line add">+puddletag_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;puddletag&#x27;) }}:/config&quot;</span><span class="diff-line add">+puddletag_role_docker_volumes_custom: []</span><span class="diff-line add">+puddletag_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;puddletag&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;puddletag&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-puddletag_docker_hostname: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line add">+puddletag_role_docker_hostname: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-puddletag_docker_networks_alias: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line del">-puddletag_docker_networks_default: []</span><span class="diff-line del">-puddletag_docker_networks_custom: []</span><span class="diff-line del">-puddletag_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + puddletag_docker_networks_default</span><span class="diff-line del">-                               + puddletag_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-puddletag_docker_capabilities_default: []</span><span class="diff-line del">-puddletag_docker_capabilities_custom: []</span><span class="diff-line del">-puddletag_docker_capabilities: &quot;{{ puddletag_docker_capabilities_default</span><span class="diff-line del">-                                   + puddletag_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-puddletag_docker_security_opts_default: []</span><span class="diff-line del">-puddletag_docker_security_opts_custom: []</span><span class="diff-line del">-puddletag_docker_security_opts: &quot;{{ puddletag_docker_security_opts_default</span><span class="diff-line del">-                                    + puddletag_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+puddletag_role_docker_networks_alias: &quot;{{ puddletag_name }}&quot;</span><span class="diff-line add">+puddletag_role_docker_networks_default: []</span><span class="diff-line add">+puddletag_role_docker_networks_custom: []</span><span class="diff-line add">+puddletag_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;puddletag&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;puddletag&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-puddletag_docker_restart_policy: unless-stopped</span><span class="diff-line add">+puddletag_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-puddletag_docker_state: started</span><span class="diff-line add">+puddletag_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-310">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/puddletag/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-311">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pufferpanel/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,93 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pufferpanel_paths_folder: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line del">-pufferpanel_paths_location: &quot;{{ server_appdata_path }}/{{ pufferpanel_paths_folder }}&quot;</span><span class="diff-line del">-pufferpanel_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ pufferpanel_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ pufferpanel_paths_location }}/servers&quot;</span><span class="diff-line add">+pufferpanel_role_paths_folder: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line add">+pufferpanel_role_paths_location: &quot;{{ server_appdata_path }}/{{ pufferpanel_role_paths_folder }}&quot;</span><span class="diff-line add">+pufferpanel_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ pufferpanel_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ pufferpanel_role_paths_location }}/data&quot;</span><span class="diff-line add">+  - &quot;{{ pufferpanel_role_paths_location }}/logs&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pufferpanel_web_subdomain: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line del">-pufferpanel_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-pufferpanel_web_port: &quot;8080&quot;</span><span class="diff-line del">-pufferpanel_web_url: &quot;{{ &#x27;https://&#x27; + (pufferpanel_web_subdomain + &#x27;.&#x27; + pufferpanel_web_domain</span><span class="diff-line del">-                      if (pufferpanel_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else pufferpanel_web_domain) }}&quot;</span><span class="diff-line add">+pufferpanel_role_web_subdomain: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line add">+pufferpanel_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+pufferpanel_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+pufferpanel_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pufferpanel&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pufferpanel&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pufferpanel&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pufferpanel&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pufferpanel_dns_record: &quot;{{ pufferpanel_web_subdomain }}&quot;</span><span class="diff-line del">-pufferpanel_dns_zone: &quot;{{ pufferpanel_web_domain }}&quot;</span><span class="diff-line del">-pufferpanel_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+pufferpanel_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line add">+pufferpanel_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line add">+pufferpanel_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pufferpanel_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-pufferpanel_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-pufferpanel_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-pufferpanel_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-pufferpanel_traefik_enabled: true</span><span class="diff-line add">+pufferpanel_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+pufferpanel_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+pufferpanel_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+pufferpanel_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+pufferpanel_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-pufferpanel_docker_container: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_container: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-pufferpanel_docker_image_pull: true</span><span class="diff-line del">-pufferpanel_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-pufferpanel_docker_image: &quot;pufferpanel/pufferpanel:{{ pufferpanel_docker_image_tag }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_image_pull: true</span><span class="diff-line add">+pufferpanel_role_docker_image_repo: &quot;pufferpanel/pufferpanel&quot;</span><span class="diff-line add">+pufferpanel_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+pufferpanel_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;pufferpanel&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-pufferpanel_docker_ports_defaults:</span><span class="diff-line add">+pufferpanel_role_docker_ports_default:</span><span class="diff-line context">   - &quot;5657:5657&quot;</span><span class="diff-line del">-pufferpanel_docker_ports_custom: []</span><span class="diff-line del">-pufferpanel_docker_ports: &quot;{{ pufferpanel_docker_ports_defaults</span><span class="diff-line del">-                              + pufferpanel_docker_ports_custom }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_ports_custom: []</span><span class="diff-line add">+pufferpanel_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;pufferpanel&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-pufferpanel_docker_envs_default:</span><span class="diff-line add">+pufferpanel_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  PUFFER_DAEMON_DATA_SERVERS: &quot;{{ pufferpanel_paths_location }}/servers&quot;</span><span class="diff-line del">-pufferpanel_docker_envs_custom: {}</span><span class="diff-line del">-pufferpanel_docker_envs: &quot;{{ pufferpanel_docker_envs_default</span><span class="diff-line del">-                             | combine(pufferpanel_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-pufferpanel_docker_commands_default: []</span><span class="diff-line del">-pufferpanel_docker_commands_custom: []</span><span class="diff-line del">-pufferpanel_docker_commands: &quot;{{ pufferpanel_docker_commands_default</span><span class="diff-line del">-                                 + pufferpanel_docker_commands_custom }}&quot;</span><span class="diff-line add">+  GIN_MODE: &quot;release&quot;</span><span class="diff-line add">+pufferpanel_role_docker_envs_custom: {}</span><span class="diff-line add">+pufferpanel_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;pufferpanel&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;pufferpanel&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-pufferpanel_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ pufferpanel_paths_location }}/config:/etc/pufferpanel&quot;</span><span class="diff-line del">-  - &quot;{{ pufferpanel_paths_location }}/servers:{{ pufferpanel_paths_location }}/servers&quot;</span><span class="diff-line add">+pufferpanel_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/config:/etc/pufferpanel&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/data:/var/lib/pufferpanel&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/logs:/var/log/pufferpanel&quot;</span><span class="diff-line context">   - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="diff-line del">-pufferpanel_docker_volumes_custom: []</span><span class="diff-line del">-pufferpanel_docker_volumes: &quot;{{ pufferpanel_docker_volumes_default</span><span class="diff-line del">-                                + pufferpanel_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-pufferpanel_docker_devices_default: []</span><span class="diff-line del">-pufferpanel_docker_devices_custom: []</span><span class="diff-line del">-pufferpanel_docker_devices: &quot;{{ pufferpanel_docker_devices_default</span><span class="diff-line del">-                                + pufferpanel_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-pufferpanel_docker_hosts_default: {}</span><span class="diff-line del">-pufferpanel_docker_hosts_custom: {}</span><span class="diff-line del">-pufferpanel_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(pufferpanel_docker_hosts_default)</span><span class="diff-line del">-                              | combine(pufferpanel_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-pufferpanel_docker_labels_default: {}</span><span class="diff-line del">-pufferpanel_docker_labels_custom: {}</span><span class="diff-line del">-pufferpanel_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(pufferpanel_docker_labels_default)</span><span class="diff-line del">-                               | combine(pufferpanel_docker_labels_custom) }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_volumes_custom: []</span><span class="diff-line add">+pufferpanel_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;pufferpanel&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-pufferpanel_docker_hostname: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_hostname: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-pufferpanel_docker_networks_alias: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line del">-pufferpanel_docker_networks_default: []</span><span class="diff-line del">-pufferpanel_docker_networks_custom: []</span><span class="diff-line del">-pufferpanel_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + pufferpanel_docker_networks_default</span><span class="diff-line del">-                                 + pufferpanel_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-pufferpanel_docker_capabilities_default: []</span><span class="diff-line del">-pufferpanel_docker_capabilities_custom: []</span><span class="diff-line del">-pufferpanel_docker_capabilities: &quot;{{ pufferpanel_docker_capabilities_default</span><span class="diff-line del">-                                     + pufferpanel_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-pufferpanel_docker_security_opts_default: []</span><span class="diff-line del">-pufferpanel_docker_security_opts_custom: []</span><span class="diff-line del">-pufferpanel_docker_security_opts: &quot;{{ pufferpanel_docker_security_opts_default</span><span class="diff-line del">-                                      + pufferpanel_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_networks_alias: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line add">+pufferpanel_role_docker_networks_default: []</span><span class="diff-line add">+pufferpanel_role_docker_networks_custom: []</span><span class="diff-line add">+pufferpanel_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;pufferpanel&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-pufferpanel_docker_restart_policy: unless-stopped</span><span class="diff-line add">+pufferpanel_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-pufferpanel_docker_state: started</span><span class="diff-line add">+pufferpanel_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-312">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pufferpanel/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,17 +10,37 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if &#x27;{{ pufferpanel_paths_location }}&#x27; exists</span><span class="diff-line add">+- name: Check if &#x27;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ pufferpanel_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}&quot;</span><span class="diff-line context">   register: pufferpanel_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Check if legacy folder exists</span><span class="diff-line add">+  ansible.builtin.stat:</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/servers&quot;</span><span class="diff-line add">+  register: pufferpanel_legacy_folder</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Check if new folder exists</span><span class="diff-line add">+  ansible.builtin.stat:</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/data&quot;</span><span class="diff-line add">+  register: pufferpanel_data_folder</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Migrate pufferpanel directory</span><span class="diff-line add">+  migrate_folder:</span><span class="diff-line add">+    legacy_path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/servers&quot;</span><span class="diff-line add">+    new_path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pufferpanel&#x27;) }}/data&quot;</span><span class="diff-line add">+    owner: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    mode: &#x27;0775&#x27;</span><span class="diff-line add">+    recurse: false</span><span class="diff-line add">+  when: pufferpanel_legacy_folder.stat.exists and (not pufferpanel_data_folder.stat.exists)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line hunk">@@ -36,5 +56,5 @@</span><span class="diff-line context"> - name: Create admin user</span><span class="diff-line context">   community.docker.docker_container_exec:</span><span class="diff-line context">     container: &quot;{{ pufferpanel_name }}&quot;</span><span class="diff-line del">-    command: &quot;/pufferpanel/pufferpanel user add --admin --name {{ user.name }} --email {{ user.email }} --password {{ user.pass }}&quot;</span><span class="diff-line add">+    command: &quot;/pufferpanel/bin/pufferpanel user add --admin --name {{ user.name }} --email {{ user.email }} --password {{ user.pass }}&quot;</span><span class="diff-line context">   when: (not pufferpanel_config.stat.exists)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-313">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pyload/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pyload_paths_folder: &quot;{{ pyload_name }}&quot;</span><span class="diff-line del">-pyload_paths_location: &quot;{{ server_appdata_path }}/{{ pyload_paths_folder }}&quot;</span><span class="diff-line del">-pyload_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ pyload_paths_location }}&quot;</span><span class="diff-line add">+pyload_role_paths_folder: &quot;{{ pyload_name }}&quot;</span><span class="diff-line add">+pyload_role_paths_location: &quot;{{ server_appdata_path }}/{{ pyload_role_paths_folder }}&quot;</span><span class="diff-line add">+pyload_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ pyload_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pyload_web_subdomain: &quot;{{ pyload_name }}&quot;</span><span class="diff-line del">-pyload_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-pyload_web_port: &quot;8000&quot;</span><span class="diff-line del">-pyload_web_url: &quot;{{ &#x27;https://&#x27; + (pyload_web_subdomain + &#x27;.&#x27; + pyload_web_domain</span><span class="diff-line del">-                 if (pyload_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else pyload_web_domain) }}&quot;</span><span class="diff-line add">+pyload_role_web_subdomain: &quot;{{ pyload_name }}&quot;</span><span class="diff-line add">+pyload_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+pyload_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+pyload_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pyload&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pyload&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pyload&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pyload&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pyload_dns_record: &quot;{{ pyload_web_subdomain }}&quot;</span><span class="diff-line del">-pyload_dns_zone: &quot;{{ pyload_web_domain }}&quot;</span><span class="diff-line del">-pyload_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+pyload_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;pyload&#x27;) }}&quot;</span><span class="diff-line add">+pyload_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;pyload&#x27;) }}&quot;</span><span class="diff-line add">+pyload_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-pyload_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-pyload_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-pyload_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-pyload_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-pyload_traefik_enabled: true</span><span class="diff-line del">-pyload_traefik_api_enabled: false</span><span class="diff-line del">-pyload_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+pyload_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+pyload_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+pyload_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+pyload_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+pyload_role_traefik_enabled: true</span><span class="diff-line add">+pyload_role_traefik_api_enabled: false</span><span class="diff-line add">+pyload_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-pyload_docker_container: &quot;{{ pyload_name }}&quot;</span><span class="diff-line add">+pyload_role_docker_container: &quot;{{ pyload_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-pyload_docker_image_pull: true</span><span class="diff-line del">-pyload_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-pyload_docker_image: &quot;lscr.io/linuxserver/pyload-ng:{{ pyload_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-pyload_docker_ports_defaults: []</span><span class="diff-line del">-pyload_docker_ports_custom: []</span><span class="diff-line del">-pyload_docker_ports: &quot;{{ pyload_docker_ports_defaults</span><span class="diff-line del">-                         + pyload_docker_ports_custom }}&quot;</span><span class="diff-line add">+pyload_role_docker_image_pull: true</span><span class="diff-line add">+pyload_role_docker_image_repo: &quot;lscr.io/linuxserver/pyload-ng&quot;</span><span class="diff-line add">+pyload_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+pyload_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;pyload&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;pyload&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-pyload_docker_envs_default:</span><span class="diff-line add">+pyload_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-pyload_docker_envs_custom: {}</span><span class="diff-line del">-pyload_docker_envs: &quot;{{ pyload_docker_envs_default</span><span class="diff-line del">-                        | combine(pyload_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-pyload_docker_commands_default: []</span><span class="diff-line del">-pyload_docker_commands_custom: []</span><span class="diff-line del">-pyload_docker_commands: &quot;{{ pyload_docker_commands_default</span><span class="diff-line del">-                            + pyload_docker_commands_custom }}&quot;</span><span class="diff-line add">+pyload_role_docker_envs_custom: {}</span><span class="diff-line add">+pyload_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;pyload&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;pyload&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-pyload_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ pyload_paths_location }}:/config&quot;</span><span class="diff-line del">-pyload_docker_volumes_custom: []</span><span class="diff-line del">-pyload_docker_volumes: &quot;{{ pyload_docker_volumes_default</span><span class="diff-line del">-                           + pyload_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-pyload_docker_devices_default: []</span><span class="diff-line del">-pyload_docker_devices_custom: []</span><span class="diff-line del">-pyload_docker_devices: &quot;{{ pyload_docker_devices_default</span><span class="diff-line del">-                         + pyload_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-pyload_docker_hosts_default: {}</span><span class="diff-line del">-pyload_docker_hosts_custom: {}</span><span class="diff-line del">-pyload_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(pyload_docker_hosts_default)</span><span class="diff-line del">-                         | combine(pyload_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-pyload_docker_labels_default:</span><span class="diff-line del">-  diun.enable: &quot;true&quot;</span><span class="diff-line del">-pyload_docker_labels_custom: {}</span><span class="diff-line del">-pyload_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(pyload_docker_labels_default)</span><span class="diff-line del">-                          | combine(pyload_docker_labels_custom) }}&quot;</span><span class="diff-line add">+pyload_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;pyload&#x27;) }}:/config&quot;</span><span class="diff-line add">+pyload_role_docker_volumes_custom: []</span><span class="diff-line add">+pyload_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;pyload&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;pyload&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-pyload_docker_hostname: &quot;{{ pyload_name }}&quot;</span><span class="diff-line add">+pyload_role_docker_hostname: &quot;{{ pyload_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-pyload_docker_networks_alias: &quot;{{ pyload_name }}&quot;</span><span class="diff-line del">-pyload_docker_networks_default: []</span><span class="diff-line del">-pyload_docker_networks_custom: []</span><span class="diff-line del">-pyload_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + pyload_docker_networks_default</span><span class="diff-line del">-                            + pyload_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-pyload_docker_capabilities_default: []</span><span class="diff-line del">-pyload_docker_capabilities_custom: []</span><span class="diff-line del">-pyload_docker_capabilities: &quot;{{ pyload_docker_capabilities_default</span><span class="diff-line del">-                                + pyload_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-pyload_docker_security_opts_default: []</span><span class="diff-line del">-pyload_docker_security_opts_custom: []</span><span class="diff-line del">-pyload_docker_security_opts: &quot;{{ pyload_docker_security_opts_default</span><span class="diff-line del">-                                 + pyload_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+pyload_role_docker_networks_alias: &quot;{{ pyload_name }}&quot;</span><span class="diff-line add">+pyload_role_docker_networks_default: []</span><span class="diff-line add">+pyload_role_docker_networks_custom: []</span><span class="diff-line add">+pyload_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;pyload&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;pyload&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-pyload_docker_restart_policy: unless-stopped</span><span class="diff-line add">+pyload_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-pyload_docker_state: started</span><span class="diff-line add">+pyload_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-314">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/pyload/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-315">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/python_plexlibrary/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -20,12 +20,12 @@</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">   with_items:</span><span class="diff-line del">-    - &quot;/opt/python-plexlibrary&quot;</span><span class="diff-line add">+    - &quot;{{ server_appdata_path }}/python-plexlibrary&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Clone python-plexlibrary</span><span class="diff-line context">   ansible.builtin.git:</span><span class="diff-line context">     repo: &quot;https://github.com/adamgot/python-plexlibrary.git&quot;</span><span class="diff-line del">-    dest: &quot;/opt/python-plexlibrary&quot;</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/python-plexlibrary&quot;</span><span class="diff-line context">     version: master</span><span class="diff-line context">     force: true</span><span class="diff-line context">   become: true</span><span class="diff-line hunk">@@ -51,22 +51,22 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Delete venv folder</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;/opt/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line context">     state: absent</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create venv</span><span class="diff-line context">   ansible.builtin.command:</span><span class="diff-line del">-    cmd: &quot;{{ python_plexlibrary_python_install_path }} -m venv /opt/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    cmd: &quot;{{ python_plexlibrary_python_install_path }} -m venv {{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line context">   args:</span><span class="diff-line del">-    creates: &quot;/opt/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    creates: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Install pip requirements</span><span class="diff-line context">   ansible.builtin.pip:</span><span class="diff-line del">-    requirements: &quot;/opt/python-plexlibrary/requirements.txt&quot;</span><span class="diff-line del">-    virtualenv: &quot;/opt/python-plexlibrary/venv&quot;</span><span class="diff-line del">-    virtualenv_command: &quot;/opt/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line add">+    requirements: &quot;{{ server_appdata_path }}/python-plexlibrary/requirements.txt&quot;</span><span class="diff-line add">+    virtualenv: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    virtualenv_command: &quot;{{ server_appdata_path }}/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -74,8 +74,8 @@</span><span class="diff-line context">   ansible.builtin.pip:</span><span class="diff-line context">     name: trakt</span><span class="diff-line context">     state: absent</span><span class="diff-line del">-    virtualenv: &quot;/opt/python-plexlibrary/venv&quot;</span><span class="diff-line del">-    virtualenv_command: &quot;/opt/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line add">+    virtualenv: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    virtualenv_command: &quot;{{ server_appdata_path }}/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -83,14 +83,14 @@</span><span class="diff-line context">   ansible.builtin.pip:</span><span class="diff-line context">     name: pytrakt</span><span class="diff-line context">     state: present</span><span class="diff-line del">-    virtualenv: &quot;/opt/python-plexlibrary/venv&quot;</span><span class="diff-line del">-    virtualenv_command: &quot;/opt/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line add">+    virtualenv: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line add">+    virtualenv_command: &quot;{{ server_appdata_path }}/python-plexlibrary/venv/bin/python3 -m pip&quot;</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Find pip3 path</span><span class="diff-line context">   ansible.builtin.find:</span><span class="diff-line del">-    paths: /opt/python-plexlibrary/venv</span><span class="diff-line add">+    paths: &quot;{{ server_appdata_path }}/python-plexlibrary/venv&quot;</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">     patterns: &#x27;pip3&#x27;</span><span class="diff-line context">   register: files</span><span class="diff-line hunk">@@ -101,13 +101,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/python-plexlibrary/config.yml&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/python-plexlibrary/config.yml&quot;</span><span class="diff-line context">   register: python_plexlibrary_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create config from template</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line del">-    src: &quot;/opt/python-plexlibrary/config-template.yml&quot;</span><span class="diff-line del">-    dest: &quot;/opt/python-plexlibrary/config.yml&quot;</span><span class="diff-line add">+    src: &quot;{{ server_appdata_path }}/python-plexlibrary/config-template.yml&quot;</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/python-plexlibrary/config.yml&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line hunk">@@ -116,7 +116,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add plex url to config file</span><span class="diff-line context">   ansible.builtin.shell: |</span><span class="diff-line del">-    yyq -i &#x27;.plex.baseurl = &quot;{{ plex_web_url }}&quot;&#x27; /opt/python-plexlibrary/config.yml</span><span class="diff-line add">+    yyq -i &#x27;.plex.baseurl = &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}&quot;&#x27; {{ server_appdata_path }}/python-plexlibrary/config.yml</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -127,15 +127,15 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add plex token to config file</span><span class="diff-line context">   ansible.builtin.shell: |</span><span class="diff-line del">-    yyq -i &#x27;.plex.token = &quot;{{ plex_auth_token }}&quot;&#x27; /opt/python-plexlibrary/config.yml</span><span class="diff-line add">+    yyq -i &#x27;.plex.token = &quot;{{ plex_auth_token }}&quot;&#x27; {{ server_appdata_path }}/python-plexlibrary/config.yml</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   when: plex_account_is_enabled</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Copy example recipes to &#x27;/opt/python-plexlibrary&#x27; folder&quot;</span><span class="diff-line add">+- name: &quot;Copy example recipes to &#x27;{{ server_appdata_path }}/python-plexlibrary&#x27; folder&quot;</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     src: &quot;{{ item }}&quot;</span><span class="diff-line del">-    dest: &quot;/opt/python-plexlibrary/recipes/examples/saltbox/&quot;</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/python-plexlibrary/recipes/examples/saltbox/&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line hunk">@@ -143,10 +143,10 @@</span><span class="diff-line context">   with_fileglob:</span><span class="diff-line context">     - &quot;recipes/*.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Copy helper scripts to &#x27;/opt/python-plexlibrary&#x27; folder&quot;</span><span class="diff-line add">+- name: &quot;Copy helper scripts to &#x27;{{ server_appdata_path }}/python-plexlibrary&#x27; folder&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: &quot;{{ item }}.j2&quot;</span><span class="diff-line del">-    dest: &quot;/opt/python-plexlibrary/{{ item }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/python-plexlibrary/{{ item }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line hunk">@@ -157,13 +157,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Create &#x27;/usr/local/bin&#x27; symlink&quot;</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    src: &quot;/opt/python-plexlibrary/plexlibrary.sh&quot;</span><span class="diff-line add">+    src: &quot;{{ server_appdata_path }}/python-plexlibrary/plexlibrary.sh&quot;</span><span class="diff-line context">     dest: &quot;/usr/local/bin/plexlibrary&quot;</span><span class="diff-line context">     state: link</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Add items to &#x27;.gitignore&#x27;&quot;</span><span class="diff-line context">   ansible.builtin.lineinfile:</span><span class="diff-line del">-    path: &quot;/opt/python-plexlibrary/.gitignore&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/python-plexlibrary/.gitignore&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">     insertafter: EOF</span><span class="diff-line context">     line: &#x27;{{ item }}&#x27;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-316">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/python_plexlibrary/templates/plexlibrary-cron-helper.sh.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,14 +12,14 @@</span><span class="diff-line context"> export PYTHONIOENCODING=UTF-8</span><span class="diff-line context"> </span><span class="diff-line context"> PYTHON_PATH=&#x27;{{ python_plexlibrary_bin_folder }}/python3&#x27;</span><span class="diff-line del">-LOG_PATH=&#x27;/opt/python-plexlibrary/plexlibrary-cron.log&#x27;</span><span class="diff-line del">-RECIPES_PATH=&#x27;/opt/python-plexlibrary/recipes&#x27;</span><span class="diff-line del">-SCRIPT_PATH=&#x27;/opt/python-plexlibrary/plexlibrary/plexlibrary.py&#x27;</span><span class="diff-line add">+LOG_PATH=&#x27;{{ server_appdata_path }}/python-plexlibrary/plexlibrary-cron.log&#x27;</span><span class="diff-line add">+RECIPES_PATH=&#x27;{{ server_appdata_path }}/python-plexlibrary/recipes&#x27;</span><span class="diff-line add">+SCRIPT_PATH=&#x27;{{ server_appdata_path }}/python-plexlibrary/plexlibrary/plexlibrary.py&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> echo $(date) | tee -a $LOG_PATH</span><span class="diff-line context"> echo &quot;&quot; | tee -a $LOG_PATH</span><span class="diff-line context"> </span><span class="diff-line del">-cd /opt/python-plexlibrary</span><span class="diff-line add">+cd {{ server_appdata_path }}/python-plexlibrary</span><span class="diff-line context"> </span><span class="diff-line context"> for file in $RECIPES_PATH/*</span><span class="diff-line context"> do</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-317">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/python_plexlibrary/templates/plexlibrary.sh.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,9 +12,9 @@</span><span class="diff-line context"> export PYTHONIOENCODING=UTF-8</span><span class="diff-line context"> </span><span class="diff-line context"> PYTHON_PATH=&#x27;{{ python_plexlibrary_bin_folder }}/python3&#x27;</span><span class="diff-line del">-LOG_PATH=&#x27;/opt/python-plexlibrary/plexlibrary.log&#x27;</span><span class="diff-line add">+LOG_PATH=&#x27;{{ server_appdata_path }}/python-plexlibrary/plexlibrary.log&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> echo $(date) | tee -a $LOG_PATH</span><span class="diff-line context"> echo &quot;&quot; | tee -a $LOG_PATH</span><span class="diff-line context"> </span><span class="diff-line del">-(cd /opt/python-plexlibrary &amp;&amp; $PYTHON_PATH plexlibrary &quot;$@&quot;)</span><span class="diff-line add">+(cd {{ server_appdata_path }}/python-plexlibrary &amp;&amp; $PYTHON_PATH plexlibrary &quot;$@&quot;)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-318">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbit_manage/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,152 +14,137 @@</span><span class="diff-line context"> qbit_manage_name: qbit-manage</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+qbit_manage_role_qbt_run: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_schedule: &quot;30&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_config: &quot;config.yml&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_logfile: &quot;activity.log&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_cross_seed: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_recheck: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_cat_update: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_tag_update: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_rem_unregistered: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_rem_orphaned: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_tag_nohardlinks: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_skip_recycle: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_dry_run: &quot;true&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_log_level: &quot;INFO&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_divider: &quot;=&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_width: &quot;100&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_debug: &quot;false&quot;</span><span class="diff-line add">+qbit_manage_role_qbt_trace: &quot;false&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbit_manage_paths_folder: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line del">-qbit_manage_paths_location: &quot;{{ server_appdata_path }}/{{ qbit_manage_paths_folder }}&quot;</span><span class="diff-line del">-qbit_manage_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ qbit_manage_paths_location }}&quot;</span><span class="diff-line add">+qbit_manage_role_paths_folder: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line add">+qbit_manage_role_paths_location: &quot;{{ server_appdata_path }}/{{ qbit_manage_role_paths_folder }}&quot;</span><span class="diff-line add">+qbit_manage_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ qbit_manage_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbit_manage_web_subdomain: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line del">-qbit_manage_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-qbit_manage_web_port: &quot;8080&quot;</span><span class="diff-line del">-qbit_manage_web_url: &quot;{{ &#x27;https://&#x27; + (qbit_manage_web_subdomain + &#x27;.&#x27; + qbit_manage_web_domain</span><span class="diff-line del">-                      if (qbit_manage_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else qbit_manage_web_domain) }}&quot;</span><span class="diff-line add">+qbit_manage_role_web_subdomain: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line add">+qbit_manage_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+qbit_manage_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+qbit_manage_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbit_manage&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbit_manage&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbit_manage&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbit_manage&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbit_manage_dns_record: &quot;{{ qbit_manage_web_subdomain }}&quot;</span><span class="diff-line del">-qbit_manage_dns_zone: &quot;{{ qbit_manage_web_domain }}&quot;</span><span class="diff-line del">-qbit_manage_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+qbit_manage_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+qbit_manage_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+qbit_manage_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbit_manage_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-qbit_manage_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-qbit_manage_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-qbit_manage_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-qbit_manage_traefik_enabled: true</span><span class="diff-line del">-qbit_manage_traefik_api_enabled: true</span><span class="diff-line del">-qbit_manage_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+qbit_manage_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+qbit_manage_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+qbit_manage_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+qbit_manage_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+qbit_manage_role_traefik_enabled: true</span><span class="diff-line add">+qbit_manage_role_traefik_api_enabled: true</span><span class="diff-line add">+qbit_manage_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-qbit_manage_docker_container: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_container: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-qbit_manage_docker_image_pull: true</span><span class="diff-line del">-qbit_manage_docker_image_tag: &quot;release&quot;</span><span class="diff-line del">-qbit_manage_docker_image: &quot;ghcr.io/hotio/qbitmanage:{{ qbit_manage_docker_image_tag }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_image_pull: true</span><span class="diff-line add">+qbit_manage_role_docker_image_repo: &quot;ghcr.io/hotio/qbitmanage&quot;</span><span class="diff-line add">+qbit_manage_role_docker_image_tag: &quot;release&quot;</span><span class="diff-line add">+qbit_manage_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;qbit_manage&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-qbit_manage_docker_ports_defaults: []</span><span class="diff-line del">-qbit_manage_docker_ports_custom: []</span><span class="diff-line del">-qbit_manage_docker_ports: &quot;{{ qbit_manage_docker_ports_defaults</span><span class="diff-line del">-                              + qbit_manage_docker_ports_custom }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_ports_default: []</span><span class="diff-line add">+qbit_manage_role_docker_ports_custom: []</span><span class="diff-line add">+qbit_manage_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;qbit_manage&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-qbit_manage_docker_envs_default:</span><span class="diff-line add">+qbit_manage_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   QBT_WEB_SERVER: &quot;true&quot;</span><span class="diff-line del">-  QBT_RUN: &quot;{{ qbit_manage.qbt_run }}&quot;</span><span class="diff-line del">-  QBT_SCHEDULE: &quot;{{ qbit_manage.qbt_schedule }}&quot;</span><span class="diff-line del">-  QBT_CONFIG: &quot;{{ qbit_manage.qbt_config }}&quot;</span><span class="diff-line del">-  QBT_LOGFILE: &quot;{{ qbit_manage.qbt_logfile }}&quot;</span><span class="diff-line del">-  QBT_CROSS_SEED: &quot;{{ qbit_manage.qbt_cross_seed }}&quot;</span><span class="diff-line del">-  QBT_RECHECK: &quot;{{ qbit_manage.qbt_recheck }}&quot;</span><span class="diff-line del">-  QBT_CAT_UPDATE: &quot;{{ qbit_manage.qbt_cat_update }}&quot;</span><span class="diff-line del">-  QBT_TAG_UPDATE: &quot;{{ qbit_manage.qbt_tag_update }}&quot;</span><span class="diff-line del">-  QBT_REM_UNREGISTERED: &quot;{{ qbit_manage.qbt_rem_unregistered }}&quot;</span><span class="diff-line del">-  QBT_REM_ORPHANED: &quot;{{ qbit_manage.qbt_rem_orphaned }}&quot;</span><span class="diff-line del">-  QBT_TAG_NOHARDLINKS: &quot;{{ qbit_manage.qbt_tag_nohardlinks }}&quot;</span><span class="diff-line del">-  QBT_SKIP_RECYCLE: &quot;{{ qbit_manage.qbt_skip_recycle }}&quot;</span><span class="diff-line del">-  QBT_DRY_RUN: &quot;{{ qbit_manage.qbt_dry_run }}&quot;</span><span class="diff-line del">-  QBT_LOG_LEVEL: &quot;{{ qbit_manage.qbt_log_level }}&quot;</span><span class="diff-line del">-  QBT_DIVIDER: &quot;{{ qbit_manage.qbt_divider }}&quot;</span><span class="diff-line del">-  QBT_WIDTH: &quot;{{ qbit_manage.qbt_width }}&quot;</span><span class="diff-line del">-  QBT_DEBUG: &quot;{{ qbit_manage.qbt_debug }}&quot;</span><span class="diff-line del">-  QBT_TRACE: &quot;{{ qbit_manage.qbt_trace }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-qbit_manage_docker_envs_custom: {}</span><span class="diff-line del">-qbit_manage_docker_envs: &quot;{{ qbit_manage_docker_envs_default</span><span class="diff-line del">-                             | combine(qbit_manage_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-qbit_manage_docker_commands_default: []</span><span class="diff-line del">-qbit_manage_docker_commands_custom: []</span><span class="diff-line del">-qbit_manage_docker_commands: &quot;{{ qbit_manage_docker_commands_default</span><span class="diff-line del">-                                 + qbit_manage_docker_commands_custom }}&quot;</span><span class="diff-line add">+  QBT_RUN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_run&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_SCHEDULE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_schedule&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_CONFIG: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_config&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_LOGFILE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_logfile&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_CROSS_SEED: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_cross_seed&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_RECHECK: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_recheck&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_CAT_UPDATE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_cat_update&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_TAG_UPDATE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_tag_update&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_REM_UNREGISTERED: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_rem_unregistered&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_REM_ORPHANED: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_rem_orphaned&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_TAG_NOHARDLINKS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_tag_nohardlinks&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_SKIP_RECYCLE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_skip_recycle&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_DRY_RUN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_dry_run&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_LOG_LEVEL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_log_level&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_DIVIDER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_divider&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_WIDTH: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_width&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_DEBUG: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_debug&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+  QBT_TRACE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_qbt_trace&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_envs_custom: {}</span><span class="diff-line add">+qbit_manage_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;qbit_manage&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;qbit_manage&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-qbit_manage_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ qbit_manage_paths_location }}:/config&quot;</span><span class="diff-line del">-qbit_manage_docker_volumes_custom: []</span><span class="diff-line del">-qbit_manage_docker_volumes: &quot;{{ qbit_manage_docker_volumes_default</span><span class="diff-line del">-                                + qbit_manage_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-qbit_manage_docker_devices_default: []</span><span class="diff-line del">-qbit_manage_docker_devices_custom: []</span><span class="diff-line del">-qbit_manage_docker_devices: &quot;{{ qbit_manage_docker_devices_default</span><span class="diff-line del">-                                + qbit_manage_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-qbit_manage_docker_hosts_default: {}</span><span class="diff-line del">-qbit_manage_docker_hosts_custom: {}</span><span class="diff-line del">-qbit_manage_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(qbit_manage_docker_hosts_default)</span><span class="diff-line del">-                              | combine(qbit_manage_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-qbit_manage_docker_labels_default: {}</span><span class="diff-line del">-qbit_manage_docker_labels_custom: {}</span><span class="diff-line del">-qbit_manage_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(qbit_manage_docker_labels_default)</span><span class="diff-line del">-                               | combine(qbit_manage_docker_labels_custom) }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;qbit_manage&#x27;) }}:/config&quot;</span><span class="diff-line add">+qbit_manage_role_docker_volumes_custom: []</span><span class="diff-line add">+qbit_manage_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;qbit_manage&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-qbit_manage_docker_hostname: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_hostname: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-qbit_manage_docker_networks_alias: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line del">-qbit_manage_docker_networks_default: []</span><span class="diff-line del">-qbit_manage_docker_networks_custom: []</span><span class="diff-line del">-qbit_manage_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + qbit_manage_docker_networks_default</span><span class="diff-line del">-                                 + qbit_manage_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-qbit_manage_docker_capabilities_default: []</span><span class="diff-line del">-qbit_manage_docker_capabilities_custom: []</span><span class="diff-line del">-qbit_manage_docker_capabilities: &quot;{{ qbit_manage_docker_capabilities_default</span><span class="diff-line del">-                                     + qbit_manage_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-qbit_manage_docker_security_opts_default: []</span><span class="diff-line del">-qbit_manage_docker_security_opts_custom: []</span><span class="diff-line del">-qbit_manage_docker_security_opts: &quot;{{ qbit_manage_docker_security_opts_default</span><span class="diff-line del">-                                      + qbit_manage_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_networks_alias: &quot;{{ qbit_manage_name }}&quot;</span><span class="diff-line add">+qbit_manage_role_docker_networks_default: []</span><span class="diff-line add">+qbit_manage_role_docker_networks_custom: []</span><span class="diff-line add">+qbit_manage_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;qbit_manage&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;qbit_manage&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-qbit_manage_docker_restart_policy: on-failure</span><span class="diff-line del">-qbit_manage_docker_restart_retries: 3</span><span class="diff-line add">+qbit_manage_role_docker_restart_policy: on-failure</span><span class="diff-line add">+qbit_manage_role_docker_restart_retries: 3</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-qbit_manage_docker_state: started</span><span class="diff-line add">+qbit_manage_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-319">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbit_manage/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,22 +10,22 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;qbit_manage&quot;</span><span class="diff-line add">+    container_name: &quot;qbit_manage&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if legacy folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/qbit_manage&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/qbit_manage&quot;</span><span class="diff-line context">   register: qbit_manage_legacy_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if new folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/qbit-manage&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/qbit-manage&quot;</span><span class="diff-line context">   register: qbit_manage_new_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate qbit-manage directory</span><span class="diff-line context">   migrate_folder:</span><span class="diff-line del">-    legacy_path: /opt/qbit_manage</span><span class="diff-line del">-    new_path: /opt/qbit-manage</span><span class="diff-line add">+    legacy_path: &quot;{{ server_appdata_path }}/qbit_manage&quot;</span><span class="diff-line add">+    new_path: &quot;{{ server_appdata_path }}/qbit-manage&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span><span class="diff-line hunk">@@ -35,9 +35,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_role_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_role_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_role_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-320">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbittorrentvpn/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -20,168 +20,129 @@</span><span class="diff-line context"> qbittorrentvpn_log_level_web: info</span><span class="diff-line context"> qbittorrentvpn_name_servers: &quot;84.200.69.80,1.1.1.1,84.200.70.40,1.0.0.1&quot;</span><span class="diff-line context"> qbittorrentvpn_lan_network: &quot;172.19.0.0/16&quot;</span><span class="diff-line add">+qbittorrentvpn_role_vpn_user: &quot;your_vpn_username&quot;</span><span class="diff-line add">+qbittorrentvpn_role_vpn_pass: &quot;your_vpn_password&quot;</span><span class="diff-line add">+qbittorrentvpn_role_vpn_prov: &quot;pia&quot;</span><span class="diff-line add">+qbittorrentvpn_role_vpn_client: &quot;wireguard&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbittorrentvpn_paths_folder: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line del">-qbittorrentvpn_paths_location: &quot;{{ server_appdata_path }}/{{ qbittorrentvpn_paths_folder }}&quot;</span><span class="diff-line del">-qbittorrentvpn_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ qbittorrentvpn_paths_folder }}&quot;</span><span class="diff-line del">-qbittorrentvpn_paths_conf: &quot;{{ qbittorrentvpn_paths_location }}/qBittorrent/config/qBittorrent.conf&quot;</span><span class="diff-line del">-qbittorrentvpn_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_location }}/wireguard&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_downloads_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_downloads_location }}/completed&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_downloads_location }}/incoming&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_downloads_location }}/watched&quot;</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_downloads_location }}/torrents&quot;</span><span class="diff-line add">+qbittorrentvpn_role_paths_folder: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_paths_location: &quot;{{ server_appdata_path }}/{{ qbittorrentvpn_role_paths_folder }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ qbittorrentvpn_role_paths_folder }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_paths_conf: &quot;{{ qbittorrentvpn_role_paths_location }}/qBittorrent/config/qBittorrent.conf&quot;</span><span class="diff-line add">+qbittorrentvpn_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_location }}/wireguard&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_downloads_location }}/completed&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_downloads_location }}/incoming&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_downloads_location }}/watched&quot;</span><span class="diff-line add">+  - &quot;{{ qbittorrentvpn_role_paths_downloads_location }}/torrents&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbittorrentvpn_web_subdomain: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line del">-qbittorrentvpn_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-qbittorrentvpn_web_port: &quot;8080&quot;</span><span class="diff-line del">-qbittorrentvpn_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_subdomain&#x27;, default=qbittorrentvpn_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_domain&#x27;, default=qbittorrentvpn_web_domain)</span><span class="diff-line del">-                         if (lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_subdomain&#x27;, default=qbittorrentvpn_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                         else lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_domain&#x27;, default=qbittorrentvpn_web_domain)) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_web_subdomain: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+qbittorrentvpn_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbittorrentvpn&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbittorrentvpn&#x27;)</span><span class="diff-line add">+                              if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbittorrentvpn&#x27;) | length &gt; 0)</span><span class="diff-line add">+                              else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbittorrentvpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbittorrentvpn_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_subdomain&#x27;, default=qbittorrentvpn_web_subdomain) }}&quot;</span><span class="diff-line del">-qbittorrentvpn_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_web_domain&#x27;, default=qbittorrentvpn_web_domain) }}&quot;</span><span class="diff-line del">-qbittorrentvpn_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qbittorrentvpn_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-qbittorrentvpn_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-qbittorrentvpn_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-qbittorrentvpn_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-qbittorrentvpn_traefik_enabled: true</span><span class="diff-line del">-qbittorrentvpn_traefik_api_enabled: true</span><span class="diff-line del">-qbittorrentvpn_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/command`) || PathPrefix(`/query`) || PathPrefix(`/login`) || PathPrefix(`/sync`)&quot;</span><span class="diff-line add">+qbittorrentvpn_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+qbittorrentvpn_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_traefik_enabled: true</span><span class="diff-line add">+qbittorrentvpn_role_traefik_api_enabled: true</span><span class="diff-line add">+qbittorrentvpn_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/command`) || PathPrefix(`/query`) || PathPrefix(`/login`) || PathPrefix(`/sync`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-qbittorrentvpn_docker_container: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_container: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-qbittorrentvpn_docker_image_pull: true</span><span class="diff-line del">-qbittorrentvpn_docker_image_repo: &quot;binhex/arch-qbittorrentvpn&quot;</span><span class="diff-line del">-qbittorrentvpn_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-qbittorrentvpn_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_image_repo&#x27;, default=qbittorrentvpn_docker_image_repo)</span><span class="diff-line del">-                                 + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_image_tag&#x27;, default=qbittorrentvpn_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-qbittorrentvpn_docker_ports_defaults: []</span><span class="diff-line del">-qbittorrentvpn_docker_ports_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_ports_defaults&#x27;, default=qbittorrentvpn_docker_ports_defaults)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_ports_custom&#x27;, default=qbittorrentvpn_docker_ports_custom) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_image_pull: true</span><span class="diff-line add">+qbittorrentvpn_role_docker_image_repo: &quot;binhex/arch-qbittorrentvpn&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-qbittorrentvpn_docker_envs_default:</span><span class="diff-line add">+qbittorrentvpn_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UMASK_SET: &quot;002&quot;</span><span class="diff-line context">   VPN_ENABLED: &quot;yes&quot;</span><span class="diff-line del">-  VPN_USER: &quot;{{ qbittorrentvpn.vpn_user | default(&#x27;username&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_PASS: &quot;{{ qbittorrentvpn.vpn_pass | default(&#x27;password&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_PROV: &quot;{{ qbittorrentvpn.vpn_prov | default(&#x27;pia&#x27;, true) }}&quot;</span><span class="diff-line del">-  VPN_CLIENT: &quot;{{ qbittorrentvpn.vpn_client | default(&#x27;wireguard&#x27;, true) }}&quot;</span><span class="diff-line add">+  VPN_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_user&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+  VPN_PASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_pass&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+  VPN_PROV: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_prov&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+  VPN_CLIENT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_client&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">   STRICT_PORT_FORWARD: &quot;yes&quot;</span><span class="diff-line context">   ENABLE_PRIVOXY: &quot;no&quot;</span><span class="diff-line context">   LAN_NETWORK: &quot;{{ qbittorrentvpn_lan_network }}&quot;</span><span class="diff-line context">   NAME_SERVERS: &quot;{{ qbittorrentvpn_name_servers }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-qbittorrentvpn_docker_envs_custom: {}</span><span class="diff-line del">-qbittorrentvpn_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_envs_default&#x27;, default=qbittorrentvpn_docker_envs_default)</span><span class="diff-line del">-                                | combine(lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_envs_custom&#x27;, default=qbittorrentvpn_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-qbittorrentvpn_docker_commands_default: []</span><span class="diff-line del">-qbittorrentvpn_docker_commands_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_commands_default&#x27;, default=qbittorrentvpn_docker_commands_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_commands_custom&#x27;, default=qbittorrentvpn_docker_commands_custom) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_envs_custom: {}</span><span class="diff-line add">+qbittorrentvpn_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;qbittorrentvpn&#x27;)</span><span class="diff-line add">+                                     | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;qbittorrentvpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-qbittorrentvpn_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ qbittorrentvpn_paths_location }}:/config&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line del">-qbittorrentvpn_docker_volumes_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_volumes_default&#x27;, default=qbittorrentvpn_docker_volumes_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_volumes_custom&#x27;, default=qbittorrentvpn_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-qbittorrentvpn_docker_devices_default: []</span><span class="diff-line del">-qbittorrentvpn_docker_devices_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_devices_default&#x27;, default=qbittorrentvpn_docker_devices_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_devices_custom&#x27;, default=qbittorrentvpn_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-qbittorrentvpn_docker_hosts_default: {}</span><span class="diff-line del">-qbittorrentvpn_docker_hosts_custom: {}</span><span class="diff-line del">-qbittorrentvpn_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                 | combine(lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_hosts_default&#x27;, default=qbittorrentvpn_docker_hosts_default))</span><span class="diff-line del">-                                 | combine(lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_hosts_custom&#x27;, default=qbittorrentvpn_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-qbittorrentvpn_docker_labels_default: {}</span><span class="diff-line del">-qbittorrentvpn_docker_labels_custom: {}</span><span class="diff-line del">-qbittorrentvpn_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                  | combine(lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_labels_default&#x27;, default=qbittorrentvpn_docker_labels_default))</span><span class="diff-line del">-                                  | combine(lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_labels_custom&#x27;, default=qbittorrentvpn_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_volumes_custom: []</span><span class="diff-line add">+qbittorrentvpn_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;qbittorrentvpn&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-qbittorrentvpn_docker_hostname: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-qbittorrentvpn_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-qbittorrentvpn_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_network_mode_default&#x27;, default=qbittorrentvpn_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_hostname: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-qbittorrentvpn_docker_networks_alias: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line del">-qbittorrentvpn_docker_networks_default: []</span><span class="diff-line del">-qbittorrentvpn_docker_networks_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_networks_default&#x27;, default=qbittorrentvpn_docker_networks_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_networks_custom&#x27;, default=qbittorrentvpn_docker_networks_custom) }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_networks_alias: &quot;{{ qbittorrentvpn_name }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_networks_default: []</span><span class="diff-line add">+qbittorrentvpn_role_docker_networks_custom: []</span><span class="diff-line add">+qbittorrentvpn_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;qbittorrentvpn&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Capabilities</span><span class="diff-line del">-qbittorrentvpn_docker_capabilities_default:</span><span class="diff-line add">+qbittorrentvpn_role_docker_capabilities_default:</span><span class="diff-line context">   - NET_ADMIN</span><span class="diff-line del">-qbittorrentvpn_docker_capabilities_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_capabilities: &quot;{{ qbittorrentvpn_docker_capabilities_default</span><span class="diff-line del">-                                        + qbittorrentvpn_docker_capabilities_custom }}&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_capabilities_custom: []</span><span class="diff-line add">+qbittorrentvpn_role_docker_capabilities: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_default&#x27;, role=&#x27;qbittorrentvpn&#x27;)</span><span class="diff-line add">+                                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_custom&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-qbittorrentvpn_docker_security_opts_default: []</span><span class="diff-line del">-qbittorrentvpn_docker_security_opts_custom: []</span><span class="diff-line del">-qbittorrentvpn_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_security_opts_default&#x27;, default=qbittorrentvpn_docker_security_opts_default)</span><span class="diff-line del">-                                         + lookup(&#x27;vars&#x27;, qbittorrentvpn_name + &#x27;_docker_security_opts_custom&#x27;, default=qbittorrentvpn_docker_security_opts_custom) }}&quot;</span><span class="diff-line context"> # Sysctls</span><span class="diff-line del">-qbittorrentvpn_docker_sysctls:</span><span class="diff-line add">+qbittorrentvpn_role_docker_sysctls:</span><span class="diff-line context">   net.ipv4.conf.all.src_valid_mark: &quot;1&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-qbittorrentvpn_docker_restart_policy: unless-stopped</span><span class="diff-line add">+qbittorrentvpn_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-qbittorrentvpn_docker_stop_timeout: 900</span><span class="diff-line add">+qbittorrentvpn_role_docker_stop_timeout: 900</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-qbittorrentvpn_docker_state: started</span><span class="diff-line add">+qbittorrentvpn_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Privileged</span><span class="diff-line del">-qbittorrentvpn_docker_privileged: &quot;yes&quot;</span><span class="diff-line add">+qbittorrentvpn_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-321">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbittorrentvpn/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,9 +9,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -21,12 +21,12 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if existing config file exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line del">-  register: qbittorrentvpn_paths_conf_stat</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line add">+  register: qbittorrentvpn_role_paths_conf_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install Tasks</span><span class="diff-line context">   ansible.builtin.import_tasks: &quot;subtasks/post-install/main.yml&quot;</span><span class="diff-line del">-  when: (not continuous_integration) and (not qbittorrentvpn_paths_conf_stat.stat.exists)</span><span class="diff-line add">+  when: (not continuous_integration) and (not qbittorrentvpn_role_paths_conf_stat.stat.exists)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-322">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbittorrentvpn/tasks/subtasks/post-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,30 +9,18 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Wait for config to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Wait for 10 seconds</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line context">     timeout: 10</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Post-Install | Stop container</span><span class="diff-line del">-  community.docker.docker_container:</span><span class="diff-line del">-    name: &quot;{{ qbittorrentvpn_docker_container }}&quot;</span><span class="diff-line del">-    container_default_behavior: compatibility</span><span class="diff-line del">-    tls_hostname: localhost</span><span class="diff-line del">-    state: stopped</span><span class="diff-line del">-    comparisons:</span><span class="diff-line del">-      &#x27;*&#x27;: ignore</span><span class="diff-line add">+- name: Post-Install | Stop Docker container</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/stop_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Settings Task</span><span class="diff-line context">   ansible.builtin.import_tasks: &quot;settings/main.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Post-Install | Start container # noqa args[module]</span><span class="diff-line del">-  community.docker.docker_container:</span><span class="diff-line del">-    name: &quot;{{ qbittorrentvpn_docker_container }}&quot;</span><span class="diff-line del">-    container_default_behavior: compatibility</span><span class="diff-line del">-    tls_hostname: localhost</span><span class="diff-line del">-    state: &quot;{{ qbittorrentvpn_docker_state }}&quot;</span><span class="diff-line del">-    comparisons:</span><span class="diff-line del">-      &#x27;*&#x27;: ignore</span><span class="diff-line add">+- name: Post-Install | Start Docker container</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/start_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-323">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qbittorrentvpn/tasks/subtasks/post-install/settings/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,7 +9,7 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Settings | Update HostHeaderValidation &#x27;qbittorrentvpn.conf&#x27; config settings</span><span class="diff-line context">   community.general.ini_file:</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">     section: Preferences</span><span class="diff-line context">     option: WebUI\HostHeaderValidation</span><span class="diff-line context">     value: &quot;false&quot;</span><span class="diff-line hunk">@@ -21,7 +21,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Settings | Update CSRFProtection &#x27;qbittorrentvpn.conf&#x27; config settings</span><span class="diff-line context">   community.general.ini_file:</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">     section: Preferences</span><span class="diff-line context">     option: WebUI\CSRFProtection</span><span class="diff-line context">     value: &quot;false&quot;</span><span class="diff-line hunk">@@ -41,7 +41,7 @@</span><span class="diff-line context">     section: Preferences</span><span class="diff-line context">     option: WebUI\Username</span><span class="diff-line context">     value: &#x27;{{ user.name }}&#x27;</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -52,7 +52,7 @@</span><span class="diff-line context">     section: Preferences</span><span class="diff-line context">     option: WebUI\Password_PBKDF2</span><span class="diff-line context">     value: &#x27;{{ qbittorrent_hashed_passwd.msg }}&#x27;</span><span class="diff-line del">-    path: &quot;{{ qbittorrentvpn_paths_conf }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_conf&#x27;, role=&#x27;qbittorrentvpn&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-324">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qui/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,92 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qui_paths_folder: &quot;{{ qui_name }}&quot;</span><span class="diff-line del">-qui_paths_location: &quot;{{ server_appdata_path }}/{{ qui_paths_folder }}&quot;</span><span class="diff-line del">-qui_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ qui_paths_location }}&quot;</span><span class="diff-line add">+qui_role_paths_folder: &quot;{{ qui_name }}&quot;</span><span class="diff-line add">+qui_role_paths_location: &quot;{{ server_appdata_path }}/{{ qui_role_paths_folder }}&quot;</span><span class="diff-line add">+qui_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ qui_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qui_web_subdomain: &quot;{{ qui_name }}&quot;</span><span class="diff-line del">-qui_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-qui_web_port: &quot;7476&quot;</span><span class="diff-line del">-qui_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_subdomain&#x27;, default=qui_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_domain&#x27;, default=qui_web_domain)</span><span class="diff-line del">-              if (lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_subdomain&#x27;, default=qui_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-              else lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_domain&#x27;, default=qui_web_domain)) }}&quot;</span><span class="diff-line add">+qui_role_web_subdomain: &quot;{{ qui_name }}&quot;</span><span class="diff-line add">+qui_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+qui_role_web_port: &quot;7476&quot;</span><span class="diff-line add">+qui_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qui&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qui&#x27;)</span><span class="diff-line add">+                   if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qui&#x27;) | length &gt; 0)</span><span class="diff-line add">+                   else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qui&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qui_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_subdomain&#x27;, default=qui_web_subdomain) }}&quot;</span><span class="diff-line del">-qui_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_web_domain&#x27;, default=qui_web_domain) }}&quot;</span><span class="diff-line del">-qui_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+qui_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;qui&#x27;) }}&quot;</span><span class="diff-line add">+qui_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;qui&#x27;) }}&quot;</span><span class="diff-line add">+qui_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-qui_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-qui_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-qui_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-qui_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-qui_traefik_enabled: true</span><span class="diff-line del">-qui_traefik_api_enabled: true</span><span class="diff-line del">-qui_traefik_api_endpoint: &quot;PathPrefix(`/proxy`)&quot;</span><span class="diff-line add">+qui_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+qui_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+qui_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+qui_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+qui_role_traefik_enabled: true</span><span class="diff-line add">+qui_role_traefik_api_enabled: true</span><span class="diff-line add">+qui_role_traefik_api_endpoint: &quot;PathPrefix(`/proxy`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-qui_docker_container: &quot;{{ qui_name }}&quot;</span><span class="diff-line add">+qui_role_docker_container: &quot;{{ qui_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-qui_docker_image_pull: true</span><span class="diff-line del">-qui_docker_image_repo: &quot;ghcr.io/autobrr/qui&quot;</span><span class="diff-line del">-qui_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-qui_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_image_repo&#x27;, default=qui_docker_image_repo) }}:{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_image_tag&#x27;, default=qui_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-qui_docker_ports_defaults: []</span><span class="diff-line del">-qui_docker_ports_custom: []</span><span class="diff-line del">-qui_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_ports_defaults&#x27;, default=qui_docker_ports_defaults)</span><span class="diff-line del">-                      + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_ports_custom&#x27;, default=qui_docker_ports_custom) }}&quot;</span><span class="diff-line add">+qui_role_docker_image_pull: true</span><span class="diff-line add">+qui_role_docker_image_repo: &quot;ghcr.io/autobrr/qui&quot;</span><span class="diff-line add">+qui_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+qui_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;qui&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;qui&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-qui_docker_envs_default:</span><span class="diff-line add">+qui_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-qui_docker_envs_custom: {}</span><span class="diff-line del">-qui_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_envs_default&#x27;, default=qui_docker_envs_default)</span><span class="diff-line del">-                     | combine(lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_envs_custom&#x27;, default=qui_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-qui_docker_commands_default: []</span><span class="diff-line del">-qui_docker_commands_custom: []</span><span class="diff-line del">-qui_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_commands_default&#x27;, default=qui_docker_commands_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_commands_custom&#x27;, default=qui_docker_commands_custom) }}&quot;</span><span class="diff-line add">+qui_role_docker_envs_custom: {}</span><span class="diff-line add">+qui_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;qui&#x27;)</span><span class="diff-line add">+                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;qui&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-qui_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ qui_paths_location }}:/config&quot;</span><span class="diff-line del">-qui_docker_volumes_custom: []</span><span class="diff-line del">-qui_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_volumes_default&#x27;, default=qui_docker_volumes_default)</span><span class="diff-line del">-                        + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_volumes_custom&#x27;, default=qui_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-qui_docker_devices_default: []</span><span class="diff-line del">-qui_docker_devices_custom: []</span><span class="diff-line del">-qui_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_devices_default&#x27;, default=qui_docker_devices_default)</span><span class="diff-line del">-                        + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_devices_custom&#x27;, default=qui_docker_devices_custom) }}&quot;</span><span class="diff-line add">+qui_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;qui&#x27;) }}:/config&quot;</span><span class="diff-line add">+qui_role_docker_volumes_custom: []</span><span class="diff-line add">+qui_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;qui&#x27;)</span><span class="diff-line add">+                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;qui&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hosts</span><span class="diff-line del">-qui_docker_hosts_default: {}</span><span class="diff-line del">-qui_docker_hosts_custom: {}</span><span class="diff-line del">-qui_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                      | combine(lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_hosts_default&#x27;, default=qui_docker_hosts_default))</span><span class="diff-line del">-                      | combine(lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_hosts_custom&#x27;, default=qui_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-qui_docker_labels_default: {}</span><span class="diff-line del">-qui_docker_labels_custom: {}</span><span class="diff-line del">-qui_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_labels_default&#x27;, default=qui_docker_labels_default))</span><span class="diff-line del">-                       | combine(lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_labels_custom&#x27;, default=qui_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+qui_role_docker_hosts_default: {}</span><span class="diff-line add">+qui_role_docker_hosts_custom: {}</span><span class="diff-line add">+qui_role_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_hosts_default&#x27;, role=&#x27;qui&#x27;))</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_hosts_custom&#x27;, role=&#x27;qui&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-qui_docker_hostname: &quot;{{ qui_name }}&quot;</span><span class="diff-line add">+qui_role_docker_hostname: &quot;{{ qui_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-qui_docker_networks_alias: &quot;{{ qui_name }}&quot;</span><span class="diff-line del">-qui_docker_networks_default: []</span><span class="diff-line del">-qui_docker_networks_custom: []</span><span class="diff-line del">-qui_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_networks_default&#x27;, default=qui_docker_networks_default)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_networks_custom&#x27;, default=qui_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-qui_docker_capabilities_default: []</span><span class="diff-line del">-qui_docker_capabilities_custom: []</span><span class="diff-line del">-qui_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_capabilities_default&#x27;, default=qui_docker_capabilities_default)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_capabilities_custom&#x27;, default=qui_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-qui_docker_security_opts_default: []</span><span class="diff-line del">-qui_docker_security_opts_custom: []</span><span class="diff-line del">-qui_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_security_opts_default&#x27;, default=qui_docker_security_opts_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, qui_name + &#x27;_docker_security_opts_custom&#x27;, default=qui_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+qui_role_docker_networks_alias: &quot;{{ qui_name }}&quot;</span><span class="diff-line add">+qui_role_docker_networks_default: []</span><span class="diff-line add">+qui_role_docker_networks_custom: []</span><span class="diff-line add">+qui_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;qui&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;qui&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-qui_docker_restart_policy: unless-stopped</span><span class="diff-line add">+qui_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-qui_docker_state: started</span><span class="diff-line add">+qui_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-qui_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+qui_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-325">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/qui/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-326">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/recyclarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,104 +14,65 @@</span><span class="diff-line context"> recyclarr_name: recyclarr</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+recyclarr_role_cron_schedule: &quot;@daily&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-recyclarr_paths_folder: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line del">-recyclarr_paths_location: &quot;{{ server_appdata_path }}/{{ recyclarr_paths_folder }}&quot;</span><span class="diff-line del">-recyclarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ recyclarr_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ recyclarr_paths_location }}/configs&quot;</span><span class="diff-line del">-recyclarr_config_location: &quot;{{ recyclarr_paths_location }}/recyclarr.yml&quot;</span><span class="diff-line add">+recyclarr_role_paths_folder: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line add">+recyclarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ recyclarr_role_paths_folder }}&quot;</span><span class="diff-line add">+recyclarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ recyclarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-recyclarr_docker_container: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_container: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-recyclarr_docker_image_pull: true</span><span class="diff-line del">-recyclarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-recyclarr_docker_image: &quot;ghcr.io/recyclarr/recyclarr:{{ recyclarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-recyclarr_docker_ports_defaults: []</span><span class="diff-line del">-recyclarr_docker_ports_custom: []</span><span class="diff-line del">-recyclarr_docker_ports: &quot;{{ recyclarr_docker_ports_defaults</span><span class="diff-line del">-                            + recyclarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_image_pull: true</span><span class="diff-line add">+recyclarr_role_docker_image_repo: &quot;ghcr.io/recyclarr/recyclarr&quot;</span><span class="diff-line add">+recyclarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+recyclarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;recyclarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;recyclarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-recyclarr_docker_envs_default:</span><span class="diff-line add">+recyclarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  CRON_SCHEDULE: &quot;{{ recyclarr.cron_schedule }}&quot;</span><span class="diff-line add">+  CRON_SCHEDULE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_cron_schedule&#x27;, role=&#x27;recyclarr&#x27;) }}&quot;</span><span class="diff-line context">   RECYCLARR_CREATE_CONFIG: &quot;true&quot;</span><span class="diff-line del">-recyclarr_docker_envs_custom: {}</span><span class="diff-line del">-recyclarr_docker_envs: &quot;{{ recyclarr_docker_envs_default</span><span class="diff-line del">-                           | combine(recyclarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-recyclarr_docker_commands_default: []</span><span class="diff-line del">-recyclarr_docker_commands_custom: []</span><span class="diff-line del">-recyclarr_docker_commands: &quot;{{ recyclarr_docker_commands_default</span><span class="diff-line del">-                               + recyclarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_envs_custom: {}</span><span class="diff-line add">+recyclarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;recyclarr&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;recyclarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-recyclarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ recyclarr_paths_location }}:/config&quot;</span><span class="diff-line del">-recyclarr_docker_volumes_custom: []</span><span class="diff-line del">-recyclarr_docker_volumes: &quot;{{ recyclarr_docker_volumes_default</span><span class="diff-line del">-                              + recyclarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-recyclarr_docker_devices_default: []</span><span class="diff-line del">-recyclarr_docker_devices_custom: []</span><span class="diff-line del">-recyclarr_docker_devices: &quot;{{ recyclarr_docker_devices_default</span><span class="diff-line del">-                              + recyclarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-recyclarr_docker_hosts_default: {}</span><span class="diff-line del">-recyclarr_docker_hosts_custom: {}</span><span class="diff-line del">-recyclarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(recyclarr_docker_hosts_default)</span><span class="diff-line del">-                            | combine(recyclarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-recyclarr_docker_labels_default: {}</span><span class="diff-line del">-recyclarr_docker_labels_custom: {}</span><span class="diff-line del">-recyclarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(recyclarr_docker_labels_default)</span><span class="diff-line del">-                             | combine(recyclarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;recyclarr&#x27;) }}:/config&quot;</span><span class="diff-line add">+recyclarr_role_docker_volumes_custom: []</span><span class="diff-line add">+recyclarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;recyclarr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;recyclarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-recyclarr_docker_hostname: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_hostname: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-recyclarr_docker_networks_alias: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line del">-recyclarr_docker_networks_default: []</span><span class="diff-line del">-recyclarr_docker_networks_custom: []</span><span class="diff-line del">-recyclarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + recyclarr_docker_networks_default</span><span class="diff-line del">-                               + recyclarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-recyclarr_docker_capabilities_default: []</span><span class="diff-line del">-recyclarr_docker_capabilities_custom: []</span><span class="diff-line del">-recyclarr_docker_capabilities: &quot;{{ recyclarr_docker_capabilities_default</span><span class="diff-line del">-                                   + recyclarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-recyclarr_docker_security_opts_default: []</span><span class="diff-line del">-recyclarr_docker_security_opts_custom: []</span><span class="diff-line del">-recyclarr_docker_security_opts: &quot;{{ recyclarr_docker_security_opts_default</span><span class="diff-line del">-                                    + recyclarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_networks_alias: &quot;{{ recyclarr_name }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_networks_default: []</span><span class="diff-line add">+recyclarr_role_docker_networks_custom: []</span><span class="diff-line add">+recyclarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;recyclarr&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;recyclarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-recyclarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+recyclarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-recyclarr_docker_state: started</span><span class="diff-line add">+recyclarr_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-recyclarr_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+recyclarr_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-327">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/reposilite/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,128 +18,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-reposilite_paths_folder: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line del">-reposilite_paths_location: &quot;{{ server_appdata_path }}/{{ reposilite_paths_folder }}&quot;</span><span class="diff-line del">-reposilite_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ reposilite_paths_location }}&quot;</span><span class="diff-line add">+reposilite_role_paths_folder: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line add">+reposilite_role_paths_location: &quot;{{ server_appdata_path }}/{{ reposilite_role_paths_folder }}&quot;</span><span class="diff-line add">+reposilite_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ reposilite_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-reposilite_web_subdomain: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line del">-reposilite_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-reposilite_web_port: &quot;8080&quot;</span><span class="diff-line del">-respoilite_web_url: &quot;{{ &#x27;https://&#x27; + (respoilite_web_subdomain + &#x27;.&#x27; + respoilite_web_domain</span><span class="diff-line del">-                     if (respoilite_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else respoilite_web_domain) }}&quot;</span><span class="diff-line add">+reposilite_role_web_subdomain: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line add">+reposilite_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+reposilite_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+reposilite_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;reposilite&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;reposilite&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;reposilite&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;reposilite&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-reposilite_dns_record: &quot;{{ reposilite_web_subdomain }}&quot;</span><span class="diff-line del">-reposilite_dns_zone: &quot;{{ reposilite_web_domain }}&quot;</span><span class="diff-line del">-reposilite_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+reposilite_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;reposilite&#x27;) }}&quot;</span><span class="diff-line add">+reposilite_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;reposilite&#x27;) }}&quot;</span><span class="diff-line add">+reposilite_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-reposilite_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-reposilite_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-reposilite_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-reposilite_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-reposilite_traefik_enabled: true</span><span class="diff-line del">-reposilite_traefik_api_enabled: true</span><span class="diff-line del">-reposilite_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+reposilite_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+reposilite_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+reposilite_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+reposilite_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+reposilite_role_traefik_enabled: true</span><span class="diff-line add">+reposilite_role_traefik_api_enabled: true</span><span class="diff-line add">+reposilite_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-reposilite_docker_container: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line add">+reposilite_role_docker_container: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-reposilite_docker_image_pull: true</span><span class="diff-line del">-reposilite_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-reposilite_docker_image: &quot;ghcr.io/dzikoysk/reposilite:{{ reposilite_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-reposilite_docker_ports_defaults: []</span><span class="diff-line del">-reposilite_docker_ports_custom: []</span><span class="diff-line del">-reposilite_docker_ports: &quot;{{ reposilite_docker_ports_defaults</span><span class="diff-line del">-                             + reposilite_docker_ports_custom }}&quot;</span><span class="diff-line add">+reposilite_role_docker_image_pull: true</span><span class="diff-line add">+reposilite_role_docker_image_repo: &quot;ghcr.io/dzikoysk/reposilite&quot;</span><span class="diff-line add">+reposilite_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+reposilite_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;reposilite&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;reposilite&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-reposilite_docker_envs_default:</span><span class="diff-line add">+reposilite_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   REPOSILITE_OPTS: &quot;--token {{ user.name }}:{{ user.pass }}&quot;</span><span class="diff-line del">-reposilite_docker_envs_custom: {}</span><span class="diff-line del">-reposilite_docker_envs: &quot;{{ reposilite_docker_envs_default</span><span class="diff-line del">-                            | combine(reposilite_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-reposilite_docker_commands_default: []</span><span class="diff-line del">-reposilite_docker_commands_custom: []</span><span class="diff-line del">-reposilite_docker_commands: &quot;{{ reposilite_docker_commands_default</span><span class="diff-line del">-                                + reposilite_docker_commands_custom }}&quot;</span><span class="diff-line add">+reposilite_role_docker_envs_custom: {}</span><span class="diff-line add">+reposilite_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;reposilite&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;reposilite&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-reposilite_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ reposilite_paths_location }}:/app/data&quot;</span><span class="diff-line del">-reposilite_docker_volumes_custom: []</span><span class="diff-line del">-reposilite_docker_volumes: &quot;{{ reposilite_docker_volumes_default</span><span class="diff-line del">-                               + reposilite_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-reposilite_docker_devices_default: []</span><span class="diff-line del">-reposilite_docker_devices_custom: []</span><span class="diff-line del">-reposilite_docker_devices: &quot;{{ reposilite_docker_devices_default</span><span class="diff-line del">-                               + reposilite_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-reposilite_docker_hosts_default: {}</span><span class="diff-line del">-reposilite_docker_hosts_custom: {}</span><span class="diff-line del">-reposilite_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(reposilite_docker_hosts_default)</span><span class="diff-line del">-                             | combine(reposilite_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-reposilite_docker_labels_default: {}</span><span class="diff-line del">-reposilite_docker_labels_custom: {}</span><span class="diff-line del">-reposilite_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(reposilite_docker_labels_default)</span><span class="diff-line del">-                              | combine(reposilite_docker_labels_custom) }}&quot;</span><span class="diff-line add">+reposilite_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;reposilite&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+reposilite_role_docker_volumes_custom: []</span><span class="diff-line add">+reposilite_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;reposilite&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;reposilite&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-reposilite_docker_hostname: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line add">+reposilite_role_docker_hostname: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-reposilite_docker_networks_alias: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line del">-reposilite_docker_networks_default: []</span><span class="diff-line del">-reposilite_docker_networks_custom: []</span><span class="diff-line del">-reposilite_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + reposilite_docker_networks_default</span><span class="diff-line del">-                                + reposilite_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-reposilite_docker_capabilities_default: []</span><span class="diff-line del">-reposilite_docker_capabilities_custom: []</span><span class="diff-line del">-reposilite_docker_capabilities: &quot;{{ reposilite_docker_capabilities_default</span><span class="diff-line del">-                                    + reposilite_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-reposilite_docker_security_opts_default: []</span><span class="diff-line del">-reposilite_docker_security_opts_custom: []</span><span class="diff-line del">-reposilite_docker_security_opts: &quot;{{ reposilite_docker_security_opts_default</span><span class="diff-line del">-                                     + reposilite_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+reposilite_role_docker_networks_alias: &quot;{{ reposilite_name }}&quot;</span><span class="diff-line add">+reposilite_role_docker_networks_default: []</span><span class="diff-line add">+reposilite_role_docker_networks_custom: []</span><span class="diff-line add">+reposilite_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;reposilite&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;reposilite&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-reposilite_docker_restart_policy: unless-stopped</span><span class="diff-line add">+reposilite_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-reposilite_docker_state: started</span><span class="diff-line add">+reposilite_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-328">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/reposilite/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-329">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/requestrr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-requestrr_paths_folder: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line del">-requestrr_paths_location: &quot;{{ server_appdata_path }}/{{ requestrr_paths_folder }}&quot;</span><span class="diff-line del">-requestrr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ requestrr_paths_location }}&quot;</span><span class="diff-line add">+requestrr_role_paths_folder: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line add">+requestrr_role_paths_location: &quot;{{ server_appdata_path }}/{{ requestrr_role_paths_folder }}&quot;</span><span class="diff-line add">+requestrr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ requestrr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-requestrr_web_subdomain: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line del">-requestrr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-requestrr_web_port: &quot;4545&quot;</span><span class="diff-line del">-requestrr_web_url: &quot;{{ &#x27;https://&#x27; + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_web_subdomain&#x27;, default=requestrr_web_subdomain)</span><span class="diff-line del">-                       + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_web_domain&#x27;, default=requestrr_web_domain) }}&quot;</span><span class="diff-line add">+requestrr_role_web_subdomain: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line add">+requestrr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+requestrr_role_web_port: &quot;4545&quot;</span><span class="diff-line add">+requestrr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;requestrr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;requestrr&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;requestrr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;requestrr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-requestrr_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_web_subdomain&#x27;, default=requestrr_web_subdomain) }}&quot;</span><span class="diff-line del">-requestrr_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_web_domain&#x27;, default=requestrr_web_domain) }}&quot;</span><span class="diff-line del">-requestrr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+requestrr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;requestrr&#x27;) }}&quot;</span><span class="diff-line add">+requestrr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;requestrr&#x27;) }}&quot;</span><span class="diff-line add">+requestrr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-requestrr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-requestrr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-requestrr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-requestrr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-requestrr_traefik_enabled: true</span><span class="diff-line del">-requestrr_traefik_api_enabled: false</span><span class="diff-line del">-requestrr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+requestrr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+requestrr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+requestrr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+requestrr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+requestrr_role_traefik_enabled: true</span><span class="diff-line add">+requestrr_role_traefik_api_enabled: false</span><span class="diff-line add">+requestrr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-requestrr_docker_container: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line add">+requestrr_role_docker_container: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-requestrr_docker_image_pull: true</span><span class="diff-line del">-requestrr_docker_image_repo: &quot;thomst08/requestrr&quot;</span><span class="diff-line del">-requestrr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-requestrr_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_image_repo&#x27;, default=requestrr_docker_image_repo)</span><span class="diff-line del">-                            + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_image_tag&#x27;, default=requestrr_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-requestrr_docker_ports_defaults: []</span><span class="diff-line del">-requestrr_docker_ports_custom: []</span><span class="diff-line del">-requestrr_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_ports_defaults&#x27;, default=requestrr_docker_ports_defaults)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_ports_custom&#x27;, default=requestrr_docker_ports_custom) }}&quot;</span><span class="diff-line add">+requestrr_role_docker_image_pull: true</span><span class="diff-line add">+requestrr_role_docker_image_repo: &quot;thomst08/requestrr&quot;</span><span class="diff-line add">+requestrr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+requestrr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;requestrr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;requestrr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-requestrr_docker_envs_default:</span><span class="diff-line add">+requestrr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line del">-requestrr_docker_envs_custom: {}</span><span class="diff-line del">-requestrr_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_envs_default&#x27;, default=requestrr_docker_envs_default)</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_envs_custom&#x27;, default=requestrr_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-requestrr_docker_commands_default: []</span><span class="diff-line del">-requestrr_docker_commands_custom: []</span><span class="diff-line del">-requestrr_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_commands_default&#x27;, default=requestrr_docker_commands_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_commands_custom&#x27;, default=requestrr_docker_commands_custom) }}&quot;</span><span class="diff-line add">+requestrr_role_docker_envs_custom: {}</span><span class="diff-line add">+requestrr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;requestrr&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;requestrr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-requestrr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ requestrr_paths_location }}:/root/config&quot;</span><span class="diff-line del">-requestrr_docker_volumes_custom: []</span><span class="diff-line del">-requestrr_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_volumes_default&#x27;, default=requestrr_docker_volumes_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_volumes_custom&#x27;, default=requestrr_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-requestrr_docker_devices_default: []</span><span class="diff-line del">-requestrr_docker_devices_custom: []</span><span class="diff-line del">-requestrr_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_devices_default&#x27;, default=requestrr_docker_devices_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_devices_custom&#x27;, default=requestrr_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-requestrr_docker_hosts_default: {}</span><span class="diff-line del">-requestrr_docker_hosts_custom: {}</span><span class="diff-line del">-requestrr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_hosts_default&#x27;, default=requestrr_docker_hosts_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_hosts_custom&#x27;, default=requestrr_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-requestrr_docker_labels_default: {}</span><span class="diff-line del">-requestrr_docker_labels_custom: {}</span><span class="diff-line del">-requestrr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_labels_default&#x27;, default=requestrr_docker_labels_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_labels_custom&#x27;, default=requestrr_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+requestrr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;requestrr&#x27;) }}:/root/config&quot;</span><span class="diff-line add">+requestrr_role_docker_volumes_custom: []</span><span class="diff-line add">+requestrr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;requestrr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;requestrr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-requestrr_docker_hostname: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line add">+requestrr_role_docker_hostname: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-requestrr_docker_networks_alias: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line del">-requestrr_docker_networks_default: []</span><span class="diff-line del">-requestrr_docker_networks_custom: []</span><span class="diff-line del">-requestrr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_networks_default&#x27;, default=requestrr_docker_networks_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_networks_custom&#x27;, default=requestrr_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-requestrr_docker_capabilities_default: []</span><span class="diff-line del">-requestrr_docker_capabilities_custom: []</span><span class="diff-line del">-requestrr_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_capabilities_default&#x27;, default=requestrr_docker_capabilities_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_capabilities_custom&#x27;, default=requestrr_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-requestrr_docker_security_opts_default: []</span><span class="diff-line del">-requestrr_docker_security_opts_custom: []</span><span class="diff-line del">-requestrr_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_security_opts_default&#x27;, default=requestrr_docker_security_opts_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, requestrr_name + &#x27;_docker_security_opts_custom&#x27;, default=requestrr_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+requestrr_role_docker_networks_alias: &quot;{{ requestrr_name }}&quot;</span><span class="diff-line add">+requestrr_role_docker_networks_default: []</span><span class="diff-line add">+requestrr_role_docker_networks_custom: []</span><span class="diff-line add">+requestrr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;requestrr&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;requestrr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-requestrr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+requestrr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-requestrr_docker_state: started</span><span class="diff-line add">+requestrr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-330">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/requestrr/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-331">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/resiliosync/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,136 +12,99 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> resiliosync_name: resiliosync</span><span class="diff-line del">-resiliosync_data_port: &quot;55555&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+resiliosync_role_data_port: &quot;55555&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-resiliosync_paths_folder: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line del">-resiliosync_paths_location: &quot;{{ server_appdata_path }}/{{ resiliosync_paths_folder }}&quot;</span><span class="diff-line del">-resiliosync_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ resiliosync_paths_location }}&quot;</span><span class="diff-line add">+resiliosync_role_paths_folder: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line add">+resiliosync_role_paths_location: &quot;{{ server_appdata_path }}/{{ resiliosync_role_paths_folder }}&quot;</span><span class="diff-line add">+resiliosync_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ resiliosync_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-resiliosync_web_subdomain: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line del">-resiliosync_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-resiliosync_web_port: &quot;8888&quot;</span><span class="diff-line del">-resiliosync_web_url: &quot;{{ &#x27;https://&#x27; + (resiliosync_web_subdomain + &#x27;.&#x27; + resiliosync_web_domain</span><span class="diff-line del">-                      if (resiliosync_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else resiliosync_web_domain) }}&quot;</span><span class="diff-line add">+resiliosync_role_web_subdomain: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line add">+resiliosync_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+resiliosync_role_web_port: &quot;8888&quot;</span><span class="diff-line add">+resiliosync_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;resiliosync&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;resiliosync&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;resiliosync&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;resiliosync&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-resiliosync_dns_record: &quot;{{ resiliosync_web_subdomain }}&quot;</span><span class="diff-line del">-resiliosync_dns_zone: &quot;{{ resiliosync_web_domain }}&quot;</span><span class="diff-line del">-resiliosync_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+resiliosync_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line add">+resiliosync_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line add">+resiliosync_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-resiliosync_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-resiliosync_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-resiliosync_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-resiliosync_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-resiliosync_traefik_enabled: true</span><span class="diff-line del">-resiliosync_traefik_api_enabled: false</span><span class="diff-line del">-resiliosync_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+resiliosync_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+resiliosync_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+resiliosync_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+resiliosync_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+resiliosync_role_traefik_enabled: true</span><span class="diff-line add">+resiliosync_role_traefik_api_enabled: false</span><span class="diff-line add">+resiliosync_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-resiliosync_docker_container: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_container: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-resiliosync_docker_image_pull: true</span><span class="diff-line del">-resiliosync_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-resiliosync_docker_image: &quot;resilio/sync:{{ resiliosync_docker_image_tag }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_image_pull: true</span><span class="diff-line add">+resiliosync_role_docker_image_repo: &quot;resilio/sync&quot;</span><span class="diff-line add">+resiliosync_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+resiliosync_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;resiliosync&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-resiliosync_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ resiliosync_data_port }}:{{ resiliosync_data_port }}&quot;</span><span class="diff-line del">-resiliosync_docker_ports_custom: []</span><span class="diff-line del">-resiliosync_docker_ports: &quot;{{ resiliosync_docker_ports_defaults</span><span class="diff-line del">-                              + resiliosync_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-resiliosync_docker_envs_default: {}</span><span class="diff-line del">-resiliosync_docker_envs_custom: {}</span><span class="diff-line del">-resiliosync_docker_envs: &quot;{{ resiliosync_docker_envs_default</span><span class="diff-line del">-                             | combine(resiliosync_docker_envs_custom) }}&quot;</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-resiliosync_docker_commands_default: []</span><span class="diff-line del">-resiliosync_docker_commands_custom: []</span><span class="diff-line del">-resiliosync_docker_commands: &quot;{{ resiliosync_docker_commands_default</span><span class="diff-line del">-                                 + resiliosync_docker_commands_custom }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_data_port&#x27;, role=&#x27;resiliosync&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_data_port&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_ports_custom: []</span><span class="diff-line add">+resiliosync_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;resiliosync&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-resiliosync_docker_volumes_global: false</span><span class="diff-line del">-resiliosync_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ resiliosync_paths_location }}:/mnt/sync&quot;</span><span class="diff-line add">+resiliosync_role_docker_volumes_global: false</span><span class="diff-line add">+resiliosync_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;resiliosync&#x27;) }}:/mnt/sync&quot;</span><span class="diff-line context">   - &quot;/mnt:/mnt/mounted_folders/mnt&quot;</span><span class="diff-line context">   - &quot;/home:/mnt/mounted_folders/home&quot;</span><span class="diff-line del">-resiliosync_docker_volumes_custom: []</span><span class="diff-line del">-resiliosync_docker_volumes: &quot;{{ resiliosync_docker_volumes_default</span><span class="diff-line del">-                                + resiliosync_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-resiliosync_docker_devices_default: []</span><span class="diff-line del">-resiliosync_docker_devices_custom: []</span><span class="diff-line del">-resiliosync_docker_devices: &quot;{{ resiliosync_docker_devices_default</span><span class="diff-line del">-                                + resiliosync_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-resiliosync_docker_hosts_default: {}</span><span class="diff-line del">-resiliosync_docker_hosts_custom: {}</span><span class="diff-line del">-resiliosync_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(resiliosync_docker_hosts_default)</span><span class="diff-line del">-                              | combine(resiliosync_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-resiliosync_docker_labels_default: {}</span><span class="diff-line del">-resiliosync_docker_labels_custom: {}</span><span class="diff-line del">-resiliosync_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(resiliosync_docker_labels_default)</span><span class="diff-line del">-                               | combine(resiliosync_docker_labels_custom) }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_volumes_custom: []</span><span class="diff-line add">+resiliosync_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;resiliosync&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-resiliosync_docker_hostname: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_hostname: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-resiliosync_docker_networks_alias: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line del">-resiliosync_docker_networks_default: []</span><span class="diff-line del">-resiliosync_docker_networks_custom: []</span><span class="diff-line del">-resiliosync_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + resiliosync_docker_networks_default</span><span class="diff-line del">-                                 + resiliosync_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-resiliosync_docker_capabilities_default: []</span><span class="diff-line del">-resiliosync_docker_capabilities_custom: []</span><span class="diff-line del">-resiliosync_docker_capabilities: &quot;{{ resiliosync_docker_capabilities_default</span><span class="diff-line del">-                                     + resiliosync_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-resiliosync_docker_security_opts_default: []</span><span class="diff-line del">-resiliosync_docker_security_opts_custom: []</span><span class="diff-line del">-resiliosync_docker_security_opts: &quot;{{ resiliosync_docker_security_opts_default</span><span class="diff-line del">-                                      + resiliosync_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_networks_alias: &quot;{{ resiliosync_name }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_networks_default: []</span><span class="diff-line add">+resiliosync_role_docker_networks_custom: []</span><span class="diff-line add">+resiliosync_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;resiliosync&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;resiliosync&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-resiliosync_docker_restart_policy: unless-stopped</span><span class="diff-line add">+resiliosync_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-resiliosync_docker_state: started</span><span class="diff-line add">+resiliosync_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-resiliosync_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+resiliosync_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-332">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/resiliosync/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-333">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rflood/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,178 +16,140 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rflood_paths_folder: &quot;{{ rflood_name }}&quot;</span><span class="diff-line del">-rflood_paths_location: &quot;{{ server_appdata_path }}/{{ rflood_paths_folder }}&quot;</span><span class="diff-line del">-rflood_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ rflood_paths_folder }}&quot;</span><span class="diff-line del">-rflood_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ rflood_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_paths_downloads_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_paths_downloads_location }}/completed&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_paths_downloads_location }}/incoming&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_paths_downloads_location }}/watched&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_paths_downloads_location }}/torrents&quot;</span><span class="diff-line add">+rflood_role_paths_folder: &quot;{{ rflood_name }}&quot;</span><span class="diff-line add">+rflood_role_paths_location: &quot;{{ server_appdata_path }}/{{ rflood_role_paths_folder }}&quot;</span><span class="diff-line add">+rflood_role_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ rflood_role_paths_folder }}&quot;</span><span class="diff-line add">+rflood_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_downloads_location }}/completed&quot;</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_downloads_location }}/incoming&quot;</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_downloads_location }}/watched&quot;</span><span class="diff-line add">+  - &quot;{{ rflood_role_paths_downloads_location }}/torrents&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Config files</span><span class="diff-line del">-rflood_paths_rtorrent_rc_location: &quot;{{ rflood_paths_location }}/rtorrent.rc&quot;</span><span class="diff-line add">+rflood_role_paths_rtorrent_rc_location: &quot;{{ rflood_role_paths_location }}/rtorrent.rc&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rflood_web_subdomain: &quot;{{ rflood_name }}&quot;</span><span class="diff-line del">-rflood_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-rflood_web_port: &quot;3000&quot;</span><span class="diff-line del">-rflood_web_url: &quot;{{ &#x27;https://&#x27; + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_web_subdomain&#x27;, default=rflood_web_subdomain)</span><span class="diff-line del">-                    + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_web_domain&#x27;, default=rflood_web_domain) }}&quot;</span><span class="diff-line add">+rflood_role_web_subdomain: &quot;{{ rflood_name }}&quot;</span><span class="diff-line add">+rflood_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+rflood_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+rflood_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rflood&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rflood&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rflood&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rflood_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_web_subdomain&#x27;, default=rflood_web_subdomain) }}&quot;</span><span class="diff-line del">-rflood_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_web_domain&#x27;, default=rflood_web_domain) }}&quot;</span><span class="diff-line del">-rflood_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+rflood_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line add">+rflood_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line add">+rflood_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rflood_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-rflood_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-rflood_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-rflood_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-rflood_traefik_enabled: true</span><span class="diff-line add">+rflood_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+rflood_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+rflood_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+rflood_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+rflood_role_traefik_enabled: true</span><span class="diff-line context"> </span><span class="diff-line context"> # Disabled for security reasons, no authentication on API /!\</span><span class="diff-line del">-rflood_traefik_api_enabled: false</span><span class="diff-line del">-rflood_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+rflood_role_traefik_api_enabled: false</span><span class="diff-line add">+rflood_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Config</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rflood_config_public_trackers: false</span><span class="diff-line add">+rflood_role_config_public_trackers: false</span><span class="diff-line context"> </span><span class="diff-line context"> # rtorrent.rc</span><span class="diff-line del">-rflood_config_rflood_rc_settings_default:</span><span class="diff-line add">+rflood_role_config_rflood_rc_settings_default:</span><span class="diff-line context">   # IP address that is reported to the tracker</span><span class="diff-line context">   - { option: &quot;network.local_address.set&quot;, value: &quot;{{ ip_address_public }}&quot; }</span><span class="diff-line context">   # Ports</span><span class="diff-line del">-  - { option: &quot;network.port_range.set&quot;, value: &quot;{{ rflood_docker_ports_50000 }}-{{ rflood_docker_ports_50000 }}&quot; }</span><span class="diff-line del">-  - { option: &quot;dht.port.set&quot;, value: &quot;{{ rflood_docker_ports_6881 }}&quot; }</span><span class="diff-line add">+  - { option: &quot;network.port_range.set&quot;, value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_50000&#x27;, role=&#x27;rflood&#x27;) }}-{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_50000&#x27;, role=&#x27;rflood&#x27;) }}&quot; }</span><span class="diff-line add">+  - { option: &quot;dht.port.set&quot;, value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_6881&#x27;, role=&#x27;rflood&#x27;) }}&quot; }</span><span class="diff-line context">   # Enable / Disable Public Trackers</span><span class="diff-line del">-  - { option: &quot;dht.mode.set&quot;, value: &quot;{{ rflood_config_public_trackers | ternary(&#x27;on&#x27;, &#x27;disable&#x27;) }}&quot; }</span><span class="diff-line del">-  - { option: &quot;trackers.use_udp.set&quot;, value: &quot;{{ rflood_config_public_trackers | ternary(&#x27;yes&#x27;, &#x27;no&#x27;) }}&quot; }</span><span class="diff-line del">-  - { option: &quot;protocol.pex.set&quot;, value: &quot;{{ rflood_config_public_trackers | ternary(&#x27;yes&#x27;, &#x27;no&#x27;) }}&quot; }</span><span class="diff-line add">+  - { option: &quot;dht.mode.set&quot;, value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_config_public_trackers&#x27;, role=&#x27;rflood&#x27;) | ternary(&#x27;on&#x27;, &#x27;disable&#x27;) }}&quot; }</span><span class="diff-line add">+  - { option: &quot;trackers.use_udp.set&quot;, value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_config_public_trackers&#x27;, role=&#x27;rflood&#x27;) | ternary(&#x27;yes&#x27;, &#x27;no&#x27;) }}&quot; }</span><span class="diff-line add">+  - { option: &quot;protocol.pex.set&quot;, value: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_config_public_trackers&#x27;, role=&#x27;rflood&#x27;) | ternary(&#x27;yes&#x27;, &#x27;no&#x27;) }}&quot; }</span><span class="diff-line context">   # Maximum XMLRPC payloads</span><span class="diff-line context">   - { option: &quot;network.xmlrpc.size_limit.set&quot;, value: &quot;20M&quot; }</span><span class="diff-line del">-rflood_config_rflood_rc_settings_custom: []</span><span class="diff-line del">-rflood_config_rflood_rc_settings_list: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_config_rflood_rc_settings_default&#x27;, default=rflood_config_rflood_rc_settings_default)</span><span class="diff-line del">-                                           + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_config_rflood_rc_settings_custom&#x27;, default=rflood_config_rflood_rc_settings_custom) }}&quot;</span><span class="diff-line add">+rflood_role_config_rflood_rc_settings_custom: []</span><span class="diff-line add">+rflood_role_config_rflood_rc_settings_list: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_config_rflood_rc_settings_default&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                                                + lookup(&#x27;role_var&#x27;, &#x27;_config_rflood_rc_settings_custom&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-rflood_docker_container: &quot;{{ rflood_name }}&quot;</span><span class="diff-line add">+rflood_role_docker_container: &quot;{{ rflood_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-rflood_docker_image_pull: true</span><span class="diff-line del">-rflood_docker_image_repo: &quot;ghcr.io/hotio/rflood&quot;</span><span class="diff-line del">-rflood_docker_image_tag: &quot;release&quot;</span><span class="diff-line del">-rflood_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_image_repo&#x27;, default=rflood_docker_image_repo)</span><span class="diff-line del">-                         + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_image_tag&#x27;, default=rflood_docker_image_tag) }}&quot;</span><span class="diff-line add">+rflood_role_docker_image_pull: true</span><span class="diff-line add">+rflood_role_docker_image_repo: &quot;ghcr.io/hotio/rflood&quot;</span><span class="diff-line add">+rflood_role_docker_image_tag: &quot;release&quot;</span><span class="diff-line add">+rflood_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;rflood&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line context"> # - Internal and External ports need to match for the next set of ports</span><span class="diff-line context"> # - Lookup available ports and set docker ports accordingly</span><span class="diff-line del">-rflood_docker_ports_50000: &quot;{{ port_lookup_50000.meta.port</span><span class="diff-line del">-                            if (port_lookup_50000.meta.port is defined) and (port_lookup_50000.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                            else &#x27;50000&#x27; }}&quot;</span><span class="diff-line del">-rflood_docker_ports_6881: &quot;{{ port_lookup_6881.meta.port</span><span class="diff-line del">-                           if (port_lookup_6881.meta.port is defined) and (port_lookup_6881.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                           else &#x27;6881&#x27; }}&quot;</span><span class="diff-line del">-rflood_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ rflood_docker_ports_50000 }}:{{ rflood_docker_ports_50000 }}&quot;</span><span class="diff-line del">-  - &quot;{{ rflood_docker_ports_6881 }}:{{ rflood_docker_ports_6881 }}/udp&quot;</span><span class="diff-line del">-rflood_docker_ports_custom: []</span><span class="diff-line del">-rflood_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_ports_defaults&#x27;, default=rflood_docker_ports_defaults)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_ports_custom&#x27;, default=rflood_docker_ports_custom) }}&quot;</span><span class="diff-line add">+rflood_role_docker_ports_50000: &quot;{{ port_lookup_50000.meta.port</span><span class="diff-line add">+                                 if (port_lookup_50000.meta.port is defined) and (port_lookup_50000.meta.port | trim | length &gt; 0)</span><span class="diff-line add">+                                 else &#x27;50000&#x27; }}&quot;</span><span class="diff-line add">+rflood_role_docker_ports_6881: &quot;{{ port_lookup_6881.meta.port</span><span class="diff-line add">+                                if (port_lookup_6881.meta.port is defined) and (port_lookup_6881.meta.port | trim | length &gt; 0)</span><span class="diff-line add">+                                else &#x27;6881&#x27; }}&quot;</span><span class="diff-line add">+rflood_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_50000&#x27;, role=&#x27;rflood&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_50000&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_6881&#x27;, role=&#x27;rflood&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_6881&#x27;, role=&#x27;rflood&#x27;) }}/udp&quot;</span><span class="diff-line add">+rflood_role_docker_ports_custom: []</span><span class="diff-line add">+rflood_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-rflood_docker_envs_default:</span><span class="diff-line add">+rflood_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   FLOOD_AUTH: &quot;false&quot;</span><span class="diff-line del">-rflood_docker_envs_custom: {}</span><span class="diff-line del">-rflood_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_envs_default&#x27;, default=rflood_docker_envs_default)</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_envs_custom&#x27;, default=rflood_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-rflood_docker_commands_default: []</span><span class="diff-line del">-rflood_docker_commands_custom: []</span><span class="diff-line del">-rflood_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_commands_default&#x27;, default=rflood_docker_commands_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_commands_custom&#x27;, default=rflood_docker_commands_custom) }}&quot;</span><span class="diff-line add">+rflood_role_docker_envs_custom: {}</span><span class="diff-line add">+rflood_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;rflood&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-rflood_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ rflood_paths_location }}:/config&quot;</span><span class="diff-line add">+rflood_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;rflood&#x27;) }}:/config&quot;</span><span class="diff-line context">   - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line del">-rflood_docker_volumes_custom: []</span><span class="diff-line del">-rflood_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_volumes_default&#x27;, default=rflood_docker_volumes_default)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_volumes_custom&#x27;, default=rflood_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-rflood_docker_devices_default: []</span><span class="diff-line del">-rflood_docker_devices_custom: []</span><span class="diff-line del">-rflood_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_devices_default&#x27;, default=rflood_docker_devices_default)</span><span class="diff-line del">-                          + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_devices_custom&#x27;, default=rflood_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-rflood_docker_hosts_default: {}</span><span class="diff-line del">-rflood_docker_hosts_custom: {}</span><span class="diff-line del">-rflood_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_hosts_default&#x27;, default=rflood_docker_hosts_default))</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_hosts_custom&#x27;, default=rflood_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-rflood_docker_labels_default: {}</span><span class="diff-line del">-rflood_docker_labels_custom: {}</span><span class="diff-line del">-rflood_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_labels_default&#x27;, default=rflood_docker_labels_default))</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_labels_custom&#x27;, default=rflood_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+rflood_role_docker_volumes_custom: []</span><span class="diff-line add">+rflood_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-rflood_docker_hostname: &quot;{{ rflood_name }}&quot;</span><span class="diff-line add">+rflood_role_docker_hostname: &quot;{{ rflood_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-rflood_docker_networks_alias: &quot;{{ rflood_name }}&quot;</span><span class="diff-line del">-rflood_docker_networks_default: []</span><span class="diff-line del">-rflood_docker_networks_custom: []</span><span class="diff-line del">-rflood_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_networks_default&#x27;, default=rflood_docker_networks_default)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_networks_custom&#x27;, default=rflood_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-rflood_docker_capabilities_default: []</span><span class="diff-line del">-rflood_docker_capabilities_custom: []</span><span class="diff-line del">-rflood_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_capabilities_default&#x27;, default=rflood_docker_capabilities_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_capabilities_custom&#x27;, default=rflood_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-rflood_docker_security_opts_default: []</span><span class="diff-line del">-rflood_docker_security_opts_custom: []</span><span class="diff-line del">-rflood_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_security_opts_default&#x27;, default=rflood_docker_security_opts_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, rflood_name + &#x27;_docker_security_opts_custom&#x27;, default=rflood_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+rflood_role_docker_networks_alias: &quot;{{ rflood_name }}&quot;</span><span class="diff-line add">+rflood_role_docker_networks_default: []</span><span class="diff-line add">+rflood_role_docker_networks_custom: []</span><span class="diff-line add">+rflood_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;rflood&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-rflood_docker_restart_policy: unless-stopped</span><span class="diff-line add">+rflood_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-rflood_docker_stop_timeout: 900</span><span class="diff-line add">+rflood_role_docker_stop_timeout: 900</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-rflood_docker_state: started</span><span class="diff-line add">+rflood_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-334">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rflood/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,9 +9,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-335">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rflood/tasks/subtasks/post-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,10 +9,8 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Wait for config files to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ item }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_rtorrent_rc_location&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line del">-  loop:</span><span class="diff-line del">-    - &quot;{{ rflood_paths_rtorrent_rc_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Wait for 10 seconds</span><span class="diff-line context">   ansible.builtin.wait_for:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-336">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rflood/tasks/subtasks/post-install/settings/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,7 +9,7 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Settings | Update &#x27;rtorrent.rc&#x27; config settings</span><span class="diff-line context">   community.general.ini_file:</span><span class="diff-line del">-    path: &quot;{{ rflood_paths_rtorrent_rc_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_rtorrent_rc_location&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span><span class="diff-line context">     section: null</span><span class="diff-line context">     option: &quot;{{ item.option }}&quot;</span><span class="diff-line context">     value: &quot;{{ item.value }}&quot;</span><span class="diff-line hunk">@@ -18,4 +18,4 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line del">-  loop: &quot;{{ rflood_config_rflood_rc_settings_list }}&quot;</span><span class="diff-line add">+  loop: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_config_rflood_rc_settings_list&#x27;, role=&#x27;rflood&#x27;) }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-337">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rflood/tasks/subtasks/pre-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,7 +7,7 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Pre-Install | Get next available port within the range of &#x27;50000-50010&#x27; # noqa fqcn[action]</span><span class="diff-line add">+- name: Pre-Install | Get next available port within the range of &#x27;50000-50010&#x27;</span><span class="diff-line context">   find_open_port:</span><span class="diff-line context">     low_bound: 50000</span><span class="diff-line context">     high_bound: 50010</span><span class="diff-line hunk">@@ -15,7 +15,7 @@</span><span class="diff-line context">   register: port_lookup_50000</span><span class="diff-line context">   ignore_errors: true</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Pre-Install | Get next available port within the range of &#x27;6881-6891&#x27; # noqa fqcn[action]</span><span class="diff-line add">+- name: Pre-Install | Get next available port within the range of &#x27;6881-6891&#x27;</span><span class="diff-line context">   find_open_port:</span><span class="diff-line context">     low_bound: 6881</span><span class="diff-line context">     high_bound: 6891</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-338">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rocketchat/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,152 +17,111 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rocketchat_mongodb_docker_image_tag: &quot;6&quot;</span><span class="diff-line del">-rocketchat_mongodb_docker_commands: [&quot;mongod --oplogSize 128 --replSet rs0&quot;]</span><span class="diff-line del">-rocketchat_mongodb_docker_volumes_custom: [&quot;{{ rocketchat_paths_location }}/init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro&quot;]</span><span class="diff-line del">-rockatchat_mongodb_paths_location: &quot;{{ rocketchat_paths_location }}/mongo&quot;</span><span class="diff-line add">+rocketchat_mongodb_role_docker_image_tag: &quot;6&quot;</span><span class="diff-line add">+rocketchat_mongodb_role_docker_commands:</span><span class="diff-line add">+  - &quot;mongod --oplogSize 128 --replSet rs0&quot;</span><span class="diff-line add">+rocketchat_mongodb_role_docker_volumes_custom:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;rocketchat&#x27;) }}/init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro&quot;</span><span class="diff-line add">+rockatchat_mongodb_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;rocketchat&#x27;) }}/mongo&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rocketchat_paths_folder: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line del">-rocketchat_paths_location: &quot;{{ server_appdata_path }}/{{ rocketchat_paths_folder }}&quot;</span><span class="diff-line del">-rocketchat_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ rocketchat_paths_location }}&quot;</span><span class="diff-line del">-rocketchat_paths_config_location: &quot;{{ rocketchat_paths_location }}/env&quot;</span><span class="diff-line add">+rocketchat_role_paths_folder: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line add">+rocketchat_role_paths_location: &quot;{{ server_appdata_path }}/{{ rocketchat_role_paths_folder }}&quot;</span><span class="diff-line add">+rocketchat_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ rocketchat_role_paths_location }}&quot;</span><span class="diff-line add">+rocketchat_role_paths_config_location: &quot;{{ rocketchat_role_paths_location }}/env&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rocketchat_web_subdomain: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line del">-rocketchat_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-rocketchat_web_port: &quot;3000&quot;</span><span class="diff-line del">-rocketchat_web_url: &quot;{{ &#x27;https://&#x27; + (rocketchat_web_subdomain + &#x27;.&#x27; + rocketchat_web_domain</span><span class="diff-line del">-                     if (rocketchat_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                     else rocketchat_web_domain) }}&quot;</span><span class="diff-line add">+rocketchat_role_web_subdomain: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line add">+rocketchat_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+rocketchat_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+rocketchat_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rocketchat&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rocketchat&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rocketchat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rocketchat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rocketchat_dns_record: &quot;{{ rocketchat_web_subdomain }}&quot;</span><span class="diff-line del">-rocketchat_dns_zone: &quot;{{ rocketchat_web_domain }}&quot;</span><span class="diff-line del">-rocketchat_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+rocketchat_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line add">+rocketchat_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line add">+rocketchat_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-rocketchat_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-rocketchat_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-rocketchat_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-rocketchat_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-rocketchat_traefik_enabled: true</span><span class="diff-line del">-rocketchat_traefik_api_enabled: false</span><span class="diff-line del">-rocketchat_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+rocketchat_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+rocketchat_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+rocketchat_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+rocketchat_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+rocketchat_role_traefik_enabled: true</span><span class="diff-line add">+rocketchat_role_traefik_api_enabled: false</span><span class="diff-line add">+rocketchat_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-rocketchat_docker_container: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_container: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-rocketchat_docker_image_pull: true</span><span class="diff-line del">-rocketchat_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-rocketchat_docker_image: &quot;rocketchat/rocket.chat:{{ rocketchat_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-rocketchat_docker_ports_defaults: []</span><span class="diff-line del">-rocketchat_docker_ports_custom: []</span><span class="diff-line del">-rocketchat_docker_ports: &quot;{{ rocketchat_docker_ports_defaults</span><span class="diff-line del">-                             + rocketchat_docker_ports_custom }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_image_pull: true</span><span class="diff-line add">+rocketchat_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+rocketchat_role_docker_image_repo: &quot;rocketchat/rocket.chat&quot;</span><span class="diff-line add">+rocketchat_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;rocketchat&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-rocketchat_docker_envs_default:</span><span class="diff-line add">+rocketchat_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  ROOT_URL: &quot;{{ rocketchat_web_url }}&quot;</span><span class="diff-line add">+  ROOT_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line context">   MONGO_URL: &quot;mongodb://rocketchat-mongo:27017/rocketchat?replicaSet=rs0&amp;directConnection=true&quot;</span><span class="diff-line context">   MONGO_OPLOG_URL: &quot;mongodb://rocketchat-mongo:27017/local?replicaSet=rs0&amp;directConnection=true&quot;</span><span class="diff-line context">   DEPLOY_METHOD: &quot;docker&quot;</span><span class="diff-line del">-rocketchat_docker_envs_custom: {}</span><span class="diff-line del">-rocketchat_docker_envs: &quot;{{ rocketchat_docker_envs_default</span><span class="diff-line del">-                            | combine(rocketchat_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-rocketchat_docker_commands_default: []</span><span class="diff-line del">-rocketchat_docker_commands_custom: []</span><span class="diff-line del">-rocketchat_docker_commands: &quot;{{ rocketchat_docker_commands_default</span><span class="diff-line del">-                                + rocketchat_docker_commands_custom }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_envs_custom: {}</span><span class="diff-line add">+rocketchat_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;rocketchat&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;rocketchat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-rocketchat_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ rocketchat_paths_location }}/uploads:/app/uploads&quot;</span><span class="diff-line del">-rocketchat_docker_volumes_custom: []</span><span class="diff-line del">-rocketchat_docker_volumes: &quot;{{ rocketchat_docker_volumes_default</span><span class="diff-line del">-                               + rocketchat_docker_volumes_custom }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;rocketchat&#x27;) }}/uploads:/app/uploads&quot;</span><span class="diff-line add">+rocketchat_role_docker_volumes_custom: []</span><span class="diff-line add">+rocketchat_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;rocketchat&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Mounts</span><span class="diff-line del">-rocketchat_docker_mounts_default:</span><span class="diff-line add">+rocketchat_role_docker_mounts_default:</span><span class="diff-line context">   - target: /tmp</span><span class="diff-line context">     type: tmpfs</span><span class="diff-line del">-rocketchat_docker_mounts_custom: []</span><span class="diff-line del">-rocketchat_docker_mounts: &quot;{{ rocketchat_docker_mounts_default</span><span class="diff-line del">-                              + rocketchat_docker_mounts_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-rocketchat_docker_devices_default: []</span><span class="diff-line del">-rocketchat_docker_devices_custom: []</span><span class="diff-line del">-rocketchat_docker_devices: &quot;{{ rocketchat_docker_devices_default</span><span class="diff-line del">-                               + rocketchat_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-rocketchat_docker_hosts_default: {}</span><span class="diff-line del">-rocketchat_docker_hosts_custom: {}</span><span class="diff-line del">-rocketchat_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(rocketchat_docker_hosts_default)</span><span class="diff-line del">-                             | combine(rocketchat_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-rocketchat_docker_labels_default: {}</span><span class="diff-line del">-rocketchat_docker_labels_custom: {}</span><span class="diff-line del">-rocketchat_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(rocketchat_docker_labels_default)</span><span class="diff-line del">-                              | combine(rocketchat_docker_labels_custom) }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_mounts_custom: []</span><span class="diff-line add">+rocketchat_role_docker_mounts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_default&#x27;, role=&#x27;rocketchat&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_custom&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-rocketchat_docker_hostname: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_hostname: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-rocketchat_docker_networks_alias: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line del">-rocketchat_docker_networks_default: []</span><span class="diff-line del">-rocketchat_docker_networks_custom: []</span><span class="diff-line del">-rocketchat_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + rocketchat_docker_networks_default</span><span class="diff-line del">-                                + rocketchat_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-rocketchat_docker_capabilities_default: []</span><span class="diff-line del">-rocketchat_docker_capabilities_custom: []</span><span class="diff-line del">-rocketchat_docker_capabilities: &quot;{{ rocketchat_docker_capabilities_default</span><span class="diff-line del">-                                    + rocketchat_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-rocketchat_docker_security_opts_default: []</span><span class="diff-line del">-rocketchat_docker_security_opts_custom: []</span><span class="diff-line del">-rocketchat_docker_security_opts: &quot;{{ rocketchat_docker_security_opts_default</span><span class="diff-line del">-                                     + rocketchat_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_networks_alias: &quot;{{ rocketchat_name }}&quot;</span><span class="diff-line add">+rocketchat_role_docker_networks_default: []</span><span class="diff-line add">+rocketchat_role_docker_networks_custom: []</span><span class="diff-line add">+rocketchat_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;rocketchat&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;rocketchat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-rocketchat_docker_restart_policy: unless-stopped</span><span class="diff-line add">+rocketchat_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-rocketchat_docker_state: started</span><span class="diff-line add">+rocketchat_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-rocketchat_depends_on: &quot;rocketchat_db&quot;</span><span class="diff-line del">-rocketchat_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-rocketchat_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+rocketchat_role_depends_on: &quot;rocketchat_db&quot;</span><span class="diff-line add">+rocketchat_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+rocketchat_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-339">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/rocketchat/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,22 +10,16 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line del">-  ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ item }}&quot;</span><span class="diff-line del">-    state: directory</span><span class="diff-line del">-    owner: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-    group: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-    mode: &quot;0775&quot;</span><span class="diff-line del">-  with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create upload directory</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ rocketchat_paths_location }}/uploads&quot;</span><span class="diff-line add">+    path: &quot;{{ rocketchat_role_paths_location }}/uploads&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     owner: &quot;65533&quot;</span><span class="diff-line context">     group: &quot;65533&quot;</span><span class="diff-line hunk">@@ -34,7 +28,7 @@</span><span class="diff-line context"> - name: &quot;RocketChat | Import init-mongo.js&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: init-mongo.js</span><span class="diff-line del">-    dest: &#x27;{{ rocketchat_paths_location }}/init-mongo.js&#x27;</span><span class="diff-line add">+    dest: &#x27;{{ rocketchat_role_paths_location }}/init-mongo.js&#x27;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line hunk">@@ -43,22 +37,22 @@</span><span class="diff-line context"> - name: Remove legacy rocketchat_db Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;rocketchat_db&quot;</span><span class="diff-line add">+    container_name: &quot;rocketchat_db&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if legacy mongodb folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/rocketchat_db&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/rocketchat_db&quot;</span><span class="diff-line context">   register: rocketchat_db_legacy_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if new mongodb folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ rocketchat_paths_location }}/mongo&quot;</span><span class="diff-line add">+    path: &quot;{{ rocketchat_role_paths_location }}/mongo&quot;</span><span class="diff-line context">   register: rocketchat_db_new_folder</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migrate mongodb directory</span><span class="diff-line context">   migrate_folder:</span><span class="diff-line del">-    legacy_path: &quot;/opt/rocketchat_db&quot;</span><span class="diff-line del">-    new_path: &quot;{{ rocketchat_paths_location }}/mongo&quot;</span><span class="diff-line add">+    legacy_path: &quot;{{ server_appdata_path }}/rocketchat_db&quot;</span><span class="diff-line add">+    new_path: &quot;{{ rocketchat_role_paths_location }}/mongo&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &#x27;0775&#x27;</span><span class="diff-line hunk">@@ -70,10 +64,10 @@</span><span class="diff-line context">     name: mongodb</span><span class="diff-line context">   vars:</span><span class="diff-line context">     mongodb_instances: [&quot;{{ rocketchat_name }}-mongo&quot;]</span><span class="diff-line del">-    mongodb_docker_image_tag: &quot;{{ rocketchat_mongodb_docker_image_tag }}&quot;</span><span class="diff-line del">-    mongodb_docker_commands: &quot;{{ rocketchat_mongodb_docker_commands }}&quot;</span><span class="diff-line del">-    mongodb_docker_volumes_custom: &quot;{{ rocketchat_mongodb_docker_volumes_custom }}&quot;</span><span class="diff-line del">-    mongodb_paths_location: &quot;{{ rockatchat_mongodb_paths_location }}&quot;</span><span class="diff-line add">+    mongodb_role_docker_image_tag: &quot;{{ rocketchat_mongodb_role_docker_image_tag }}&quot;</span><span class="diff-line add">+    mongodb_role_docker_commands: &quot;{{ rocketchat_mongodb_role_docker_commands }}&quot;</span><span class="diff-line add">+    mongodb_role_docker_volumes_custom: &quot;{{ rocketchat_mongodb_role_docker_volumes_custom }}&quot;</span><span class="diff-line add">+    mongodb_role_paths_location: &quot;{{ rockatchat_mongodb_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-340">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sabthrottle/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,95 +17,52 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sabthrottle_paths_folder: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line del">-sabthrottle_paths_location: &quot;{{ server_appdata_path }}/{{ sabthrottle_paths_folder }}&quot;</span><span class="diff-line del">-sabthrottle_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ sabthrottle_paths_location }}&quot;</span><span class="diff-line del">-sabthrottle_paths_config_location: &quot;{{ sabthrottle_paths_location }}/config.json&quot;</span><span class="diff-line add">+sabthrottle_role_paths_folder: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line add">+sabthrottle_role_paths_location: &quot;{{ server_appdata_path }}/{{ sabthrottle_role_paths_folder }}&quot;</span><span class="diff-line add">+sabthrottle_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ sabthrottle_role_paths_location }}&quot;</span><span class="diff-line add">+sabthrottle_role_paths_config_location: &quot;{{ sabthrottle_role_paths_location }}/config.json&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-sabthrottle_docker_container: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_container: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-sabthrottle_docker_image_pull: true</span><span class="diff-line del">-sabthrottle_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-sabthrottle_docker_image: &quot;8a8al00ey/sabthrottle:{{ sabthrottle_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-sabthrottle_docker_ports_defaults: []</span><span class="diff-line del">-sabthrottle_docker_ports_custom: []</span><span class="diff-line del">-sabthrottle_docker_ports: &quot;{{ sabthrottle_docker_ports_defaults</span><span class="diff-line del">-                              + sabthrottle_docker_ports_custom }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_image_pull: true</span><span class="diff-line add">+sabthrottle_role_docker_image_repo: &quot;8a8al00ey/sabthrottle&quot;</span><span class="diff-line add">+sabthrottle_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+sabthrottle_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;sabthrottle&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;sabthrottle&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-sabthrottle_docker_envs_default:</span><span class="diff-line add">+sabthrottle_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-sabthrottle_docker_envs_custom: {}</span><span class="diff-line del">-sabthrottle_docker_envs: &quot;{{ sabthrottle_docker_envs_default</span><span class="diff-line del">-                             | combine(sabthrottle_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-sabthrottle_docker_commands_default: []</span><span class="diff-line del">-sabthrottle_docker_commands_custom: []</span><span class="diff-line del">-sabthrottle_docker_commands: &quot;{{ sabthrottle_docker_commands_default</span><span class="diff-line del">-                                 + sabthrottle_docker_commands_custom }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_envs_custom: {}</span><span class="diff-line add">+sabthrottle_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;sabthrottle&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;sabthrottle&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-sabthrottle_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ sabthrottle_paths_config_location }}:/sabthrottle/config.json:ro&quot;</span><span class="diff-line del">-sabthrottle_docker_volumes_custom: []</span><span class="diff-line del">-sabthrottle_docker_volumes: &quot;{{ sabthrottle_docker_volumes_default</span><span class="diff-line del">-                                + sabthrottle_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-sabthrottle_docker_devices_default: []</span><span class="diff-line del">-sabthrottle_docker_devices_custom: []</span><span class="diff-line del">-sabthrottle_docker_devices: &quot;{{ sabthrottle_docker_devices_default</span><span class="diff-line del">-                                + sabthrottle_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-sabthrottle_docker_hosts_default: {}</span><span class="diff-line del">-sabthrottle_docker_hosts_custom: {}</span><span class="diff-line del">-sabthrottle_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(sabthrottle_docker_hosts_default)</span><span class="diff-line del">-                              | combine(sabthrottle_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-sabthrottle_docker_labels_default: {}</span><span class="diff-line del">-sabthrottle_docker_labels_custom: {}</span><span class="diff-line del">-sabthrottle_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(sabthrottle_docker_labels_default)</span><span class="diff-line del">-                               | combine(sabthrottle_docker_labels_custom) }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;sabthrottle&#x27;) }}:/sabthrottle/config.json:ro&quot;</span><span class="diff-line add">+sabthrottle_role_docker_volumes_custom: []</span><span class="diff-line add">+sabthrottle_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;sabthrottle&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;sabthrottle&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-sabthrottle_docker_hostname: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_hostname: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-sabthrottle_docker_networks_alias: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line del">-sabthrottle_docker_networks_default: []</span><span class="diff-line del">-sabthrottle_docker_networks_custom: []</span><span class="diff-line del">-sabthrottle_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + sabthrottle_docker_networks_default</span><span class="diff-line del">-                                 + sabthrottle_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-sabthrottle_docker_capabilities_default: []</span><span class="diff-line del">-sabthrottle_docker_capabilities_custom: []</span><span class="diff-line del">-sabthrottle_docker_capabilities: &quot;{{ sabthrottle_docker_capabilities_default</span><span class="diff-line del">-                                     + sabthrottle_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-sabthrottle_docker_security_opts_default: []</span><span class="diff-line del">-sabthrottle_docker_security_opts_custom: []</span><span class="diff-line del">-sabthrottle_docker_security_opts: &quot;{{ sabthrottle_docker_security_opts_default</span><span class="diff-line del">-                                      + sabthrottle_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_networks_alias: &quot;{{ sabthrottle_name }}&quot;</span><span class="diff-line add">+sabthrottle_role_docker_networks_default: []</span><span class="diff-line add">+sabthrottle_role_docker_networks_custom: []</span><span class="diff-line add">+sabthrottle_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;sabthrottle&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;sabthrottle&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-sabthrottle_docker_restart_policy: unless-stopped</span><span class="diff-line add">+sabthrottle_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-sabthrottle_docker_state: started</span><span class="diff-line add">+sabthrottle_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-341">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sabthrottle/tasks/subtasks/pre-install.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,15 +9,15 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Pre-Install | Check if config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ sabthrottle_paths_config_location }}&quot;</span><span class="diff-line del">-  register: sabthrottle_paths_config_location_stat</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;sabthrottle&#x27;) }}&quot;</span><span class="diff-line add">+  register: sabthrottle_role_paths_config_location_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pre-Install | Set Default Plex instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     plex_name: &quot;{{ plex_name | default(plex_instances[0]) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pre-Install | New config tasks</span><span class="diff-line del">-  when: not sabthrottle_paths_config_location_stat.stat.exists</span><span class="diff-line add">+  when: not sabthrottle_role_paths_config_location_stat.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Pre-Install | Import Plex Auth Token role</span><span class="diff-line context">       ansible.builtin.include_role:</span><span class="diff-line hunk">@@ -27,7 +27,7 @@</span><span class="diff-line context">     - name: Pre-Install | Import default config</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: &#x27;config.json.j2&#x27;</span><span class="diff-line del">-        dest: &quot;{{ sabthrottle_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;, role=&#x27;sabthrottle&#x27;) }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-342">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sabthrottle/templates/config.json.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,7 +1,7 @@</span><span class="diff-line context"> {</span><span class="diff-line context">   &quot;plex&quot;:</span><span class="diff-line context">   {</span><span class="diff-line del">-    &quot;url&quot;:&quot;{{ plex_web_url }}&quot;,</span><span class="diff-line add">+    &quot;url&quot;:&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;plex&#x27;) }}&quot;,</span><span class="diff-line context">     &quot;interval&quot;:60,</span><span class="diff-line context">     &quot;token&quot;: &quot;{{ plex_auth_token | default(&#x27;&#x27;) }}&quot;</span><span class="diff-line context">   },</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-343">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sanity_check/tasks/subtasks/backup_check.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -15,7 +15,7 @@</span><span class="diff-line context"> # Age in hours</span><span class="diff-line context"> - name: &quot;Backup | Get age of &#x27;backup.lock&#x27; file&quot;</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    backup_lock_age: &quot;{{ ((((ansible_date_time.epoch | int) - (backup_lock.stat.ctime | int)) / (60 * 60)) | int) }}&quot;</span><span class="diff-line add">+    backup_lock_age: &quot;{{ ((((ansible_facts[&#x27;date_time&#x27;][&#x27;epoch&#x27;] | int) - (backup_lock.stat.ctime | int)) / (60 * 60)) | int) }}&quot;</span><span class="diff-line context">   when: backup_lock.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> # Delete if older than 2 hours.</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-344">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/semaphoreui/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,154 +17,112 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-semaphoreui_postgres_name: &quot;{{ semaphoreui_name }}-postgres&quot;</span><span class="diff-line del">-semaphoreui_postgres_docker_image_tag: &quot;15&quot;</span><span class="diff-line del">-semaphoreui_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-semaphoreui_postgres_docker_env_db: &quot;semaphoreui&quot;</span><span class="diff-line del">-semaphoreui_postgres_docker_env_user: &quot;semaphoreui&quot;</span><span class="diff-line del">-semaphoreui_postgres_docker_env_password: &quot;semaphoreui&quot;</span><span class="diff-line del">-semaphoreui_postgres_paths_folder: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line del">-semaphoreui_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_deploy: true</span><span class="diff-line add">+semaphoreui_role_postgres_name: &quot;{{ semaphoreui_name }}-postgres&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_user: &quot;semaphoreui&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_password: &quot;semaphoreui&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_docker_env_db: &quot;semaphoreui&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_docker_image_tag: &quot;15&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;semaphoreui&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+semaphoreui_role_postgres_paths_folder: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ semaphoreui_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-semaphoreui_paths_folder: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line del">-semaphoreui_paths_location: &quot;{{ server_appdata_path }}/{{ semaphoreui_paths_folder }}&quot;</span><span class="diff-line del">-semaphoreui_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ server_appdata_path }}/{{ semaphoreui_paths_folder }}/playbooks&quot;</span><span class="diff-line add">+semaphoreui_role_paths_folder: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_paths_location: &quot;{{ server_appdata_path }}/{{ semaphoreui_role_paths_folder }}&quot;</span><span class="diff-line add">+semaphoreui_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ server_appdata_path }}/{{ semaphoreui_role_paths_folder }}/playbooks&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-semaphoreui_web_subdomain: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line del">-semaphoreui_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-semaphoreui_web_port: &quot;3000&quot;</span><span class="diff-line del">-semaphoreui_web_url: &quot;{{ &#x27;https://&#x27; + (semaphoreui_web_subdomain + &#x27;.&#x27; + semaphoreui_web_domain</span><span class="diff-line del">-                      if (semaphoreui_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else semaphoreui_web_domain) }}&quot;</span><span class="diff-line add">+semaphoreui_role_web_subdomain: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+semaphoreui_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+semaphoreui_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;semaphoreui&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;semaphoreui&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;semaphoreui&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;semaphoreui&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-semaphoreui_dns_record: &quot;{{ semaphoreui_web_subdomain }}&quot;</span><span class="diff-line del">-semaphoreui_dns_zone: &quot;{{ semaphoreui_web_domain }}&quot;</span><span class="diff-line del">-semaphoreui_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+semaphoreui_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+semaphoreui_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+semaphoreui_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-semaphoreui_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-semaphoreui_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-semaphoreui_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-semaphoreui_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-semaphoreui_traefik_enabled: true</span><span class="diff-line del">-semaphoreui_traefik_api_enabled: true</span><span class="diff-line del">-semaphoreui_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+semaphoreui_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+semaphoreui_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+semaphoreui_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+semaphoreui_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+semaphoreui_role_traefik_enabled: true</span><span class="diff-line add">+semaphoreui_role_traefik_api_enabled: true</span><span class="diff-line add">+semaphoreui_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-semaphoreui_docker_container: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_container: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-semaphoreui_docker_image_pull: true</span><span class="diff-line del">-semaphoreui_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-semaphoreui_docker_image: &quot;semaphoreui/semaphore:{{ semaphoreui_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-semaphoreui_docker_ports_defaults: []</span><span class="diff-line del">-semaphoreui_docker_ports_custom: []</span><span class="diff-line del">-semaphoreui_docker_ports: &quot;{{ semaphoreui_docker_ports_defaults</span><span class="diff-line del">-                         + semaphoreui_docker_ports_custom }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_image_pull: true</span><span class="diff-line add">+semaphoreui_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+semaphoreui_role_docker_image_repo: &quot;semaphoreui/semaphore&quot;</span><span class="diff-line add">+semaphoreui_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;semaphoreui&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-semaphoreui_docker_envs_default:</span><span class="diff-line del">-  - SEMAPHORE_DB_USER: semaphoreui</span><span class="diff-line del">-  - SEMAPHORE_DB_PASS: semaphoreui</span><span class="diff-line del">-  - SEMAPHORE_DB_HOST: &quot;{{ semaphoreui_postgres_name }}&quot; # for postgres, change to: postgres</span><span class="diff-line del">-  - SEMAPHORE_DB_PORT: &quot;5432&quot; # change to 5432 for postgres</span><span class="diff-line del">-  - SEMAPHORE_DB_DIALECT: postgres # for postgres, change to: postgres</span><span class="diff-line del">-  - SEMAPHORE_DB: semaphoreui</span><span class="diff-line del">-  - SEMAPHORE_PLAYBOOK_PATH: &quot;{{ semaphoreui_paths_location }}/playbooks&quot;</span><span class="diff-line del">-  - SEMAPHORE_ADMIN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-  - SEMAPHORE_ADMIN_NAME: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-  - SEMAPHORE_ADMIN_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line del">-  - SEMAPHORE_ADMIN: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-  - SEMAPHORE_ACCESS_KEY_ENCRYPTION: &quot;{{ semaphoreui_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line del">-  - TZ: &quot;{{ timezone }}&quot;</span><span class="diff-line del">-semaphoreui_docker_envs_custom: {}</span><span class="diff-line del">-semaphoreui_docker_envs: &quot;{{ semaphoreui_docker_envs_default</span><span class="diff-line del">-                        | combine(semaphoreui_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-semaphoreui_docker_commands_default: []</span><span class="diff-line del">-semaphoreui_docker_commands_custom: []</span><span class="diff-line del">-semaphoreui_docker_commands: &quot;{{ semaphoreui_docker_commands_default</span><span class="diff-line del">-                            + semaphoreui_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-semaphoreui_docker_volumes_default: []</span><span class="diff-line del">-semaphoreui_docker_volumes_custom: []</span><span class="diff-line del">-semaphoreui_docker_volumes: &quot;{{ semaphoreui_docker_volumes_default</span><span class="diff-line del">-                           + semaphoreui_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-semaphoreui_docker_devices_default: []</span><span class="diff-line del">-semaphoreui_docker_devices_custom: []</span><span class="diff-line del">-semaphoreui_docker_devices: &quot;{{ semaphoreui_docker_devices_default</span><span class="diff-line del">-                           + semaphoreui_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-semaphoreui_docker_hosts_default: {}</span><span class="diff-line del">-semaphoreui_docker_hosts_custom: {}</span><span class="diff-line del">-semaphoreui_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(semaphoreui_docker_hosts_default)</span><span class="diff-line del">-                         | combine(semaphoreui_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-semaphoreui_docker_labels_default: {}</span><span class="diff-line del">-semaphoreui_docker_labels_custom: {}</span><span class="diff-line del">-semaphoreui_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(semaphoreui_docker_labels_default)</span><span class="diff-line del">-                          | combine(semaphoreui_docker_labels_custom) }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_envs_default:</span><span class="diff-line add">+  SEMAPHORE_DB_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+  SEMAPHORE_DB_PASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+  SEMAPHORE_DB_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+  SEMAPHORE_DB_PORT: &quot;5432&quot;</span><span class="diff-line add">+  SEMAPHORE_DB_DIALECT: &quot;postgres&quot;</span><span class="diff-line add">+  SEMAPHORE_DB: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+  SEMAPHORE_PLAYBOOK_PATH: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;semaphoreui&#x27;) }}/playbooks&quot;</span><span class="diff-line add">+  SEMAPHORE_ADMIN_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line add">+  SEMAPHORE_ADMIN_NAME: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+  SEMAPHORE_ADMIN_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line add">+  SEMAPHORE_ADMIN: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+  SEMAPHORE_ACCESS_KEY_ENCRYPTION: &quot;{{ semaphoreui_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line add">+  TZ: &quot;{{ timezone }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_envs_custom: {}</span><span class="diff-line add">+semaphoreui_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;semaphoreui&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;semaphoreui&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-semaphoreui_docker_hostname: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_hostname: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-semaphoreui_docker_networks_alias: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line del">-semaphoreui_docker_networks_default: []</span><span class="diff-line del">-semaphoreui_docker_networks_custom: []</span><span class="diff-line del">-semaphoreui_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + semaphoreui_docker_networks_default</span><span class="diff-line del">-                            + semaphoreui_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-semaphoreui_docker_capabilities_default: []</span><span class="diff-line del">-semaphoreui_docker_capabilities_custom: []</span><span class="diff-line del">-semaphoreui_docker_capabilities: &quot;{{ semaphoreui_docker_capabilities_default</span><span class="diff-line del">-                                + semaphoreui_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-semaphoreui_docker_security_opts_default: []</span><span class="diff-line del">-semaphoreui_docker_security_opts_custom: []</span><span class="diff-line del">-semaphoreui_docker_security_opts: &quot;{{ semaphoreui_docker_security_opts_default</span><span class="diff-line del">-                                 + semaphoreui_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_networks_alias: &quot;{{ semaphoreui_name }}&quot;</span><span class="diff-line add">+semaphoreui_role_docker_networks_default: []</span><span class="diff-line add">+semaphoreui_role_docker_networks_custom: []</span><span class="diff-line add">+semaphoreui_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;semaphoreui&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-semaphoreui_docker_restart_policy: unless-stopped</span><span class="diff-line add">+semaphoreui_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-semaphoreui_docker_state: started</span><span class="diff-line add">+semaphoreui_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-semaphoreui_depends_on: &quot;{{ semaphoreui_postgres_name }}&quot;</span><span class="diff-line del">-semaphoreui_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-semaphoreui_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+semaphoreui_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+semaphoreui_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+semaphoreui_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-345">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/semaphoreui/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,28 +10,29 @@</span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ semaphoreui_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ semaphoreui_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-</span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ semaphoreui_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ semaphoreui_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ semaphoreui_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ semaphoreui_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_env_user: &quot;{{ semaphoreui_postgres_docker_env_user }}&quot;</span><span class="diff-line del">-    postgres_docker_env_password: &quot;{{ semaphoreui_postgres_docker_env_password }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ semaphoreui_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ semaphoreui_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;semaphoreui&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;semaphoreui&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -45,6 +46,7 @@</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0755&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: semaphoreui_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-346">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/speedtest/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,144 +17,101 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-speedtest_paths_folder: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line del">-speedtest_paths_location: &quot;{{ server_appdata_path }}/{{ speedtest_paths_folder }}&quot;</span><span class="diff-line del">-speedtest_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ speedtest_paths_location }}&quot;</span><span class="diff-line add">+speedtest_role_paths_folder: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line add">+speedtest_role_paths_location: &quot;{{ server_appdata_path }}/{{ speedtest_role_paths_folder }}&quot;</span><span class="diff-line add">+speedtest_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ speedtest_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-speedtest_web_subdomain: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line del">-speedtest_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-speedtest_web_port: &quot;80&quot;</span><span class="diff-line del">-speedtest_web_url: &quot;{{ &#x27;https://&#x27; + (speedtest_web_subdomain + &#x27;.&#x27; + speedtest_web_domain</span><span class="diff-line del">-                    if (speedtest_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else speedtest_web_domain) }}&quot;</span><span class="diff-line add">+speedtest_role_web_subdomain: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line add">+speedtest_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+speedtest_role_web_port: &quot;80&quot;</span><span class="diff-line add">+speedtest_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;speedtest&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;speedtest&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;speedtest&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;speedtest&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-speedtest_dns_record: &quot;{{ speedtest_web_subdomain }}&quot;</span><span class="diff-line del">-speedtest_dns_zone: &quot;{{ speedtest_web_domain }}&quot;</span><span class="diff-line del">-speedtest_dns_proxy: false</span><span class="diff-line add">+speedtest_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line add">+speedtest_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line add">+speedtest_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-speedtest_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-speedtest_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-speedtest_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-speedtest_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-speedtest_traefik_enabled: true</span><span class="diff-line del">-speedtest_traefik_api_enabled: false</span><span class="diff-line del">-speedtest_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+speedtest_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+speedtest_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+speedtest_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+speedtest_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+speedtest_role_traefik_enabled: true</span><span class="diff-line add">+speedtest_role_traefik_api_enabled: false</span><span class="diff-line add">+speedtest_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line del">-# THEME</span><span class="diff-line add">+# Theme</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Options can be found at https://github.com/themepark-dev/theme.park</span><span class="diff-line del">-speedtest_themepark_enabled: false</span><span class="diff-line del">-speedtest_themepark_theme: &quot;{{ global_themepark_theme }}&quot;</span><span class="diff-line del">-speedtest_themepark_domain: &quot;{{ global_themepark_domain }}&quot;</span><span class="diff-line add">+speedtest_role_themepark_enabled: false</span><span class="diff-line add">+speedtest_role_themepark_theme: &quot;{{ global_themepark_theme }}&quot;</span><span class="diff-line add">+speedtest_role_themepark_domain: &quot;{{ global_themepark_domain }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-speedtest_docker_container: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line add">+speedtest_role_docker_container: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-speedtest_docker_image_pull: true</span><span class="diff-line del">-speedtest_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-speedtest_docker_image: &quot;lscr.io/linuxserver/librespeed:{{ speedtest_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-speedtest_docker_ports_defaults: []</span><span class="diff-line del">-speedtest_docker_ports_custom: []</span><span class="diff-line del">-speedtest_docker_ports: &quot;{{ speedtest_docker_ports_defaults</span><span class="diff-line del">-                            + speedtest_docker_ports_custom }}&quot;</span><span class="diff-line add">+speedtest_role_docker_image_pull: true</span><span class="diff-line add">+speedtest_role_docker_image_repo: &quot;lscr.io/linuxserver/librespeed&quot;</span><span class="diff-line add">+speedtest_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+speedtest_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;speedtest&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-speedtest_docker_envs_default:</span><span class="diff-line add">+speedtest_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line context">   DB_TYPE: &quot;sqlite&quot;</span><span class="diff-line del">-  DOCKER_MODS: &quot;{{ &#x27;ghcr.io/themepark-dev/theme.park:librespeed&#x27; if speedtest_themepark_enabled else omit }}&quot;</span><span class="diff-line del">-  TP_DOMAIN: &quot;{{ lookup(&#x27;vars&#x27;, speedtest_name + &#x27;_themepark_domain&#x27;, default=speedtest_themepark_domain) }}&quot;</span><span class="diff-line del">-  TP_THEME: &quot;{{ lookup(&#x27;vars&#x27;, speedtest_name + &#x27;_themepark_theme&#x27;, default=speedtest_themepark_theme) }}&quot;</span><span class="diff-line del">-speedtest_docker_envs_custom: {}</span><span class="diff-line del">-speedtest_docker_envs: &quot;{{ speedtest_docker_envs_default</span><span class="diff-line del">-                           | combine(speedtest_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-speedtest_docker_commands_default: []</span><span class="diff-line del">-speedtest_docker_commands_custom: []</span><span class="diff-line del">-speedtest_docker_commands: &quot;{{ speedtest_docker_commands_default</span><span class="diff-line del">-                               + speedtest_docker_commands_custom }}&quot;</span><span class="diff-line add">+  DOCKER_MODS: &quot;{{ &#x27;ghcr.io/themepark-dev/theme.park:librespeed&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_themepark_enabled&#x27;, role=&#x27;speedtest&#x27;) else omit }}&quot;</span><span class="diff-line add">+  TP_DOMAIN: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_themepark_domain&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line add">+  TP_THEME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_themepark_theme&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line add">+speedtest_role_docker_envs_custom: {}</span><span class="diff-line add">+speedtest_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;speedtest&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;speedtest&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-speedtest_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ speedtest_paths_location }}:/config&quot;</span><span class="diff-line del">-speedtest_docker_volumes_custom: []</span><span class="diff-line del">-speedtest_docker_volumes: &quot;{{ speedtest_docker_volumes_default</span><span class="diff-line del">-                              + speedtest_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-speedtest_docker_devices_default: []</span><span class="diff-line del">-speedtest_docker_devices_custom: []</span><span class="diff-line del">-speedtest_docker_devices: &quot;{{ speedtest_docker_devices_default</span><span class="diff-line del">-                              + speedtest_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-speedtest_docker_hosts_default: {}</span><span class="diff-line del">-speedtest_docker_hosts_custom: {}</span><span class="diff-line del">-speedtest_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(speedtest_docker_hosts_default)</span><span class="diff-line del">-                            | combine(speedtest_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-speedtest_docker_labels_default: {}</span><span class="diff-line del">-speedtest_docker_labels_custom: {}</span><span class="diff-line del">-speedtest_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(speedtest_docker_labels_default)</span><span class="diff-line del">-                             | combine(speedtest_docker_labels_custom) }}&quot;</span><span class="diff-line add">+speedtest_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;speedtest&#x27;) }}:/config&quot;</span><span class="diff-line add">+speedtest_role_docker_volumes_custom: []</span><span class="diff-line add">+speedtest_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;speedtest&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-speedtest_docker_hostname: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line add">+speedtest_role_docker_hostname: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-speedtest_docker_networks_alias: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line del">-speedtest_docker_networks_default: []</span><span class="diff-line del">-speedtest_docker_networks_custom: []</span><span class="diff-line del">-speedtest_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + speedtest_docker_networks_default</span><span class="diff-line del">-                               + speedtest_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-speedtest_docker_capabilities_default: []</span><span class="diff-line del">-speedtest_docker_capabilities_custom: []</span><span class="diff-line del">-speedtest_docker_capabilities: &quot;{{ speedtest_docker_capabilities_default</span><span class="diff-line del">-                                   + speedtest_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-speedtest_docker_security_opts_default: []</span><span class="diff-line del">-speedtest_docker_security_opts_custom: []</span><span class="diff-line del">-speedtest_docker_security_opts: &quot;{{ speedtest_docker_security_opts_default</span><span class="diff-line del">-                                    + speedtest_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+speedtest_role_docker_networks_alias: &quot;{{ speedtest_name }}&quot;</span><span class="diff-line add">+speedtest_role_docker_networks_default: []</span><span class="diff-line add">+speedtest_role_docker_networks_custom: []</span><span class="diff-line add">+speedtest_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;speedtest&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;speedtest&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-speedtest_docker_restart_policy: unless-stopped</span><span class="diff-line add">+speedtest_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-speedtest_docker_state: started</span><span class="diff-line add">+speedtest_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Force Kill</span><span class="diff-line del">-speedtest_docker_force_kill: yes</span><span class="diff-line add">+speedtest_role_docker_force_kill: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-347">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/speedtest/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-348">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sqlitebrowser/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sqlitebrowser_paths_folder: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line del">-sqlitebrowser_paths_location: &quot;{{ server_appdata_path }}/{{ sqlitebrowser_paths_folder }}&quot;</span><span class="diff-line del">-sqlitebrowser_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ sqlitebrowser_paths_location }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_paths_folder: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_paths_location: &quot;{{ server_appdata_path }}/{{ sqlitebrowser_role_paths_folder }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ sqlitebrowser_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sqlitebrowser_web_subdomain: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line del">-sqlitebrowser_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-sqlitebrowser_web_port: &quot;3000&quot;</span><span class="diff-line del">-sqlitebrowser_web_url: &quot;{{ &#x27;https://&#x27; + (sqlitebrowser_web_subdomain + &#x27;.&#x27; + sqlitebrowser_web_domain</span><span class="diff-line del">-                        if (sqlitebrowser_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else sqlitebrowser_web_domain) }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_web_subdomain: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+sqlitebrowser_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sqlitebrowser&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sqlitebrowser&#x27;)</span><span class="diff-line add">+                             if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sqlitebrowser&#x27;) | length &gt; 0)</span><span class="diff-line add">+                             else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sqlitebrowser&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sqlitebrowser_dns_record: &quot;{{ sqlitebrowser_web_subdomain }}&quot;</span><span class="diff-line del">-sqlitebrowser_dns_zone: &quot;{{ sqlitebrowser_web_domain }}&quot;</span><span class="diff-line del">-sqlitebrowser_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sqlitebrowser&#x27;) }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sqlitebrowser&#x27;) }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sqlitebrowser_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-sqlitebrowser_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-sqlitebrowser_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-sqlitebrowser_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-sqlitebrowser_traefik_enabled: true</span><span class="diff-line del">-sqlitebrowser_traefik_api_enabled: false</span><span class="diff-line del">-sqlitebrowser_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">-sqlitebrowser_traefik_error_pages_enabled: false</span><span class="diff-line add">+sqlitebrowser_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+sqlitebrowser_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_traefik_enabled: true</span><span class="diff-line add">+sqlitebrowser_role_traefik_api_enabled: false</span><span class="diff-line add">+sqlitebrowser_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+sqlitebrowser_role_traefik_error_pages_enabled: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-sqlitebrowser_docker_container: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_container: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-sqlitebrowser_docker_image_pull: true</span><span class="diff-line del">-sqlitebrowser_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-sqlitebrowser_docker_image: &quot;lscr.io/linuxserver/sqlitebrowser:{{ sqlitebrowser_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-sqlitebrowser_docker_ports_defaults: []</span><span class="diff-line del">-sqlitebrowser_docker_ports_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_ports: &quot;{{ sqlitebrowser_docker_ports_defaults</span><span class="diff-line del">-                                + sqlitebrowser_docker_ports_custom }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_image_pull: true</span><span class="diff-line add">+sqlitebrowser_role_docker_image_repo: &quot;lscr.io/linuxserver/sqlitebrowser&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;sqlitebrowser&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;sqlitebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-sqlitebrowser_docker_envs_default:</span><span class="diff-line add">+sqlitebrowser_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-sqlitebrowser_docker_envs_custom: {}</span><span class="diff-line del">-sqlitebrowser_docker_envs: &quot;{{ sqlitebrowser_docker_envs_default</span><span class="diff-line del">-                               | combine(sqlitebrowser_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-sqlitebrowser_docker_commands_default: []</span><span class="diff-line del">-sqlitebrowser_docker_commands_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_commands: &quot;{{ sqlitebrowser_docker_commands_default</span><span class="diff-line del">-                                   + sqlitebrowser_docker_commands_custom }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_envs_custom: {}</span><span class="diff-line add">+sqlitebrowser_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;sqlitebrowser&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;sqlitebrowser&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-sqlitebrowser_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ sqlitebrowser_paths_location }}:/config&quot;</span><span class="diff-line del">-sqlitebrowser_docker_volumes_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_volumes: &quot;{{ sqlitebrowser_docker_volumes_default</span><span class="diff-line del">-                                  + sqlitebrowser_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-sqlitebrowser_docker_devices_default: []</span><span class="diff-line del">-sqlitebrowser_docker_devices_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_devices: &quot;{{ sqlitebrowser_docker_devices_default</span><span class="diff-line del">-                                  + sqlitebrowser_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-sqlitebrowser_docker_hosts_default: {}</span><span class="diff-line del">-sqlitebrowser_docker_hosts_custom: {}</span><span class="diff-line del">-sqlitebrowser_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(sqlitebrowser_docker_hosts_default)</span><span class="diff-line del">-                                | combine(sqlitebrowser_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-sqlitebrowser_docker_labels_default: {}</span><span class="diff-line del">-sqlitebrowser_docker_labels_custom: {}</span><span class="diff-line del">-sqlitebrowser_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(sqlitebrowser_docker_labels_default)</span><span class="diff-line del">-                                 | combine(sqlitebrowser_docker_labels_custom) }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;sqlitebrowser&#x27;) }}:/config&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_volumes_custom: []</span><span class="diff-line add">+sqlitebrowser_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;sqlitebrowser&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;sqlitebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-sqlitebrowser_docker_hostname: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_hostname: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-sqlitebrowser_docker_networks_alias: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line del">-sqlitebrowser_docker_networks_default: []</span><span class="diff-line del">-sqlitebrowser_docker_networks_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + sqlitebrowser_docker_networks_default</span><span class="diff-line del">-                                   + sqlitebrowser_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-sqlitebrowser_docker_capabilities_default: []</span><span class="diff-line del">-sqlitebrowser_docker_capabilities_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_capabilities: &quot;{{ sqlitebrowser_docker_capabilities_default</span><span class="diff-line del">-                                       + sqlitebrowser_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-sqlitebrowser_docker_security_opts_default: []</span><span class="diff-line del">-sqlitebrowser_docker_security_opts_custom: []</span><span class="diff-line del">-sqlitebrowser_docker_security_opts: &quot;{{ sqlitebrowser_docker_security_opts_default</span><span class="diff-line del">-                                        + sqlitebrowser_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_networks_alias: &quot;{{ sqlitebrowser_name }}&quot;</span><span class="diff-line add">+sqlitebrowser_role_docker_networks_default: []</span><span class="diff-line add">+sqlitebrowser_role_docker_networks_custom: []</span><span class="diff-line add">+sqlitebrowser_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;sqlitebrowser&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;sqlitebrowser&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-sqlitebrowser_docker_restart_policy: unless-stopped</span><span class="diff-line add">+sqlitebrowser_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-sqlitebrowser_docker_state: started</span><span class="diff-line add">+sqlitebrowser_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-349">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sqlitebrowser/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-350">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sshwifty/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sshwifty_paths_folder: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line del">-sshwifty_paths_location: &quot;{{ server_appdata_path }}/{{ sshwifty_paths_folder }}&quot;</span><span class="diff-line del">-sshwifty_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ sshwifty_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ sshwifty_paths_location }}/config&quot;</span><span class="diff-line del">-sshwifty_paths_config_location: &quot;{{ sshwifty_paths_location }}/config/sshwifty.conf.json&quot;</span><span class="diff-line add">+sshwifty_role_paths_folder: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line add">+sshwifty_role_paths_location: &quot;{{ server_appdata_path }}/{{ sshwifty_role_paths_folder }}&quot;</span><span class="diff-line add">+sshwifty_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ sshwifty_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ sshwifty_role_paths_location }}/config&quot;</span><span class="diff-line add">+sshwifty_role_paths_config_location: &quot;{{ sshwifty_role_paths_location }}/config/sshwifty.conf.json&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sshwifty_web_subdomain: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line del">-sshwifty_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-sshwifty_web_port: &quot;8182&quot;</span><span class="diff-line del">-sshwifty_web_url: &quot;{{ &#x27;https://&#x27; + (sshwifty_web_subdomain + &#x27;.&#x27; + sshwifty_web_domain</span><span class="diff-line del">-                   if (sshwifty_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else sshwifty_web_domain) }}&quot;</span><span class="diff-line add">+sshwifty_role_web_subdomain: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line add">+sshwifty_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+sshwifty_role_web_port: &quot;8182&quot;</span><span class="diff-line add">+sshwifty_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sshwifty&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sshwifty&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sshwifty&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sshwifty&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sshwifty_dns_record: &quot;{{ sshwifty_web_subdomain }}&quot;</span><span class="diff-line del">-sshwifty_dns_zone: &quot;{{ sshwifty_web_domain }}&quot;</span><span class="diff-line del">-sshwifty_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+sshwifty_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sshwifty&#x27;) }}&quot;</span><span class="diff-line add">+sshwifty_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sshwifty&#x27;) }}&quot;</span><span class="diff-line add">+sshwifty_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-sshwifty_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-sshwifty_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-sshwifty_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-sshwifty_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-sshwifty_traefik_enabled: true</span><span class="diff-line del">-sshwifty_traefik_api_enabled: false</span><span class="diff-line del">-sshwifty_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line del">-sshwifty_traefik_error_pages_enabled: false</span><span class="diff-line add">+sshwifty_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+sshwifty_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+sshwifty_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+sshwifty_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+sshwifty_role_traefik_enabled: true</span><span class="diff-line add">+sshwifty_role_traefik_api_enabled: false</span><span class="diff-line add">+sshwifty_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+sshwifty_role_traefik_error_pages_enabled: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-sshwifty_docker_container: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_container: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-sshwifty_docker_image_pull: true</span><span class="diff-line del">-sshwifty_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-sshwifty_docker_image: &quot;niruix/sshwifty:{{ sshwifty_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-sshwifty_docker_ports_defaults: []</span><span class="diff-line del">-sshwifty_docker_ports_custom: []</span><span class="diff-line del">-sshwifty_docker_ports: &quot;{{ sshwifty_docker_ports_defaults</span><span class="diff-line del">-                           + sshwifty_docker_ports_custom }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_image_pull: true</span><span class="diff-line add">+sshwifty_role_docker_image_repo: &quot;niruix/sshwifty&quot;</span><span class="diff-line add">+sshwifty_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+sshwifty_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;sshwifty&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;sshwifty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-sshwifty_docker_envs_default:</span><span class="diff-line add">+sshwifty_role_docker_envs_default:</span><span class="diff-line context">   SSHWIFTY_CONFIG: &quot;/config/sshwifty.conf.json&quot;</span><span class="diff-line del">-sshwifty_docker_envs_custom: {}</span><span class="diff-line del">-sshwifty_docker_envs: &quot;{{ sshwifty_docker_envs_default</span><span class="diff-line del">-                          | combine(sshwifty_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-sshwifty_docker_commands_default: []</span><span class="diff-line del">-sshwifty_docker_commands_custom: []</span><span class="diff-line del">-sshwifty_docker_commands: &quot;{{ sshwifty_docker_commands_default</span><span class="diff-line del">-                              + sshwifty_docker_commands_custom }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_envs_custom: {}</span><span class="diff-line add">+sshwifty_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;sshwifty&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;sshwifty&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-sshwifty_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ sshwifty_paths_location }}/config:/config&quot;</span><span class="diff-line del">-sshwifty_docker_volumes_custom: []</span><span class="diff-line del">-sshwifty_docker_volumes: &quot;{{ sshwifty_docker_volumes_default</span><span class="diff-line del">-                             + sshwifty_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-sshwifty_docker_devices_default: []</span><span class="diff-line del">-sshwifty_docker_devices_custom: []</span><span class="diff-line del">-sshwifty_docker_devices: &quot;{{ sshwifty_docker_devices_default</span><span class="diff-line del">-                             + sshwifty_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-sshwifty_docker_hosts_default: {}</span><span class="diff-line del">-sshwifty_docker_hosts_custom: {}</span><span class="diff-line del">-sshwifty_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(sshwifty_docker_hosts_default)</span><span class="diff-line del">-                           | combine(sshwifty_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-sshwifty_docker_labels_default: {}</span><span class="diff-line del">-sshwifty_docker_labels_custom: {}</span><span class="diff-line del">-sshwifty_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(sshwifty_docker_labels_default)</span><span class="diff-line del">-                            | combine(sshwifty_docker_labels_custom) }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;sshwifty&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+sshwifty_role_docker_volumes_custom: []</span><span class="diff-line add">+sshwifty_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;sshwifty&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;sshwifty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-sshwifty_docker_hostname: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_hostname: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-sshwifty_docker_networks_alias: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line del">-sshwifty_docker_networks_default: []</span><span class="diff-line del">-sshwifty_docker_networks_custom: []</span><span class="diff-line del">-sshwifty_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + sshwifty_docker_networks_default</span><span class="diff-line del">-                              + sshwifty_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-sshwifty_docker_capabilities_default: []</span><span class="diff-line del">-sshwifty_docker_capabilities_custom: []</span><span class="diff-line del">-sshwifty_docker_capabilities: &quot;{{ sshwifty_docker_capabilities_default</span><span class="diff-line del">-                                  + sshwifty_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-sshwifty_docker_security_opts_default: []</span><span class="diff-line del">-sshwifty_docker_security_opts_custom: []</span><span class="diff-line del">-sshwifty_docker_security_opts: &quot;{{ sshwifty_docker_security_opts_default</span><span class="diff-line del">-                                   + sshwifty_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_networks_alias: &quot;{{ sshwifty_name }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_networks_default: []</span><span class="diff-line add">+sshwifty_role_docker_networks_custom: []</span><span class="diff-line add">+sshwifty_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;sshwifty&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;sshwifty&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-sshwifty_docker_restart_policy: unless-stopped</span><span class="diff-line add">+sshwifty_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-sshwifty_docker_state: started</span><span class="diff-line add">+sshwifty_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-sshwifty_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+sshwifty_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-351">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sshwifty/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-352">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/sshwifty/tasks/subtasks/settings.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,18 +7,18 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Settings | Check if `{{ sshwifty_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Settings | Check if `{{ sshwifty_role_paths_config_location | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ sshwifty_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ sshwifty_role_paths_config_location }}&quot;</span><span class="diff-line context">   register: sshwifty_config</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Settings | New `{{ sshwifty_paths_config_location | basename }}` tasks</span><span class="diff-line add">+- name: Settings | New `{{ sshwifty_role_paths_config_location | basename }}` tasks</span><span class="diff-line context">   when: not sshwifty_config.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line del">-    - name: Settings | Import default `{{ sshwifty_paths_config_location | basename }}`</span><span class="diff-line add">+    - name: Settings | Import default `{{ sshwifty_role_paths_config_location | basename }}`</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: sshwifty.conf.json.j2</span><span class="diff-line del">-        dest: &quot;{{ sshwifty_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ sshwifty_role_paths_config_location }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-353">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/stash/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,136 +17,93 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-stash_paths_folder: &quot;{{ stash_name }}&quot;</span><span class="diff-line del">-stash_paths_location: &quot;{{ server_appdata_path }}/{{ stash_paths_folder }}&quot;</span><span class="diff-line del">-stash_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/metadata&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/cache&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/generated&quot;</span><span class="diff-line add">+stash_role_paths_folder: &quot;{{ stash_name }}&quot;</span><span class="diff-line add">+stash_role_paths_location: &quot;{{ server_appdata_path }}/{{ stash_role_paths_folder }}&quot;</span><span class="diff-line add">+stash_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ stash_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ stash_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ stash_role_paths_location }}/metadata&quot;</span><span class="diff-line add">+  - &quot;{{ stash_role_paths_location }}/cache&quot;</span><span class="diff-line add">+  - &quot;{{ stash_role_paths_location }}/generated&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Adult&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-stash_web_subdomain: &quot;{{ stash_name }}&quot;</span><span class="diff-line del">-stash_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-stash_web_port: &quot;9999&quot;</span><span class="diff-line del">-stash_web_url: &quot;{{ &#x27;https://&#x27; + (stash_web_subdomain + &#x27;.&#x27; + stash_web_domain</span><span class="diff-line del">-                if (stash_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else stash_web_domain) }}&quot;</span><span class="diff-line add">+stash_role_web_subdomain: &quot;{{ stash_name }}&quot;</span><span class="diff-line add">+stash_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+stash_role_web_port: &quot;9999&quot;</span><span class="diff-line add">+stash_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;stash&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;stash&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;stash&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;stash&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-stash_dns_record: &quot;{{ stash_web_subdomain }}&quot;</span><span class="diff-line del">-stash_dns_zone: &quot;{{ stash_web_domain }}&quot;</span><span class="diff-line del">-stash_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+stash_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;stash&#x27;) }}&quot;</span><span class="diff-line add">+stash_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;stash&#x27;) }}&quot;</span><span class="diff-line add">+stash_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-stash_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-stash_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-stash_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-stash_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-stash_traefik_enabled: true</span><span class="diff-line del">-stash_traefik_api_enabled: false</span><span class="diff-line del">-stash_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+stash_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+stash_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+stash_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+stash_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+stash_role_traefik_enabled: true</span><span class="diff-line add">+stash_role_traefik_api_enabled: false</span><span class="diff-line add">+stash_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-stash_docker_container: &quot;{{ stash_name }}&quot;</span><span class="diff-line add">+stash_role_docker_container: &quot;{{ stash_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-stash_docker_image_pull: true</span><span class="diff-line del">-stash_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-stash_docker_image: &quot;ghcr.io/hotio/stash:{{ stash_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-stash_docker_ports_defaults: []</span><span class="diff-line del">-stash_docker_ports_custom: []</span><span class="diff-line del">-stash_docker_ports: &quot;{{ stash_docker_ports_defaults</span><span class="diff-line del">-                        + stash_docker_ports_custom }}&quot;</span><span class="diff-line add">+stash_role_docker_image_pull: true</span><span class="diff-line add">+stash_role_docker_image_repo: &quot;ghcr.io/hotio/stash&quot;</span><span class="diff-line add">+stash_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+stash_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;stash&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;stash&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-stash_docker_envs_default:</span><span class="diff-line add">+stash_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-stash_docker_envs_custom: {}</span><span class="diff-line del">-stash_docker_envs: &quot;{{ stash_docker_envs_default</span><span class="diff-line del">-                       | combine(stash_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-stash_docker_commands_default: []</span><span class="diff-line del">-stash_docker_commands_custom: []</span><span class="diff-line del">-stash_docker_commands: &quot;{{ stash_docker_commands_default</span><span class="diff-line del">-                           + stash_docker_commands_custom }}&quot;</span><span class="diff-line add">+stash_role_docker_envs_custom: {}</span><span class="diff-line add">+stash_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;stash&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;stash&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-stash_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/metadata:/metadata&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/cache:/cache&quot;</span><span class="diff-line del">-  - &quot;{{ stash_paths_location }}/generated:/generated&quot;</span><span class="diff-line add">+stash_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;stash&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;stash&#x27;) }}/metadata:/metadata&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;stash&#x27;) }}/cache:/cache&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;stash&#x27;) }}/generated:/generated&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Adult:/data&quot;</span><span class="diff-line del">-stash_docker_volumes_custom: []</span><span class="diff-line del">-stash_docker_volumes: &quot;{{ stash_docker_volumes_default</span><span class="diff-line del">-                          + stash_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-stash_docker_devices_default: []</span><span class="diff-line del">-stash_docker_devices_custom: []</span><span class="diff-line del">-stash_docker_devices: &quot;{{ stash_docker_devices_default</span><span class="diff-line del">-                          + stash_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-stash_docker_hosts_default: {}</span><span class="diff-line del">-stash_docker_hosts_custom: {}</span><span class="diff-line del">-stash_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(stash_docker_hosts_default)</span><span class="diff-line del">-                        | combine(stash_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-stash_docker_labels_default: {}</span><span class="diff-line del">-stash_docker_labels_custom: {}</span><span class="diff-line del">-stash_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(stash_docker_labels_default)</span><span class="diff-line del">-                         | combine(stash_docker_labels_custom) }}&quot;</span><span class="diff-line add">+stash_role_docker_volumes_custom: []</span><span class="diff-line add">+stash_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;stash&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;stash&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-stash_docker_hostname: &quot;{{ stash_name }}&quot;</span><span class="diff-line add">+stash_role_docker_hostname: &quot;{{ stash_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-stash_docker_networks_alias: &quot;{{ stash_name }}&quot;</span><span class="diff-line del">-stash_docker_networks_default: []</span><span class="diff-line del">-stash_docker_networks_custom: []</span><span class="diff-line del">-stash_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + stash_docker_networks_default</span><span class="diff-line del">-                           + stash_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-stash_docker_capabilities_default: []</span><span class="diff-line del">-stash_docker_capabilities_custom: []</span><span class="diff-line del">-stash_docker_capabilities: &quot;{{ stash_docker_capabilities_default</span><span class="diff-line del">-                               + stash_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-stash_docker_security_opts_default: []</span><span class="diff-line del">-stash_docker_security_opts_custom: []</span><span class="diff-line del">-stash_docker_security_opts: &quot;{{ stash_docker_security_opts_default</span><span class="diff-line del">-                                + stash_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+stash_role_docker_networks_alias: &quot;{{ stash_name }}&quot;</span><span class="diff-line add">+stash_role_docker_networks_default: []</span><span class="diff-line add">+stash_role_docker_networks_custom: []</span><span class="diff-line add">+stash_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;stash&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;stash&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-stash_docker_restart_policy: unless-stopped</span><span class="diff-line add">+stash_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-stash_docker_state: started</span><span class="diff-line add">+stash_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-354">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/stash/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,11 +22,11 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Set auth entries in config&quot;</span><span class="diff-line context">   ansible.builtin.import_tasks: &quot;subtasks/auth.yml&quot;</span><span class="diff-line del">-  when: (stash_traefik_sso_middleware | length &gt; 0) and (not continuous_integration)</span><span class="diff-line add">+  when: (stash_role_traefik_sso_middleware | length &gt; 0) and (not continuous_integration)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-355">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/stash/tasks/subtasks/auth.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,18 +9,18 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Auth | Check if &#x27;config.yml&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ stash_paths_location }}/config/config.yml&quot;</span><span class="diff-line add">+    path: &quot;{{ stash_role_paths_location }}/config/config.yml&quot;</span><span class="diff-line context">   register: stash_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Auth | Print Message</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line context">     msg:</span><span class="diff-line del">-      - &quot;Please go to {{ stash_web_url }} and complete the initial setup.&quot;</span><span class="diff-line add">+      - &quot;Please go to {{ stash_role_web_url }} and complete the initial setup.&quot;</span><span class="diff-line context">       - &quot;You have 10 minutes to finish.&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Auth | Wait for &#x27;config.yml&#x27; to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ stash_paths_location }}/config/config.yml&quot;</span><span class="diff-line add">+    path: &quot;{{ stash_role_paths_location }}/config/config.yml&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">     timeout: 600</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -29,13 +29,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Allow public access without auth</span><span class="diff-line context">   ansible.builtin.shell: |</span><span class="diff-line del">-    yyq -i &#x27;.dangerous_allow_public_without_auth = &quot;true&quot;&#x27; {{ stash_paths_location }}/config/config.yml</span><span class="diff-line add">+    yyq -i &#x27;.dangerous_allow_public_without_auth = &quot;true&quot;&#x27; {{ stash_role_paths_location }}/config/config.yml</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove tripwire</span><span class="diff-line context">   ansible.builtin.shell: |</span><span class="diff-line del">-    yyq -i &#x27;del(.security_tripwire_accessed_from_public_internet)&#x27; {{ stash_paths_location }}/config/config.yml</span><span class="diff-line add">+    yyq -i &#x27;del(.security_tripwire_accessed_from_public_internet)&#x27; {{ stash_role_paths_location }}/config/config.yml</span><span class="diff-line context">   become: true</span><span class="diff-line context">   become_user: &quot;{{ user.name }}&quot;</span><span class="diff-line context"> </span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-356">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/suwayomi/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,11 +1,11 @@</span><span class="diff-line del">-##########################################################################</span><span class="diff-line del">-# Title:         Sandbox: Suwayomi | Default Variables                   #</span><span class="diff-line del">-# Author(s):     JohnClementine                                          #</span><span class="diff-line del">-# URL:           https://github.com/saltyorg/Sandbox                     #</span><span class="diff-line del">-# --                                                                     #</span><span class="diff-line del">-##########################################################################</span><span class="diff-line del">-#                   GNU General Public License v3.0                      #</span><span class="diff-line del">-##########################################################################</span><span class="diff-line add">+#########################################################################</span><span class="diff-line add">+# Title:            Sandbox: Suwayomi                                   #</span><span class="diff-line add">+# Author(s):        JohnClementine                                      #</span><span class="diff-line add">+# URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line add">+# --                                                                    #</span><span class="diff-line add">+#########################################################################</span><span class="diff-line add">+#                   GNU General Public License v3.0                     #</span><span class="diff-line add">+#########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Basics</span><span class="diff-line hunk">@@ -17,137 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-suwayomi_paths_folder: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line del">-suwayomi_paths_location: &quot;{{ server_appdata_path }}/{{ suwayomi_paths_folder }}&quot;</span><span class="diff-line del">-suwayomi_paths_config_location: &quot;{{ suwayomi_paths_location }}/server.conf&quot;</span><span class="diff-line del">-suwayomi_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ suwayomi_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;/mnt/local/Media/Comics&quot;</span><span class="diff-line add">+suwayomi_role_paths_folder: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line add">+suwayomi_role_paths_location: &quot;{{ server_appdata_path }}/{{ suwayomi_role_paths_folder }}&quot;</span><span class="diff-line add">+suwayomi_role_paths_config_location: &quot;{{ suwayomi_role_paths_location }}/server.conf&quot;</span><span class="diff-line add">+suwayomi_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ suwayomi_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ server_local_folder_path }}/Media/Comics&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-suwayomi_web_subdomain: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line del">-suwayomi_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-suwayomi_web_port: &quot;4567&quot;</span><span class="diff-line del">-suwayomi_web_url: &quot;{{ &#x27;https://&#x27; + (suwayomi_web_subdomain + &#x27;.&#x27; + suwayomi_web_domain</span><span class="diff-line del">-                   if (suwayomi_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else suwayomi_web_domain) }}&quot;</span><span class="diff-line add">+suwayomi_role_web_subdomain: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line add">+suwayomi_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+suwayomi_role_web_port: &quot;4567&quot;</span><span class="diff-line add">+suwayomi_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-suwayomi_dns_record: &quot;{{ suwayomi_web_subdomain }}&quot;</span><span class="diff-line del">-suwayomi_dns_zone: &quot;{{ suwayomi_web_domain }}&quot;</span><span class="diff-line del">-suwayomi_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+suwayomi_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;) }}&quot;</span><span class="diff-line add">+suwayomi_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;) }}&quot;</span><span class="diff-line add">+suwayomi_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-suwayomi_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-suwayomi_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-suwayomi_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-suwayomi_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-suwayomi_traefik_enabled: true</span><span class="diff-line del">-suwayomi_traefik_api_enabled: false</span><span class="diff-line del">-suwayomi_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+suwayomi_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+suwayomi_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+suwayomi_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+suwayomi_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+suwayomi_role_traefik_enabled: true</span><span class="diff-line add">+suwayomi_role_traefik_api_enabled: false</span><span class="diff-line add">+suwayomi_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-suwayomi_docker_container: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_container: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-suwayomi_docker_image_pull: true</span><span class="diff-line del">-suwayomi_docker_image_repo: &quot;ghcr.io/suwayomi/suwayomi-server&quot;</span><span class="diff-line del">-suwayomi_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-suwayomi_docker_image: &quot;{{ suwayomi_docker_image_repo</span><span class="diff-line del">-                           + &#x27;:&#x27; + suwayomi_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-suwayomi_docker_ports_defaults: []</span><span class="diff-line del">-suwayomi_docker_ports_custom: []</span><span class="diff-line del">-suwayomi_docker_ports: &quot;{{ suwayomi_docker_ports_defaults</span><span class="diff-line del">-                          + suwayomi_docker_ports_custom }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_image_pull: true</span><span class="diff-line add">+suwayomi_role_docker_image_repo: &quot;ghcr.io/suwayomi/suwayomi-server&quot;</span><span class="diff-line add">+suwayomi_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+suwayomi_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-suwayomi_docker_envs_default:</span><span class="diff-line add">+suwayomi_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-suwayomi_docker_envs_custom: {}</span><span class="diff-line del">-suwayomi_docker_envs: &quot;{{ suwayomi_docker_envs_default</span><span class="diff-line del">-                         | combine(suwayomi_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-suwayomi_docker_commands_default: []</span><span class="diff-line del">-suwayomi_docker_commands_custom: []</span><span class="diff-line del">-suwayomi_docker_commands: &quot;{{ suwayomi_docker_commands_default</span><span class="diff-line del">-                             + suwayomi_docker_commands_custom }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_envs_custom: {}</span><span class="diff-line add">+suwayomi_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-suwayomi_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ suwayomi_paths_location }}:/home/suwayomi/.local/share/Tachidesk&quot;</span><span class="diff-line add">+suwayomi_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;) }}:/home/suwayomi/.local/share/Tachidesk&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Comics:/comics&quot;</span><span class="diff-line del">-suwayomi_docker_volumes_custom: []</span><span class="diff-line del">-suwayomi_docker_volumes: &quot;{{ suwayomi_docker_volumes_default</span><span class="diff-line del">-                            + suwayomi_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-suwayomi_docker_devices_default: []</span><span class="diff-line del">-suwayomi_docker_devices_custom: []</span><span class="diff-line del">-suwayomi_docker_devices: &quot;{{ suwayomi_docker_devices_default</span><span class="diff-line del">-                            + suwayomi_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-suwayomi_docker_hosts_default: {}</span><span class="diff-line del">-suwayomi_docker_hosts_custom: {}</span><span class="diff-line del">-suwayomi_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(suwayomi_docker_hosts_default)</span><span class="diff-line del">-                          | combine(suwayomi_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-suwayomi_docker_labels_default: {}</span><span class="diff-line del">-suwayomi_docker_labels_custom: {}</span><span class="diff-line del">-suwayomi_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(suwayomi_docker_labels_default)</span><span class="diff-line del">-                           | combine(suwayomi_docker_labels_custom) }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_volumes_custom: []</span><span class="diff-line add">+suwayomi_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-suwayomi_docker_hostname: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-suwayomi_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-suwayomi_docker_network_mode: &quot;{{ suwayomi_docker_network_mode_default }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_hostname: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-suwayomi_docker_networks_alias: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line del">-suwayomi_docker_networks_default: []</span><span class="diff-line del">-suwayomi_docker_networks_custom: []</span><span class="diff-line del">-suwayomi_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + suwayomi_docker_networks_default</span><span class="diff-line del">-                             + suwayomi_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-suwayomi_docker_capabilities_default: []</span><span class="diff-line del">-suwayomi_docker_capabilities_custom: []</span><span class="diff-line del">-suwayomi_docker_capabilities: &quot;{{ suwayomi_docker_capabilities_default</span><span class="diff-line del">-                                 + suwayomi_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-suwayomi_docker_security_opts_default: []</span><span class="diff-line del">-suwayomi_docker_security_opts_custom: []</span><span class="diff-line del">-suwayomi_docker_security_opts: &quot;{{ suwayomi_docker_security_opts_default</span><span class="diff-line del">-                                  + suwayomi_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_networks_alias: &quot;{{ suwayomi_name }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_networks_default: []</span><span class="diff-line add">+suwayomi_role_docker_networks_custom: []</span><span class="diff-line add">+suwayomi_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-suwayomi_docker_restart_policy: unless-stopped</span><span class="diff-line add">+suwayomi_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-suwayomi_docker_state: started</span><span class="diff-line add">+suwayomi_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-suwayomi_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+suwayomi_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-357">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/suwayomi/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,6 +1,6 @@</span><span class="diff-line context"> #########################################################################</span><span class="diff-line del">-# Title:         Sandbox: Suwayomi | Default Variables                  #</span><span class="diff-line del">-# Author(s):     JohnClementine                                         #</span><span class="diff-line add">+# Title:            Sandbox: Suwayomi                                   #</span><span class="diff-line add">+# Author(s):        JohnClementine                                      #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                 #</span><span class="diff-line context"> # --                                                                    #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ suwayomi_dns_record }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ suwayomi_dns_zone }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ suwayomi_dns_proxy }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,9 +20,9 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ suwayomi_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;) | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ suwayomi_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;) }}&quot;</span><span class="diff-line context">   register: suwayomi_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line hunk">@@ -30,7 +30,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Wait for config file to be generated</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ suwayomi_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;) }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context">     timeout: 60</span><span class="diff-line context">   when: (not suwayomi_config.stat.exists) and (not continuous_integration)</span><span class="diff-line hunk">@@ -41,7 +41,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set downloads path in config</span><span class="diff-line context">   ansible.builtin.lineinfile:</span><span class="diff-line del">-    path: &quot;{{ suwayomi_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_config_location&#x27;) }}&quot;</span><span class="diff-line context">     regexp: &#x27;^server\.downloadsPath\s*=&#x27;</span><span class="diff-line context">     line: &#x27;server.downloadsPath = &quot;/comics&quot;&#x27;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-358">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/syncthing/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,130 +17,93 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-syncthing_paths_folder: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line del">-syncthing_paths_location: &quot;{{ server_appdata_path }}/{{ syncthing_paths_folder }}&quot;</span><span class="diff-line del">-syncthing_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ syncthing_paths_location }}&quot;</span><span class="diff-line add">+syncthing_role_paths_folder: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line add">+syncthing_role_paths_location: &quot;{{ server_appdata_path }}/{{ syncthing_role_paths_folder }}&quot;</span><span class="diff-line add">+syncthing_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ syncthing_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-syncthing_web_subdomain: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line del">-syncthing_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-syncthing_web_port: &quot;8384&quot;</span><span class="diff-line del">-syncthing_web_url: &quot;{{ &#x27;https://&#x27; + (syncthing_web_subdomain + &#x27;.&#x27; + syncthing_web_domain</span><span class="diff-line del">-                    if (syncthing_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else syncthing_web_domain) }}&quot;</span><span class="diff-line add">+syncthing_role_web_subdomain: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line add">+syncthing_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+syncthing_role_web_port: &quot;8384&quot;</span><span class="diff-line add">+syncthing_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;syncthing&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;syncthing&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;syncthing&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;syncthing&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-syncthing_dns_record: &quot;{{ syncthing_web_subdomain }}&quot;</span><span class="diff-line del">-syncthing_dns_zone: &quot;{{ syncthing_web_domain }}&quot;</span><span class="diff-line del">-syncthing_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+syncthing_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line add">+syncthing_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line add">+syncthing_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-syncthing_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-syncthing_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-syncthing_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-syncthing_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-syncthing_traefik_enabled: true</span><span class="diff-line del">-syncthing_traefik_api_enabled: false</span><span class="diff-line del">-syncthing_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+syncthing_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+syncthing_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+syncthing_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+syncthing_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+syncthing_role_traefik_enabled: true</span><span class="diff-line add">+syncthing_role_traefik_api_enabled: false</span><span class="diff-line add">+syncthing_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-syncthing_docker_container: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line add">+syncthing_role_docker_container: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-syncthing_docker_image_pull: true</span><span class="diff-line del">-syncthing_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-syncthing_docker_image: &quot;lscr.io/linuxserver/syncthing:{{ syncthing_docker_image_tag }}&quot;</span><span class="diff-line add">+syncthing_role_docker_image_pull: true</span><span class="diff-line add">+syncthing_role_docker_image_repo: &quot;lscr.io/linuxserver/syncthing&quot;</span><span class="diff-line add">+syncthing_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+syncthing_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;syncthing&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-syncthing_docker_ports_defaults:</span><span class="diff-line add">+syncthing_role_docker_ports_default:</span><span class="diff-line context">   - &quot;22000:22000/tcp&quot;</span><span class="diff-line context">   - &quot;22000:22000/udp&quot;</span><span class="diff-line context">   - &quot;21027:21027/udp&quot;</span><span class="diff-line del">-syncthing_docker_ports_custom: []</span><span class="diff-line del">-syncthing_docker_ports: &quot;{{ syncthing_docker_ports_defaults</span><span class="diff-line del">-                            + syncthing_docker_ports_custom }}&quot;</span><span class="diff-line add">+syncthing_role_docker_ports_custom: []</span><span class="diff-line add">+syncthing_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;syncthing&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-syncthing_docker_envs_default:</span><span class="diff-line add">+syncthing_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-syncthing_docker_envs_custom: {}</span><span class="diff-line del">-syncthing_docker_envs: &quot;{{ syncthing_docker_envs_default</span><span class="diff-line del">-                           | combine(syncthing_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-syncthing_docker_commands_default: []</span><span class="diff-line del">-syncthing_docker_commands_custom: []</span><span class="diff-line del">-syncthing_docker_commands: &quot;{{ syncthing_docker_commands_default</span><span class="diff-line del">-                               + syncthing_docker_commands_custom }}&quot;</span><span class="diff-line add">+syncthing_role_docker_envs_custom: {}</span><span class="diff-line add">+syncthing_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;syncthing&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;syncthing&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-syncthing_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ syncthing_paths_location }}:/config&quot;</span><span class="diff-line del">-syncthing_docker_volumes_custom: []</span><span class="diff-line del">-syncthing_docker_volumes: &quot;{{ syncthing_docker_volumes_default</span><span class="diff-line del">-                              + syncthing_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-syncthing_docker_devices_default: []</span><span class="diff-line del">-syncthing_docker_devices_custom: []</span><span class="diff-line del">-syncthing_docker_devices: &quot;{{ syncthing_docker_devices_default</span><span class="diff-line del">-                              + syncthing_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-syncthing_docker_hosts_default: {}</span><span class="diff-line del">-syncthing_docker_hosts_custom: {}</span><span class="diff-line del">-syncthing_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(syncthing_docker_hosts_default)</span><span class="diff-line del">-                            | combine(syncthing_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-syncthing_docker_labels_default: {}</span><span class="diff-line del">-syncthing_docker_labels_custom: {}</span><span class="diff-line del">-syncthing_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(syncthing_docker_labels_default)</span><span class="diff-line del">-                             | combine(syncthing_docker_labels_custom) }}&quot;</span><span class="diff-line add">+syncthing_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;syncthing&#x27;) }}:/config&quot;</span><span class="diff-line add">+syncthing_role_docker_volumes_custom: []</span><span class="diff-line add">+syncthing_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;syncthing&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-syncthing_docker_hostname: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line add">+syncthing_role_docker_hostname: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-syncthing_docker_networks_alias: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line del">-syncthing_docker_networks_default: []</span><span class="diff-line del">-syncthing_docker_networks_custom: []</span><span class="diff-line del">-syncthing_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + syncthing_docker_networks_default</span><span class="diff-line del">-                               + syncthing_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-syncthing_docker_capabilities_default: []</span><span class="diff-line del">-syncthing_docker_capabilities_custom: []</span><span class="diff-line del">-syncthing_docker_capabilities: &quot;{{ syncthing_docker_capabilities_default</span><span class="diff-line del">-                                   + syncthing_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-syncthing_docker_security_opts_default: []</span><span class="diff-line del">-syncthing_docker_security_opts_custom: []</span><span class="diff-line del">-syncthing_docker_security_opts: &quot;{{ syncthing_docker_security_opts_default</span><span class="diff-line del">-                                    + syncthing_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+syncthing_role_docker_networks_alias: &quot;{{ syncthing_name }}&quot;</span><span class="diff-line add">+syncthing_role_docker_networks_default: []</span><span class="diff-line add">+syncthing_role_docker_networks_custom: []</span><span class="diff-line add">+syncthing_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;syncthing&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;syncthing&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-syncthing_docker_restart_policy: unless-stopped</span><span class="diff-line add">+syncthing_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-syncthing_docker_state: started</span><span class="diff-line add">+syncthing_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-359">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/syncthing/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,15 +10,12 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line del">-  community.docker.docker_container:</span><span class="diff-line del">-    name: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_docker_container&#x27;) }}&quot;</span><span class="diff-line del">-    state: absent</span><span class="diff-line del">-    container_default_behavior: compatibility</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-360">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tandoor/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,146 +14,129 @@</span><span class="diff-line context"> tandoor_name: tandoor</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+tandoor_role_postgres_deploy: true</span><span class="diff-line add">+tandoor_role_postgres_name: &quot;{{ tandoor_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+tandoor_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+tandoor_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+tandoor_role_postgres_docker_env_db: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_postgres_docker_image_tag: &quot;17-alpine&quot;</span><span class="diff-line add">+tandoor_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+tandoor_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;tandoor&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;tandoor&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;tandoor&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+tandoor_role_postgres_paths_folder: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ tandoor_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tandoor_paths_folder: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line del">-tandoor_paths_location: &quot;{{ server_appdata_path }}/{{ tandoor_paths_folder }}&quot;</span><span class="diff-line del">-tandoor_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tandoor_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tandoor_paths_location }}/staticfiles&quot;</span><span class="diff-line del">-  - &quot;{{ tandoor_paths_location }}/mediafiles&quot;</span><span class="diff-line add">+tandoor_role_paths_folder: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_paths_location: &quot;{{ server_appdata_path }}/{{ tandoor_role_paths_folder }}&quot;</span><span class="diff-line add">+tandoor_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tandoor_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tandoor_role_paths_location }}/staticfiles&quot;</span><span class="diff-line add">+  - &quot;{{ tandoor_role_paths_location }}/mediafiles&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tandoor_web_subdomain: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line del">-tandoor_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-tandoor_web_port: &quot;80&quot;</span><span class="diff-line del">-tandoor_web_url: &quot;{{ &#x27;https://&#x27; + (tandoor_web_subdomain + &#x27;.&#x27; + tandoor_web_domain</span><span class="diff-line del">-                  if (tandoor_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else tandoor_web_domain) }}&quot;</span><span class="diff-line add">+tandoor_role_web_subdomain: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+tandoor_role_web_port: &quot;80&quot;</span><span class="diff-line add">+tandoor_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tandoor&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tandoor&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tandoor&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tandoor_dns_record: &quot;{{ tandoor_web_subdomain }}&quot;</span><span class="diff-line del">-tandoor_dns_zone: &quot;{{ tandoor_web_domain }}&quot;</span><span class="diff-line del">-tandoor_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+tandoor_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+tandoor_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+tandoor_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tandoor_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-tandoor_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-tandoor_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-tandoor_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-tandoor_traefik_enabled: true</span><span class="diff-line del">-tandoor_traefik_api_enabled: false</span><span class="diff-line del">-tandoor_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+tandoor_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+tandoor_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+tandoor_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+tandoor_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+tandoor_role_traefik_enabled: true</span><span class="diff-line add">+tandoor_role_traefik_api_enabled: false</span><span class="diff-line add">+tandoor_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tandoor_docker_container: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_docker_container: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tandoor_docker_image_pull: true</span><span class="diff-line del">-tandoor_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tandoor_docker_image: &quot;vabene1111/recipes:{{ tandoor_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-tandoor_docker_ports_defaults: []</span><span class="diff-line del">-tandoor_docker_ports_custom: []</span><span class="diff-line del">-tandoor_docker_ports: &quot;{{ tandoor_docker_ports_defaults</span><span class="diff-line del">-                          + tandoor_docker_ports_custom }}&quot;</span><span class="diff-line add">+tandoor_role_docker_image_pull: true</span><span class="diff-line add">+tandoor_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tandoor_role_docker_image_repo: &quot;vabene1111/recipes&quot;</span><span class="diff-line add">+tandoor_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tandoor&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tandoor_docker_envs_default:</span><span class="diff-line add">+tandoor_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   SECRET_KEY: &quot;{{ tandoor_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">   DB_ENGINE: &quot;django.db.backends.postgresql&quot;</span><span class="diff-line del">-  POSTGRES_HOST: &quot;postgres&quot;</span><span class="diff-line add">+  POSTGRES_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line context">   POSTGRES_PORT: &quot;5432&quot;</span><span class="diff-line del">-  POSTGRES_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  POSTGRES_PASSWORD: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  POSTGRES_DB: &quot;{{ postgres_docker_env_db }}&quot;</span><span class="diff-line add">+  POSTGRES_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                   if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;tandoor&#x27;) | length &gt; 0)</span><span class="diff-line add">+                   else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;tandoor&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  POSTGRES_DB: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line context">   DEBUG: &quot;0&quot;</span><span class="diff-line context">   GUNICORN_MEDIA: &quot;1&quot;</span><span class="diff-line context">   REMOTE_USER_AUTH: &quot;1&quot;</span><span class="diff-line del">-tandoor_docker_envs_custom: {}</span><span class="diff-line del">-tandoor_docker_envs: &quot;{{ tandoor_docker_envs_default</span><span class="diff-line del">-                         | combine(tandoor_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tandoor_docker_commands_default: []</span><span class="diff-line del">-tandoor_docker_commands_custom: []</span><span class="diff-line del">-tandoor_docker_commands: &quot;{{ tandoor_docker_commands_default</span><span class="diff-line del">-                             + tandoor_docker_commands_custom }}&quot;</span><span class="diff-line add">+tandoor_role_docker_envs_custom: {}</span><span class="diff-line add">+tandoor_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tandoor&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tandoor_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tandoor_paths_location }}/staticfiles:/opt/recipes/staticfiles&quot;</span><span class="diff-line del">-  - &quot;{{ tandoor_paths_location }}/mediafiles:/opt/recipes/mediafiles&quot;</span><span class="diff-line del">-tandoor_docker_volumes_custom: []</span><span class="diff-line del">-tandoor_docker_volumes: &quot;{{ tandoor_docker_volumes_default</span><span class="diff-line del">-                            + tandoor_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tandoor_docker_devices_default: []</span><span class="diff-line del">-tandoor_docker_devices_custom: []</span><span class="diff-line del">-tandoor_docker_devices: &quot;{{ tandoor_docker_devices_default</span><span class="diff-line del">-                            + tandoor_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tandoor_docker_hosts_default: {}</span><span class="diff-line del">-tandoor_docker_hosts_custom: {}</span><span class="diff-line del">-tandoor_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(tandoor_docker_hosts_default)</span><span class="diff-line del">-                          | combine(tandoor_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tandoor_docker_labels_default: {}</span><span class="diff-line del">-tandoor_docker_labels_custom: {}</span><span class="diff-line del">-tandoor_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(tandoor_docker_labels_default)</span><span class="diff-line del">-                           | combine(tandoor_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tandoor_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tandoor&#x27;) }}/staticfiles:/opt/recipes/staticfiles&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tandoor&#x27;) }}/mediafiles:/opt/recipes/mediafiles&quot;</span><span class="diff-line add">+tandoor_role_docker_volumes_custom: []</span><span class="diff-line add">+tandoor_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tandoor_docker_hostname: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_docker_hostname: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tandoor_docker_networks_alias: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line del">-tandoor_docker_networks_default: []</span><span class="diff-line del">-tandoor_docker_networks_custom: []</span><span class="diff-line del">-tandoor_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + tandoor_docker_networks_default</span><span class="diff-line del">-                             + tandoor_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tandoor_docker_capabilities_default: []</span><span class="diff-line del">-tandoor_docker_capabilities_custom: []</span><span class="diff-line del">-tandoor_docker_capabilities: &quot;{{ tandoor_docker_capabilities_default</span><span class="diff-line del">-                                 + tandoor_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tandoor_docker_security_opts_default: []</span><span class="diff-line del">-tandoor_docker_security_opts_custom: []</span><span class="diff-line del">-tandoor_docker_security_opts: &quot;{{ tandoor_docker_security_opts_default</span><span class="diff-line del">-                                  + tandoor_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tandoor_role_docker_networks_alias: &quot;{{ tandoor_name }}&quot;</span><span class="diff-line add">+tandoor_role_docker_networks_default: []</span><span class="diff-line add">+tandoor_role_docker_networks_custom: []</span><span class="diff-line add">+tandoor_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tandoor_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tandoor_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tandoor_docker_state: started</span><span class="diff-line add">+tandoor_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-tandoor_depends_on: &quot;postgres&quot;</span><span class="diff-line del">-tandoor_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-tandoor_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+tandoor_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+tandoor_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+tandoor_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-361">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tandoor/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,22 +17,34 @@</span><span class="diff-line context">                    else lookup(&#x27;ansible.builtin.password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_letters&#x27;, &#x27;digits&#x27;], length=50) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: tandoor_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy setting</span><span class="diff-line context">   ansible.builtin.shell: &quot;yyq -i &#x27;del(.tandoor)&#x27; {{ playbook_dir }}/settings.yml&quot;</span><span class="diff-line context">   when: tandoor is defined</span><span class="diff-line context"> </span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line add">+  vars:</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;tandoor&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;tandoor&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;tandoor&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-362">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tauticord/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,100 +17,57 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tauticord_paths_folder: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line del">-tauticord_paths_location: &quot;{{ server_appdata_path }}/{{ tauticord_paths_folder }}&quot;</span><span class="diff-line del">-tauticord_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tauticord_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tauticord_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ tauticord_paths_location }}/logs&quot;</span><span class="diff-line add">+tauticord_role_paths_folder: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line add">+tauticord_role_paths_location: &quot;{{ server_appdata_path }}/{{ tauticord_role_paths_folder }}&quot;</span><span class="diff-line add">+tauticord_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tauticord_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tauticord_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ tauticord_role_paths_location }}/logs&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tauticord_docker_container: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line add">+tauticord_role_docker_container: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tauticord_docker_image_pull: true</span><span class="diff-line del">-tauticord_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tauticord_docker_image: &quot;nwithan8/tauticord&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-tauticord_docker_ports_defaults: []</span><span class="diff-line del">-tauticord_docker_ports_custom: []</span><span class="diff-line del">-tauticord_docker_ports: &quot;{{ tauticord_docker_ports_defaults</span><span class="diff-line del">-                            + tauticord_docker_ports_custom }}&quot;</span><span class="diff-line add">+tauticord_role_docker_image_pull: true</span><span class="diff-line add">+tauticord_role_docker_image_repo: &quot;nwithan8/tauticord&quot;</span><span class="diff-line add">+tauticord_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tauticord_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tauticord&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tauticord&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tauticord_docker_envs_default:</span><span class="diff-line add">+tauticord_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   USER_ID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GROUP_ID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   UMASK: &quot;022&quot;</span><span class="diff-line del">-tauticord_docker_envs_custom: {}</span><span class="diff-line del">-tauticord_docker_envs: &quot;{{ tauticord_docker_envs_default</span><span class="diff-line del">-                           | combine(tauticord_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tauticord_docker_commands_default: []</span><span class="diff-line del">-tauticord_docker_commands_custom: []</span><span class="diff-line del">-tauticord_docker_commands: &quot;{{ tauticord_docker_commands_default</span><span class="diff-line del">-                               + tauticord_docker_commands_custom }}&quot;</span><span class="diff-line add">+tauticord_role_docker_envs_custom: {}</span><span class="diff-line add">+tauticord_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tauticord&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tauticord&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tauticord_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tauticord_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ tauticord_paths_location }}/logs:/logs&quot;</span><span class="diff-line del">-tauticord_docker_volumes_custom: []</span><span class="diff-line del">-tauticord_docker_volumes: &quot;{{ tauticord_docker_volumes_default</span><span class="diff-line del">-                              + tauticord_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tauticord_docker_devices_default: []</span><span class="diff-line del">-tauticord_docker_devices_custom: []</span><span class="diff-line del">-tauticord_docker_devices: &quot;{{ tauticord_docker_devices_default</span><span class="diff-line del">-                              + tauticord_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tauticord_docker_hosts_default: {}</span><span class="diff-line del">-tauticord_docker_hosts_custom: {}</span><span class="diff-line del">-tauticord_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(tauticord_docker_hosts_default)</span><span class="diff-line del">-                            | combine(tauticord_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tauticord_docker_labels_default: {}</span><span class="diff-line del">-tauticord_docker_labels_custom: {}</span><span class="diff-line del">-tauticord_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(tauticord_docker_labels_default)</span><span class="diff-line del">-                             | combine(tauticord_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tauticord_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tauticord&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tauticord&#x27;) }}/logs:/logs&quot;</span><span class="diff-line add">+tauticord_role_docker_volumes_custom: []</span><span class="diff-line add">+tauticord_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tauticord&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tauticord&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tauticord_docker_hostname: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line add">+tauticord_role_docker_hostname: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tauticord_docker_networks_alias: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line del">-tauticord_docker_networks_default: []</span><span class="diff-line del">-tauticord_docker_networks_custom: []</span><span class="diff-line del">-tauticord_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + tauticord_docker_networks_default</span><span class="diff-line del">-                               + tauticord_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tauticord_docker_capabilities_default: []</span><span class="diff-line del">-tauticord_docker_capabilities_custom: []</span><span class="diff-line del">-tauticord_docker_capabilities: &quot;{{ tauticord_docker_capabilities_default</span><span class="diff-line del">-                                   + tauticord_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tauticord_docker_security_opts_default: []</span><span class="diff-line del">-tauticord_docker_security_opts_custom: []</span><span class="diff-line del">-tauticord_docker_security_opts: &quot;{{ tauticord_docker_security_opts_default</span><span class="diff-line del">-                                    + tauticord_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tauticord_role_docker_networks_alias: &quot;{{ tauticord_name }}&quot;</span><span class="diff-line add">+tauticord_role_docker_networks_default: []</span><span class="diff-line add">+tauticord_role_docker_networks_custom: []</span><span class="diff-line add">+tauticord_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tauticord&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tauticord&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tauticord_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tauticord_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tauticord_docker_state: started</span><span class="diff-line add">+tauticord_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-363">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tauticord/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -20,4 +20,4 @@</span><span class="diff-line context"> - name: Alert user to make and verify the config.</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line context">     msg:</span><span class="diff-line del">-      - &quot;Before using this program, you must configure it. To do this, rename the file config.yaml.example in the {{ tauticord_paths_location }}/config directory to config.yaml and edit the file to your desired settings.&quot;</span><span class="diff-line add">+      - &quot;Before using this program, you must configure it. To do this, rename the file config.yaml.example in the {{ tauticord_role_paths_location }}/config directory to config.yaml and edit the file to your desired settings.&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-364">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tdarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,155 +17,118 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tdarr_server_port: &quot;8266&quot;</span><span class="diff-line del">-tdarr_server_external: false</span><span class="diff-line add">+tdarr_role_server_port: &quot;8266&quot;</span><span class="diff-line add">+tdarr_role_server_external: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tdarr_paths_folder: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line del">-tdarr_paths_location: &quot;{{ server_appdata_path }}/{{ tdarr_paths_folder }}&quot;</span><span class="diff-line del">-tdarr_paths_server_location: &quot;{{ tdarr_paths_location }}/server&quot;</span><span class="diff-line del">-tdarr_paths_configs_location: &quot;{{ tdarr_paths_location }}/configs&quot;</span><span class="diff-line del">-tdarr_paths_logs_location: &quot;{{ tdarr_paths_location }}/logs&quot;</span><span class="diff-line del">-tdarr_paths_transcodes_location: &quot;{{ transcodes_path }}/{{ tdarr_paths_folder }}&quot;</span><span class="diff-line del">-tdarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_server_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_configs_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_logs_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_transcodes_location }}&quot;</span><span class="diff-line add">+tdarr_role_paths_folder: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line add">+tdarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ tdarr_role_paths_folder }}&quot;</span><span class="diff-line add">+tdarr_role_paths_server_location: &quot;{{ tdarr_role_paths_location }}/server&quot;</span><span class="diff-line add">+tdarr_role_paths_configs_location: &quot;{{ tdarr_role_paths_location }}/configs&quot;</span><span class="diff-line add">+tdarr_role_paths_logs_location: &quot;{{ tdarr_role_paths_location }}/logs&quot;</span><span class="diff-line add">+tdarr_role_paths_transcodes_location: &quot;{{ transcodes_path }}/{{ tdarr_role_paths_folder }}&quot;</span><span class="diff-line add">+tdarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tdarr_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tdarr_role_paths_server_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tdarr_role_paths_configs_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tdarr_role_paths_logs_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tdarr_role_paths_transcodes_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tdarr_web_subdomain: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line del">-tdarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-tdarr_web_port: &quot;8265&quot;</span><span class="diff-line del">-tdarr_web_url: &quot;{{ &#x27;https://&#x27; + (tdarr_web_subdomain + &#x27;.&#x27; + tdarr_web_domain</span><span class="diff-line del">-                if (tdarr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else tdarr_web_domain) }}&quot;</span><span class="diff-line add">+tdarr_role_web_subdomain: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line add">+tdarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+tdarr_role_web_port: &quot;8265&quot;</span><span class="diff-line add">+tdarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tdarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tdarr&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tdarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tdarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tdarr_dns_record: &quot;{{ tdarr_web_subdomain }}&quot;</span><span class="diff-line del">-tdarr_dns_zone: &quot;{{ tdarr_web_domain }}&quot;</span><span class="diff-line del">-tdarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+tdarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line add">+tdarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line add">+tdarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tdarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-tdarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-tdarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-tdarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-tdarr_traefik_enabled: true</span><span class="diff-line del">-tdarr_traefik_api_enabled: false</span><span class="diff-line del">-tdarr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+tdarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+tdarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+tdarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+tdarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+tdarr_role_traefik_enabled: true</span><span class="diff-line add">+tdarr_role_traefik_api_enabled: false</span><span class="diff-line add">+tdarr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tdarr_docker_container: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line add">+tdarr_role_docker_container: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tdarr_docker_image_pull: true</span><span class="diff-line del">-tdarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tdarr_docker_image: &quot;haveagitgat/tdarr:{{ tdarr_docker_image_tag }}&quot;</span><span class="diff-line add">+tdarr_role_docker_image_pull: true</span><span class="diff-line add">+tdarr_role_docker_image_repo: &quot;haveagitgat/tdarr&quot;</span><span class="diff-line add">+tdarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tdarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tdarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-tdarr_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ tdarr_server_port }}:{{ tdarr_server_port }}&quot;</span><span class="diff-line del">-tdarr_docker_ports_custom: []</span><span class="diff-line del">-tdarr_docker_ports: &quot;{{ tdarr_docker_ports_defaults if (tdarr_server_external) else []</span><span class="diff-line del">-                        + tdarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+tdarr_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_server_port&#x27;, role=&#x27;tdarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_server_port&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line add">+tdarr_role_docker_ports_custom: []</span><span class="diff-line add">+tdarr_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;tdarr&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_server_external&#x27;, role=&#x27;tdarr&#x27;)) else []</span><span class="diff-line add">+                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tdarr_docker_envs_default:</span><span class="diff-line add">+tdarr_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   serverIP: &quot;0.0.0.0&quot;</span><span class="diff-line context">   webUIPort: &quot;8265&quot;</span><span class="diff-line del">-  serverPort: &quot;{{ tdarr_server_port }}&quot;</span><span class="diff-line add">+  serverPort: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_server_port&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line context">   internalNode: &quot;true&quot;</span><span class="diff-line context">   inContainer: &quot;true&quot;</span><span class="diff-line del">-tdarr_docker_envs_custom: {}</span><span class="diff-line del">-tdarr_docker_envs: &quot;{{ tdarr_docker_envs_default</span><span class="diff-line del">-                       | combine(tdarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tdarr_docker_commands_default: []</span><span class="diff-line del">-tdarr_docker_commands_custom: []</span><span class="diff-line del">-tdarr_docker_commands: &quot;{{ tdarr_docker_commands_default</span><span class="diff-line del">-                           + tdarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+tdarr_role_docker_envs_custom: {}</span><span class="diff-line add">+tdarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tdarr&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tdarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tdarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_configs_location }}:/app/configs&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_server_location }}:/app/server&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_logs_location }}:/app/logs&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_transcodes_location }}:/temp&quot;</span><span class="diff-line add">+tdarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_configs_location&#x27;, role=&#x27;tdarr&#x27;) }}:/app/configs&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_server_location&#x27;, role=&#x27;tdarr&#x27;) }}:/app/server&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_logs_location&#x27;, role=&#x27;tdarr&#x27;) }}:/app/logs&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_transcodes_location&#x27;, role=&#x27;tdarr&#x27;) }}:/temp&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media:/media&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Movies:/movies&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/TV:/tv&quot;</span><span class="diff-line context">   - &quot;/dev/shm:/dev/shm&quot;</span><span class="diff-line del">-tdarr_docker_volumes_custom: []</span><span class="diff-line del">-tdarr_docker_volumes: &quot;{{ tdarr_docker_volumes_default</span><span class="diff-line del">-                          + tdarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tdarr_docker_devices_default: []</span><span class="diff-line del">-tdarr_docker_devices_custom: []</span><span class="diff-line del">-tdarr_docker_devices: &quot;{{ tdarr_docker_devices_default</span><span class="diff-line del">-                          + tdarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tdarr_docker_hosts_default: {}</span><span class="diff-line del">-tdarr_docker_hosts_custom: {}</span><span class="diff-line del">-tdarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(tdarr_docker_hosts_default)</span><span class="diff-line del">-                        | combine(tdarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tdarr_docker_labels_default: {}</span><span class="diff-line del">-tdarr_docker_labels_custom: {}</span><span class="diff-line del">-tdarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(tdarr_docker_labels_default)</span><span class="diff-line del">-                         | combine(tdarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tdarr_role_docker_volumes_custom: []</span><span class="diff-line add">+tdarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tdarr&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tdarr_docker_hostname: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line add">+tdarr_role_docker_hostname: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tdarr_docker_networks_alias: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line del">-tdarr_docker_networks_default: []</span><span class="diff-line del">-tdarr_docker_networks_custom: []</span><span class="diff-line del">-tdarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + tdarr_docker_networks_default</span><span class="diff-line del">-                           + tdarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tdarr_docker_capabilities_default: []</span><span class="diff-line del">-tdarr_docker_capabilities_custom: []</span><span class="diff-line del">-tdarr_docker_capabilities: &quot;{{ tdarr_docker_capabilities_default</span><span class="diff-line del">-                               + tdarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tdarr_docker_security_opts_default: []</span><span class="diff-line del">-tdarr_docker_security_opts_custom: []</span><span class="diff-line del">-tdarr_docker_security_opts: &quot;{{ tdarr_docker_security_opts_default</span><span class="diff-line del">-                                + tdarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tdarr_role_docker_networks_alias: &quot;{{ tdarr_name }}&quot;</span><span class="diff-line add">+tdarr_role_docker_networks_default: []</span><span class="diff-line add">+tdarr_role_docker_networks_custom: []</span><span class="diff-line add">+tdarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tdarr&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tdarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tdarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tdarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tdarr_docker_state: started</span><span class="diff-line add">+tdarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-365">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tdarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-366">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tdarr_node/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -28,22 +28,23 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tdarr_node_docker_container: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_container: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tdarr_node_docker_image_pull: true</span><span class="diff-line del">-tdarr_node_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tdarr_node_docker_image: &quot;haveagitgat/tdarr_node:{{ tdarr_node_docker_image_tag }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_image_pull: true</span><span class="diff-line add">+tdarr_node_role_docker_image_repo: &quot;haveagitgat/tdarr_node&quot;</span><span class="diff-line add">+tdarr_node_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tdarr_node_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tdarr_node&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tdarr_node&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-tdarr_node_docker_ports_defaults:</span><span class="diff-line add">+tdarr_node_role_docker_ports_default:</span><span class="diff-line context">   - &quot;{{ tdarr_node_node_port }}:{{ tdarr_node_node_port }}&quot;</span><span class="diff-line del">-tdarr_node_docker_ports_custom: []</span><span class="diff-line del">-tdarr_node_docker_ports: &quot;{{ tdarr_node_docker_ports_defaults if (tdarr_node_external) else []</span><span class="diff-line del">-                             + tdarr_node_docker_ports_custom }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_ports_custom: []</span><span class="diff-line add">+tdarr_node_role_docker_ports: &quot;{{ tdarr_node_role_docker_ports_default if (tdarr_node_external) else []</span><span class="diff-line add">+                                  + tdarr_node_role_docker_ports_custom }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tdarr_node_docker_envs_default:</span><span class="diff-line add">+tdarr_node_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line hunk">@@ -51,75 +52,36 @@</span><span class="diff-line context">   serverPort: &quot;{{ tdarr_node_server_port }}&quot;</span><span class="diff-line context">   nodeName: &quot;{{ tdarr_node_node_id }}&quot;</span><span class="diff-line context">   inContainer: &quot;true&quot;</span><span class="diff-line del">-tdarr_node_docker_envs_custom: {}</span><span class="diff-line del">-tdarr_node_docker_envs: &quot;{{ tdarr_node_docker_envs_default</span><span class="diff-line del">-                            | combine(tdarr_node_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tdarr_node_docker_commands_default: []</span><span class="diff-line del">-tdarr_node_docker_commands_custom: []</span><span class="diff-line del">-tdarr_node_docker_commands: &quot;{{ tdarr_node_docker_commands_default</span><span class="diff-line del">-                                + tdarr_node_docker_commands_custom }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_envs_custom: {}</span><span class="diff-line add">+tdarr_node_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tdarr_node&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tdarr_node&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tdarr_node_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_configs_location }}:/app/configs&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_logs_location }}:/app/logs&quot;</span><span class="diff-line del">-  - &quot;{{ tdarr_paths_transcodes_location }}:/temp&quot;</span><span class="diff-line add">+tdarr_node_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_configs_location&#x27;, role=&#x27;tdarr&#x27;) }}:/app/configs&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_logs_location&#x27;, role=&#x27;tdarr&#x27;) }}:/app/logs&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_transcodes_location&#x27;, role=&#x27;tdarr&#x27;) }}:/temp&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media:/media&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/Movies:/movies&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media/TV:/tv&quot;</span><span class="diff-line context">   - &quot;/dev/shm:/dev/shm&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-tdarr_node_docker_volumes_custom: []</span><span class="diff-line del">-tdarr_node_docker_volumes: &quot;{{ tdarr_node_docker_volumes_default</span><span class="diff-line del">-                               + tdarr_node_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tdarr_node_docker_devices_default: []</span><span class="diff-line del">-tdarr_node_docker_devices_custom: []</span><span class="diff-line del">-tdarr_node_docker_devices: &quot;{{ tdarr_node_docker_devices_default</span><span class="diff-line del">-                               + tdarr_node_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tdarr_node_docker_hosts_default: {}</span><span class="diff-line del">-tdarr_node_docker_hosts_custom: {}</span><span class="diff-line del">-tdarr_node_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(tdarr_node_docker_hosts_default)</span><span class="diff-line del">-                             | combine(tdarr_node_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tdarr_node_docker_labels_default: {}</span><span class="diff-line del">-tdarr_node_docker_labels_custom: {}</span><span class="diff-line del">-tdarr_node_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(tdarr_node_docker_labels_default)</span><span class="diff-line del">-                              | combine(tdarr_node_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_volumes_custom: []</span><span class="diff-line add">+tdarr_node_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tdarr_node&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tdarr_node&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tdarr_node_docker_hostname: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_hostname: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tdarr_node_docker_networks_alias: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line del">-tdarr_node_docker_networks_default: []</span><span class="diff-line del">-tdarr_node_docker_networks_custom: []</span><span class="diff-line del">-tdarr_node_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + tdarr_node_docker_networks_default</span><span class="diff-line del">-                                + tdarr_node_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tdarr_node_docker_capabilities_default: []</span><span class="diff-line del">-tdarr_node_docker_capabilities_custom: []</span><span class="diff-line del">-tdarr_node_docker_capabilities: &quot;{{ tdarr_node_docker_capabilities_default</span><span class="diff-line del">-                                    + tdarr_node_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tdarr_node_docker_security_opts_default: []</span><span class="diff-line del">-tdarr_node_docker_security_opts_custom: []</span><span class="diff-line del">-tdarr_node_docker_security_opts: &quot;{{ tdarr_node_docker_security_opts_default</span><span class="diff-line del">-                                     + tdarr_node_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_networks_alias: &quot;{{ tdarr_node_name }}&quot;</span><span class="diff-line add">+tdarr_node_role_docker_networks_default: []</span><span class="diff-line add">+tdarr_node_role_docker_networks_custom: []</span><span class="diff-line add">+tdarr_node_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tdarr_node&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tdarr_node&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tdarr_node_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tdarr_node_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tdarr_node_docker_state: started</span><span class="diff-line add">+tdarr_node_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-367">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tdarr_node/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,14 +10,14 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;tdarr_node&quot;</span><span class="diff-line add">+    container_name: &quot;tdarr_node&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-368">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/telegraf/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -16,140 +16,89 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-telegraf_paths_folder: &quot;telegraf&quot;</span><span class="diff-line del">-telegraf_paths_location: &quot;{{ server_appdata_path }}/{{ telegraf_paths_folder }}&quot;</span><span class="diff-line del">-telegraf_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ telegraf_paths_location }}/&quot;</span><span class="diff-line del">-  - &quot;{{ telegraf_paths_location }}/{{ telegraf_name }}&quot;</span><span class="diff-line del">-telegraf_paths_recursive: true</span><span class="diff-line add">+telegraf_role_paths_folder: &quot;telegraf&quot;</span><span class="diff-line add">+telegraf_role_paths_location: &quot;{{ server_appdata_path }}/{{ telegraf_role_paths_folder }}&quot;</span><span class="diff-line add">+telegraf_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ telegraf_role_paths_location }}/&quot;</span><span class="diff-line add">+  - &quot;{{ telegraf_role_paths_location }}/{{ telegraf_name }}&quot;</span><span class="diff-line add">+telegraf_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-telegraf_web_subdomain: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line del">-telegraf_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+telegraf_role_web_subdomain: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line add">+telegraf_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-telegraf_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_web_subdomain&#x27;, default=telegraf_web_subdomain) }}&quot;</span><span class="diff-line del">-telegraf_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_web_domain&#x27;, default=telegraf_web_domain) }}&quot;</span><span class="diff-line del">-telegraf_dns_proxy: false</span><span class="diff-line add">+telegraf_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;telegraf&#x27;) }}&quot;</span><span class="diff-line add">+telegraf_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;telegraf&#x27;) }}&quot;</span><span class="diff-line add">+telegraf_role_dns_proxy: false</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-telegraf_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-telegraf_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-telegraf_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-telegraf_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-telegraf_traefik_enabled: true</span><span class="diff-line del">-telegraf_traefik_api_enabled: false</span><span class="diff-line del">-telegraf_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+telegraf_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+telegraf_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+telegraf_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+telegraf_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+telegraf_role_traefik_enabled: true</span><span class="diff-line add">+telegraf_role_traefik_api_enabled: false</span><span class="diff-line add">+telegraf_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-telegraf_docker_container: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line add">+telegraf_role_docker_container: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-telegraf_docker_image_pull: true</span><span class="diff-line del">-telegraf_docker_image_repo: &quot;telegraf&quot;</span><span class="diff-line del">-telegraf_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-telegraf_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_image_repo&#x27;, default=telegraf_docker_image_repo)</span><span class="diff-line del">-                            + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_image_tag&#x27;, default=telegraf_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-telegraf_docker_ports_defaults: []</span><span class="diff-line del">-telegraf_docker_ports_custom: []</span><span class="diff-line del">-telegraf_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_ports_defaults&#x27;, default=telegraf_docker_ports_defaults)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_ports_custom&#x27;, default=telegraf_docker_ports_custom) }}&quot;</span><span class="diff-line add">+telegraf_role_docker_image_pull: true</span><span class="diff-line add">+telegraf_role_docker_image_repo: &quot;telegraf&quot;</span><span class="diff-line add">+telegraf_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+telegraf_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;telegraf&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;telegraf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-telegraf_docker_envs_default:</span><span class="diff-line add">+telegraf_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   EULA: &quot;TRUE&quot;</span><span class="diff-line context">   UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   GID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-telegraf_docker_envs_custom: {}</span><span class="diff-line del">-telegraf_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_envs_default&#x27;, default=telegraf_docker_envs_default)</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_envs_custom&#x27;, default=telegraf_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-telegraf_docker_commands_default: []</span><span class="diff-line del">-telegraf_docker_commands_custom: []</span><span class="diff-line del">-telegraf_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_commands_default&#x27;, default=telegraf_docker_commands_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_commands_custom&#x27;, default=telegraf_docker_commands_custom) }}&quot;</span><span class="diff-line add">+telegraf_role_docker_envs_custom: {}</span><span class="diff-line add">+telegraf_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;telegraf&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;telegraf&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-telegraf_docker_volumes_default:</span><span class="diff-line del">-  - &quot;/opt/telegraf/{{ telegraf_name }}:/etc/telegraf:ro&quot;</span><span class="diff-line add">+telegraf_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ server_appdata_path }}/telegraf/{{ telegraf_name }}:/etc/telegraf:ro&quot;</span><span class="diff-line context">   - &quot;/var/run/docker.sock:/var/run/docker.sock:ro&quot;</span><span class="diff-line context">   - &quot;/var/run/utmp:/var/run/utmp&quot;</span><span class="diff-line context">   - &quot;/:/host:ro&quot;</span><span class="diff-line context">   - &quot;/sys:/host/sys:ro&quot;</span><span class="diff-line context">   - &quot;/proc:/host/proc:ro&quot;</span><span class="diff-line context">   - &quot;/etc:/host/etc:ro&quot;</span><span class="diff-line del">-telegraf_docker_volumes_custom: []</span><span class="diff-line del">-telegraf_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_volumes_default&#x27;, default=telegraf_docker_volumes_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_volumes_custom&#x27;, default=telegraf_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-telegraf_docker_devices_default: []</span><span class="diff-line del">-telegraf_docker_devices_custom: []</span><span class="diff-line del">-telegraf_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_devices_default&#x27;, default=telegraf_docker_devices_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_devices_custom&#x27;, default=telegraf_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-telegraf_docker_hosts_default: {}</span><span class="diff-line del">-telegraf_docker_hosts_custom: {}</span><span class="diff-line del">-telegraf_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_hosts_default&#x27;, default=telegraf_docker_hosts_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_hosts_custom&#x27;, default=telegraf_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-telegraf_docker_labels_default: {</span><span class="diff-line del">-  &quot;com.github.saltbox.saltbox_managed&quot;: &quot;true&quot;</span><span class="diff-line del">-}</span><span class="diff-line del">-telegraf_docker_labels_custom: {}</span><span class="diff-line del">-telegraf_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_labels_default&#x27;, default=telegraf_docker_labels_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_labels_custom&#x27;, default=telegraf_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+telegraf_role_docker_volumes_custom: []</span><span class="diff-line add">+telegraf_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;telegraf&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;telegraf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-telegraf_docker_hostname: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-telegraf_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-telegraf_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_network_mode_default&#x27;, default=telegraf_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+telegraf_role_docker_hostname: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-telegraf_docker_networks_alias: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line del">-telegraf_docker_networks_default: []</span><span class="diff-line del">-telegraf_docker_networks_custom: []</span><span class="diff-line del">-telegraf_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_networks_default&#x27;, default=telegraf_docker_networks_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_networks_custom&#x27;, default=telegraf_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-telegraf_docker_capabilities_default: []</span><span class="diff-line del">-telegraf_docker_capabilities_custom: []</span><span class="diff-line del">-telegraf_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_capabilities_default&#x27;, default=telegraf_docker_capabilities_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_capabilities_custom&#x27;, default=telegraf_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-telegraf_docker_security_opts_default: []</span><span class="diff-line del">-telegraf_docker_security_opts_custom: []</span><span class="diff-line del">-telegraf_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_security_opts_default&#x27;, default=telegraf_docker_security_opts_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, telegraf_name + &#x27;_docker_security_opts_custom&#x27;, default=telegraf_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+telegraf_role_docker_networks_alias: &quot;{{ telegraf_name }}&quot;</span><span class="diff-line add">+telegraf_role_docker_networks_default: []</span><span class="diff-line add">+telegraf_role_docker_networks_custom: []</span><span class="diff-line add">+telegraf_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;telegraf&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;telegraf&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-telegraf_docker_restart_policy: unless-stopped</span><span class="diff-line add">+telegraf_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-telegraf_docker_state: started</span><span class="diff-line add">+telegraf_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-369">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/telegraf/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,17 +22,17 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ telegraf_paths_location }}/{{ telegraf_name }}/telegraf.conf&quot;</span><span class="diff-line add">+    path: &quot;{{ telegraf_role_paths_location }}/{{ telegraf_name }}/telegraf.conf&quot;</span><span class="diff-line context">   register: telegraf_conf</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import telegraf config if needed</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     src: &quot;telegraf.conf&quot;</span><span class="diff-line del">-    dest: &quot;{{ telegraf_paths_location }}/{{ telegraf_name }}/telegraf.conf&quot;</span><span class="diff-line add">+    dest: &quot;{{ telegraf_role_paths_location }}/{{ telegraf_name }}/telegraf.conf&quot;</span><span class="diff-line context">     owner: &quot;{{ uid }}&quot;</span><span class="diff-line context">     group: &quot;{{ gid }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">   when: not telegraf_conf.stat.exists</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Create and start telegraf container</span><span class="diff-line add">+- name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-370">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/teslamate/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,147 +17,117 @@</span><span class="diff-line context"> </span><span class="diff-line context"> teslamate_secret_key: &quot;{{ teslamate_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-teslamate_postgres_name: &quot;{{ teslamate_name }}-postgres&quot;</span><span class="diff-line del">-teslamate_postgres_docker_env_db: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line del">-teslamate_postgres_docker_env_password: &quot;{{ teslamate_saltbox_facts.facts.postgres_password }}&quot;</span><span class="diff-line del">-teslamate_postgres_docker_image_tag: &quot;18&quot;</span><span class="diff-line del">-teslamate_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-teslamate_postgres_paths_folder: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line del">-teslamate_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+teslamate_role_postgres_deploy: true</span><span class="diff-line add">+teslamate_role_postgres_name: &quot;{{ teslamate_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+teslamate_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+teslamate_role_postgres_password: &quot;{{ teslamate_saltbox_facts.facts.postgres_password }}&quot;</span><span class="diff-line add">+teslamate_role_postgres_docker_env_db: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_postgres_docker_image_tag: &quot;18&quot;</span><span class="diff-line add">+teslamate_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+teslamate_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;teslamate&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;teslamate&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;teslamate&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+teslamate_role_postgres_paths_folder: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ teslamate_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-teslamate_paths_folder: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line del">-teslamate_paths_location: &quot;{{ server_appdata_path }}/{{ teslamate_paths_folder }}&quot;</span><span class="diff-line del">-teslamate_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ teslamate_paths_location }}&quot;</span><span class="diff-line add">+teslamate_role_paths_folder: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_paths_location: &quot;{{ server_appdata_path }}/{{ teslamate_role_paths_folder }}&quot;</span><span class="diff-line add">+teslamate_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ teslamate_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-teslamate_web_subdomain: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line del">-teslamate_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-teslamate_web_port: &quot;4000&quot;</span><span class="diff-line del">-teslamate_web_url: &quot;{{ &#x27;https://&#x27; + (teslamate_web_subdomain + &#x27;.&#x27; + teslamate_web_domain</span><span class="diff-line del">-                    if (teslamate_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else teslamate_web_domain) }}&quot;</span><span class="diff-line add">+teslamate_role_web_subdomain: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+teslamate_role_web_port: &quot;4000&quot;</span><span class="diff-line add">+teslamate_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;teslamate&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;teslamate&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;teslamate&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-teslamate_dns_record: &quot;{{ teslamate_web_subdomain }}&quot;</span><span class="diff-line del">-teslamate_dns_zone: &quot;{{ teslamate_web_domain }}&quot;</span><span class="diff-line del">-teslamate_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+teslamate_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+teslamate_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+teslamate_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-teslamate_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-teslamate_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-teslamate_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-teslamate_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-teslamate_traefik_enabled: true</span><span class="diff-line del">-teslamate_traefik_api_enabled: false</span><span class="diff-line del">-teslamate_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+teslamate_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+teslamate_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+teslamate_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+teslamate_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+teslamate_role_traefik_enabled: true</span><span class="diff-line add">+teslamate_role_traefik_api_enabled: false</span><span class="diff-line add">+teslamate_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-teslamate_docker_container: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_docker_container: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-teslamate_docker_image_pull: true</span><span class="diff-line del">-teslamate_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-teslamate_docker_image: &quot;teslamate/teslamate:{{ teslamate_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-teslamate_docker_ports_defaults: []</span><span class="diff-line del">-teslamate_docker_ports_custom: []</span><span class="diff-line del">-teslamate_docker_ports: &quot;{{ teslamate_docker_ports_defaults</span><span class="diff-line del">-                            + teslamate_docker_ports_custom }}&quot;</span><span class="diff-line add">+teslamate_role_docker_image_pull: true</span><span class="diff-line add">+teslamate_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+teslamate_role_docker_image_repo: &quot;teslamate/teslamate&quot;</span><span class="diff-line add">+teslamate_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;teslamate&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-teslamate_docker_envs_default:</span><span class="diff-line del">-  DATABASE_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  DATABASE_PASS: &quot;{{ teslamate_postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  DATABASE_NAME: &quot;{{ teslamate_postgres_docker_env_db }}&quot;</span><span class="diff-line add">+teslamate_role_docker_envs_default:</span><span class="diff-line add">+  DATABASE_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                  if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;teslamate&#x27;) | length &gt; 0)</span><span class="diff-line add">+                  else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DATABASE_PASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                  if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;teslamate&#x27;) | length &gt; 0)</span><span class="diff-line add">+                  else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DATABASE_NAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context">   ENCRYPTION_KEY: &quot;{{ teslamate_secret_key }}&quot;</span><span class="diff-line del">-  DATABASE_HOST: &quot;{{ teslamate_postgres_name }}&quot;</span><span class="diff-line add">+  DATABASE_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context">   DATABASE_PORT: &quot;5432&quot;</span><span class="diff-line context">   MQTT_HOST: &quot;mqtt&quot;</span><span class="diff-line context">   CHECK_ORIGIN: &quot;false&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-teslamate_docker_envs_custom: {}</span><span class="diff-line del">-teslamate_docker_envs: &quot;{{ teslamate_docker_envs_default</span><span class="diff-line del">-                           | combine(teslamate_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-teslamate_docker_commands_default: []</span><span class="diff-line del">-teslamate_docker_commands_custom: []</span><span class="diff-line del">-teslamate_docker_commands: &quot;{{ teslamate_docker_commands_default</span><span class="diff-line del">-                               + teslamate_docker_commands_custom }}&quot;</span><span class="diff-line add">+teslamate_role_docker_envs_custom: {}</span><span class="diff-line add">+teslamate_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;teslamate&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-teslamate_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ teslamate_paths_location }}:/opt/app/import&quot;</span><span class="diff-line del">-teslamate_docker_volumes_custom: []</span><span class="diff-line del">-teslamate_docker_volumes: &quot;{{ teslamate_docker_volumes_default</span><span class="diff-line del">-                              + teslamate_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-teslamate_docker_devices_default: []</span><span class="diff-line del">-teslamate_docker_devices_custom: []</span><span class="diff-line del">-teslamate_docker_devices: &quot;{{ teslamate_docker_devices_default</span><span class="diff-line del">-                              + teslamate_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-teslamate_docker_hosts_default: {}</span><span class="diff-line del">-teslamate_docker_hosts_custom: {}</span><span class="diff-line del">-teslamate_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(teslamate_docker_hosts_default)</span><span class="diff-line del">-                            | combine(teslamate_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-teslamate_docker_labels_default: {}</span><span class="diff-line del">-teslamate_docker_labels_custom: {}</span><span class="diff-line del">-teslamate_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(teslamate_docker_labels_default)</span><span class="diff-line del">-                             | combine(teslamate_docker_labels_custom) }}&quot;</span><span class="diff-line add">+teslamate_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;teslamate&#x27;) }}:/opt/app/import&quot;</span><span class="diff-line add">+teslamate_role_docker_volumes_custom: []</span><span class="diff-line add">+teslamate_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-teslamate_docker_hostname: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_docker_hostname: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-teslamate_docker_networks_alias: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line del">-teslamate_docker_networks_default: []</span><span class="diff-line del">-teslamate_docker_networks_custom: []</span><span class="diff-line del">-teslamate_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + teslamate_docker_networks_default</span><span class="diff-line del">-                               + teslamate_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-teslamate_docker_capabilities_default: []</span><span class="diff-line del">-teslamate_docker_capabilities_custom: []</span><span class="diff-line del">-teslamate_docker_capabilities: &quot;{{ teslamate_docker_capabilities_default</span><span class="diff-line del">-                                   + teslamate_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-teslamate_docker_security_opts_default: []</span><span class="diff-line del">-teslamate_docker_security_opts_custom: []</span><span class="diff-line del">-teslamate_docker_security_opts: &quot;{{ teslamate_docker_security_opts_default</span><span class="diff-line del">-                                    + teslamate_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+teslamate_role_docker_networks_alias: &quot;{{ teslamate_name }}&quot;</span><span class="diff-line add">+teslamate_role_docker_networks_default: []</span><span class="diff-line add">+teslamate_role_docker_networks_custom: []</span><span class="diff-line add">+teslamate_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-teslamate_docker_restart_policy: unless-stopped</span><span class="diff-line add">+teslamate_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-teslamate_docker_state: started</span><span class="diff-line add">+teslamate_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-371">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/teslamate/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,16 +10,16 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if &#x27;/opt/saltbox/teslamate_db.ini&#x27; folder exists</span><span class="diff-line add">+- name: Check if &#x27;{{ server_appdata_path }}/saltbox/teslamate_db.ini&#x27; folder exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/saltbox/teslamate_db.ini&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/saltbox/teslamate_db.ini&quot;</span><span class="diff-line context">   register: teslamate_db_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migration Block</span><span class="diff-line hunk">@@ -33,6 +33,7 @@</span><span class="diff-line context">           secret_key: &quot;&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">       register: teslamate_db_saltbox_facts</span><span class="diff-line context"> </span><span class="diff-line context">     - name: &quot;Save Teslamate Saltbox facts&quot;</span><span class="diff-line hunk">@@ -44,6 +45,7 @@</span><span class="diff-line context">           postgres_password: &quot;{{ teslamate_db_saltbox_facts.facts.secret_key }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context">     - name: &quot;Delete legacy Teslamate Postgres Saltbox facts&quot;</span><span class="diff-line context">       saltbox_facts:</span><span class="diff-line hunk">@@ -51,6 +53,7 @@</span><span class="diff-line context">         instance: &quot;teslamate&quot;</span><span class="diff-line context">         delete_type: &quot;role&quot;</span><span class="diff-line context">         method: &quot;delete&quot;</span><span class="diff-line add">+        base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Save Teslamate Saltbox facts&quot;</span><span class="diff-line context">   saltbox_facts:</span><span class="diff-line hunk">@@ -61,26 +64,30 @@</span><span class="diff-line context">       postgres_password: &quot;{{ lookup(&#x27;ansible.builtin.password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_letters&#x27;, &#x27;digits&#x27;], length=50) }}&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+    base_path: &quot;{{ server_appdata_path }}&quot;</span><span class="diff-line context">   register: teslamate_saltbox_facts</span><span class="diff-line context">   tags:</span><span class="diff-line context">     - teslamate</span><span class="diff-line context">     - teslamate-postgres-password</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Postgres Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ teslamate_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ teslamate_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ teslamate_postgres_paths_location }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ teslamate_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ teslamate_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ teslamate_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_env_password: &quot;{{ teslamate_postgres_docker_env_password }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;teslamate&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;teslamate&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Print Teslamate DB Password</span><span class="diff-line context">   ansible.builtin.debug:</span><span class="diff-line del">-    msg: &quot;{{ teslamate_postgres_docker_env_password }}&quot;</span><span class="diff-line add">+    msg: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;teslamate&#x27;) }}&quot;</span><span class="diff-line context">   tags:</span><span class="diff-line context">     - teslamate-postgres-password</span><span class="diff-line context"> </span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-372">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/thelounge/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,41 +17,41 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-thelounge_paths_folder: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line del">-thelounge_paths_location: &quot;{{ server_appdata_path }}/{{ thelounge_paths_folder }}&quot;</span><span class="diff-line del">-thelounge_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ thelounge_paths_location }}&quot;</span><span class="diff-line add">+thelounge_role_paths_folder: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line add">+thelounge_role_paths_location: &quot;{{ server_appdata_path }}/{{ thelounge_role_paths_folder }}&quot;</span><span class="diff-line add">+thelounge_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ thelounge_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-thelounge_web_subdomain: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line del">-thelounge_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-thelounge_web_port: &quot;9000&quot;</span><span class="diff-line del">-thelounge_web_url: &quot;{{ &#x27;https://&#x27; + (thelounge_web_subdomain + &#x27;.&#x27; + thelounge_web_domain</span><span class="diff-line del">-                    if (thelounge_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else thelounge_web_domain) }}&quot;</span><span class="diff-line add">+thelounge_role_web_subdomain: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line add">+thelounge_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+thelounge_role_web_port: &quot;9000&quot;</span><span class="diff-line add">+thelounge_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;thelounge&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;thelounge&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;thelounge&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;thelounge&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-thelounge_dns_record: &quot;{{ thelounge_web_subdomain }}&quot;</span><span class="diff-line del">-thelounge_dns_zone: &quot;{{ thelounge_web_domain }}&quot;</span><span class="diff-line del">-thelounge_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+thelounge_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;thelounge&#x27;) }}&quot;</span><span class="diff-line add">+thelounge_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;thelounge&#x27;) }}&quot;</span><span class="diff-line add">+thelounge_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-thelounge_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-thelounge_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-thelounge_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-thelounge_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-thelounge_traefik_enabled: true</span><span class="diff-line del">-thelounge_traefik_api_enabled: true</span><span class="diff-line del">-thelounge_traefik_api_endpoint: &quot;PathPrefix(`/uploads`)&quot;</span><span class="diff-line add">+thelounge_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+thelounge_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+thelounge_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+thelounge_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+thelounge_role_traefik_enabled: true</span><span class="diff-line add">+thelounge_role_traefik_api_enabled: true</span><span class="diff-line add">+thelounge_role_traefik_api_endpoint: &quot;PathPrefix(`/uploads`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line hunk">@@ -59,86 +59,43 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-thelounge_docker_container: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line add">+thelounge_role_docker_container: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-thelounge_docker_image_pull: true</span><span class="diff-line del">-thelounge_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-thelounge_docker_image: &quot;lscr.io/linuxserver/thelounge:{{ thelounge_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-thelounge_docker_ports_defaults: []</span><span class="diff-line del">-thelounge_docker_ports_custom: []</span><span class="diff-line del">-thelounge_docker_ports: &quot;{{ thelounge_docker_ports_defaults</span><span class="diff-line del">-                            + thelounge_docker_ports_custom }}&quot;</span><span class="diff-line add">+thelounge_role_docker_image_pull: true</span><span class="diff-line add">+thelounge_role_docker_image_repo: &quot;lscr.io/linuxserver/thelounge&quot;</span><span class="diff-line add">+thelounge_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+thelounge_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;thelounge&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;thelounge&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-thelounge_docker_envs_default:</span><span class="diff-line add">+thelounge_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-thelounge_docker_envs_custom: {}</span><span class="diff-line del">-thelounge_docker_envs: &quot;{{ thelounge_docker_envs_default</span><span class="diff-line del">-                           | combine(thelounge_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-thelounge_docker_commands_default: []</span><span class="diff-line del">-thelounge_docker_commands_custom: []</span><span class="diff-line del">-thelounge_docker_commands: &quot;{{ thelounge_docker_commands_default</span><span class="diff-line del">-                               + thelounge_docker_commands_custom }}&quot;</span><span class="diff-line add">+thelounge_role_docker_envs_custom: {}</span><span class="diff-line add">+thelounge_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;thelounge&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;thelounge&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-thelounge_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ thelounge_paths_location }}:/config&quot;</span><span class="diff-line del">-thelounge_docker_volumes_custom: []</span><span class="diff-line del">-thelounge_docker_volumes: &quot;{{ thelounge_docker_volumes_default</span><span class="diff-line del">-                              + thelounge_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-thelounge_docker_devices_default: []</span><span class="diff-line del">-thelounge_docker_devices_custom: []</span><span class="diff-line del">-thelounge_docker_devices: &quot;{{ thelounge_docker_devices_default</span><span class="diff-line del">-                              + thelounge_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-thelounge_docker_hosts_default: {}</span><span class="diff-line del">-thelounge_docker_hosts_custom: {}</span><span class="diff-line del">-thelounge_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(thelounge_docker_hosts_default)</span><span class="diff-line del">-                            | combine(thelounge_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-thelounge_docker_labels_default: {}</span><span class="diff-line del">-thelounge_docker_labels_custom: {}</span><span class="diff-line del">-thelounge_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(thelounge_docker_labels_default)</span><span class="diff-line del">-                             | combine(thelounge_docker_labels_custom) }}&quot;</span><span class="diff-line add">+thelounge_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;thelounge&#x27;) }}:/config&quot;</span><span class="diff-line add">+thelounge_role_docker_volumes_custom: []</span><span class="diff-line add">+thelounge_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;thelounge&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;thelounge&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-thelounge_docker_hostname: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line add">+thelounge_role_docker_hostname: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-thelounge_docker_networks_alias: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line del">-thelounge_docker_networks_default: []</span><span class="diff-line del">-thelounge_docker_networks_custom: []</span><span class="diff-line del">-thelounge_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + thelounge_docker_networks_default</span><span class="diff-line del">-                               + thelounge_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-thelounge_docker_capabilities_default: []</span><span class="diff-line del">-thelounge_docker_capabilities_custom: []</span><span class="diff-line del">-thelounge_docker_capabilities: &quot;{{ thelounge_docker_capabilities_default</span><span class="diff-line del">-                                   + thelounge_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-thelounge_docker_security_opts_default: []</span><span class="diff-line del">-thelounge_docker_security_opts_custom: []</span><span class="diff-line del">-thelounge_docker_security_opts: &quot;{{ thelounge_docker_security_opts_default</span><span class="diff-line del">-                                    + thelounge_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+thelounge_role_docker_networks_alias: &quot;{{ thelounge_name }}&quot;</span><span class="diff-line add">+thelounge_role_docker_networks_default: []</span><span class="diff-line add">+thelounge_role_docker_networks_custom: []</span><span class="diff-line add">+thelounge_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;thelounge&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;thelounge&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-thelounge_docker_restart_policy: unless-stopped</span><span class="diff-line add">+thelounge_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-thelounge_docker_state: started</span><span class="diff-line add">+thelounge_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-373">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/thelounge/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-374">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/threadfin/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,97 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-threadfin_paths_folder: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line del">-threadfin_paths_location: &quot;{{ server_appdata_path }}/{{ threadfin_paths_folder }}&quot;</span><span class="diff-line del">-threadfin_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ threadfin_paths_location }}&quot;</span><span class="diff-line add">+threadfin_role_paths_folder: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line add">+threadfin_role_paths_location: &quot;{{ server_appdata_path }}/{{ threadfin_role_paths_folder }}&quot;</span><span class="diff-line add">+threadfin_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ threadfin_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-threadfin_web_subdomain: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line del">-threadfin_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-threadfin_web_port: &quot;34400&quot;</span><span class="diff-line del">-threadfin_web_url: &quot;{{ &#x27;https://&#x27; + (threadfin_web_subdomain + &#x27;.&#x27; + threadfin_web_domain</span><span class="diff-line del">-                    if (threadfin_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else threadfin_web_domain) }}&quot;</span><span class="diff-line add">+threadfin_role_web_subdomain: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line add">+threadfin_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+threadfin_role_web_port: &quot;34400&quot;</span><span class="diff-line add">+threadfin_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;threadfin&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;threadfin&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;threadfin&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;threadfin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-threadfin_dns_record: &quot;{{ threadfin_web_subdomain }}&quot;</span><span class="diff-line del">-threadfin_dns_zone: &quot;{{ threadfin_web_domain }}&quot;</span><span class="diff-line del">-threadfin_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+threadfin_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line add">+threadfin_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line add">+threadfin_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-threadfin_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-threadfin_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-threadfin_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-threadfin_traefik_enabled: true</span><span class="diff-line del">-threadfin_traefik_api_enabled: true</span><span class="diff-line del">-threadfin_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/images`) || PathPrefix(`/data_images`)&quot;</span><span class="diff-line add">+threadfin_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+threadfin_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+threadfin_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+threadfin_role_traefik_enabled: true</span><span class="diff-line add">+threadfin_role_traefik_api_enabled: true</span><span class="diff-line add">+threadfin_role_traefik_api_endpoint: &quot;PathPrefix(`/api`) || PathPrefix(`/images`) || PathPrefix(`/data_images`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-threadfin_docker_container: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line add">+threadfin_role_docker_container: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-threadfin_docker_image_pull: true</span><span class="diff-line del">-threadfin_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-threadfin_docker_image: &quot;fyb3roptik/threadfin:{{ threadfin_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-threadfin_docker_ports_defaults: []</span><span class="diff-line del">-threadfin_docker_ports_custom: []</span><span class="diff-line del">-threadfin_docker_ports: &quot;{{ threadfin_docker_ports_defaults</span><span class="diff-line del">-                            + threadfin_docker_ports_custom }}&quot;</span><span class="diff-line add">+threadfin_role_docker_image_pull: true</span><span class="diff-line add">+threadfin_role_docker_image_repo: &quot;fyb3roptik/threadfin&quot;</span><span class="diff-line add">+threadfin_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+threadfin_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;threadfin&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-threadfin_docker_envs_default:</span><span class="diff-line del">-  - TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  - THREADFIN_BRANCH: &quot;main&quot;</span><span class="diff-line del">-  - THREADFIN_DEBUG: &quot;0&quot;</span><span class="diff-line del">-threadfin_docker_envs_custom: {}</span><span class="diff-line del">-threadfin_docker_envs: &quot;{{ threadfin_docker_envs_default</span><span class="diff-line del">-                           | combine(threadfin_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-threadfin_docker_commands_default: []</span><span class="diff-line del">-threadfin_docker_commands_custom: []</span><span class="diff-line del">-threadfin_docker_commands: &quot;{{ threadfin_docker_commands_default</span><span class="diff-line del">-                               + threadfin_docker_commands_custom }}&quot;</span><span class="diff-line add">+threadfin_role_docker_envs_default:</span><span class="diff-line add">+  TZ: &quot;{{ tz }}&quot;</span><span class="diff-line add">+  THREADFIN_BRANCH: &quot;main&quot;</span><span class="diff-line add">+  THREADFIN_DEBUG: &quot;0&quot;</span><span class="diff-line add">+threadfin_role_docker_envs_custom: {}</span><span class="diff-line add">+threadfin_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;threadfin&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;threadfin&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-threadfin_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ threadfin_paths_location }}:/home/threadfin/conf:rw&quot;</span><span class="diff-line del">-threadfin_docker_volumes_custom: []</span><span class="diff-line del">-threadfin_docker_volumes: &quot;{{ threadfin_docker_volumes_default</span><span class="diff-line del">-                              + threadfin_docker_volumes_custom }}&quot;</span><span class="diff-line add">+threadfin_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;threadfin&#x27;) }}:/home/threadfin/conf&quot;</span><span class="diff-line add">+threadfin_role_docker_volumes_custom: []</span><span class="diff-line add">+threadfin_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;threadfin&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-# Devices</span><span class="diff-line del">-threadfin_docker_devices_default: []</span><span class="diff-line del">-threadfin_docker_devices_custom: []</span><span class="diff-line del">-threadfin_docker_devices: &quot;{{ threadfin_docker_devices_default</span><span class="diff-line del">-                              + threadfin_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-threadfin_docker_hosts_default: {}</span><span class="diff-line del">-threadfin_docker_hosts_custom: {}</span><span class="diff-line del">-threadfin_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(threadfin_docker_hosts_default)</span><span class="diff-line del">-                            | combine(threadfin_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-threadfin_docker_labels_default: {}</span><span class="diff-line del">-threadfin_docker_labels_custom: {}</span><span class="diff-line del">-threadfin_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(threadfin_docker_labels_default)</span><span class="diff-line del">-                             | combine(threadfin_docker_labels_custom) }}&quot;</span><span class="diff-line add">+# Mounts</span><span class="diff-line add">+threadfin_role_docker_mounts_default:</span><span class="diff-line add">+  - target: /tmp/threadfin</span><span class="diff-line add">+    type: tmpfs</span><span class="diff-line add">+threadfin_role_docker_mounts_custom: []</span><span class="diff-line add">+threadfin_role_docker_mounts: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_default&#x27;, role=&#x27;threadfin&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_mounts_custom&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-threadfin_docker_hostname: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line add">+threadfin_role_docker_hostname: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-threadfin_docker_networks_alias: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line del">-threadfin_docker_networks_default: []</span><span class="diff-line del">-threadfin_docker_networks_custom: []</span><span class="diff-line del">-threadfin_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + threadfin_docker_networks_default</span><span class="diff-line del">-                               + threadfin_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-threadfin_docker_capabilities_default: []</span><span class="diff-line del">-threadfin_docker_capabilities_custom: []</span><span class="diff-line del">-threadfin_docker_capabilities: &quot;{{ threadfin_docker_capabilities_default</span><span class="diff-line del">-                                   + threadfin_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-threadfin_docker_security_opts_default: []</span><span class="diff-line del">-threadfin_docker_security_opts_custom: []</span><span class="diff-line del">-threadfin_docker_security_opts: &quot;{{ threadfin_docker_security_opts_default</span><span class="diff-line del">-                                    + threadfin_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+threadfin_role_docker_networks_alias: &quot;{{ threadfin_name }}&quot;</span><span class="diff-line add">+threadfin_role_docker_networks_default: []</span><span class="diff-line add">+threadfin_role_docker_networks_custom: []</span><span class="diff-line add">+threadfin_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;threadfin&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;threadfin&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-threadfin_docker_restart_policy: unless-stopped</span><span class="diff-line add">+threadfin_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-threadfin_docker_state: started</span><span class="diff-line add">+threadfin_role_docker_state: started</span><span class="diff-line add">+</span><span class="diff-line add">+# Init</span><span class="diff-line add">+threadfin_role_docker_init: true</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-threadfin_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+threadfin_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-375">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/threadfin/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-376">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tika/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,83 +18,34 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tika_docker_container: &quot;{{ tika_name }}&quot;</span><span class="diff-line add">+tika_role_docker_container: &quot;{{ tika_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tika_docker_image_pull: true</span><span class="diff-line del">-tika_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tika_docker_image: &quot;apache/tika:{{ tika_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-tika_docker_ports_defaults: []</span><span class="diff-line del">-tika_docker_ports_custom: []</span><span class="diff-line del">-tika_docker_ports: &quot;{{ tika_docker_ports_defaults</span><span class="diff-line del">-                       + tika_docker_ports_custom }}&quot;</span><span class="diff-line add">+tika_role_docker_image_pull: true</span><span class="diff-line add">+tika_role_docker_image_repo: &quot;apache/tika&quot;</span><span class="diff-line add">+tika_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tika_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tika&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tika&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tika_docker_envs_default:</span><span class="diff-line add">+tika_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-tika_docker_envs_custom: {}</span><span class="diff-line del">-tika_docker_envs: &quot;{{ tika_docker_envs_default</span><span class="diff-line del">-                      | combine(tika_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tika_docker_commands_default: []</span><span class="diff-line del">-tika_docker_commands_custom: []</span><span class="diff-line del">-tika_docker_commands: &quot;{{ tika_docker_commands_default</span><span class="diff-line del">-                          + tika_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-tika_docker_volumes_default: []</span><span class="diff-line del">-tika_docker_volumes_custom: []</span><span class="diff-line del">-tika_docker_volumes: &quot;{{ tika_docker_volumes_default</span><span class="diff-line del">-                         + tika_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tika_docker_devices_default: []</span><span class="diff-line del">-tika_docker_devices_custom: []</span><span class="diff-line del">-tika_docker_devices: &quot;{{ tika_docker_devices_default</span><span class="diff-line del">-                         + tika_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tika_docker_hosts_default: {}</span><span class="diff-line del">-tika_docker_hosts_custom: {}</span><span class="diff-line del">-tika_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                       | combine(tika_docker_hosts_default)</span><span class="diff-line del">-                       | combine(tika_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tika_docker_labels_default: {}</span><span class="diff-line del">-tika_docker_labels_custom: {}</span><span class="diff-line del">-tika_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                        | combine(tika_docker_labels_default)</span><span class="diff-line del">-                        | combine(tika_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tika_role_docker_envs_custom: {}</span><span class="diff-line add">+tika_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tika&#x27;)</span><span class="diff-line add">+                           | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tika&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tika_docker_hostname: &quot;{{ tika_name }}&quot;</span><span class="diff-line add">+tika_role_docker_hostname: &quot;{{ tika_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tika_docker_networks_alias: &quot;{{ tika_name }}&quot;</span><span class="diff-line del">-tika_docker_networks_default: []</span><span class="diff-line del">-tika_docker_networks_custom: []</span><span class="diff-line del">-tika_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                          + tika_docker_networks_default</span><span class="diff-line del">-                          + tika_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tika_docker_capabilities_default: []</span><span class="diff-line del">-tika_docker_capabilities_custom: []</span><span class="diff-line del">-tika_docker_capabilities: &quot;{{ tika_docker_capabilities_default</span><span class="diff-line del">-                              + tika_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tika_docker_security_opts_default: []</span><span class="diff-line del">-tika_docker_security_opts_custom: []</span><span class="diff-line del">-tika_docker_security_opts: &quot;{{ tika_docker_security_opts_default</span><span class="diff-line del">-                               + tika_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tika_role_docker_networks_alias: &quot;{{ tika_name }}&quot;</span><span class="diff-line add">+tika_role_docker_networks_default: []</span><span class="diff-line add">+tika_role_docker_networks_custom: []</span><span class="diff-line add">+tika_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tika&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tika&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tika_docker_restart_policy: always</span><span class="diff-line add">+tika_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tika_docker_state: started</span><span class="diff-line add">+tika_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-377">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tqm/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,7 +7,6 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-</span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line hunk">@@ -15,13 +14,19 @@</span><span class="diff-line context"> tqm_name: tqm</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Settings</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+tqm_role_download_client: &quot;qbt&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tqm_paths_folder: &quot;{{ tqm_name }}&quot;</span><span class="diff-line del">-tqm_paths_location: &quot;{{ server_appdata_path }}/{{ tqm_paths_folder }}&quot;</span><span class="diff-line del">-tqm_paths_config_location: &quot;{{ tqm_paths_location }}/config.yaml&quot;</span><span class="diff-line del">-tqm_paths_service_location: &quot;/etc/systemd/system/tqm.service&quot;</span><span class="diff-line del">-tqm_paths_timer_location: &quot;/etc/systemd/system/tqm.timer&quot;</span><span class="diff-line del">-tqm_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tqm_paths_location }}&quot;</span><span class="diff-line add">+tqm_role_paths_folder: &quot;{{ tqm_name }}&quot;</span><span class="diff-line add">+tqm_role_paths_location: &quot;{{ server_appdata_path }}/{{ tqm_role_paths_folder }}&quot;</span><span class="diff-line add">+tqm_role_paths_config_location: &quot;{{ tqm_role_paths_location }}/config.yaml&quot;</span><span class="diff-line add">+tqm_role_paths_service_location: &quot;/etc/systemd/system/tqm.service&quot;</span><span class="diff-line add">+tqm_role_paths_timer_location: &quot;/etc/systemd/system/tqm.timer&quot;</span><span class="diff-line add">+tqm_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tqm_role_paths_location }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-378">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tqm/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,7 +9,7 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Check if &#x27;tqm_service&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ tqm_paths_service_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ tqm_role_paths_service_location }}&quot;</span><span class="diff-line context">   register: tqm_service</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Stop existing &#x27;tqm_service&#x27;</span><span class="diff-line hunk">@@ -20,7 +20,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if &#x27;tqm_timer&#x27; exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ tqm_paths_timer_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ tqm_role_paths_timer_location }}&quot;</span><span class="diff-line context">   register: tqm_timer</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Stop existing &#x27;tqm_timer&#x27;</span><span class="diff-line hunk">@@ -63,25 +63,25 @@</span><span class="diff-line context">   ansible.builtin.unarchive:</span><span class="diff-line context">     src: &quot;/tmp/tqm_extract/tqm_archive.tar.gz&quot;</span><span class="diff-line context">     dest: &quot;/tmp/tqm_extract/&quot;</span><span class="diff-line del">-    remote_src: yes</span><span class="diff-line add">+    remote_src: true</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Copy tqm binary to destination</span><span class="diff-line context">   ansible.builtin.copy:</span><span class="diff-line context">     src: &quot;/tmp/tqm_extract/tqm&quot;</span><span class="diff-line del">-    dest: &quot;{{ tqm_paths_location }}/tqm&quot;</span><span class="diff-line add">+    dest: &quot;{{ tqm_role_paths_location }}/tqm&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line del">-    remote_src: yes</span><span class="diff-line add">+    remote_src: true</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Clean up temporary files</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line context">     path: &quot;/tmp/tqm_extract&quot;</span><span class="diff-line context">     state: absent</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Check if `{{ tqm_paths_config_location | basename }}` exists</span><span class="diff-line add">+- name: Check if `{{ tqm_role_paths_config_location | basename }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ tqm_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ tqm_role_paths_config_location }}&quot;</span><span class="diff-line context">   register: tqm_config</span><span class="diff-line context"> </span><span class="diff-line context"> - name: &quot;Fail when &#x27;config.yml&#x27; is not present&quot;</span><span class="diff-line hunk">@@ -91,13 +91,13 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Fail if &#x27;download_client&#x27; has not been set</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You need to edit &#x27;tqm.download_client&#x27; in the settings.yml. Options are deluge and qbt&quot;</span><span class="diff-line del">-  when: (tqm.download_client | default(&quot;client&quot;) | ternary(&#x27;true&#x27;, &#x27;false&#x27;) == &#x27;false&#x27;) and not continuous_integration</span><span class="diff-line add">+    msg: &quot;You need to set &#x27;tqm_role_download_client&#x27; (options: deluge, qbt).&quot;</span><span class="diff-line add">+  when: (lookup(&#x27;role_var&#x27;, &#x27;_download_client&#x27;, role=&#x27;tqm&#x27;) | default(&quot;client&quot;) | ternary(&#x27;true&#x27;, &#x27;false&#x27;) == &#x27;false&#x27;) and (not continuous_integration)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import &#x27;tqm_service&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: tqm.service.j2</span><span class="diff-line del">-    dest: &quot;{{ tqm_paths_service_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ tqm_role_paths_service_location }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     force: true</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -105,14 +105,14 @@</span><span class="diff-line context">   ansible.builtin.systemd_service:</span><span class="diff-line context">     name: tqm.service</span><span class="diff-line context">     state: started</span><span class="diff-line del">-    enabled: yes</span><span class="diff-line add">+    enabled: true</span><span class="diff-line context">     daemon_reload: true</span><span class="diff-line del">-  when: not continuous_integration</span><span class="diff-line add">+  when: (not continuous_integration)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import &#x27;tqm_timer&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: tqm.timer.j2</span><span class="diff-line del">-    dest: &quot;{{ tqm_paths_timer_location }}&quot;</span><span class="diff-line add">+    dest: &quot;{{ tqm_role_paths_timer_location }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span><span class="diff-line context">     force: true</span><span class="diff-line context"> </span><span class="diff-line hunk">@@ -120,6 +120,6 @@</span><span class="diff-line context">   ansible.builtin.systemd_service:</span><span class="diff-line context">     name: tqm.timer</span><span class="diff-line context">     state: started</span><span class="diff-line del">-    enabled: yes</span><span class="diff-line add">+    enabled: true</span><span class="diff-line context">     daemon_reload: true</span><span class="diff-line del">-  when: not continuous_integration</span><span class="diff-line add">+  when: (not continuous_integration)</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-379">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tqm/templates/tqm.service.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -5,10 +5,10 @@</span><span class="diff-line context"> User={{ user.name }}</span><span class="diff-line context"> Group={{ user.name }}</span><span class="diff-line context"> Type=oneshot</span><span class="diff-line del">-WorkingDirectory={{ tqm_paths_location }}</span><span class="diff-line add">+WorkingDirectory={{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tqm&#x27;) }}</span><span class="diff-line context"> ExecStartPre=/bin/sleep 30</span><span class="diff-line del">-ExecStart={{ tqm_paths_location}}/tqm \</span><span class="diff-line del">-  clean {{ tqm.download_client | default(&#x27;qbt&#x27;, true)  }}</span><span class="diff-line add">+ExecStart={{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tqm&#x27;) }}/tqm \</span><span class="diff-line add">+  clean {{ lookup(&#x27;role_var&#x27;, &#x27;_download_client&#x27;, role=&#x27;tqm&#x27;) }}</span><span class="diff-line context"> </span><span class="diff-line context"> [Install]</span><span class="diff-line context"> WantedBy=default.target</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-380">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trackarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,137 +17,94 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trackarr_paths_folder: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line del">-trackarr_paths_location: &quot;{{ server_appdata_path }}/{{ trackarr_paths_folder }}&quot;</span><span class="diff-line del">-trackarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ trackarr_paths_location }}&quot;</span><span class="diff-line del">-trackarr_paths_config_location: &quot;{{ trackarr_paths_location }}/config.yaml&quot;</span><span class="diff-line add">+trackarr_role_paths_folder: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line add">+trackarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ trackarr_role_paths_folder }}&quot;</span><span class="diff-line add">+trackarr_role_paths_config_location: &quot;{{ trackarr_role_paths_location }}/config.yaml&quot;</span><span class="diff-line add">+trackarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ trackarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trackarr_web_subdomain: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line del">-trackarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-trackarr_web_port: &quot;7337&quot;</span><span class="diff-line del">-trackarr_web_url: &quot;{{ &#x27;https://&#x27; + (trackarr_web_subdomain + &#x27;.&#x27; + trackarr_web_domain</span><span class="diff-line del">-                   if (trackarr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else trackarr_web_domain) }}&quot;</span><span class="diff-line add">+trackarr_role_web_subdomain: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line add">+trackarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+trackarr_role_web_port: &quot;7337&quot;</span><span class="diff-line add">+trackarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trackarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trackarr&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trackarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trackarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trackarr_dns_record: &quot;{{ trackarr_web_subdomain }}&quot;</span><span class="diff-line del">-trackarr_dns_zone: &quot;{{ trackarr_web_domain }}&quot;</span><span class="diff-line del">-trackarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+trackarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line add">+trackarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line add">+trackarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trackarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-trackarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-trackarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-trackarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-trackarr_traefik_enabled: true</span><span class="diff-line del">-trackarr_traefik_api_enabled: false</span><span class="diff-line del">-trackarr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+trackarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+trackarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+trackarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+trackarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+trackarr_role_traefik_enabled: true</span><span class="diff-line add">+trackarr_role_traefik_api_enabled: false</span><span class="diff-line add">+trackarr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # API</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # default to blank</span><span class="diff-line del">-trackarr_server_apikey:</span><span class="diff-line add">+trackarr_server_apikey: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-trackarr_docker_container: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line add">+trackarr_role_docker_container: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-trackarr_docker_image_pull: true</span><span class="diff-line del">-trackarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-trackarr_docker_image: &quot;cloudb0x/trackarr:{{ trackarr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-trackarr_docker_ports_defaults: []</span><span class="diff-line del">-trackarr_docker_ports_custom: []</span><span class="diff-line del">-trackarr_docker_ports: &quot;{{ trackarr_docker_ports_defaults</span><span class="diff-line del">-                           + trackarr_docker_ports_custom }}&quot;</span><span class="diff-line add">+trackarr_role_docker_image_pull: true</span><span class="diff-line add">+trackarr_role_docker_image_repo: &quot;cloudb0x/trackarr&quot;</span><span class="diff-line add">+trackarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+trackarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;trackarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-trackarr_docker_envs_log_level: &quot;1&quot;</span><span class="diff-line del">-trackarr_docker_envs_default:</span><span class="diff-line add">+trackarr_role_docker_envs_log_level: &quot;1&quot;</span><span class="diff-line add">+trackarr_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  VERBOSE: &quot;{{ trackarr_docker_envs_log_level }}&quot;</span><span class="diff-line del">-trackarr_docker_envs_custom: {}</span><span class="diff-line del">-trackarr_docker_envs: &quot;{{ trackarr_docker_envs_default</span><span class="diff-line del">-                          | combine(trackarr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-trackarr_docker_commands_default: []</span><span class="diff-line del">-trackarr_docker_commands_custom: []</span><span class="diff-line del">-trackarr_docker_commands: &quot;{{ trackarr_docker_commands_default</span><span class="diff-line del">-                              + trackarr_docker_commands_custom }}&quot;</span><span class="diff-line add">+  VERBOSE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_log_level&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line add">+trackarr_role_docker_envs_custom: {}</span><span class="diff-line add">+trackarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;trackarr&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;trackarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-trackarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ trackarr_paths_location }}:/config&quot;</span><span class="diff-line del">-trackarr_docker_volumes_custom: []</span><span class="diff-line del">-trackarr_docker_volumes: &quot;{{ trackarr_docker_volumes_default</span><span class="diff-line del">-                             + trackarr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-trackarr_docker_devices_default: []</span><span class="diff-line del">-trackarr_docker_devices_custom: []</span><span class="diff-line del">-trackarr_docker_devices: &quot;{{ trackarr_docker_devices_default</span><span class="diff-line del">-                             + trackarr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-trackarr_docker_hosts_default: {}</span><span class="diff-line del">-trackarr_docker_hosts_custom: {}</span><span class="diff-line del">-trackarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(trackarr_docker_hosts_default)</span><span class="diff-line del">-                           | combine(trackarr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-trackarr_docker_labels_default: {}</span><span class="diff-line del">-trackarr_docker_labels_custom: {}</span><span class="diff-line del">-trackarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(trackarr_docker_labels_default)</span><span class="diff-line del">-                            | combine(trackarr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+trackarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;trackarr&#x27;) }}:/config&quot;</span><span class="diff-line add">+trackarr_role_docker_volumes_custom: []</span><span class="diff-line add">+trackarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;trackarr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-trackarr_docker_hostname: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line add">+trackarr_role_docker_hostname: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-trackarr_docker_networks_alias: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line del">-trackarr_docker_networks_default: []</span><span class="diff-line del">-trackarr_docker_networks_custom: []</span><span class="diff-line del">-trackarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + trackarr_docker_networks_default</span><span class="diff-line del">-                              + trackarr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-trackarr_docker_capabilities_default: []</span><span class="diff-line del">-trackarr_docker_capabilities_custom: []</span><span class="diff-line del">-trackarr_docker_capabilities: &quot;{{ trackarr_docker_capabilities_default</span><span class="diff-line del">-                                  + trackarr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-trackarr_docker_security_opts_default: []</span><span class="diff-line del">-trackarr_docker_security_opts_custom: []</span><span class="diff-line del">-trackarr_docker_security_opts: &quot;{{ trackarr_docker_security_opts_default</span><span class="diff-line del">-                                   + trackarr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+trackarr_role_docker_networks_alias: &quot;{{ trackarr_name }}&quot;</span><span class="diff-line add">+trackarr_role_docker_networks_default: []</span><span class="diff-line add">+trackarr_role_docker_networks_custom: []</span><span class="diff-line add">+trackarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;trackarr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-trackarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+trackarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-trackarr_docker_state: started</span><span class="diff-line add">+trackarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-381">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trackarr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-382">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trackarr/tasks/subtasks/pre-install.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,11 +9,11 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Pre-Install | Check if Trackarr config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ trackarr_paths_config_location }}&quot;</span><span class="diff-line del">-  register: trackarr_paths_config_location_stat</span><span class="diff-line add">+    path: &quot;{{ trackarr_role_paths_config_location }}&quot;</span><span class="diff-line add">+  register: trackarr_role_paths_config_location_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pre-Install | New Trackarr config tasks</span><span class="diff-line del">-  when: not trackarr_paths_config_location_stat.stat.exists</span><span class="diff-line add">+  when: not trackarr_role_paths_config_location_stat.stat.exists</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Pre-Install | Get Instance Info</span><span class="diff-line context">       ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/instances/get_info.yml&quot;</span><span class="diff-line hunk">@@ -29,12 +29,12 @@</span><span class="diff-line context">     - name: Pre-Install | Import default Trackarr config</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: &quot;config.yaml.j2&quot;</span><span class="diff-line del">-        dest: &quot;{{ trackarr_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ trackarr_role_paths_config_location }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span><span class="diff-line context">         force: false</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: Pre-Install | Set &#x27;trackarr_docker_state&#x27; variable</span><span class="diff-line add">+    - name: Pre-Install | Set &#x27;trackarr_role_docker_state&#x27; variable</span><span class="diff-line context">       ansible.builtin.set_fact:</span><span class="diff-line del">-        trackarr_docker_state: &quot;stopped&quot;</span><span class="diff-line add">+        trackarr_role_docker_state: &quot;stopped&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-383">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trackarr/templates/config.yaml.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -40,8 +40,8 @@</span><span class="diff-line context">   apikey: &quot;{{ trackarr_server_apikey }}&quot;</span><span class="diff-line context">   host: 0.0.0.0</span><span class="diff-line context">   pass: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-  port: &quot;{{ trackarr_web_port }}&quot;</span><span class="diff-line del">-  publicurl: &quot;{{ trackarr_web_url }}&quot;</span><span class="diff-line add">+  port: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line add">+  publicurl: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;trackarr&#x27;) }}&quot;</span><span class="diff-line context">   user: {{ user.name }}</span><span class="diff-line context"> trackers:</span><span class="diff-line context">   iptorrents:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-384">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/traefik_robotstxt/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,6 +10,7 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line add">+</span><span class="diff-line context"> traefik_robotstxt_name: traefik-robotstxt</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line hunk">@@ -17,82 +18,39 @@</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-traefik_robotstxt_docker_container: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_container: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-traefik_robotstxt_docker_image_pull: true</span><span class="diff-line del">-traefik_robotstxt_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-traefik_robotstxt_docker_image: &quot;mstroecker/zig-robotstxt:{{ traefik_robotstxt_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-traefik_robotstxt_docker_envs_default: {}</span><span class="diff-line del">-traefik_robotstxt_docker_envs_custom: {}</span><span class="diff-line del">-traefik_robotstxt_docker_envs: &quot;{{ traefik_robotstxt_docker_envs_default</span><span class="diff-line del">-                                   | combine(traefik_robotstxt_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-traefik_robotstxt_docker_commands_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_commands_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_commands: &quot;{{ traefik_robotstxt_docker_commands_default</span><span class="diff-line del">-                                       + traefik_robotstxt_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-traefik_robotstxt_docker_volumes_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_volumes_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_volumes: &quot;{{ traefik_robotstxt_docker_volumes_default</span><span class="diff-line del">-                                      + traefik_robotstxt_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-traefik_robotstxt_docker_devices_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_devices_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_devices: &quot;{{ traefik_robotstxt_docker_devices_default</span><span class="diff-line del">-                                      + traefik_robotstxt_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-traefik_robotstxt_docker_hosts_default: {}</span><span class="diff-line del">-traefik_robotstxt_docker_hosts_custom: {}</span><span class="diff-line del">-traefik_robotstxt_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                    | combine(traefik_robotstxt_docker_hosts_default)</span><span class="diff-line del">-                                    | combine(traefik_robotstxt_docker_hosts_custom) }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_image_pull: true</span><span class="diff-line add">+traefik_robotstxt_role_docker_image_repo: &quot;mstroecker/zig-robotstxt&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;traefik_robotstxt&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;traefik_robotstxt&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Labels</span><span class="diff-line del">-traefik_robotstxt_docker_labels_default:</span><span class="diff-line add">+traefik_robotstxt_role_docker_labels_default:</span><span class="diff-line context">   traefik.enable: &quot;true&quot;</span><span class="diff-line context">   traefik.http.routers.robotstxt.entrypoints: &quot;web,websecure&quot;</span><span class="diff-line context">   traefik.http.routers.robotstxt.rule: &quot;Path(`/robots.txt`)&quot;</span><span class="diff-line context">   traefik.http.routers.robotstxt.service: &quot;robotstxt&quot;</span><span class="diff-line context">   traefik.http.services.robotstxt.loadbalancer.server.port: &quot;8080&quot;</span><span class="diff-line context">   traefik.http.routers.robotstxt.priority: &quot;99&quot;</span><span class="diff-line del">-traefik_robotstxt_docker_labels_custom: {}</span><span class="diff-line del">-traefik_robotstxt_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                     | combine(traefik_robotstxt_docker_labels_default)</span><span class="diff-line del">-                                     | combine(traefik_robotstxt_docker_labels_custom) }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_labels_custom: {}</span><span class="diff-line add">+traefik_robotstxt_role_docker_labels: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_default&#x27;, role=&#x27;traefik_robotstxt&#x27;)</span><span class="diff-line add">+                                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_labels_custom&#x27;, role=&#x27;traefik_robotstxt&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-traefik_robotstxt_docker_hostname: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_hostname: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-traefik_robotstxt_docker_networks_alias: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line del">-traefik_robotstxt_docker_networks_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_networks_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                       + traefik_robotstxt_docker_networks_default</span><span class="diff-line del">-                                       + traefik_robotstxt_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-traefik_robotstxt_docker_capabilities_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_capabilities_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_capabilities: &quot;{{ traefik_robotstxt_docker_capabilities_default</span><span class="diff-line del">-                                           + traefik_robotstxt_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-traefik_robotstxt_docker_security_opts_default: []</span><span class="diff-line del">-traefik_robotstxt_docker_security_opts_custom: []</span><span class="diff-line del">-traefik_robotstxt_docker_security_opts: &quot;{{ traefik_robotstxt_docker_security_opts_default</span><span class="diff-line del">-                                            + traefik_robotstxt_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_networks_alias: &quot;{{ traefik_robotstxt_name }}&quot;</span><span class="diff-line add">+traefik_robotstxt_role_docker_networks_default: []</span><span class="diff-line add">+traefik_robotstxt_role_docker_networks_custom: []</span><span class="diff-line add">+traefik_robotstxt_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                            + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;traefik_robotstxt&#x27;)</span><span class="diff-line add">+                                            + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;traefik_robotstxt&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-traefik_robotstxt_docker_restart_policy: unless-stopped</span><span class="diff-line add">+traefik_robotstxt_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-traefik_robotstxt_docker_state: started</span><span class="diff-line add">+traefik_robotstxt_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-385">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/traefik_robotstxt/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,7 +10,7 @@</span><span class="diff-line context"> - name: Remove legacy Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;traefik_robotstxt&quot;</span><span class="diff-line add">+    container_name: &quot;traefik_robotstxt&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-386">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmission/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,154 +17,112 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmission_paths_folder: &quot;{{ transmission_name }}&quot;</span><span class="diff-line del">-transmission_paths_location: &quot;{{ server_appdata_path }}/{{ transmission_paths_folder }}&quot;</span><span class="diff-line del">-transmission_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ transmission_paths_folder }}&quot;</span><span class="diff-line del">-transmission_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ transmission_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}/completed&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}/incoming&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}/watched&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}/torrents&quot;</span><span class="diff-line del">-transmission_paths_setttings_location: &quot;{{ transmission_paths_location }}/settings.json&quot;</span><span class="diff-line add">+transmission_role_paths_folder: &quot;{{ transmission_name }}&quot;</span><span class="diff-line add">+transmission_role_paths_location: &quot;{{ server_appdata_path }}/{{ transmission_role_paths_folder }}&quot;</span><span class="diff-line add">+transmission_role_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ transmission_role_paths_folder }}&quot;</span><span class="diff-line add">+transmission_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}/completed&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}/incoming&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}/watched&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}/torrents&quot;</span><span class="diff-line add">+transmission_role_paths_setttings_location: &quot;{{ transmission_role_paths_location }}/settings.json&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmission_web_subdomain: &quot;{{ transmission_name }}&quot;</span><span class="diff-line del">-transmission_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-transmission_web_port: &quot;9091&quot;</span><span class="diff-line del">-transmission_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_subdomain&#x27;, default=transmission_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_domain&#x27;, default=transmission_web_domain)</span><span class="diff-line del">-                       if (lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_subdomain&#x27;, default=transmission_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                       else lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_domain&#x27;, default=transmission_web_domain)) }}&quot;</span><span class="diff-line add">+transmission_role_web_subdomain: &quot;{{ transmission_name }}&quot;</span><span class="diff-line add">+transmission_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+transmission_role_web_port: &quot;9091&quot;</span><span class="diff-line add">+transmission_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmission&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmission&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmission&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmission&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmission_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_subdomain&#x27;, default=transmission_web_subdomain) }}&quot;</span><span class="diff-line del">-transmission_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_web_domain&#x27;, default=transmission_web_domain) }}&quot;</span><span class="diff-line del">-transmission_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+transmission_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line add">+transmission_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line add">+transmission_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmission_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-transmission_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-transmission_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-transmission_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-transmission_traefik_enabled: true</span><span class="diff-line del">-transmission_traefik_api_enabled: true</span><span class="diff-line del">-transmission_traefik_api_endpoint: &quot;PathPrefix(`/rpc`)&quot;</span><span class="diff-line add">+transmission_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+transmission_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+transmission_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+transmission_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+transmission_role_traefik_enabled: true</span><span class="diff-line add">+transmission_role_traefik_api_enabled: true</span><span class="diff-line add">+transmission_role_traefik_api_endpoint: &quot;PathPrefix(`/rpc`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-transmission_docker_container: &quot;{{ transmission_name }}&quot;</span><span class="diff-line add">+transmission_role_docker_container: &quot;{{ transmission_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-transmission_docker_image_pull: true</span><span class="diff-line del">-transmission_docker_image_repo: &quot;lscr.io/linuxserver/transmission&quot;</span><span class="diff-line del">-transmission_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-transmission_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_image_repo&#x27;, default=transmission_docker_image_repo)</span><span class="diff-line del">-                               + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_image_tag&#x27;, default=transmission_docker_image_tag) }}&quot;</span><span class="diff-line add">+transmission_role_docker_image_pull: true</span><span class="diff-line add">+transmission_role_docker_image_repo: &quot;lscr.io/linuxserver/transmission&quot;</span><span class="diff-line add">+transmission_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+transmission_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;transmission&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line context"> # - Internal and External ports need to match for the next set of ports</span><span class="diff-line context"> # - Lookup available ports and set docker ports accordingly</span><span class="diff-line del">-transmission_docker_ports_51413: &quot;{{ port_lookup_51413.meta.port</span><span class="diff-line del">-                                  if (port_lookup_51413.meta.port is defined) and (port_lookup_51413.meta.port | trim | length &gt; 0)</span><span class="diff-line del">-                                  else &#x27;51413&#x27; }}&quot;</span><span class="diff-line del">-transmission_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ transmission_docker_ports_51413 }}:{{ transmission_docker_ports_51413 }}&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_docker_ports_51413 }}:{{ transmission_docker_ports_51413 }}/udp&quot;</span><span class="diff-line del">-transmission_docker_ports_custom: []</span><span class="diff-line del">-transmission_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_ports_defaults&#x27;, default=transmission_docker_ports_defaults)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_ports_custom&#x27;, default=transmission_docker_ports_custom) }}&quot;</span><span class="diff-line add">+transmission_role_docker_ports_51413: &quot;{{ port_lookup_51413.meta.port</span><span class="diff-line add">+                                       if (port_lookup_51413.meta.port is defined) and (port_lookup_51413.meta.port | trim | length &gt; 0)</span><span class="diff-line add">+                                       else &#x27;51413&#x27; }}&quot;</span><span class="diff-line add">+transmission_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_51413&#x27;, role=&#x27;transmission&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_51413&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_51413&#x27;, role=&#x27;transmission&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_51413&#x27;, role=&#x27;transmission&#x27;) }}/udp&quot;</span><span class="diff-line add">+transmission_role_docker_ports_custom: []</span><span class="diff-line add">+transmission_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;transmission&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-transmission_docker_envs_default:</span><span class="diff-line add">+transmission_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   UMASK: &quot;002&quot;</span><span class="diff-line context">   USER: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   PASS: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-transmission_docker_envs_custom: {}</span><span class="diff-line del">-transmission_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_envs_default&#x27;, default=transmission_docker_envs_default)</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_envs_custom&#x27;, default=transmission_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-transmission_docker_commands_default: []</span><span class="diff-line del">-transmission_docker_commands_custom: []</span><span class="diff-line del">-transmission_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_commands_default&#x27;, default=transmission_docker_commands_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_commands_custom&#x27;, default=transmission_docker_commands_custom) }}&quot;</span><span class="diff-line add">+transmission_role_docker_envs_custom: {}</span><span class="diff-line add">+transmission_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;transmission&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;transmission&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-transmission_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ transmission_paths_location }}:/config&quot;</span><span class="diff-line add">+transmission_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_location }}:/config&quot;</span><span class="diff-line context">   - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line del">-  - &quot;{{ transmission_paths_downloads_location }}/watched:/watch&quot;</span><span class="diff-line del">-transmission_docker_volumes_custom: []</span><span class="diff-line del">-transmission_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_volumes_default&#x27;, default=transmission_docker_volumes_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_volumes_custom&#x27;, default=transmission_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-transmission_docker_devices_default: []</span><span class="diff-line del">-transmission_docker_devices_custom: []</span><span class="diff-line del">-transmission_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_devices_default&#x27;, default=transmission_docker_devices_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_devices_custom&#x27;, default=transmission_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-transmission_docker_hosts_default: {}</span><span class="diff-line del">-transmission_docker_hosts_custom: {}</span><span class="diff-line del">-transmission_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_hosts_default&#x27;, default=transmission_docker_hosts_default))</span><span class="diff-line del">-                               | combine(lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_hosts_custom&#x27;, default=transmission_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-transmission_docker_labels_default: {}</span><span class="diff-line del">-transmission_docker_labels_custom: {}</span><span class="diff-line del">-transmission_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_labels_default&#x27;, default=transmission_docker_labels_default))</span><span class="diff-line del">-                                | combine(lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_labels_custom&#x27;, default=transmission_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+  - &quot;{{ transmission_role_paths_downloads_location }}/watched:/watch&quot;</span><span class="diff-line add">+transmission_role_docker_volumes_custom: []</span><span class="diff-line add">+transmission_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;transmission&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-transmission_docker_hostname: &quot;{{ transmission_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-transmission_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-transmission_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_network_mode_default&#x27;, default=transmission_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+transmission_role_docker_hostname: &quot;{{ transmission_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-transmission_docker_networks_alias: &quot;{{ transmission_name }}&quot;</span><span class="diff-line del">-transmission_docker_networks_default: []</span><span class="diff-line del">-transmission_docker_networks_custom: []</span><span class="diff-line del">-transmission_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_networks_default&#x27;, default=transmission_docker_networks_default)</span><span class="diff-line del">-                                  + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_networks_custom&#x27;, default=transmission_docker_networks_custom) }}&quot;</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-transmission_docker_capabilities_default: []</span><span class="diff-line del">-transmission_docker_capabilities_custom: []</span><span class="diff-line del">-transmission_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_capabilities_default&#x27;, default=transmission_docker_capabilities_default)</span><span class="diff-line del">-                                      + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_capabilities_custom&#x27;, default=transmission_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-transmission_docker_security_opts_default: []</span><span class="diff-line del">-transmission_docker_security_opts_custom: []</span><span class="diff-line del">-transmission_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_security_opts_default&#x27;, default=transmission_docker_security_opts_default)</span><span class="diff-line del">-                                       + lookup(&#x27;vars&#x27;, transmission_name + &#x27;_docker_security_opts_custom&#x27;, default=transmission_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+transmission_role_docker_networks_alias: &quot;{{ transmission_name }}&quot;</span><span class="diff-line add">+transmission_role_docker_networks_default: []</span><span class="diff-line add">+transmission_role_docker_networks_custom: []</span><span class="diff-line add">+transmission_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;transmission&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;transmission&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-transmission_docker_restart_policy: unless-stopped</span><span class="diff-line add">+transmission_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # Stop Timeout</span><span class="diff-line del">-transmission_docker_stop_timeout: 900</span><span class="diff-line add">+transmission_role_docker_stop_timeout: 900</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-transmission_docker_state: started</span><span class="diff-line add">+transmission_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-387">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmission/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-388">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmission/tasks/subtasks/post-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,10 +9,8 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Wait for config files to be created</span><span class="diff-line context">   ansible.builtin.wait_for:</span><span class="diff-line del">-    path: &quot;{{ item }}&quot;</span><span class="diff-line add">+    path: &quot;{{ transmission_role_paths_setttings_location }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line del">-  loop:</span><span class="diff-line del">-    - &quot;{{ transmission_paths_setttings_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Post-Install | Wait for 10 seconds</span><span class="diff-line context">   ansible.builtin.wait_for:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-389">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmission/tasks/subtasks/post-install/settings/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,11 +8,11 @@</span><span class="diff-line context"> ######################################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Post-Install | Settings | Update &#x27;settings.json&#x27; config settings</span><span class="diff-line del">-  ansible.builtin.shell: jq &#x27;.&quot;peer-port&quot;={{ transmission_docker_ports_51413 }}&#x27; &quot;{{ transmission_paths_setttings_location }}&quot; | sponge &quot;{{ transmission_paths_setttings_location }}&quot;  # noqa 204</span><span class="diff-line add">+  ansible.builtin.shell: jq &#x27;.&quot;peer-port&quot;={{ transmission_role_docker_ports_51413 }}&#x27; &quot;{{ transmission_role_paths_setttings_location }}&quot; | sponge &quot;{{ transmission_role_paths_setttings_location }}&quot;  # noqa 204</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Post-Install | Settings | Set &#x27;{{ transmission_paths_location }}&#x27; ownership recursively</span><span class="diff-line add">+- name: Post-Install | Settings | Set &#x27;{{ transmission_role_paths_location }}&#x27; ownership recursively</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ transmission_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ transmission_role_paths_location }}&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     recurse: true</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-390">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmission/tasks/subtasks/pre-install/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,7 +7,7 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Pre-Install | Get next available port within the range of &#x27;51413-51433&#x27; # noqa fqcn[action]</span><span class="diff-line add">+- name: Pre-Install | Get next available port within the range of &#x27;51413-51433&#x27;</span><span class="diff-line context">   find_open_port:</span><span class="diff-line context">     low_bound: 51413</span><span class="diff-line context">     high_bound: 51433</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-391">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmissionvpn/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -20,158 +20,122 @@</span><span class="diff-line context"> transmissionvpn_create_tun_device: &quot;false&quot;</span><span class="diff-line context"> transmissionvpn_transmission_home: &quot;/opt/transmissionvpn&quot;</span><span class="diff-line context"> transmissionvpn_umask_set: &quot;022&quot;</span><span class="diff-line add">+transmissionvpn_role_vpn_user: &quot;&quot;</span><span class="diff-line add">+transmissionvpn_role_vpn_pass: &quot;&quot;</span><span class="diff-line add">+transmissionvpn_role_vpn_prov: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmissionvpn_paths_folder: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line del">-transmissionvpn_paths_location: &quot;{{ server_appdata_path }}/{{ transmissionvpn_paths_folder }}&quot;</span><span class="diff-line del">-transmissionvpn_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ transmissionvpn_paths_folder }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-transmissionvpn_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}/completed&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}/incoming&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}/watched&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}/torrents&quot;</span><span class="diff-line add">+transmissionvpn_role_paths_folder: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line add">+transmissionvpn_role_paths_location: &quot;{{ server_appdata_path }}/{{ transmissionvpn_role_paths_folder }}&quot;</span><span class="diff-line add">+transmissionvpn_role_paths_downloads_location: &quot;{{ downloads_torrents_path }}/{{ transmissionvpn_role_paths_folder }}&quot;</span><span class="diff-line add">+transmissionvpn_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_downloads_location }}/completed&quot;</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_downloads_location }}/incoming&quot;</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_downloads_location }}/watched&quot;</span><span class="diff-line add">+  - &quot;{{ transmissionvpn_role_paths_downloads_location }}/torrents&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmissionvpn_web_subdomain: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line del">-transmissionvpn_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-transmissionvpn_web_port: &quot;9091&quot;</span><span class="diff-line del">-transmissionvpn_web_url: &quot;{{ &#x27;https://&#x27; + (transmissionvpn_web_subdomain + &#x27;.&#x27; + transmissionvpn_web_domain</span><span class="diff-line del">-                          if (transmissionvpn_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                          else transmissionvpn_web_domain) }}&quot;</span><span class="diff-line add">+transmissionvpn_role_web_subdomain: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line add">+transmissionvpn_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+transmissionvpn_role_web_port: &quot;9091&quot;</span><span class="diff-line add">+transmissionvpn_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmissionvpn&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmissionvpn&#x27;)</span><span class="diff-line add">+                               if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmissionvpn&#x27;) | length &gt; 0)</span><span class="diff-line add">+                               else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmissionvpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmissionvpn_dns_record: &quot;{{ transmissionvpn_web_subdomain }}&quot;</span><span class="diff-line del">-transmissionvpn_dns_zone: &quot;{{ transmissionvpn_web_domain }}&quot;</span><span class="diff-line del">-transmissionvpn_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+transmissionvpn_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line add">+transmissionvpn_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line add">+transmissionvpn_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-transmissionvpn_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-transmissionvpn_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-transmissionvpn_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-transmissionvpn_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-transmissionvpn_traefik_enabled: true</span><span class="diff-line del">-transmissionvpn_traefik_api_enabled: false</span><span class="diff-line del">-transmissionvpn_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+transmissionvpn_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+transmissionvpn_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+transmissionvpn_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+transmissionvpn_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+transmissionvpn_role_traefik_enabled: true</span><span class="diff-line add">+transmissionvpn_role_traefik_api_enabled: false</span><span class="diff-line add">+transmissionvpn_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-transmissionvpn_docker_container: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_container: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-transmissionvpn_docker_image_pull: true</span><span class="diff-line del">-transmissionvpn_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-transmissionvpn_docker_image: &quot;haugene/transmission-openvpn:{{ transmissionvpn_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-transmissionvpn_docker_ports_defaults: []</span><span class="diff-line del">-transmissionvpn_docker_ports_custom: []</span><span class="diff-line del">-transmissionvpn_docker_ports: &quot;{{ transmissionvpn_docker_ports_defaults</span><span class="diff-line del">-                                  + transmissionvpn_docker_ports_custom }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_image_pull: true</span><span class="diff-line add">+transmissionvpn_role_docker_image_repo: &quot;haugene/transmission-openvpn&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;transmissionvpn&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-transmissionvpn_docker_envs_default:</span><span class="diff-line add">+transmissionvpn_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  OPENVPN_PROVIDER: &quot;{{ transmissionvpn.vpn_prov | default(&#x27;pia&#x27;, true) }}&quot;</span><span class="diff-line del">-  OPENVPN_USERNAME: &quot;{{ transmissionvpn.vpn_user | default(&#x27;username&#x27;, true) }}&quot;</span><span class="diff-line del">-  OPENVPN_PASSWORD: &quot;{{ transmissionvpn.vpn_pass | default(&#x27;password&#x27;, true) }}&quot;</span><span class="diff-line add">+  OPENVPN_PROVIDER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_prov&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line add">+  OPENVPN_USERNAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_user&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line add">+  OPENVPN_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_vpn_pass&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line context">   UMASK_SET: &quot;{{ transmissionvpn_umask_set }}&quot;</span><span class="diff-line context">   CREATE_TUN_DEVICE: &quot;{{ transmissionvpn_create_tun_device }}&quot;</span><span class="diff-line context">   TRANSMISSION_HOME: &quot;{{ transmissionvpn_transmission_home }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-transmissionvpn_docker_envs_custom: {}</span><span class="diff-line del">-transmissionvpn_docker_envs: &quot;{{ transmissionvpn_docker_envs_default</span><span class="diff-line del">-                                 | combine(transmissionvpn_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-transmissionvpn_docker_commands_default: []</span><span class="diff-line del">-transmissionvpn_docker_commands_custom: []</span><span class="diff-line del">-transmissionvpn_docker_commands: &quot;{{ transmissionvpn_docker_commands_default</span><span class="diff-line del">-                                     + transmissionvpn_docker_commands_custom }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_envs_custom: {}</span><span class="diff-line add">+transmissionvpn_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;transmissionvpn&#x27;)</span><span class="diff-line add">+                                      | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;transmissionvpn&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-transmissionvpn_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_location }}/data:/opt/transmissionvpn&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;transmissionvpn&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;transmissionvpn&#x27;) }}/data:/opt/transmissionvpn&quot;</span><span class="diff-line context">   - &quot;{{ server_appdata_path }}/scripts:/scripts&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_location }}/vpn:/etc/openvpn/custom&quot;</span><span class="diff-line del">-  - &quot;{{ transmissionvpn_paths_downloads_location }}:/data&quot;</span><span class="diff-line del">-transmissionvpn_docker_volumes_custom: []</span><span class="diff-line del">-transmissionvpn_docker_volumes: &quot;{{ transmissionvpn_docker_volumes_default</span><span class="diff-line del">-                                    + transmissionvpn_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-transmissionvpn_docker_devices_default: []</span><span class="diff-line del">-transmissionvpn_docker_devices_custom: []</span><span class="diff-line del">-transmissionvpn_docker_devices: &quot;{{ transmissionvpn_docker_devices_default</span><span class="diff-line del">-                                    + transmissionvpn_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-transmissionvpn_docker_hosts_default: {}</span><span class="diff-line del">-transmissionvpn_docker_hosts_custom: {}</span><span class="diff-line del">-transmissionvpn_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                  | combine(transmissionvpn_docker_hosts_default)</span><span class="diff-line del">-                                  | combine(transmissionvpn_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-transmissionvpn_docker_labels_default: {}</span><span class="diff-line del">-transmissionvpn_docker_labels_custom: {}</span><span class="diff-line del">-transmissionvpn_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                   | combine(transmissionvpn_docker_labels_default)</span><span class="diff-line del">-                                   | combine(transmissionvpn_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;transmissionvpn&#x27;) }}/vpn:/etc/openvpn/custom&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_downloads_location&#x27;, role=&#x27;transmissionvpn&#x27;) }}:/data&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_volumes_custom: []</span><span class="diff-line add">+transmissionvpn_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;transmissionvpn&#x27;)</span><span class="diff-line add">+                                         + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-transmissionvpn_docker_hostname: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_hostname: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-transmissionvpn_docker_networks_alias: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line del">-transmissionvpn_docker_networks_default: []</span><span class="diff-line del">-transmissionvpn_docker_networks_custom: []</span><span class="diff-line del">-transmissionvpn_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                     + transmissionvpn_docker_networks_default</span><span class="diff-line del">-                                     + transmissionvpn_docker_networks_custom }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_networks_alias: &quot;{{ transmissionvpn_name }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_networks_default: []</span><span class="diff-line add">+transmissionvpn_role_docker_networks_custom: []</span><span class="diff-line add">+transmissionvpn_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                          + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;transmissionvpn&#x27;)</span><span class="diff-line add">+                                          + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;transmissionvpn&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Capabilities</span><span class="diff-line del">-transmissionvpn_docker_capabilities_default:</span><span class="diff-line add">+transmissionvpn_role_docker_capabilities_default:</span><span class="diff-line context">   - NET_ADMIN</span><span class="diff-line del">-transmissionvpn_docker_capabilities_custom: []</span><span class="diff-line del">-transmissionvpn_docker_capabilities: &quot;{{ transmissionvpn_docker_capabilities_default</span><span class="diff-line del">-                                         + transmissionvpn_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-transmissionvpn_docker_security_opts_default: []</span><span class="diff-line del">-transmissionvpn_docker_security_opts_custom: []</span><span class="diff-line del">-transmissionvpn_docker_security_opts: &quot;{{ transmissionvpn_docker_security_opts_default</span><span class="diff-line del">-                                          + transmissionvpn_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_capabilities_custom: []</span><span class="diff-line add">+transmissionvpn_role_docker_capabilities: &quot;{{ transmissionvpn_role_docker_capabilities_default</span><span class="diff-line add">+                                              + transmissionvpn_role_docker_capabilities_custom }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-transmissionvpn_docker_restart_policy: unless-stopped</span><span class="diff-line add">+transmissionvpn_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-transmissionvpn_docker_state: started</span><span class="diff-line add">+transmissionvpn_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Sysctls</span><span class="diff-line del">-transmissionvpn_docker_sysctls:</span><span class="diff-line add">+transmissionvpn_role_docker_sysctls:</span><span class="diff-line context">   net.ipv4.conf.all.src_valid_mark: &quot;1&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Privileged</span><span class="diff-line del">-transmissionvpn_docker_privileged: &quot;yes&quot;</span><span class="diff-line add">+transmissionvpn_role_docker_privileged: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-392">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/transmissionvpn/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-393">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trilium/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trilium_paths_folder: &quot;{{ trilium_name }}&quot;</span><span class="diff-line del">-trilium_paths_location: &quot;{{ server_appdata_path }}/{{ trilium_paths_folder }}&quot;</span><span class="diff-line del">-trilium_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ trilium_paths_location }}&quot;</span><span class="diff-line add">+trilium_role_paths_folder: &quot;{{ trilium_name }}&quot;</span><span class="diff-line add">+trilium_role_paths_location: &quot;{{ server_appdata_path }}/{{ trilium_role_paths_folder }}&quot;</span><span class="diff-line add">+trilium_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ trilium_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trilium_web_subdomain: &quot;{{ trilium_name }}&quot;</span><span class="diff-line del">-trilium_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-trilium_web_port: &quot;8080&quot;</span><span class="diff-line del">-trilium_web_url: &quot;{{ &#x27;https://&#x27; + (trilium_web_subdomain + &#x27;.&#x27; + trilium_web_domain</span><span class="diff-line del">-                  if (trilium_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else trilium_web_domain) }}&quot;</span><span class="diff-line add">+trilium_role_web_subdomain: &quot;{{ trilium_name }}&quot;</span><span class="diff-line add">+trilium_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+trilium_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+trilium_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trilium&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trilium&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trilium&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trilium&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trilium_dns_record: &quot;{{ trilium_web_subdomain }}&quot;</span><span class="diff-line del">-trilium_dns_zone: &quot;{{ trilium_web_domain }}&quot;</span><span class="diff-line del">-trilium_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+trilium_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;trilium&#x27;) }}&quot;</span><span class="diff-line add">+trilium_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;trilium&#x27;) }}&quot;</span><span class="diff-line add">+trilium_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-trilium_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-trilium_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-trilium_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-trilium_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-trilium_traefik_enabled: true</span><span class="diff-line del">-trilium_traefik_api_enabled: false</span><span class="diff-line del">-trilium_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+trilium_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+trilium_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+trilium_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+trilium_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+trilium_role_traefik_enabled: true</span><span class="diff-line add">+trilium_role_traefik_api_enabled: false</span><span class="diff-line add">+trilium_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-trilium_docker_container: &quot;{{ trilium_name }}&quot;</span><span class="diff-line add">+trilium_role_docker_container: &quot;{{ trilium_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-trilium_docker_image_pull: true</span><span class="diff-line del">-trilium_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-trilium_docker_image: &quot;triliumnext/notes:{{ trilium_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-trilium_docker_ports_defaults: []</span><span class="diff-line del">-trilium_docker_ports_custom: []</span><span class="diff-line del">-trilium_docker_ports: &quot;{{ trilium_docker_ports_defaults</span><span class="diff-line del">-                          + trilium_docker_ports_custom }}&quot;</span><span class="diff-line add">+trilium_role_docker_image_pull: true</span><span class="diff-line add">+trilium_role_docker_image_repo: &quot;triliumnext/notes&quot;</span><span class="diff-line add">+trilium_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+trilium_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;trilium&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;trilium&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-trilium_docker_envs_default:</span><span class="diff-line add">+trilium_role_docker_envs_default:</span><span class="diff-line context">   USER_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   USER_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   TRILIUM_DATA_DIR: &quot;/home/node/trilium-data&quot;</span><span class="diff-line del">-trilium_docker_envs_custom: {}</span><span class="diff-line del">-trilium_docker_envs: &quot;{{ trilium_docker_envs_default</span><span class="diff-line del">-                         | combine(trilium_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-trilium_docker_commands_default: []</span><span class="diff-line del">-trilium_docker_commands_custom: []</span><span class="diff-line del">-trilium_docker_commands: &quot;{{ trilium_docker_commands_default</span><span class="diff-line del">-                             + trilium_docker_commands_custom }}&quot;</span><span class="diff-line add">+trilium_role_docker_envs_custom: {}</span><span class="diff-line add">+trilium_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;trilium&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;trilium&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-trilium_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ trilium_paths_location }}:/home/node/trilium-data&quot;</span><span class="diff-line del">-trilium_docker_volumes_custom: []</span><span class="diff-line del">-trilium_docker_volumes: &quot;{{ trilium_docker_volumes_default</span><span class="diff-line del">-                            + trilium_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-trilium_docker_devices_default: []</span><span class="diff-line del">-trilium_docker_devices_custom: []</span><span class="diff-line del">-trilium_docker_devices: &quot;{{ trilium_docker_devices_default</span><span class="diff-line del">-                            + trilium_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-trilium_docker_hosts_default: {}</span><span class="diff-line del">-trilium_docker_hosts_custom: {}</span><span class="diff-line del">-trilium_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(trilium_docker_hosts_default)</span><span class="diff-line del">-                          | combine(trilium_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-trilium_docker_labels_default: {}</span><span class="diff-line del">-trilium_docker_labels_custom: {}</span><span class="diff-line del">-trilium_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(trilium_docker_labels_default)</span><span class="diff-line del">-                           | combine(trilium_docker_labels_custom) }}&quot;</span><span class="diff-line add">+trilium_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ trilium_role_paths_location }}:/home/node/trilium-data&quot;</span><span class="diff-line add">+trilium_role_docker_volumes_custom: []</span><span class="diff-line add">+trilium_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;trilium&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;trilium&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-trilium_docker_hostname: &quot;{{ trilium_name }}&quot;</span><span class="diff-line add">+trilium_role_docker_hostname: &quot;{{ trilium_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-trilium_docker_networks_alias: &quot;{{ trilium_name }}&quot;</span><span class="diff-line del">-trilium_docker_networks_default: []</span><span class="diff-line del">-trilium_docker_networks_custom: []</span><span class="diff-line del">-trilium_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + trilium_docker_networks_default</span><span class="diff-line del">-                             + trilium_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-trilium_docker_capabilities_default: []</span><span class="diff-line del">-trilium_docker_capabilities_custom: []</span><span class="diff-line del">-trilium_docker_capabilities: &quot;{{ trilium_docker_capabilities_default</span><span class="diff-line del">-                                 + trilium_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-trilium_docker_security_opts_default: []</span><span class="diff-line del">-trilium_docker_security_opts_custom: []</span><span class="diff-line del">-trilium_docker_security_opts: &quot;{{ trilium_docker_security_opts_default</span><span class="diff-line del">-                                  + trilium_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+trilium_role_docker_networks_alias: &quot;{{ trilium_name }}&quot;</span><span class="diff-line add">+trilium_role_docker_networks_default: []</span><span class="diff-line add">+trilium_role_docker_networks_custom: []</span><span class="diff-line add">+trilium_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;trilium&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;trilium&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-trilium_docker_restart_policy: unless-stopped</span><span class="diff-line add">+trilium_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-trilium_docker_state: started</span><span class="diff-line add">+trilium_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-394">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/trilium/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-395">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tubearchivist/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,156 +18,113 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tubearchivist_enable_cast: &quot;false&quot;</span><span class="diff-line add">+tubearchivist_role_enable_cast: &quot;false&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tubearchivist_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line del">-tubearchivist_paths_location: &quot;{{ server_appdata_path }}/{{ tubearchivist_paths_folder }}/app&quot;</span><span class="diff-line del">-tubearchivist_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ tubearchivist_paths_folder }}&quot;</span><span class="diff-line del">-tubearchivist_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tubearchivist_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tubearchivist_paths_downloads_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tubearchivist_paths_location }}/cache&quot;</span><span class="diff-line add">+tubearchivist_role_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+tubearchivist_role_paths_location: &quot;{{ server_appdata_path }}/{{ tubearchivist_role_paths_folder }}/app&quot;</span><span class="diff-line add">+tubearchivist_role_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ tubearchivist_role_paths_folder }}&quot;</span><span class="diff-line add">+tubearchivist_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tubearchivist_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tubearchivist_role_paths_downloads_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tubearchivist_role_paths_location }}/cache&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tubearchivist_web_subdomain: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line del">-tubearchivist_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-tubearchivist_web_port: &quot;8000&quot;</span><span class="diff-line del">-tubearchivist_web_url: &quot;{{ &#x27;https://&#x27; + (tubearchivist_web_subdomain + &#x27;.&#x27; + tubearchivist_web_domain</span><span class="diff-line del">-                        if (tubearchivist_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                        else tubearchivist_web_domain) }}&quot;</span><span class="diff-line add">+tubearchivist_role_web_subdomain: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+tubearchivist_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+tubearchivist_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+tubearchivist_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tubearchivist&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tubearchivist&#x27;)</span><span class="diff-line add">+                             if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tubearchivist&#x27;) | length &gt; 0)</span><span class="diff-line add">+                             else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tubearchivist&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tubearchivist_dns_record: &quot;{{ tubearchivist_web_subdomain }}&quot;</span><span class="diff-line del">-tubearchivist_dns_zone: &quot;{{ tubearchivist_web_domain }}&quot;</span><span class="diff-line del">-tubearchivist_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+tubearchivist_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line add">+tubearchivist_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line add">+tubearchivist_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tubearchivist_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-tubearchivist_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-tubearchivist_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-tubearchivist_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-tubearchivist_traefik_enabled: true</span><span class="diff-line del">-tubearchivist_traefik_api_enabled: true</span><span class="diff-line del">-tubearchivist_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line add">+tubearchivist_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+tubearchivist_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+tubearchivist_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+tubearchivist_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+tubearchivist_role_traefik_enabled: true</span><span class="diff-line add">+tubearchivist_role_traefik_api_enabled: true</span><span class="diff-line add">+tubearchivist_role_traefik_api_endpoint: &quot;PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tubearchivist_docker_container: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_container: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tubearchivist_docker_image_pull: true</span><span class="diff-line del">-tubearchivist_docker_image_tag: &quot;v0.4.13&quot;</span><span class="diff-line del">-tubearchivist_docker_image: &quot;bbilly1/tubearchivist:{{ tubearchivist_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-tubearchivist_docker_ports_defaults: []</span><span class="diff-line del">-tubearchivist_docker_ports_custom: []</span><span class="diff-line del">-tubearchivist_docker_ports: &quot;{{ tubearchivist_docker_ports_defaults</span><span class="diff-line del">-                                + tubearchivist_docker_ports_custom }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_image_pull: true</span><span class="diff-line add">+tubearchivist_role_docker_image_tag: &quot;v0.4.13&quot;</span><span class="diff-line add">+tubearchivist_role_docker_image_repo: &quot;bbilly1/tubearchivist&quot;</span><span class="diff-line add">+tubearchivist_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tubearchivist&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tubearchivist_docker_envs_http_header: &quot;{{ &#x27;HTTP_REMOTE_USER&#x27;</span><span class="diff-line del">-                                        if (&#x27;authelia&#x27; in tubearchivist_traefik_sso_middleware)</span><span class="diff-line del">-                                        else (&#x27;HTTP_X_AUTHENTIK_USERNAME&#x27;</span><span class="diff-line del">-                                             if (&#x27;authentik&#x27; in tubearchivist_traefik_sso_middleware)</span><span class="diff-line del">-                                             else &#x27;&#x27;) }}&quot;</span><span class="diff-line del">-tubearchivist_docker_envs_default:</span><span class="diff-line add">+tubearchivist_role_docker_envs_http_header: &quot;{{ &#x27;HTTP_REMOTE_USER&#x27;</span><span class="diff-line add">+                                             if (&#x27;authelia&#x27; in lookup(&#x27;role_var&#x27;, &#x27;_traefik_sso_middleware&#x27;, role=&#x27;tubearchivist&#x27;))</span><span class="diff-line add">+                                             else (&#x27;HTTP_X_AUTHENTIK_USERNAME&#x27;</span><span class="diff-line add">+                                                  if (&#x27;authentik&#x27; in lookup(&#x27;role_var&#x27;, &#x27;_traefik_sso_middleware&#x27;, role=&#x27;tubearchivist&#x27;))</span><span class="diff-line add">+                                                  else &#x27;&#x27;) }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   ES_URL: &quot;http://{{ tubearchivist_name }}-elasticsearch:9200&quot;</span><span class="diff-line context">   REDIS_HOST: &quot;{{ tubearchivist_name }}-redis&quot;</span><span class="diff-line context">   HOST_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   HOST_GID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  TA_HOST: &quot;localhost 127.0.0.1 {{ tubearchivist_name }} {{ tubearchivist_web_subdomain + &#x27;.&#x27; + tubearchivist_web_domain }} {{ tubearchivist_web_url }}&quot;</span><span class="diff-line del">-  TA_ENABLE_AUTH_PROXY: &quot;{{ &#x27;true&#x27; if (tubearchivist_traefik_sso_middleware | length &gt; 0) else omit }}&quot;</span><span class="diff-line del">-  TA_AUTH_PROXY_USERNAME_HEADER: &quot;{{ tubearchivist_docker_envs_http_header if (tubearchivist_traefik_sso_middleware | length &gt; 0) else omit }}&quot;</span><span class="diff-line add">+  TA_HOST: &quot;localhost 127.0.0.1 {{ tubearchivist_name }} {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tubearchivist&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tubearchivist&#x27;) }} {{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line add">+  TA_ENABLE_AUTH_PROXY: &quot;{{ &#x27;true&#x27; if (lookup(&#x27;role_var&#x27;, &#x27;_traefik_sso_middleware&#x27;, role=&#x27;tubearchivist&#x27;) | length &gt; 0) else omit }}&quot;</span><span class="diff-line add">+  TA_AUTH_PROXY_USERNAME_HEADER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_http_header&#x27;, role=&#x27;tubearchivist&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_traefik_sso_middleware&#x27;, role=&#x27;tubearchivist&#x27;) | length &gt; 0) else omit }}&quot;</span><span class="diff-line context">   TA_USERNAME: &quot;{{ user.name }}&quot;</span><span class="diff-line context">   TA_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line del">-  ELASTIC_PASSWORD: &quot;{{ elasticsearch_docker_env_password }}&quot;</span><span class="diff-line del">-  ENABLE_CAST: &quot;{{ tubearchivist_enable_cast }}&quot;</span><span class="diff-line del">-tubearchivist_docker_envs_custom: {}</span><span class="diff-line del">-tubearchivist_docker_envs: &quot;{{ tubearchivist_docker_envs_default</span><span class="diff-line del">-                               | combine(tubearchivist_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tubearchivist_docker_commands_default: []</span><span class="diff-line del">-tubearchivist_docker_commands_custom: []</span><span class="diff-line del">-tubearchivist_docker_commands: &quot;{{ tubearchivist_docker_commands_default</span><span class="diff-line del">-                                   + tubearchivist_docker_commands_custom }}&quot;</span><span class="diff-line add">+  ELASTIC_PASSWORD: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;elasticsearch&#x27;) }}&quot;</span><span class="diff-line add">+  ENABLE_CAST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_enable_cast&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_envs_custom: {}</span><span class="diff-line add">+tubearchivist_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tubearchivist&#x27;)</span><span class="diff-line add">+                                    | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tubearchivist&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tubearchivist_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tubearchivist_paths_downloads_location }}/:/youtube&quot;</span><span class="diff-line del">-  - &quot;{{ tubearchivist_paths_location }}/cache:/cache&quot;</span><span class="diff-line del">-tubearchivist_docker_volumes_custom: []</span><span class="diff-line del">-tubearchivist_docker_volumes: &quot;{{ tubearchivist_docker_volumes_default</span><span class="diff-line del">-                                  + tubearchivist_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tubearchivist_docker_devices_default: []</span><span class="diff-line del">-tubearchivist_docker_devices_custom: []</span><span class="diff-line del">-tubearchivist_docker_devices: &quot;{{ tubearchivist_docker_devices_default</span><span class="diff-line del">-                                  + tubearchivist_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tubearchivist_docker_hosts_default: {}</span><span class="diff-line del">-tubearchivist_docker_hosts_custom: {}</span><span class="diff-line del">-tubearchivist_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                | combine(tubearchivist_docker_hosts_default)</span><span class="diff-line del">-                                | combine(tubearchivist_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tubearchivist_docker_labels_default: {}</span><span class="diff-line del">-tubearchivist_docker_labels_custom: {}</span><span class="diff-line del">-tubearchivist_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                 | combine(tubearchivist_docker_labels_default)</span><span class="diff-line del">-                                 | combine(tubearchivist_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_downloads_location&#x27;, role=&#x27;tubearchivist&#x27;) }}/:/youtube&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tubearchivist&#x27;) }}/cache:/cache&quot;</span><span class="diff-line add">+tubearchivist_role_docker_volumes_custom: []</span><span class="diff-line add">+tubearchivist_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tubearchivist&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tubearchivist_docker_hostname: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_hostname: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tubearchivist_docker_networks_alias: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line del">-tubearchivist_docker_networks_default: []</span><span class="diff-line del">-tubearchivist_docker_networks_custom: []</span><span class="diff-line del">-tubearchivist_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                   + tubearchivist_docker_networks_default</span><span class="diff-line del">-                                   + tubearchivist_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tubearchivist_docker_capabilities_default: []</span><span class="diff-line del">-tubearchivist_docker_capabilities_custom: []</span><span class="diff-line del">-tubearchivist_docker_capabilities: &quot;{{ tubearchivist_docker_capabilities_default</span><span class="diff-line del">-                                       + tubearchivist_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tubearchivist_docker_security_opts_default: []</span><span class="diff-line del">-tubearchivist_docker_security_opts_custom: []</span><span class="diff-line del">-tubearchivist_docker_security_opts: &quot;{{ tubearchivist_docker_security_opts_default</span><span class="diff-line del">-                                        + tubearchivist_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_networks_alias: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+tubearchivist_role_docker_networks_default: []</span><span class="diff-line add">+tubearchivist_role_docker_networks_custom: []</span><span class="diff-line add">+tubearchivist_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tubearchivist&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tubearchivist&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tubearchivist_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tubearchivist_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tubearchivist_docker_state: started</span><span class="diff-line add">+tubearchivist_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-tubearchivist_depends_on: &quot;{{ tubearchivist_name }}-elasticsearch,{{ tubearchivist_name }}-redis&quot;</span><span class="diff-line del">-tubearchivist_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-tubearchivist_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+tubearchivist_role_depends_on: &quot;{{ tubearchivist_name }}-elasticsearch,{{ tubearchivist_name }}-redis&quot;</span><span class="diff-line add">+tubearchivist_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+tubearchivist_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-396">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tubearchivist/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,31 +11,31 @@</span><span class="diff-line context"> - name: Remove legacy redis Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ tubearchivist_name }}_redis&quot;</span><span class="diff-line add">+    container_name: &quot;{{ tubearchivist_name }}_redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Redis Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: redis</span><span class="diff-line context">   vars:</span><span class="diff-line context">     redis_instances: [&quot;{{ tubearchivist_name }}-redis&quot;]</span><span class="diff-line del">-    redis_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line del">-    redis_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line del">-    redis_paths_location: &quot;{{ server_appdata_path }}/{{ redis_paths_folder }}/redis&quot;</span><span class="diff-line add">+    redis_role_docker_image_tag: &quot;8-alpine&quot;</span><span class="diff-line add">+    redis_role_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+    redis_role_paths_location: &quot;{{ server_appdata_path }}/{{ redis_role_paths_folder }}/redis&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove legacy Elasticsearch Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ tubearchivist_name }}_elasticsearch&quot;</span><span class="diff-line add">+    container_name: &quot;{{ tubearchivist_name }}_elasticsearch&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Elasticsearch Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: elasticsearch</span><span class="diff-line context">   vars:</span><span class="diff-line context">     elasticsearch_name: &quot;{{ tubearchivist_name }}-elasticsearch&quot;</span><span class="diff-line del">-    elasticsearch_docker_image: &quot;bbilly1/tubearchivist-es&quot;</span><span class="diff-line del">-    elasticsearch_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line del">-    elasticsearch_paths_location: &quot;{{ server_appdata_path }}/{{ elasticsearch_paths_folder }}/elastiscsearch&quot;</span><span class="diff-line del">-    elasticsearch_docker_envs_custom:</span><span class="diff-line add">+    elasticsearch_role_docker_image: &quot;bbilly1/tubearchivist-es&quot;</span><span class="diff-line add">+    elasticsearch_role_paths_folder: &quot;{{ tubearchivist_name }}&quot;</span><span class="diff-line add">+    elasticsearch_role_paths_location: &quot;{{ server_appdata_path }}/{{ elasticsearch_role_paths_folder }}/elastiscsearch&quot;</span><span class="diff-line add">+    elasticsearch_role_docker_envs_custom:</span><span class="diff-line context">       path.repo: &quot;/usr/share/elasticsearch/data/snapshot&quot;</span><span class="diff-line context">       ES_JAVA_OPTS: &quot;-Xms512m -Xmx512m&quot;</span><span class="diff-line context">       xpack.security.enabled: &quot;true&quot;</span><span class="diff-line hunk">@@ -43,9 +43,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-397">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tvheadend/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tvheadend_paths_folder: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line del">-tvheadend_paths_location: &quot;{{ server_appdata_path }}/{{ tvheadend_paths_folder }}&quot;</span><span class="diff-line del">-tvheadend_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ tvheadend_paths_folder }}&quot;</span><span class="diff-line del">-tvheadend_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ tvheadend_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ tvheadend_paths_downloads_location }}&quot;</span><span class="diff-line add">+tvheadend_role_paths_folder: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line add">+tvheadend_role_paths_location: &quot;{{ server_appdata_path }}/{{ tvheadend_role_paths_folder }}&quot;</span><span class="diff-line add">+tvheadend_role_paths_downloads_location: &quot;{{ downloads_root_path }}/{{ tvheadend_role_paths_folder }}&quot;</span><span class="diff-line add">+tvheadend_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ tvheadend_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ tvheadend_role_paths_downloads_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tvheadend_web_subdomain: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line del">-tvheadend_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-tvheadend_web_port: &quot;9981&quot;</span><span class="diff-line del">-tvheadend_web_url: &quot;{{ &#x27;https://&#x27; + (tvheadend_web_subdomain + &#x27;.&#x27; + tvheadend_web_domain</span><span class="diff-line del">-                    if (tvheadend_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else tvheadend_web_domain) }}&quot;</span><span class="diff-line add">+tvheadend_role_web_subdomain: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line add">+tvheadend_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+tvheadend_role_web_port: &quot;9981&quot;</span><span class="diff-line add">+tvheadend_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tvheadend&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tvheadend&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tvheadend&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tvheadend&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tvheadend_dns_record: &quot;{{ tvheadend_web_subdomain }}&quot;</span><span class="diff-line del">-tvheadend_dns_zone: &quot;{{ tvheadend_web_domain }}&quot;</span><span class="diff-line del">-tvheadend_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+tvheadend_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tvheadend&#x27;) }}&quot;</span><span class="diff-line add">+tvheadend_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tvheadend&#x27;) }}&quot;</span><span class="diff-line add">+tvheadend_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-tvheadend_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-tvheadend_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-tvheadend_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-tvheadend_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-tvheadend_traefik_enabled: true</span><span class="diff-line del">-tvheadend_traefik_api_enabled: false</span><span class="diff-line del">-tvheadend_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+tvheadend_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+tvheadend_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+tvheadend_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+tvheadend_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+tvheadend_role_traefik_enabled: true</span><span class="diff-line add">+tvheadend_role_traefik_api_enabled: false</span><span class="diff-line add">+tvheadend_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-tvheadend_docker_container: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_container: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-tvheadend_docker_image_pull: true</span><span class="diff-line del">-tvheadend_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-tvheadend_docker_image: &quot;lscr.io/linuxserver/tvheadend:{{ tvheadend_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-tvheadend_docker_ports_defaults: []</span><span class="diff-line del">-tvheadend_docker_ports_custom: []</span><span class="diff-line del">-tvheadend_docker_ports: &quot;{{ tvheadend_docker_ports_defaults</span><span class="diff-line del">-                            + tvheadend_docker_ports_custom }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_image_pull: true</span><span class="diff-line add">+tvheadend_role_docker_image_repo: &quot;lscr.io/linuxserver/tvheadend&quot;</span><span class="diff-line add">+tvheadend_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+tvheadend_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;tvheadend&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;tvheadend&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-tvheadend_docker_envs_default:</span><span class="diff-line add">+tvheadend_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-tvheadend_docker_envs_custom: {}</span><span class="diff-line del">-tvheadend_docker_envs: &quot;{{ tvheadend_docker_envs_default</span><span class="diff-line del">-                           | combine(tvheadend_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-tvheadend_docker_commands_default: []</span><span class="diff-line del">-tvheadend_docker_commands_custom: []</span><span class="diff-line del">-tvheadend_docker_commands: &quot;{{ tvheadend_docker_commands_default</span><span class="diff-line del">-                               + tvheadend_docker_commands_custom }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_envs_custom: {}</span><span class="diff-line add">+tvheadend_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;tvheadend&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;tvheadend&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-tvheadend_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ tvheadend_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ tvheadend_paths_downloads_location }}:/recordings&quot;</span><span class="diff-line del">-tvheadend_docker_volumes_custom: []</span><span class="diff-line del">-tvheadend_docker_volumes: &quot;{{ tvheadend_docker_volumes_default</span><span class="diff-line del">-                              + tvheadend_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-tvheadend_docker_devices_default: []</span><span class="diff-line del">-tvheadend_docker_devices_custom: []</span><span class="diff-line del">-tvheadend_docker_devices: &quot;{{ tvheadend_docker_devices_default</span><span class="diff-line del">-                              + tvheadend_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-tvheadend_docker_hosts_default: {}</span><span class="diff-line del">-tvheadend_docker_hosts_custom: {}</span><span class="diff-line del">-tvheadend_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(tvheadend_docker_hosts_default)</span><span class="diff-line del">-                            | combine(tvheadend_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-tvheadend_docker_labels_default: {}</span><span class="diff-line del">-tvheadend_docker_labels_custom: {}</span><span class="diff-line del">-tvheadend_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(tvheadend_docker_labels_default)</span><span class="diff-line del">-                             | combine(tvheadend_docker_labels_custom) }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tvheadend&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_downloads_location&#x27;, role=&#x27;tvheadend&#x27;) }}:/recordings&quot;</span><span class="diff-line add">+tvheadend_role_docker_volumes_custom: []</span><span class="diff-line add">+tvheadend_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;tvheadend&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;tvheadend&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-tvheadend_docker_hostname: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_hostname: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-tvheadend_docker_networks_alias: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line del">-tvheadend_docker_networks_default: []</span><span class="diff-line del">-tvheadend_docker_networks_custom: []</span><span class="diff-line del">-tvheadend_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + tvheadend_docker_networks_default</span><span class="diff-line del">-                               + tvheadend_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-tvheadend_docker_capabilities_default: []</span><span class="diff-line del">-tvheadend_docker_capabilities_custom: []</span><span class="diff-line del">-tvheadend_docker_capabilities: &quot;{{ tvheadend_docker_capabilities_default</span><span class="diff-line del">-                                   + tvheadend_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-tvheadend_docker_security_opts_default: []</span><span class="diff-line del">-tvheadend_docker_security_opts_custom: []</span><span class="diff-line del">-tvheadend_docker_security_opts: &quot;{{ tvheadend_docker_security_opts_default</span><span class="diff-line del">-                                    + tvheadend_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_networks_alias: &quot;{{ tvheadend_name }}&quot;</span><span class="diff-line add">+tvheadend_role_docker_networks_default: []</span><span class="diff-line add">+tvheadend_role_docker_networks_custom: []</span><span class="diff-line add">+tvheadend_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;tvheadend&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;tvheadend&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-tvheadend_docker_restart_policy: unless-stopped</span><span class="diff-line add">+tvheadend_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-tvheadend_docker_state: started</span><span class="diff-line add">+tvheadend_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-398">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/tvheadend/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -11,9 +11,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-399">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/unifi/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,5 +9,5 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: &quot;Fail with deprecation warning&quot;</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;The &#x27;unifi&#x27; role which used the &#x27;unifi-controller&#x27; image is deprecated in favor of the &#x27;unifi-network-application&#x27; role using the &#x27;unifi-network-application&#x27; image. If you are using &#x27;unifi&#x27; role, perform a full backup of your Unifi Network Application from the Unifi interface. Then rename your &#x27;/opt/unifi&#x27; folder to &#x27;/opt/unifi-controller&#x27; for backup purposes. Then run &#x27;sb install sandbox-unifi-network-application&#x27; to deploy the new image and restore the backup when prompted by the setup wizard.&quot;</span><span class="diff-line add">+    msg: &quot;The &#x27;unifi&#x27; role which used the &#x27;unifi-controller&#x27; image is deprecated in favor of the &#x27;unifi-network-application&#x27; role using the &#x27;unifi-network-application&#x27; image. If you are using &#x27;unifi&#x27; role, perform a full backup of your Unifi Network Application from the Unifi interface. Then rename your &#x27;{{ server_appdata_path }}/unifi&#x27; folder to &#x27;{{ server_appdata_path }}/unifi-controller&#x27; for backup purposes. Then run &#x27;sb install sandbox-unifi-network-application&#x27; to deploy the new image and restore the backup when prompted by the setup wizard.&quot;</span><span class="diff-line context">   when: not continuous_integration</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-400">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/unifi_network_application/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -26,68 +26,68 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unifi_network_application_paths_folder: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line del">-unifi_network_application_paths_location: &quot;{{ server_appdata_path }}/{{ unifi_network_application_paths_folder }}&quot;</span><span class="diff-line del">-unifi_network_application_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ unifi_network_application_paths_location }}&quot;</span><span class="diff-line add">+unifi_network_application_role_paths_folder: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+unifi_network_application_role_paths_location: &quot;{{ server_appdata_path }}/{{ unifi_network_application_role_paths_folder }}&quot;</span><span class="diff-line add">+unifi_network_application_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ unifi_network_application_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unifi_network_application_web_subdomain: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line del">-unifi_network_application_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-unifi_network_application_web_port: &quot;8443&quot;</span><span class="diff-line del">-unifi_network_application_web_scheme: &quot;https&quot;</span><span class="diff-line del">-unifi_network_application_web_serverstransport: &quot;skipverify@file&quot;</span><span class="diff-line del">-unifi_network_application_web_url: &quot;{{ &#x27;https://&#x27; + (unifi_network_application_web_subdomain + &#x27;.&#x27; + unifi_network_application_web_domain</span><span class="diff-line del">-                                    if (unifi_network_application_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                                    else unifi_network_application_web_domain) }}&quot;</span><span class="diff-line add">+unifi_network_application_role_web_subdomain: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+unifi_network_application_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+unifi_network_application_role_web_port: &quot;8443&quot;</span><span class="diff-line add">+unifi_network_application_role_web_scheme: &quot;https&quot;</span><span class="diff-line add">+unifi_network_application_role_web_serverstransport: &quot;skipverify@file&quot;</span><span class="diff-line add">+unifi_network_application_role_web_url: &quot;{{ &#x27;https://&#x27; + (unifi_network_application_role_web_subdomain + &#x27;.&#x27; + unifi_network_application_role_web_domain</span><span class="diff-line add">+                                         if (unifi_network_application_role_web_subdomain | length &gt; 0)</span><span class="diff-line add">+                                         else unifi_network_application_role_web_domain) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unifi_network_application_dns_record: &quot;{{ unifi_network_application_web_subdomain }}&quot;</span><span class="diff-line del">-unifi_network_application_dns_zone: &quot;{{ unifi_network_application_web_domain }}&quot;</span><span class="diff-line del">-unifi_network_application_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+unifi_network_application_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;unifi_network_application&#x27;) }}&quot;</span><span class="diff-line add">+unifi_network_application_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;unifi_network_application&#x27;) }}&quot;</span><span class="diff-line add">+unifi_network_application_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unifi_network_application_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-unifi_network_application_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-unifi_network_application_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-unifi_network_application_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-unifi_network_application_traefik_enabled: true</span><span class="diff-line del">-unifi_network_application_traefik_api_enabled: false</span><span class="diff-line del">-unifi_network_application_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+unifi_network_application_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+unifi_network_application_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+unifi_network_application_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+unifi_network_application_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+unifi_network_application_role_traefik_enabled: true</span><span class="diff-line add">+unifi_network_application_role_traefik_api_enabled: false</span><span class="diff-line add">+unifi_network_application_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-unifi_network_application_docker_container: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_container: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-unifi_network_application_docker_image_pull: true</span><span class="diff-line del">-unifi_network_application_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-unifi_network_application_docker_image_repo: &quot;lscr.io/linuxserver/unifi-network-application&quot;</span><span class="diff-line del">-unifi_network_application_docker_image: &quot;{{ unifi_network_application_docker_image_repo }}:{{ unifi_network_application_docker_image_tag }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_image_pull: true</span><span class="diff-line add">+unifi_network_application_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_image_repo: &quot;lscr.io/linuxserver/unifi-network-application&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;unifi_network_application&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;unifi_network_application&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-unifi_network_application_docker_ports_defaults:</span><span class="diff-line add">+unifi_network_application_role_docker_ports_default:</span><span class="diff-line context">   - &quot;8080:8080/tcp&quot;</span><span class="diff-line context">   - &quot;3478:3478/udp&quot;</span><span class="diff-line context">   - &quot;10001:10001/udp&quot;</span><span class="diff-line del">-unifi_network_application_docker_ports_custom: []</span><span class="diff-line del">-unifi_network_application_docker_ports: &quot;{{ unifi_network_application_docker_ports_defaults</span><span class="diff-line del">-                                            + unifi_network_application_docker_ports_custom }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_ports_custom: []</span><span class="diff-line add">+unifi_network_application_role_docker_ports: &quot;{{ unifi_network_application_role_docker_ports_default</span><span class="diff-line add">+                                                 + unifi_network_application_role_docker_ports_custom }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-unifi_network_application_docker_envs_default:</span><span class="diff-line add">+unifi_network_application_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line hunk">@@ -96,73 +96,35 @@</span><span class="diff-line context">   MONGO_HOST: &quot;{{ unifi_network_application_name }}-mongo&quot;</span><span class="diff-line context">   MONGO_PORT: &quot;{{ unifi_network_application_mongo_port }}&quot;</span><span class="diff-line context">   MONGO_DBNAME: &quot;{{ unifi_network_application_mongo_dbname }}&quot;</span><span class="diff-line del">-unifi_network_application_docker_envs_custom: {}</span><span class="diff-line del">-unifi_network_application_docker_envs: &quot;{{ unifi_network_application_docker_envs_default</span><span class="diff-line del">-                                           | combine(unifi_network_application_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-unifi_network_application_docker_commands_default: []</span><span class="diff-line del">-unifi_network_application_docker_commands_custom: []</span><span class="diff-line del">-unifi_network_application_docker_commands: &quot;{{ unifi_network_application_docker_commands_default</span><span class="diff-line del">-                                               + unifi_network_application_docker_commands_custom }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_envs_custom: {}</span><span class="diff-line add">+unifi_network_application_role_docker_envs: &quot;{{ unifi_network_application_role_docker_envs_default</span><span class="diff-line add">+                                                | combine(unifi_network_application_role_docker_envs_custom) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-unifi_network_application_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ unifi_network_application_paths_location }}:/config&quot;</span><span class="diff-line del">-unifi_network_application_docker_volumes_custom: []</span><span class="diff-line del">-unifi_network_application_docker_volumes: &quot;{{ unifi_network_application_docker_volumes_default</span><span class="diff-line del">-                                              + unifi_network_application_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-unifi_network_application_docker_devices_default: []</span><span class="diff-line del">-unifi_network_application_docker_devices_custom: []</span><span class="diff-line del">-unifi_network_application_docker_devices: &quot;{{ unifi_network_application_docker_devices_default</span><span class="diff-line del">-                                              + unifi_network_application_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-unifi_network_application_docker_hosts_default: {}</span><span class="diff-line del">-unifi_network_application_docker_hosts_custom: {}</span><span class="diff-line del">-unifi_network_application_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                                            | combine(unifi_network_application_docker_hosts_default)</span><span class="diff-line del">-                                            | combine(unifi_network_application_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-unifi_network_application_docker_labels_default: {}</span><span class="diff-line del">-unifi_network_application_docker_labels_custom: {}</span><span class="diff-line del">-unifi_network_application_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                             | combine(unifi_network_application_docker_labels_default)</span><span class="diff-line del">-                                             | combine(unifi_network_application_docker_labels_custom) }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ unifi_network_application_role_paths_location }}:/config&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_volumes_custom: []</span><span class="diff-line add">+unifi_network_application_role_docker_volumes: &quot;{{ unifi_network_application_role_docker_volumes_default</span><span class="diff-line add">+                                                   + unifi_network_application_role_docker_volumes_custom }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-unifi_network_application_docker_hostname: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_hostname: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-unifi_network_application_docker_networks_alias: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line del">-unifi_network_application_docker_networks_default: []</span><span class="diff-line del">-unifi_network_application_docker_networks_custom: []</span><span class="diff-line del">-unifi_network_application_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                               + unifi_network_application_docker_networks_default</span><span class="diff-line del">-                                               + unifi_network_application_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-unifi_network_application_docker_capabilities_default: []</span><span class="diff-line del">-unifi_network_application_docker_capabilities_custom: []</span><span class="diff-line del">-unifi_network_application_docker_capabilities: &quot;{{ unifi_network_application_docker_capabilities_default</span><span class="diff-line del">-                                                   + unifi_network_application_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-unifi_network_application_docker_security_opts_default: []</span><span class="diff-line del">-unifi_network_application_docker_security_opts_custom: []</span><span class="diff-line del">-unifi_network_application_docker_security_opts: &quot;{{ unifi_network_application_docker_security_opts_default</span><span class="diff-line del">-                                                    + unifi_network_application_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_networks_alias: &quot;{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+unifi_network_application_role_docker_networks_default: []</span><span class="diff-line add">+unifi_network_application_role_docker_networks_custom: []</span><span class="diff-line add">+unifi_network_application_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                                    + unifi_network_application_role_docker_networks_default</span><span class="diff-line add">+                                                    + unifi_network_application_role_docker_networks_custom }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-unifi_network_application_docker_restart_policy: unless-stopped</span><span class="diff-line add">+unifi_network_application_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-unifi_network_application_docker_state: started</span><span class="diff-line add">+unifi_network_application_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-unifi_network_application_depends_on: &quot;{{ unifi_network_application_name }}-mongo&quot;</span><span class="diff-line del">-unifi_network_application_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-unifi_network_application_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+unifi_network_application_role_depends_on: &quot;{{ unifi_network_application_name }}-mongo&quot;</span><span class="diff-line add">+unifi_network_application_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+unifi_network_application_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-401">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/unifi_network_application/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing legacy Unifi container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -28,7 +28,7 @@</span><span class="diff-line context"> - name: &quot;Unifi | Import init-mongo.js&quot;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: init-mongo.js.j2</span><span class="diff-line del">-    dest: &#x27;{{ unifi_network_application_paths_location }}/init-mongo.js&#x27;</span><span class="diff-line add">+    dest: &#x27;{{ unifi_network_application_role_paths_location }}/init-mongo.js&#x27;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line hunk">@@ -37,16 +37,18 @@</span><span class="diff-line context"> - name: Remove legacy mongodb Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ unifi_network_application_name }}_mongo&quot;</span><span class="diff-line add">+    container_name: &quot;{{ unifi_network_application_name }}_mongo&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: MongoDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: mongodb</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    mongodb_instances: [&quot;{{ unifi_network_application_name }}-mongo&quot;]</span><span class="diff-line del">-    mongodb_paths_location: &quot;{{ server_appdata_path }}/{{ unifi_network_application_name }}&quot;</span><span class="diff-line del">-    mongodb_docker_image_tag: &quot;4.4&quot;</span><span class="diff-line del">-    mongodb_docker_volumes_custom: [&quot;{{ unifi_network_application_paths_location }}/init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro&quot;]</span><span class="diff-line add">+    mongodb_instances:</span><span class="diff-line add">+      - &quot;{{ unifi_network_application_name }}-mongo&quot;</span><span class="diff-line add">+    mongodb_role_paths_location: &quot;{{ server_appdata_path }}/{{ unifi_network_application_name }}&quot;</span><span class="diff-line add">+    mongodb_role_docker_image_tag: &quot;4.4&quot;</span><span class="diff-line add">+    mongodb_role_docker_volumes_custom:</span><span class="diff-line add">+      - &quot;{{ unifi_network_application_role_paths_location }}/init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-402">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/unmanic/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unmanic_paths_folder: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line del">-unmanic_paths_location: &quot;{{ server_appdata_path }}/{{ unmanic_paths_folder }}&quot;</span><span class="diff-line del">-unmanic_paths_transcodes_location: &quot;{{ transcodes_path }}/{{ unmanic_paths_folder }}&quot;</span><span class="diff-line del">-unmanic_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ unmanic_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ unmanic_paths_transcodes_location }}&quot;</span><span class="diff-line add">+unmanic_role_paths_folder: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line add">+unmanic_role_paths_location: &quot;{{ server_appdata_path }}/{{ unmanic_role_paths_folder }}&quot;</span><span class="diff-line add">+unmanic_role_paths_transcodes_location: &quot;{{ transcodes_path }}/{{ unmanic_role_paths_folder }}&quot;</span><span class="diff-line add">+unmanic_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ unmanic_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ unmanic_role_paths_transcodes_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unmanic_web_subdomain: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line del">-unmanic_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-unmanic_web_port: &quot;8888&quot;</span><span class="diff-line del">-unmanic_web_url: &quot;{{ &#x27;https://&#x27; + (unmanic_web_subdomain + &#x27;.&#x27; + unmanic_web_domain</span><span class="diff-line del">-                  if (unmanic_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                  else unmanic_web_domain) }}&quot;</span><span class="diff-line add">+unmanic_role_web_subdomain: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line add">+unmanic_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+unmanic_role_web_port: &quot;8888&quot;</span><span class="diff-line add">+unmanic_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;unmanic&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;unmanic&#x27;)</span><span class="diff-line add">+                       if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;unmanic&#x27;) | length &gt; 0)</span><span class="diff-line add">+                       else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;unmanic&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unmanic_dns_record: &quot;{{ unmanic_web_subdomain }}&quot;</span><span class="diff-line del">-unmanic_dns_zone: &quot;{{ unmanic_web_domain }}&quot;</span><span class="diff-line del">-unmanic_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+unmanic_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;unmanic&#x27;) }}&quot;</span><span class="diff-line add">+unmanic_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;unmanic&#x27;) }}&quot;</span><span class="diff-line add">+unmanic_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-unmanic_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-unmanic_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-unmanic_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-unmanic_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-unmanic_traefik_enabled: true</span><span class="diff-line del">-unmanic_traefik_api_enabled: false</span><span class="diff-line del">-unmanic_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+unmanic_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+unmanic_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+unmanic_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+unmanic_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+unmanic_role_traefik_enabled: true</span><span class="diff-line add">+unmanic_role_traefik_api_enabled: false</span><span class="diff-line add">+unmanic_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-unmanic_docker_container: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line add">+unmanic_role_docker_container: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-unmanic_docker_image_pull: true</span><span class="diff-line del">-unmanic_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-unmanic_docker_image: &quot;josh5/unmanic:{{ unmanic_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-unmanic_docker_ports_defaults: []</span><span class="diff-line del">-unmanic_docker_ports_custom: []</span><span class="diff-line del">-unmanic_docker_ports: &quot;{{ unmanic_docker_ports_defaults</span><span class="diff-line del">-                          + unmanic_docker_ports_custom }}&quot;</span><span class="diff-line add">+unmanic_role_docker_image_pull: true</span><span class="diff-line add">+unmanic_role_docker_image_repo: &quot;josh5/unmanic&quot;</span><span class="diff-line add">+unmanic_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+unmanic_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;unmanic&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;unmanic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-unmanic_docker_envs_default:</span><span class="diff-line add">+unmanic_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-unmanic_docker_envs_custom: {}</span><span class="diff-line del">-unmanic_docker_envs: &quot;{{ unmanic_docker_envs_default</span><span class="diff-line del">-                         | combine(unmanic_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-unmanic_docker_commands_default: []</span><span class="diff-line del">-unmanic_docker_commands_custom: []</span><span class="diff-line del">-unmanic_docker_commands: &quot;{{ unmanic_docker_commands_default</span><span class="diff-line del">-                             + unmanic_docker_commands_custom }}&quot;</span><span class="diff-line add">+unmanic_role_docker_envs_custom: {}</span><span class="diff-line add">+unmanic_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;unmanic&#x27;)</span><span class="diff-line add">+                              | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;unmanic&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-unmanic_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ unmanic_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ unmanic_paths_transcodes_location }}:/tmp/unmanic&quot;</span><span class="diff-line add">+unmanic_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;unmanic&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_transcodes_location&#x27;, role=&#x27;unmanic&#x27;) }}:/tmp/unmanic&quot;</span><span class="diff-line context">   - &quot;/mnt/unionfs/Media:/library&quot;</span><span class="diff-line del">-unmanic_docker_volumes_custom: []</span><span class="diff-line del">-unmanic_docker_volumes: &quot;{{ unmanic_docker_volumes_default</span><span class="diff-line del">-                            + unmanic_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-unmanic_docker_devices_default: []</span><span class="diff-line del">-unmanic_docker_devices_custom: []</span><span class="diff-line del">-unmanic_docker_devices: &quot;{{ unmanic_docker_devices_default</span><span class="diff-line del">-                            + unmanic_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-unmanic_docker_hosts_default: {}</span><span class="diff-line del">-unmanic_docker_hosts_custom: {}</span><span class="diff-line del">-unmanic_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                          | combine(unmanic_docker_hosts_default)</span><span class="diff-line del">-                          | combine(unmanic_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-unmanic_docker_labels_default: {}</span><span class="diff-line del">-unmanic_docker_labels_custom: {}</span><span class="diff-line del">-unmanic_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(unmanic_docker_labels_default)</span><span class="diff-line del">-                           | combine(unmanic_docker_labels_custom) }}&quot;</span><span class="diff-line add">+unmanic_role_docker_volumes_custom: []</span><span class="diff-line add">+unmanic_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;unmanic&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;unmanic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-unmanic_docker_hostname: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line add">+unmanic_role_docker_hostname: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-unmanic_docker_networks_alias: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line del">-unmanic_docker_networks_default: []</span><span class="diff-line del">-unmanic_docker_networks_custom: []</span><span class="diff-line del">-unmanic_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                             + unmanic_docker_networks_default</span><span class="diff-line del">-                             + unmanic_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-unmanic_docker_capabilities_default: []</span><span class="diff-line del">-unmanic_docker_capabilities_custom: []</span><span class="diff-line del">-unmanic_docker_capabilities: &quot;{{ unmanic_docker_capabilities_default</span><span class="diff-line del">-                                 + unmanic_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-unmanic_docker_security_opts_default: []</span><span class="diff-line del">-unmanic_docker_security_opts_custom: []</span><span class="diff-line del">-unmanic_docker_security_opts: &quot;{{ unmanic_docker_security_opts_default</span><span class="diff-line del">-                                  + unmanic_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+unmanic_role_docker_networks_alias: &quot;{{ unmanic_name }}&quot;</span><span class="diff-line add">+unmanic_role_docker_networks_default: []</span><span class="diff-line add">+unmanic_role_docker_networks_custom: []</span><span class="diff-line add">+unmanic_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;unmanic&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;unmanic&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-unmanic_docker_restart_policy: unless-stopped</span><span class="diff-line add">+unmanic_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-unmanic_docker_state: started</span><span class="diff-line add">+unmanic_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-403">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/unmanic/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -22,7 +22,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-404">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/uptime_kuma/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,150 +8,107 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Docker Socket Proxy</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-uptime_kuma_docker_socket_proxy_envs:</span><span class="diff-line del">-  CONTAINERS: &quot;1&quot;</span><span class="diff-line del">-  IMAGES: &quot;1&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Basics</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> uptime_kuma_name: uptime</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Docker Socket Proxy</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+uptime_kuma_role_docker_socket_proxy_envs:</span><span class="diff-line add">+  CONTAINERS: &quot;1&quot;</span><span class="diff-line add">+  IMAGES: &quot;1&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-uptime_kuma_paths_folder: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line del">-uptime_kuma_paths_location: &quot;{{ server_appdata_path }}/{{ uptime_kuma_paths_folder }}&quot;</span><span class="diff-line del">-uptime_kuma_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ uptime_kuma_paths_location }}&quot;</span><span class="diff-line del">-uptime_kuma_paths_recursive: true</span><span class="diff-line add">+uptime_kuma_role_paths_folder: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line add">+uptime_kuma_role_paths_location: &quot;{{ server_appdata_path }}/{{ uptime_kuma_role_paths_folder }}&quot;</span><span class="diff-line add">+uptime_kuma_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ uptime_kuma_role_paths_location }}&quot;</span><span class="diff-line add">+uptime_kuma_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-uptime_kuma_web_subdomain: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line del">-uptime_kuma_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-uptime_kuma_web_port: &quot;3001&quot;</span><span class="diff-line del">-uptime_kuma_web_url: &quot;{{ &#x27;https://&#x27; + (uptime_kuma_web_subdomain + &#x27;.&#x27; + uptime_kuma_web_domain</span><span class="diff-line del">-                      if (uptime_kuma_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else uptime_kuma_web_domain) }}&quot;</span><span class="diff-line add">+uptime_kuma_role_web_subdomain: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line add">+uptime_kuma_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+uptime_kuma_role_web_port: &quot;3001&quot;</span><span class="diff-line add">+uptime_kuma_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;uptime_kuma&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;uptime_kuma&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;uptime_kuma&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;uptime_kuma&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-uptime_kuma_dns_record: &quot;{{ uptime_kuma_web_subdomain }}&quot;</span><span class="diff-line del">-uptime_kuma_dns_zone: &quot;{{ uptime_kuma_web_domain }}&quot;</span><span class="diff-line del">-uptime_kuma_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+uptime_kuma_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;uptime_kuma&#x27;) }}&quot;</span><span class="diff-line add">+uptime_kuma_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;uptime_kuma&#x27;) }}&quot;</span><span class="diff-line add">+uptime_kuma_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-uptime_kuma_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-uptime_kuma_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-uptime_kuma_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-uptime_kuma_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-uptime_kuma_traefik_enabled: true</span><span class="diff-line del">-uptime_kuma_traefik_api_enabled: true</span><span class="diff-line del">-uptime_kuma_traefik_api_endpoint: &quot;PathPrefix(`/icon.svg`) || PathPrefix(`/api`) || PathPrefix(`/assets`) || PathPrefix(`/status`) || PathPrefix(`/metrics`) || PathRegexp(`^/$`) || PathRegexp(`/upload/.*`)&quot;</span><span class="diff-line add">+uptime_kuma_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+uptime_kuma_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+uptime_kuma_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+uptime_kuma_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+uptime_kuma_role_traefik_enabled: true</span><span class="diff-line add">+uptime_kuma_role_traefik_api_enabled: true</span><span class="diff-line add">+uptime_kuma_role_traefik_api_endpoint: &quot;PathPrefix(`/icon.svg`) || PathPrefix(`/api`) || PathPrefix(`/assets`) || PathPrefix(`/status`) || PathPrefix(`/metrics`) || PathRegexp(`^/$`) || PathRegexp(`/upload/.*`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-uptime_kuma_docker_container: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_container: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-uptime_kuma_docker_image_pull: true</span><span class="diff-line del">-uptime_kuma_docker_image_tag: &quot;1&quot; # Temporary until v2 is released and migration is added</span><span class="diff-line del">-uptime_kuma_docker_image: &quot;louislam/uptime-kuma:{{ uptime_kuma_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-uptime_kuma_docker_ports_defaults: []</span><span class="diff-line del">-uptime_kuma_docker_ports_custom: []</span><span class="diff-line del">-uptime_kuma_docker_ports: &quot;{{ uptime_kuma_docker_ports_defaults</span><span class="diff-line del">-                              + uptime_kuma_docker_ports_custom }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_image_pull: true</span><span class="diff-line add">+uptime_kuma_role_docker_image_tag: &quot;2&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_image_repo: &quot;louislam/uptime-kuma&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;uptime_kuma&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;uptime_kuma&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-uptime_kuma_docker_envs_default:</span><span class="diff-line add">+uptime_kuma_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-uptime_kuma_docker_envs_custom: {}</span><span class="diff-line del">-uptime_kuma_docker_envs: &quot;{{ uptime_kuma_docker_envs_default</span><span class="diff-line del">-                             | combine(uptime_kuma_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-uptime_kuma_docker_commands_default: []</span><span class="diff-line del">-uptime_kuma_docker_commands_custom: []</span><span class="diff-line del">-uptime_kuma_docker_commands: &quot;{{ uptime_kuma_docker_commands_default</span><span class="diff-line del">-                                 + uptime_kuma_docker_commands_custom }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_envs_custom: {}</span><span class="diff-line add">+uptime_kuma_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;uptime_kuma&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;uptime_kuma&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-uptime_kuma_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ uptime_kuma_paths_location }}:/app/data&quot;</span><span class="diff-line del">-uptime_kuma_docker_volumes_custom: []</span><span class="diff-line del">-uptime_kuma_docker_volumes: &quot;{{ uptime_kuma_docker_volumes_default</span><span class="diff-line del">-                                + uptime_kuma_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-uptime_kuma_docker_devices_default: []</span><span class="diff-line del">-uptime_kuma_docker_devices_custom: []</span><span class="diff-line del">-uptime_kuma_docker_devices: &quot;{{ uptime_kuma_docker_devices_default</span><span class="diff-line del">-                                + uptime_kuma_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-uptime_kuma_docker_hosts_default: {}</span><span class="diff-line del">-uptime_kuma_docker_hosts_custom: {}</span><span class="diff-line del">-uptime_kuma_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(uptime_kuma_docker_hosts_default)</span><span class="diff-line del">-                              | combine(uptime_kuma_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-uptime_kuma_docker_labels_default: {}</span><span class="diff-line del">-uptime_kuma_docker_labels_custom: {}</span><span class="diff-line del">-uptime_kuma_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(uptime_kuma_docker_labels_default)</span><span class="diff-line del">-                               | combine(uptime_kuma_docker_labels_custom) }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;uptime_kuma&#x27;) }}:/app/data&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_volumes_custom: []</span><span class="diff-line add">+uptime_kuma_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;uptime_kuma&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;uptime_kuma&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-uptime_kuma_docker_hostname: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_hostname: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-uptime_kuma_docker_networks_alias: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line del">-uptime_kuma_docker_networks_default: []</span><span class="diff-line del">-uptime_kuma_docker_networks_custom: []</span><span class="diff-line del">-uptime_kuma_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + uptime_kuma_docker_networks_default</span><span class="diff-line del">-                                 + uptime_kuma_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-uptime_kuma_docker_capabilities_default: []</span><span class="diff-line del">-uptime_kuma_docker_capabilities_custom: []</span><span class="diff-line del">-uptime_kuma_docker_capabilities: &quot;{{ uptime_kuma_docker_capabilities_default</span><span class="diff-line del">-                                     + uptime_kuma_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-uptime_kuma_docker_security_opts_default: []</span><span class="diff-line del">-uptime_kuma_docker_security_opts_custom: []</span><span class="diff-line del">-uptime_kuma_docker_security_opts: &quot;{{ uptime_kuma_docker_security_opts_default</span><span class="diff-line del">-                                      + uptime_kuma_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_networks_alias: &quot;{{ uptime_kuma_name }}&quot;</span><span class="diff-line add">+uptime_kuma_role_docker_networks_default: []</span><span class="diff-line add">+uptime_kuma_role_docker_networks_custom: []</span><span class="diff-line add">+uptime_kuma_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;uptime_kuma&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;uptime_kuma&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-uptime_kuma_docker_restart_policy: unless-stopped</span><span class="diff-line add">+uptime_kuma_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-uptime_kuma_docker_state: started</span><span class="diff-line add">+uptime_kuma_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-uptime_kuma_depends_on: &quot;{{ uptime_kuma_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-uptime_kuma_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-uptime_kuma_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+uptime_kuma_role_depends_on: &quot;{{ uptime_kuma_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+uptime_kuma_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+uptime_kuma_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-405">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/uptime_kuma/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,20 +12,17 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ uptime_kuma_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs_custom: &quot;{{ uptime_kuma_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ uptime_kuma_role_docker_socket_proxy_envs }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line del">-  community.docker.docker_container:</span><span class="diff-line del">-    name: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_docker_container&#x27;) }}&quot;</span><span class="diff-line del">-    state: absent</span><span class="diff-line del">-    container_default_behavior: compatibility</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-406">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/varken/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,8 +7,8 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-varken_ombi_db: &quot;{{ ombi_paths_location }}/OmbiSettings.db&quot;</span><span class="diff-line del">-varken_radarr_config: &quot;{{ radarr_paths_location }}/config.xml&quot;</span><span class="diff-line del">-varken_sonarr_config: &quot;{{ sonarr_paths_location }}/config.xml&quot;</span><span class="diff-line del">-varken_tautulli_config: &quot;{{ tautulli_paths_location }}/config.ini&quot;</span><span class="diff-line del">-tautulli_api_key: &quot;{{ (lookup(&#x27;ini&#x27;, &#x27;api_key section=General file={{ varken_tautulli_config }}&#x27;)) if tautulli_config.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line add">+varken_role_ombi_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;ombi&#x27;) }}/OmbiSettings.db&quot;</span><span class="diff-line add">+varken_role_radarr_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;radarr&#x27;) }}/config.xml&quot;</span><span class="diff-line add">+varken_role_sonarr_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;sonarr&#x27;) }}/config.xml&quot;</span><span class="diff-line add">+varken_role_tautulli_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;tautulli&#x27;) }}/config.ini&quot;</span><span class="diff-line add">+varken_role_tautulli_api_key: &quot;{{ lookup(&#x27;ini&#x27;, &#x27;api_key section=General file=&#x27; ~ lookup(&#x27;role_var&#x27;, &#x27;_tautulli_config&#x27;, role=&#x27;varken&#x27;)) if varken_tautulli_config_stat.stat.exists else &#x27;&#x27; }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-407">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/varken/tasks/config.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,64 +14,70 @@</span><span class="diff-line context"> # Tautulli Tasks</span><span class="diff-line context"> - name: &quot;Check if tautulli exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ varken_tautulli_config }}&quot;</span><span class="diff-line del">-  register: tautulli_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_tautulli_config&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line add">+  register: varken_tautulli_config_stat</span><span class="diff-line context"> </span><span class="diff-line context"> # Sonarr Tasks</span><span class="diff-line context"> - name: &quot;Check if sonarr exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ varken_sonarr_config }}&quot;</span><span class="diff-line del">-  register: sonarr_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_config&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line add">+  register: varken_sonarr_config_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pull sonarr api key</span><span class="diff-line context">   community.general.xml:</span><span class="diff-line del">-    path: &quot;{{ varken_sonarr_config }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_sonarr_config&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line context">     xpath: /Config/ApiKey</span><span class="diff-line context">     content: text</span><span class="diff-line context">   register: xmlresp</span><span class="diff-line del">-  when: sonarr_config.stat.exists</span><span class="diff-line add">+  when: varken_sonarr_config_stat.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set &#x27;sonarr_api_key&#x27;</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    sonarr_api_key: &quot;{{ xmlresp.matches[0].ApiKey if sonarr_config.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line add">+    sonarr_api_key: &quot;{{ xmlresp.matches[0].ApiKey</span><span class="diff-line add">+                     if varken_sonarr_config_stat.stat.exists</span><span class="diff-line add">+                     else &#x27;&#x27; }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Radarr Tasks</span><span class="diff-line context"> - name: &quot;Check if radarr exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ varken_radarr_config }}&quot;</span><span class="diff-line del">-  register: radarr_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_radarr_config&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line add">+  register: varken_radarr_config_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Pull radarr api key</span><span class="diff-line context">   community.general.xml:</span><span class="diff-line del">-    path: &quot;{{ varken_radarr_config }}&quot;</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_radarr_config&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line context">     xpath: /Config/ApiKey</span><span class="diff-line context">     content: text</span><span class="diff-line context">   register: xmlresp</span><span class="diff-line del">-  when: radarr_config.stat.exists</span><span class="diff-line add">+  when: varken_radarr_config_stat.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set &#x27;radarr_api_key&#x27;</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    radarr_api_key: &quot;{{ xmlresp.matches[0].ApiKey if radarr_config.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line add">+    radarr_api_key: &quot;{{ xmlresp.matches[0].ApiKey</span><span class="diff-line add">+                     if varken_radarr_config_stat.stat.exists</span><span class="diff-line add">+                     else &#x27;&#x27; }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ombi Tasks</span><span class="diff-line context"> - name: &quot;Check if ombi exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ varken_ombi_db }}&quot;</span><span class="diff-line del">-  register: ombi_config</span><span class="diff-line add">+    path: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_ombi_db&#x27;, role=&#x27;varken&#x27;) }}&quot;</span><span class="diff-line add">+  register: varken_ombi_config_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Get Ombi API key</span><span class="diff-line del">-  ansible.builtin.shell: sqlite3 &quot;{{ varken_ombi_db }}&quot; &quot;SELECT Content,SettingsName FROM GlobalSettings WHERE SettingsName = &#x27;OmbiSettings&#x27;;&quot; | sed &#x27;s/|[^|]*$//&#x27; | jq -r .ApiKey  # noqa 204 jinja[invalid]</span><span class="diff-line add">+  ansible.builtin.shell: sqlite3 &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_ombi_db&#x27;, role=&#x27;varken&#x27;) }}&quot; &quot;SELECT Content,SettingsName FROM GlobalSettings WHERE SettingsName = &#x27;OmbiSettings&#x27;;&quot; | sed &#x27;s/|[^|]*$//&#x27; | jq -r .ApiKey  # noqa 204 jinja[invalid]</span><span class="diff-line context">   register: ombi_api_key</span><span class="diff-line del">-  when: ombi_config.stat.exists</span><span class="diff-line add">+  when: varken_ombi_config_stat.stat.exists</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set &#x27;ombi_api_key&#x27;</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line del">-    ombi_api_key: &quot;{{ ombi_api_key.stdout if ombi_config.stat.exists else &#x27;&#x27; }}&quot;</span><span class="diff-line add">+    ombi_api_key: &quot;{{ ombi_api_key.stdout</span><span class="diff-line add">+                   if varken_ombi_config_stat.stat.exists</span><span class="diff-line add">+                   else &#x27;&#x27; }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import &#x27;config.ini&#x27;</span><span class="diff-line context">   ansible.builtin.template:</span><span class="diff-line context">     src: varken.ini.j2</span><span class="diff-line del">-    dest: /opt/varken/varken.ini</span><span class="diff-line add">+    dest: &quot;{{ server_appdata_path }}/varken/varken.ini&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">     mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-408">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/varken/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,22 +10,22 @@</span><span class="diff-line context"> - name: Set Default Tautulli instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     tautulli_name: &quot;{{ tautulli_instances[0] }}&quot;</span><span class="diff-line del">-  when: not tautulli_name is defined</span><span class="diff-line add">+  when: (not tautulli_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Default Ombi instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     ombi_name: &quot;{{ ombi_instances[0] }}&quot;</span><span class="diff-line del">-  when: not ombi_name is defined</span><span class="diff-line add">+  when: (not ombi_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Default Sonarr instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     sonarr_name: &quot;{{ sonarr_instances[0] }}&quot;</span><span class="diff-line del">-  when: not sonarr_name is defined</span><span class="diff-line add">+  when: (not sonarr_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Set Default Radarr instance</span><span class="diff-line context">   ansible.builtin.set_fact:</span><span class="diff-line context">     radarr_name: &quot;{{ radarr_instances[0] }}&quot;</span><span class="diff-line del">-  when: not radarr_name is defined</span><span class="diff-line add">+  when: (not radarr_name is defined)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: InfluxDB Role</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line hunk">@@ -50,7 +50,7 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create required directories</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;/opt/varken&quot;</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/varken&quot;</span><span class="diff-line context">     state: directory</span><span class="diff-line context">     mode: &quot;0775&quot;</span><span class="diff-line context">     owner: &quot;{{ user.name }}&quot;</span><span class="diff-line hunk">@@ -58,12 +58,12 @@</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Check if varken config exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;/opt/varken/varken.ini&quot;</span><span class="diff-line del">-  register: varken_config</span><span class="diff-line add">+    path: &quot;{{ server_appdata_path }}/varken/varken.ini&quot;</span><span class="diff-line add">+  register: varken_config_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Import config tasks</span><span class="diff-line context">   ansible.builtin.import_tasks: config.yml</span><span class="diff-line del">-  when: not varken_config.stat.exists</span><span class="diff-line add">+  when: (not varken_config_stat.stat.exists)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create and start varken container</span><span class="diff-line context">   community.docker.docker_container:</span><span class="diff-line hunk">@@ -78,7 +78,7 @@</span><span class="diff-line context">       PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">     volumes:</span><span class="diff-line del">-      - &quot;/opt/varken:/config&quot;</span><span class="diff-line add">+      - &quot;{{ server_appdata_path }}/varken:/config&quot;</span><span class="diff-line context">     labels:</span><span class="diff-line context">       &quot;com.github.saltbox.saltbox_managed&quot;: &quot;true&quot;</span><span class="diff-line context">     networks:</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-409">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/varken/templates/varken.ini.j2</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -18,9 +18,9 @@</span><span class="diff-line context"> password =</span><span class="diff-line context"> </span><span class="diff-line context"> [tautulli-1]</span><span class="diff-line del">-url = {{ tautulli_web_subdomain }}.{{ tautulli_web_domain }}</span><span class="diff-line add">+url = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;tautulli&#x27;) }}.{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;tautulli&#x27;) }}</span><span class="diff-line context"> fallback_ip = {{ ip }}</span><span class="diff-line del">-apikey = {{ tautulli_api_key }}</span><span class="diff-line add">+apikey = {{ lookup(&#x27;role_var&#x27;, &#x27;_tautulli_api_key&#x27;, role=&#x27;varken&#x27;) }}</span><span class="diff-line context"> ssl = false</span><span class="diff-line context"> verify_ssl = false</span><span class="diff-line context"> get_activity = true</span><span class="diff-line hunk">@@ -29,7 +29,7 @@</span><span class="diff-line context"> get_stats_run_seconds = 3600</span><span class="diff-line context"> </span><span class="diff-line context"> [sonarr-1]</span><span class="diff-line del">-url = {{ sonarr_web_subdomain }}.{{ sonarr_web_domain }}</span><span class="diff-line add">+url = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;sonarr&#x27;) }}.{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;sonarr&#x27;) }}</span><span class="diff-line context"> apikey = {{ sonarr_api_key }}</span><span class="diff-line context"> ssl = false</span><span class="diff-line context"> verify_ssl = false</span><span class="diff-line hunk">@@ -41,7 +41,7 @@</span><span class="diff-line context"> queue_run_seconds = 300</span><span class="diff-line context"> </span><span class="diff-line context"> [radarr-1]</span><span class="diff-line del">-url = {{ radarr_web_subdomain }}.{{ radarr_web_domain }}</span><span class="diff-line add">+url = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;radarr&#x27;) }}.{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;radarr&#x27;) }}</span><span class="diff-line context"> apikey = {{ radarr_api_key }}</span><span class="diff-line context"> ssl = false</span><span class="diff-line context"> verify_ssl = false</span><span class="diff-line hunk">@@ -51,7 +51,7 @@</span><span class="diff-line context"> get_missing_run_seconds = 300</span><span class="diff-line context"> </span><span class="diff-line context"> [ombi-1]</span><span class="diff-line del">-url = {{ ombi_web_subdomain }}.{{ ombi_web_domain }}</span><span class="diff-line add">+url = {{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ombi&#x27;) }}.{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ombi&#x27;) }}</span><span class="diff-line context"> apikey = {{ ombi_api_key }}</span><span class="diff-line context"> ssl = false</span><span class="diff-line context"> verify_ssl = false</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-410">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/vaultwarden/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,128 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vaultwarden_paths_folder: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line del">-vaultwarden_paths_location: &quot;{{ server_appdata_path }}/{{ vaultwarden_paths_folder }}&quot;</span><span class="diff-line del">-vaultwarden_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ vaultwarden_paths_location }}&quot;</span><span class="diff-line del">-vaultwarden_paths_config_location: &quot;{{ vaultwarden_paths_location }}/env&quot;</span><span class="diff-line add">+vaultwarden_role_paths_folder: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line add">+vaultwarden_role_paths_location: &quot;{{ server_appdata_path }}/{{ vaultwarden_role_paths_folder }}&quot;</span><span class="diff-line add">+vaultwarden_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ vaultwarden_role_paths_location }}&quot;</span><span class="diff-line add">+vaultwarden_role_paths_config_location: &quot;{{ vaultwarden_role_paths_location }}/env&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vaultwarden_web_subdomain: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line del">-vaultwarden_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-vaultwarden_web_port: &quot;6423&quot;</span><span class="diff-line del">-vaultwarden_web_url: &quot;{{ &#x27;https://&#x27; + (vaultwarden_web_subdomain + &#x27;.&#x27; + vaultwarden_web_domain</span><span class="diff-line del">-                      if (vaultwarden_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                      else vaultwarden_web_domain) }}&quot;</span><span class="diff-line add">+vaultwarden_role_web_subdomain: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line add">+vaultwarden_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+vaultwarden_role_web_port: &quot;6423&quot;</span><span class="diff-line add">+vaultwarden_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vaultwarden&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vaultwarden&#x27;)</span><span class="diff-line add">+                           if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vaultwarden&#x27;) | length &gt; 0)</span><span class="diff-line add">+                           else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vaultwarden&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vaultwarden_dns_record: &quot;{{ vaultwarden_web_subdomain }}&quot;</span><span class="diff-line del">-vaultwarden_dns_zone: &quot;{{ vaultwarden_web_domain }}&quot;</span><span class="diff-line del">-vaultwarden_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+vaultwarden_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line add">+vaultwarden_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line add">+vaultwarden_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vaultwarden_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-vaultwarden_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-vaultwarden_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-vaultwarden_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-vaultwarden_traefik_enabled: true</span><span class="diff-line del">-vaultwarden_traefik_api_enabled: false</span><span class="diff-line del">-vaultwarden_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+vaultwarden_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+vaultwarden_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+vaultwarden_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+vaultwarden_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+vaultwarden_role_traefik_enabled: true</span><span class="diff-line add">+vaultwarden_role_traefik_api_enabled: false</span><span class="diff-line add">+vaultwarden_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-vaultwarden_docker_container: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_container: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-vaultwarden_docker_image_pull: true</span><span class="diff-line del">-vaultwarden_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-vaultwarden_docker_image: &quot;vaultwarden/server:{{ vaultwarden_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-vaultwarden_docker_ports_defaults: []</span><span class="diff-line del">-vaultwarden_docker_ports_custom: []</span><span class="diff-line del">-vaultwarden_docker_ports: &quot;{{ vaultwarden_docker_ports_defaults</span><span class="diff-line del">-                              + vaultwarden_docker_ports_custom }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_image_pull: true</span><span class="diff-line add">+vaultwarden_role_docker_image_repo: &quot;vaultwarden/server&quot;</span><span class="diff-line add">+vaultwarden_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+vaultwarden_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;vaultwarden&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-vaultwarden_docker_envs_default:</span><span class="diff-line add">+vaultwarden_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  ROCKET_PORT: &quot;{{ vaultwarden_web_port }}&quot;</span><span class="diff-line del">-vaultwarden_docker_envs_custom: {}</span><span class="diff-line del">-vaultwarden_docker_envs: &quot;{{ vaultwarden_docker_envs_default</span><span class="diff-line del">-                             | combine(vaultwarden_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-vaultwarden_docker_commands_default: []</span><span class="diff-line del">-vaultwarden_docker_commands_custom: []</span><span class="diff-line del">-vaultwarden_docker_commands: &quot;{{ vaultwarden_docker_commands_default</span><span class="diff-line del">-                                 + vaultwarden_docker_commands_custom }}&quot;</span><span class="diff-line add">+  ROCKET_PORT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_envs_custom: {}</span><span class="diff-line add">+vaultwarden_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;vaultwarden&#x27;)</span><span class="diff-line add">+                                  | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;vaultwarden&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-vaultwarden_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ vaultwarden_paths_location }}:/data&quot;</span><span class="diff-line del">-  - &quot;{{ vaultwarden_paths_location }}/env:/.env&quot;</span><span class="diff-line del">-vaultwarden_docker_volumes_custom: []</span><span class="diff-line del">-vaultwarden_docker_volumes: &quot;{{ vaultwarden_docker_volumes_default</span><span class="diff-line del">-                                + vaultwarden_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-vaultwarden_docker_devices_default: []</span><span class="diff-line del">-vaultwarden_docker_devices_custom: []</span><span class="diff-line del">-vaultwarden_docker_devices: &quot;{{ vaultwarden_docker_devices_default</span><span class="diff-line del">-                                + vaultwarden_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-vaultwarden_docker_hosts_default: {}</span><span class="diff-line del">-vaultwarden_docker_hosts_custom: {}</span><span class="diff-line del">-vaultwarden_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                              | combine(vaultwarden_docker_hosts_default)</span><span class="diff-line del">-                              | combine(vaultwarden_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-vaultwarden_docker_labels_default: {}</span><span class="diff-line del">-vaultwarden_docker_labels_custom: {}</span><span class="diff-line del">-vaultwarden_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                               | combine(vaultwarden_docker_labels_default)</span><span class="diff-line del">-                               | combine(vaultwarden_docker_labels_custom) }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;vaultwarden&#x27;) }}:/data&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;vaultwarden&#x27;) }}/env:/.env&quot;</span><span class="diff-line add">+vaultwarden_role_docker_volumes_custom: []</span><span class="diff-line add">+vaultwarden_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;vaultwarden&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-vaultwarden_docker_hostname: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_hostname: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-vaultwarden_docker_networks_alias: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line del">-vaultwarden_docker_networks_default: []</span><span class="diff-line del">-vaultwarden_docker_networks_custom: []</span><span class="diff-line del">-vaultwarden_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                 + vaultwarden_docker_networks_default</span><span class="diff-line del">-                                 + vaultwarden_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-vaultwarden_docker_capabilities_default: []</span><span class="diff-line del">-vaultwarden_docker_capabilities_custom: []</span><span class="diff-line del">-vaultwarden_docker_capabilities: &quot;{{ vaultwarden_docker_capabilities_default</span><span class="diff-line del">-                                     + vaultwarden_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-vaultwarden_docker_security_opts_default: []</span><span class="diff-line del">-vaultwarden_docker_security_opts_custom: []</span><span class="diff-line del">-vaultwarden_docker_security_opts: &quot;{{ vaultwarden_docker_security_opts_default</span><span class="diff-line del">-                                      + vaultwarden_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_networks_alias: &quot;{{ vaultwarden_name }}&quot;</span><span class="diff-line add">+vaultwarden_role_docker_networks_default: []</span><span class="diff-line add">+vaultwarden_role_docker_networks_custom: []</span><span class="diff-line add">+vaultwarden_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;vaultwarden&#x27;)</span><span class="diff-line add">+                                      + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;vaultwarden&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-vaultwarden_docker_restart_policy: unless-stopped</span><span class="diff-line add">+vaultwarden_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-vaultwarden_docker_state: started</span><span class="diff-line add">+vaultwarden_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-411">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/vaultwarden/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,28 +20,28 @@</span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: &quot;Check if &#x27;{{ vaultwarden_paths_config_location | basename }}&#x27; exists&quot;</span><span class="diff-line add">+- name: &quot;Check if &#x27;{{ vaultwarden_role_paths_config_location | basename }}&#x27; exists&quot;</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ vaultwarden_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ vaultwarden_role_paths_config_location }}&quot;</span><span class="diff-line context">   register: vaultwarden_env</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove env folder if it exists</span><span class="diff-line context">   ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ vaultwarden_paths_config_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ vaultwarden_role_paths_config_location }}&quot;</span><span class="diff-line context">     state: absent</span><span class="diff-line context">   when: (vaultwarden_env.stat.isdir is defined) and vaultwarden_env.stat.isdir</span><span class="diff-line context"> </span><span class="diff-line del">-- name: New `{{ vaultwarden_paths_config_location | basename }}` tasks</span><span class="diff-line add">+- name: New `{{ vaultwarden_role_paths_config_location | basename }}` tasks</span><span class="diff-line context">   when: not vaultwarden_env.stat.exists or ((vaultwarden_env.stat.isdir is defined) and vaultwarden_env.stat.isdir)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: &quot;Generate Admin token&quot;</span><span class="diff-line context">       ansible.builtin.shell: /usr/bin/openssl rand -base64 48</span><span class="diff-line context">       register: admin_token</span><span class="diff-line context"> </span><span class="diff-line del">-    - name: &quot;Import &#x27;{{ vaultwarden_paths_config_location | basename }}&#x27; if it doesnt exist&quot;</span><span class="diff-line add">+    - name: &quot;Import &#x27;{{ vaultwarden_role_paths_config_location | basename }}&#x27; if it doesnt exist&quot;</span><span class="diff-line context">       ansible.builtin.template:</span><span class="diff-line context">         src: vaultwarden_env.j2</span><span class="diff-line del">-        dest: &quot;{{ vaultwarden_paths_config_location }}&quot;</span><span class="diff-line add">+        dest: &quot;{{ vaultwarden_role_paths_config_location }}&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &quot;0664&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-412">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/vnstat/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -24,123 +24,80 @@</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vnstat_web_subdomain: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line del">-vnstat_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-vnstat_web_port: &quot;8685&quot;</span><span class="diff-line del">-vnstat_web_url: &quot;{{ &#x27;https://&#x27; + (vnstat_web_subdomain + &#x27;.&#x27; + vnstat_web_domain</span><span class="diff-line del">-                 if (vnstat_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else vnstat_web_domain) }}&quot;</span><span class="diff-line add">+vnstat_role_web_subdomain: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line add">+vnstat_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+vnstat_role_web_port: &quot;8685&quot;</span><span class="diff-line add">+vnstat_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vnstat&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vnstat&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vnstat&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vnstat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vnstat_dns_record: &quot;{{ vnstat_web_subdomain }}&quot;</span><span class="diff-line del">-vnstat_dns_zone: &quot;{{ vnstat_web_domain }}&quot;</span><span class="diff-line del">-vnstat_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+vnstat_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;vnstat&#x27;) }}&quot;</span><span class="diff-line add">+vnstat_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;vnstat&#x27;) }}&quot;</span><span class="diff-line add">+vnstat_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-vnstat_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-vnstat_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-vnstat_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-vnstat_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-vnstat_traefik_enabled: true</span><span class="diff-line del">-vnstat_traefik_api_enabled: false</span><span class="diff-line del">-vnstat_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+vnstat_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+vnstat_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+vnstat_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+vnstat_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+vnstat_role_traefik_enabled: true</span><span class="diff-line add">+vnstat_role_traefik_api_enabled: false</span><span class="diff-line add">+vnstat_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-vnstat_docker_container: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line add">+vnstat_role_docker_container: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-vnstat_docker_image_pull: true</span><span class="diff-line del">-vnstat_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-vnstat_docker_image: &quot;vergoh/vnstat:{{ vnstat_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-vnstat_docker_ports_defaults: []</span><span class="diff-line del">-vnstat_docker_ports_custom: []</span><span class="diff-line del">-vnstat_docker_ports: &quot;{{ vnstat_docker_ports_defaults</span><span class="diff-line del">-                         + vnstat_docker_ports_custom }}&quot;</span><span class="diff-line add">+vnstat_role_docker_image_pull: true</span><span class="diff-line add">+vnstat_role_docker_image_repo: &quot;vergoh/vnstat&quot;</span><span class="diff-line add">+vnstat_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+vnstat_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;vnstat&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;vnstat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-vnstat_docker_envs_default:</span><span class="diff-line add">+vnstat_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   HTTP_PORT: &quot;8685&quot;</span><span class="diff-line context">   PAGE_REFRESH: &quot;{{ vnstat_page_refresh }}&quot;</span><span class="diff-line context">   RATE_UNIT: &quot;{{ vnstat_rate_unit }}&quot;</span><span class="diff-line context">   RUN_VNSTATD: &quot;0&quot;</span><span class="diff-line del">-vnstat_docker_envs_custom: {}</span><span class="diff-line del">-vnstat_docker_envs: &quot;{{ vnstat_docker_envs_default</span><span class="diff-line del">-                        | combine(vnstat_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-vnstat_docker_commands_default: []</span><span class="diff-line del">-vnstat_docker_commands_custom: []</span><span class="diff-line del">-vnstat_docker_commands: &quot;{{ vnstat_docker_commands_default</span><span class="diff-line del">-                            + vnstat_docker_commands_custom }}&quot;</span><span class="diff-line add">+vnstat_role_docker_envs_custom: {}</span><span class="diff-line add">+vnstat_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;vnstat&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;vnstat&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-vnstat_docker_volumes_default:</span><span class="diff-line add">+vnstat_role_docker_volumes_default:</span><span class="diff-line context">   - &quot;vnstat:/var/lib/vnstat:ro&quot;</span><span class="diff-line del">-vnstat_docker_volumes_custom: []</span><span class="diff-line del">-vnstat_docker_volumes: &quot;{{ vnstat_docker_volumes_default</span><span class="diff-line del">-                           + vnstat_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-vnstat_docker_devices_default: []</span><span class="diff-line del">-vnstat_docker_devices_custom: []</span><span class="diff-line del">-vnstat_docker_devices: &quot;{{ vnstat_docker_devices_default</span><span class="diff-line del">-                           + vnstat_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-vnstat_docker_hosts_default: {}</span><span class="diff-line del">-vnstat_docker_hosts_custom: {}</span><span class="diff-line del">-vnstat_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(vnstat_docker_hosts_default)</span><span class="diff-line del">-                         | combine(vnstat_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-vnstat_docker_labels_default: {}</span><span class="diff-line del">-vnstat_docker_labels_custom: {}</span><span class="diff-line del">-vnstat_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(vnstat_docker_labels_default)</span><span class="diff-line del">-                          | combine(vnstat_docker_labels_custom) }}&quot;</span><span class="diff-line add">+vnstat_role_docker_volumes_custom: []</span><span class="diff-line add">+vnstat_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;vnstat&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;vnstat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-vnstat_docker_hostname: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line add">+vnstat_role_docker_hostname: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-vnstat_docker_networks_alias: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line del">-vnstat_docker_networks_default: []</span><span class="diff-line del">-vnstat_docker_networks_custom: []</span><span class="diff-line del">-vnstat_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + vnstat_docker_networks_default</span><span class="diff-line del">-                            + vnstat_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-vnstat_docker_capabilities_default: []</span><span class="diff-line del">-vnstat_docker_capabilities_custom: []</span><span class="diff-line del">-vnstat_docker_capabilities: &quot;{{ vnstat_docker_capabilities_default</span><span class="diff-line del">-                                + vnstat_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-vnstat_docker_security_opts_default: []</span><span class="diff-line del">-vnstat_docker_security_opts_custom: []</span><span class="diff-line del">-vnstat_docker_security_opts: &quot;{{ vnstat_docker_security_opts_default</span><span class="diff-line del">-                                 + vnstat_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+vnstat_role_docker_networks_alias: &quot;{{ vnstat_name }}&quot;</span><span class="diff-line add">+vnstat_role_docker_networks_default: []</span><span class="diff-line add">+vnstat_role_docker_networks_custom: []</span><span class="diff-line add">+vnstat_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;vnstat&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;vnstat&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-vnstat_docker_restart_policy: unless-stopped</span><span class="diff-line add">+vnstat_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-vnstat_docker_state: started</span><span class="diff-line add">+vnstat_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Force Kill</span><span class="diff-line del">-vnstat_docker_force_kill: yes</span><span class="diff-line add">+vnstat_role_docker_force_kill: true</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-413">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/vnstat/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -20,7 +20,7 @@</span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    vnstat_docker_container: &quot;{{ vnstat_name }}-host&quot;</span><span class="diff-line add">+    vnstat_role_docker_container: &quot;{{ vnstat_name }}-host&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create a volume</span><span class="diff-line context">   community.docker.docker_volume:</span><span class="diff-line hunk">@@ -29,15 +29,15 @@</span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    vnstat_docker_container: &quot;{{ vnstat_name }}-host&quot;</span><span class="diff-line del">-    vnstat_docker_envs:</span><span class="diff-line add">+    vnstat_role_docker_container: &quot;{{ vnstat_name }}-host&quot;</span><span class="diff-line add">+    vnstat_role_docker_envs:</span><span class="diff-line context">       TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">       HTTP_PORT: &quot;0&quot;</span><span class="diff-line del">-    vnstat_docker_network_mode: &quot;host&quot;</span><span class="diff-line del">-    vnstat_docker_networks: &quot;{{ omit }}&quot;</span><span class="diff-line del">-    vnstat_docker_volumes:</span><span class="diff-line add">+    vnstat_role_docker_network_mode: &quot;host&quot;</span><span class="diff-line add">+    vnstat_role_docker_volumes:</span><span class="diff-line context">       - &quot;vnstat:/var/lib/vnstat&quot;</span><span class="diff-line del">-    vnstat_docker_labels: &quot;{{ omit }}&quot;</span><span class="diff-line add">+    vnstat_role_docker_labels: {}</span><span class="diff-line add">+    vnstat_docker_labels_use_common: false</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-414">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/watchstate/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,146 +17,102 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-watchstate_api_auto: true</span><span class="diff-line del">-watchstate_trust_proxy: true</span><span class="diff-line del">-watchstate_secure_api_endpoints: true</span><span class="diff-line add">+watchstate_role_api_auto: true</span><span class="diff-line add">+watchstate_role_trust_proxy: true</span><span class="diff-line add">+watchstate_role_secure_api_endpoints: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-watchstate_paths_folder: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line del">-watchstate_paths_location: &quot;{{ server_appdata_path }}/{{ watchstate_paths_folder }}&quot;</span><span class="diff-line del">-watchstate_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ watchstate_paths_location }}&quot;</span><span class="diff-line add">+watchstate_role_paths_folder: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line add">+watchstate_role_paths_location: &quot;{{ server_appdata_path }}/{{ watchstate_role_paths_folder }}&quot;</span><span class="diff-line add">+watchstate_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ watchstate_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-watchstate_web_subdomain: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line del">-watchstate_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-watchstate_web_port: &quot;8080&quot;</span><span class="diff-line del">-watchstate_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_subdomain&#x27;, default=watchstate_web_subdomain)</span><span class="diff-line del">-                        + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_domain&#x27;, default=watchstate_web_domain)</span><span class="diff-line del">-                     if (lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_subdomain&#x27;, default=watchstate_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                     else lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_domain&#x27;, default=watchstate_web_domain)) }}&quot;</span><span class="diff-line add">+watchstate_role_web_subdomain: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line add">+watchstate_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+watchstate_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+watchstate_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;watchstate&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;watchstate&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;watchstate&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-watchstate_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_subdomain&#x27;, default=watchstate_web_subdomain) }}&quot;</span><span class="diff-line del">-watchstate_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_web_domain&#x27;, default=watchstate_web_domain) }}&quot;</span><span class="diff-line del">-watchstate_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+watchstate_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;watchstate&#x27;) }}&quot;</span><span class="diff-line add">+watchstate_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;watchstate&#x27;) }}&quot;</span><span class="diff-line add">+watchstate_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-watchstate_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-watchstate_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-watchstate_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-watchstate_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-watchstate_traefik_enabled: true</span><span class="diff-line del">-watchstate_traefik_api_enabled: true</span><span class="diff-line del">-watchstate_traefik_api_endpoint: &quot;PathRegexp(`backend/[^/]+/webhook`)&quot;</span><span class="diff-line add">+watchstate_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+watchstate_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+watchstate_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+watchstate_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+watchstate_role_traefik_enabled: true</span><span class="diff-line add">+watchstate_role_traefik_api_enabled: true</span><span class="diff-line add">+watchstate_role_traefik_api_endpoint: &quot;PathRegexp(`backend/[^/]+/webhook`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-watchstate_docker_container: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line add">+watchstate_role_docker_container: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-watchstate_docker_image_pull: true</span><span class="diff-line del">-watchstate_docker_image_repo: &quot;ghcr.io/arabcoders/watchstate&quot;</span><span class="diff-line del">-watchstate_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-watchstate_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_image_repo&#x27;, default=watchstate_docker_image_repo)</span><span class="diff-line del">-                             + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_image_tag&#x27;, default=watchstate_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-watchstate_docker_ports_defaults: []</span><span class="diff-line del">-watchstate_docker_ports_custom: []</span><span class="diff-line del">-watchstate_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_ports_defaults&#x27;, default=watchstate_docker_ports_defaults)</span><span class="diff-line del">-                             + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_ports_custom&#x27;, default=watchstate_docker_ports_custom) }}&quot;</span><span class="diff-line add">+watchstate_role_docker_image_pull: true</span><span class="diff-line add">+watchstate_role_docker_image_repo: &quot;ghcr.io/arabcoders/watchstate&quot;</span><span class="diff-line add">+watchstate_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+watchstate_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;watchstate&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;watchstate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-watchstate_docker_envs_default:</span><span class="diff-line add">+watchstate_role_docker_envs_default:</span><span class="diff-line context">   WS_TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  WS_API_AUTO: &quot;{{ &#x27;true&#x27; if watchstate_api_auto else omit }}&quot;</span><span class="diff-line del">-  WS_TRUST_PROXY: &quot;{{ &#x27;true&#x27; if watchstate_trust_proxy else omit }}&quot;</span><span class="diff-line del">-  WS_SECURE_API_ENDPOINTS: &quot;{{ &#x27;true&#x27; if watchstate_secure_api_endpoints else omit }}&quot;</span><span class="diff-line del">-watchstate_docker_envs_custom: {}</span><span class="diff-line del">-watchstate_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_envs_default&#x27;, default=watchstate_docker_envs_default)</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_envs_custom&#x27;, default=watchstate_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-watchstate_docker_commands_default: []</span><span class="diff-line del">-watchstate_docker_commands_custom: []</span><span class="diff-line del">-watchstate_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_commands_default&#x27;, default=watchstate_docker_commands_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_commands_custom&#x27;, default=watchstate_docker_commands_custom) }}&quot;</span><span class="diff-line add">+  WS_API_AUTO: &quot;{{ &#x27;true&#x27;</span><span class="diff-line add">+                if lookup(&#x27;role_var&#x27;, &#x27;_api_auto&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                else omit }}&quot;</span><span class="diff-line add">+  WS_TRUST_PROXY: &quot;{{ &#x27;true&#x27;</span><span class="diff-line add">+                   if lookup(&#x27;role_var&#x27;, &#x27;_trust_proxy&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                   else omit }}&quot;</span><span class="diff-line add">+  WS_SECURE_API_ENDPOINTS: &quot;{{ &#x27;true&#x27;</span><span class="diff-line add">+                            if lookup(&#x27;role_var&#x27;, &#x27;_secure_api_endpoints&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                            else omit }}&quot;</span><span class="diff-line add">+watchstate_role_docker_envs_custom: {}</span><span class="diff-line add">+watchstate_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                                 | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;watchstate&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-watchstate_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ watchstate_paths_location }}:/config&quot;</span><span class="diff-line del">-watchstate_docker_volumes_custom: []</span><span class="diff-line del">-watchstate_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_volumes_default&#x27;, default=watchstate_docker_volumes_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_volumes_custom&#x27;, default=watchstate_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-watchstate_docker_devices_default: []</span><span class="diff-line del">-watchstate_docker_devices_custom: []</span><span class="diff-line del">-watchstate_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_devices_default&#x27;, default=watchstate_docker_devices_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_devices_custom&#x27;, default=watchstate_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-watchstate_docker_hosts_default: {}</span><span class="diff-line del">-watchstate_docker_hosts_custom: {}</span><span class="diff-line del">-watchstate_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_hosts_default&#x27;, default=watchstate_docker_hosts_default))</span><span class="diff-line del">-                             | combine(lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_hosts_custom&#x27;, default=watchstate_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-watchstate_docker_labels_default: {}</span><span class="diff-line del">-watchstate_docker_labels_custom: {}</span><span class="diff-line del">-watchstate_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_labels_default&#x27;, default=watchstate_docker_labels_default))</span><span class="diff-line del">-                              | combine(lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_labels_custom&#x27;, default=watchstate_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+watchstate_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;watchstate&#x27;) }}:/config&quot;</span><span class="diff-line add">+watchstate_role_docker_volumes_custom: []</span><span class="diff-line add">+watchstate_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;watchstate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-watchstate_docker_hostname: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Network Mode</span><span class="diff-line del">-watchstate_docker_network_mode_default: &quot;{{ docker_networks_name_common }}&quot;</span><span class="diff-line del">-watchstate_docker_network_mode: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_network_mode_default&#x27;, default=watchstate_docker_network_mode_default) }}&quot;</span><span class="diff-line add">+watchstate_role_docker_hostname: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-watchstate_docker_networks_alias: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line del">-watchstate_docker_networks_default: []</span><span class="diff-line del">-watchstate_docker_networks_custom: []</span><span class="diff-line del">-watchstate_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_networks_default&#x27;, default=watchstate_docker_networks_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_networks_custom&#x27;, default=watchstate_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-watchstate_docker_capabilities_default: []</span><span class="diff-line del">-watchstate_docker_capabilities_custom: []</span><span class="diff-line del">-watchstate_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_capabilities_default&#x27;, default=watchstate_docker_capabilities_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_capabilities_custom&#x27;, default=watchstate_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-watchstate_docker_security_opts_default: []</span><span class="diff-line del">-watchstate_docker_security_opts_custom: []</span><span class="diff-line del">-watchstate_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_security_opts_default&#x27;, default=watchstate_docker_security_opts_default)</span><span class="diff-line del">-                                     + lookup(&#x27;vars&#x27;, watchstate_name + &#x27;_docker_security_opts_custom&#x27;, default=watchstate_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+watchstate_role_docker_networks_alias: &quot;{{ watchstate_name }}&quot;</span><span class="diff-line add">+watchstate_role_docker_networks_default: []</span><span class="diff-line add">+watchstate_role_docker_networks_custom: []</span><span class="diff-line add">+watchstate_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;watchstate&#x27;)</span><span class="diff-line add">+                                     + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;watchstate&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-watchstate_docker_restart_policy: unless-stopped</span><span class="diff-line add">+watchstate_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-watchstate_docker_state: started</span><span class="diff-line add">+watchstate_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-watchstate_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+watchstate_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-415">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/watchstate/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-416">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wikijs/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,146 +17,112 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wikijs_postgres_name: &quot;{{ wikijs_name }}-postgres&quot;</span><span class="diff-line del">-wikijs_postgres_docker_env_db: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line del">-wikijs_postgres_docker_image_tag: &quot;15-alpine&quot;</span><span class="diff-line del">-wikijs_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line del">-wikijs_postgres_paths_folder: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line del">-wikijs_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ postgres_paths_folder }}/postgres&quot;</span><span class="diff-line add">+wikijs_role_postgres_deploy: true</span><span class="diff-line add">+wikijs_role_postgres_name: &quot;{{ wikijs_name }}-postgres&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+wikijs_role_postgres_user: &quot;&quot;</span><span class="diff-line add">+# If empty it will fallback to postgres role default</span><span class="diff-line add">+wikijs_role_postgres_password: &quot;&quot;</span><span class="diff-line add">+wikijs_role_postgres_docker_env_db: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_postgres_docker_image_tag: &quot;15-alpine&quot;</span><span class="diff-line add">+wikijs_role_postgres_docker_image_repo: &quot;postgres&quot;</span><span class="diff-line add">+wikijs_role_postgres_docker_healthcheck:</span><span class="diff-line add">+  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;wikijs&#x27;) }} -U {{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;wikijs&#x27;) if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;wikijs&#x27;) | length &gt; 0) else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;]</span><span class="diff-line add">+  start_period: 20s</span><span class="diff-line add">+  interval: 30s</span><span class="diff-line add">+  retries: 5</span><span class="diff-line add">+  timeout: 5s</span><span class="diff-line add">+wikijs_role_postgres_paths_folder: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_postgres_paths_location: &quot;{{ server_appdata_path }}/{{ wikijs_role_postgres_paths_folder }}/postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wikijs_paths_folder: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line del">-wikijs_paths_location: &quot;{{ server_appdata_path }}/{{ wikijs_paths_folder }}&quot;</span><span class="diff-line del">-wikijs_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ wikijs_paths_location }}&quot;</span><span class="diff-line add">+wikijs_role_paths_folder: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_paths_location: &quot;{{ server_appdata_path }}/{{ wikijs_role_paths_folder }}&quot;</span><span class="diff-line add">+wikijs_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ wikijs_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wikijs_web_subdomain: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line del">-wikijs_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-wikijs_web_port: &quot;3000&quot;</span><span class="diff-line del">-wikijs_web_url: &quot;{{ &#x27;https://&#x27; + (wikijs_web_subdomain + &#x27;.&#x27; + wikijs_web_domain</span><span class="diff-line del">-                 if (wikijs_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                 else wikijs_web_domain) }}&quot;</span><span class="diff-line add">+wikijs_role_web_subdomain: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+wikijs_role_web_port: &quot;3000&quot;</span><span class="diff-line add">+wikijs_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wikijs&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wikijs&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wikijs&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wikijs_dns_record: &quot;{{ wikijs_web_subdomain }}&quot;</span><span class="diff-line del">-wikijs_dns_zone: &quot;{{ wikijs_web_domain }}&quot;</span><span class="diff-line del">-wikijs_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+wikijs_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+wikijs_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+wikijs_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wikijs_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-wikijs_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-wikijs_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-wikijs_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-wikijs_traefik_enabled: true</span><span class="diff-line del">-wikijs_traefik_api_enabled: true</span><span class="diff-line del">-wikijs_traefik_api_endpoint: &quot;PathPrefix(`/graphql`)&quot;</span><span class="diff-line add">+wikijs_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+wikijs_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+wikijs_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+wikijs_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+wikijs_role_traefik_enabled: true</span><span class="diff-line add">+wikijs_role_traefik_api_enabled: true</span><span class="diff-line add">+wikijs_role_traefik_api_endpoint: &quot;PathPrefix(`/graphql`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-wikijs_docker_container: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_docker_container: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-wikijs_docker_image_pull: true</span><span class="diff-line del">-wikijs_docker_image_tag: &quot;2&quot;</span><span class="diff-line del">-wikijs_docker_image: &quot;ghcr.io/requarks/wiki:{{ wikijs_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-wikijs_docker_ports_defaults: []</span><span class="diff-line del">-wikijs_docker_ports_custom: []</span><span class="diff-line del">-wikijs_docker_ports: &quot;{{ wikijs_docker_ports_defaults</span><span class="diff-line del">-                         + wikijs_docker_ports_custom }}&quot;</span><span class="diff-line add">+wikijs_role_docker_image_pull: true</span><span class="diff-line add">+wikijs_role_docker_image_repo: &quot;ghcr.io/requarks/wiki&quot;</span><span class="diff-line add">+wikijs_role_docker_image_tag: &quot;2&quot;</span><span class="diff-line add">+wikijs_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;wikijs&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-wikijs_docker_envs_default:</span><span class="diff-line add">+wikijs_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   DB_TYPE: &quot;postgres&quot;</span><span class="diff-line del">-  DB_HOST: &quot;{{ wikijs_postgres_name }}&quot;</span><span class="diff-line add">+  DB_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line context">   DB_PORT: &quot;5432&quot;</span><span class="diff-line del">-  DB_USER: &quot;{{ postgres_docker_env_user }}&quot;</span><span class="diff-line del">-  DB_PASS: &quot;{{ postgres_docker_env_password }}&quot;</span><span class="diff-line del">-  DB_NAME: &quot;{{ wikijs_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-wikijs_docker_envs_custom: {}</span><span class="diff-line del">-wikijs_docker_envs: &quot;{{ wikijs_docker_envs_default</span><span class="diff-line del">-                        | combine(wikijs_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-wikijs_docker_commands_default: []</span><span class="diff-line del">-wikijs_docker_commands_custom: []</span><span class="diff-line del">-wikijs_docker_commands: &quot;{{ wikijs_docker_commands_default</span><span class="diff-line del">-                            + wikijs_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-wikijs_docker_volumes_default: []</span><span class="diff-line del">-wikijs_docker_volumes_custom: []</span><span class="diff-line del">-wikijs_docker_volumes: &quot;{{ wikijs_docker_volumes_default</span><span class="diff-line del">-                           + wikijs_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-wikijs_docker_devices_default: []</span><span class="diff-line del">-wikijs_docker_devices_custom: []</span><span class="diff-line del">-wikijs_docker_devices: &quot;{{ wikijs_docker_devices_default</span><span class="diff-line del">-                           + wikijs_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-wikijs_docker_hosts_default: {}</span><span class="diff-line del">-wikijs_docker_hosts_custom: {}</span><span class="diff-line del">-wikijs_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(wikijs_docker_hosts_default)</span><span class="diff-line del">-                         | combine(wikijs_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-wikijs_docker_labels_default: {}</span><span class="diff-line del">-wikijs_docker_labels_custom: {}</span><span class="diff-line del">-wikijs_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(wikijs_docker_labels_default)</span><span class="diff-line del">-                          | combine(wikijs_docker_labels_custom) }}&quot;</span><span class="diff-line add">+  DB_USER: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+            if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;wikijs&#x27;) | length &gt; 0)</span><span class="diff-line add">+            else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_user&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DB_PASS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+            if (lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;wikijs&#x27;) | length &gt; 0)</span><span class="diff-line add">+            else lookup(&#x27;role_var&#x27;, &#x27;_docker_env_password&#x27;, role=&#x27;postgres&#x27;) }}&quot;</span><span class="diff-line add">+  DB_NAME: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+wikijs_role_docker_envs_custom: {}</span><span class="diff-line add">+wikijs_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;wikijs&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-wikijs_docker_hostname: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_docker_hostname: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-wikijs_docker_networks_alias: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line del">-wikijs_docker_networks_default: []</span><span class="diff-line del">-wikijs_docker_networks_custom: []</span><span class="diff-line del">-wikijs_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + wikijs_docker_networks_default</span><span class="diff-line del">-                            + wikijs_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-wikijs_docker_capabilities_default: []</span><span class="diff-line del">-wikijs_docker_capabilities_custom: []</span><span class="diff-line del">-wikijs_docker_capabilities: &quot;{{ wikijs_docker_capabilities_default</span><span class="diff-line del">-                                + wikijs_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-wikijs_docker_security_opts_default: []</span><span class="diff-line del">-wikijs_docker_security_opts_custom: []</span><span class="diff-line del">-wikijs_docker_security_opts: &quot;{{ wikijs_docker_security_opts_default</span><span class="diff-line del">-                                 + wikijs_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+wikijs_role_docker_networks_alias: &quot;{{ wikijs_name }}&quot;</span><span class="diff-line add">+wikijs_role_docker_networks_default: []</span><span class="diff-line add">+wikijs_role_docker_networks_custom: []</span><span class="diff-line add">+wikijs_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-wikijs_docker_restart_policy: unless-stopped</span><span class="diff-line add">+wikijs_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-wikijs_docker_state: started</span><span class="diff-line add">+wikijs_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-wikijs_depends_on: &quot;{{ wikijs_postgres_name }}&quot;</span><span class="diff-line del">-wikijs_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-wikijs_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+wikijs_role_depends_on: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+wikijs_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+wikijs_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-417">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wikijs/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,25 +10,29 @@</span><span class="diff-line context"> - name: Remove legacy PostgreSQL Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    var_prefix: &quot;{{ wikijs_name }}_postgres&quot;</span><span class="diff-line add">+    container_name: &quot;{{ wikijs_name }}_postgres&quot;</span><span class="diff-line context"> </span><span class="diff-line del">-- name: PostgreSQL Role</span><span class="diff-line add">+- name: &quot;Import Postgres Role&quot;</span><span class="diff-line context">   ansible.builtin.include_role:</span><span class="diff-line context">     name: postgres</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    postgres_instances: [&quot;{{ wikijs_postgres_name }}&quot;]</span><span class="diff-line del">-    postgres_docker_env_db: &quot;{{ wikijs_postgres_docker_env_db }}&quot;</span><span class="diff-line del">-    postgres_docker_image_tag: &quot;{{ wikijs_postgres_docker_image_tag }}&quot;</span><span class="diff-line del">-    postgres_docker_image_repo: &quot;{{ wikijs_postgres_docker_image_repo }}&quot;</span><span class="diff-line del">-    postgres_paths_folder: &quot;{{ wikijs_postgres_paths_folder }}&quot;</span><span class="diff-line del">-    postgres_paths_location: &quot;{{ wikijs_postgres_paths_location }}&quot;</span><span class="diff-line add">+    postgres_instances: [&quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_name&#x27;, role=&#x27;wikijs&#x27;) }}&quot;]</span><span class="diff-line add">+    postgres_role_docker_image_tag: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_tag&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_image_repo: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_image_repo&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_folder: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_folder&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_paths_location: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_paths_location&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_db: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_env_db&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_user_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_user&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_env_password_include: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_password&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+    postgres_role_docker_healthcheck: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_postgres_docker_healthcheck&#x27;, role=&#x27;wikijs&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_postgres_deploy&#x27;, role=&#x27;wikijs&#x27;)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-418">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wireguard/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,6 +1,6 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> # Title:            Sandbox: Wireguard | Default Variables               #</span><span class="diff-line del">-# Author(s):        owine                                                #</span><span class="diff-line add">+# Author(s):        owine, salty                                         #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line context"> # --                                                                     #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line hunk">@@ -17,142 +17,150 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wireguard_listen_port: &quot;51820&quot;</span><span class="diff-line add">+wireguard_role_listen_port: &quot;51820&quot;</span><span class="diff-line add">+wireguard_role_dns: &quot;1.1.1.1,8.8.8.8&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line add">+# Lookups</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+# Do not edit or override using the inventory</span><span class="diff-line add">+wireguard_role_docker_ipam_config:</span><span class="diff-line add">+  - subnet: &quot;10.42.42.0/24&quot;</span><span class="diff-line add">+  - subnet: &quot;{{ &#x27;fdcc:ad94:bacf:61a3::/64&#x27; if docker_ipv6 else omit }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wireguard_paths_folder: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line del">-wireguard_paths_location: &quot;{{ server_appdata_path }}/{{ wireguard_paths_folder }}&quot;</span><span class="diff-line del">-wireguard_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ wireguard_paths_location }}&quot;</span><span class="diff-line add">+wireguard_role_paths_folder: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line add">+wireguard_role_paths_location: &quot;{{ server_appdata_path }}/{{ wireguard_role_paths_folder }}&quot;</span><span class="diff-line add">+wireguard_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ wireguard_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wireguard_web_subdomain: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line del">-wireguard_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-wireguard_web_port: &quot;51821&quot;</span><span class="diff-line del">-wireguard_web_url: &quot;{{ &#x27;https://&#x27; + (wireguard_web_subdomain + &#x27;.&#x27; + wireguard_web_domain</span><span class="diff-line del">-                    if (wireguard_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else wireguard_web_domain) }}&quot;</span><span class="diff-line add">+wireguard_role_web_subdomain: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line add">+wireguard_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+wireguard_role_web_port: &quot;51821&quot;</span><span class="diff-line add">+wireguard_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wireguard&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wireguard&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wireguard&#x27;)) }}&quot;</span><span class="diff-line add">+wireguard_role_web_host: &quot;{{ (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wireguard&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                          if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wireguard&#x27;) | length &gt; 0)</span><span class="diff-line add">+                          else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wireguard&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wireguard_dns_record: &quot;{{ wireguard_web_subdomain }}&quot;</span><span class="diff-line del">-wireguard_dns_zone: &quot;{{ wireguard_web_domain }}&quot;</span><span class="diff-line del">-wireguard_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+wireguard_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line add">+wireguard_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line add">+wireguard_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wireguard_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-wireguard_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-wireguard_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-wireguard_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-wireguard_traefik_enabled: true</span><span class="diff-line del">-wireguard_traefik_api_enabled: false</span><span class="diff-line del">-wireguard_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+wireguard_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+wireguard_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+wireguard_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+wireguard_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+wireguard_role_traefik_enabled: true</span><span class="diff-line add">+wireguard_role_traefik_api_enabled: false</span><span class="diff-line add">+wireguard_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-wireguard_docker_container: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line add">+wireguard_role_docker_container: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-wireguard_docker_image_pull: true</span><span class="diff-line del">-wireguard_docker_image_tag: &quot;14&quot;</span><span class="diff-line del">-wireguard_docker_image: &quot;ghcr.io/wg-easy/wg-easy:{{ wireguard_docker_image_tag }}&quot;</span><span class="diff-line add">+wireguard_role_docker_image_pull: true</span><span class="diff-line add">+wireguard_role_docker_image_repo: &quot;ghcr.io/wg-easy/wg-easy&quot;</span><span class="diff-line add">+wireguard_role_docker_image_tag: &quot;15&quot;</span><span class="diff-line add">+wireguard_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;wireguard&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-wireguard_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ wireguard_listen_port }}:51820/udp&quot;</span><span class="diff-line del">-wireguard_docker_ports_custom: []</span><span class="diff-line del">-wireguard_docker_ports: &quot;{{ wireguard_docker_ports_defaults</span><span class="diff-line del">-                            + wireguard_docker_ports_custom }}&quot;</span><span class="diff-line add">+wireguard_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_listen_port&#x27;, role=&#x27;wireguard&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_listen_port&#x27;, role=&#x27;wireguard&#x27;) }}/udp&quot;</span><span class="diff-line add">+wireguard_role_docker_ports_custom: []</span><span class="diff-line add">+wireguard_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-wireguard_docker_envs_default:</span><span class="diff-line add">+wireguard_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  WG_HOST: &quot;{{ ip_address_public }}&quot;</span><span class="diff-line del">-  PASSWORD_HASH: &quot;{{ user.pass | password_hash(&#x27;bcrypt&#x27;) }}&quot;</span><span class="diff-line del">-  WG_PORT: &quot;{{ wireguard_listen_port }}&quot;</span><span class="diff-line del">-wireguard_docker_envs_custom: {}</span><span class="diff-line del">-wireguard_docker_envs: &quot;{{ wireguard_docker_envs_default</span><span class="diff-line del">-                           | combine(wireguard_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-wireguard_docker_commands_default: []</span><span class="diff-line del">-wireguard_docker_commands_custom: []</span><span class="diff-line del">-wireguard_docker_commands: &quot;{{ wireguard_docker_commands_default</span><span class="diff-line del">-                               + wireguard_docker_commands_custom }}&quot;</span><span class="diff-line add">+  DISABLE_IPV6: &quot;{{ &#x27;false&#x27; if docker_ipv6 else &#x27;true&#x27; }}&quot;</span><span class="diff-line add">+  WG_DEVICE: &quot;eth0&quot;</span><span class="diff-line add">+wireguard_role_docker_envs_setup:</span><span class="diff-line add">+  INIT_ENABLED: &quot;true&quot;</span><span class="diff-line add">+  INIT_USERNAME: &quot;{{ user.name }}&quot;</span><span class="diff-line add">+  INIT_PASSWORD: &quot;{{ user.pass }}&quot;</span><span class="diff-line add">+  INIT_HOST: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_host&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line add">+  INIT_PORT: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_listen_port&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line add">+  INIT_DNS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line add">+  INIT_IPV4_CIDR: &quot;10.8.0.0/24&quot;</span><span class="diff-line add">+  INIT_IPV6_CIDR: &quot;2001:0DB8::/32&quot;</span><span class="diff-line add">+wireguard_role_docker_envs_custom: {}</span><span class="diff-line add">+wireguard_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_setup&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                          if not (wireguard_db.stat.exists | default(false))</span><span class="diff-line add">+                                          else {})</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;wireguard&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-wireguard_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ wireguard_paths_location }}:/etc/wireguard&quot;</span><span class="diff-line del">-wireguard_docker_volumes_custom: []</span><span class="diff-line del">-wireguard_docker_volumes: &quot;{{ wireguard_docker_volumes_default</span><span class="diff-line del">-                              + wireguard_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-wireguard_docker_devices_default: []</span><span class="diff-line del">-wireguard_docker_devices_custom: []</span><span class="diff-line del">-wireguard_docker_devices: &quot;{{ wireguard_docker_devices_default</span><span class="diff-line del">-                              + wireguard_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-wireguard_docker_hosts_default: {}</span><span class="diff-line del">-wireguard_docker_hosts_custom: {}</span><span class="diff-line del">-wireguard_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(wireguard_docker_hosts_default)</span><span class="diff-line del">-                            | combine(wireguard_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-wireguard_docker_labels_default: {}</span><span class="diff-line del">-wireguard_docker_labels_custom: {}</span><span class="diff-line del">-wireguard_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(wireguard_docker_labels_default)</span><span class="diff-line del">-                             | combine(wireguard_docker_labels_custom) }}&quot;</span><span class="diff-line add">+wireguard_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;wireguard&#x27;) }}:/etc/wireguard&quot;</span><span class="diff-line add">+  - /lib/modules:/lib/modules:ro</span><span class="diff-line add">+wireguard_role_docker_volumes_custom: []</span><span class="diff-line add">+wireguard_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-wireguard_docker_hostname: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line add">+wireguard_role_docker_hostname: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-wireguard_docker_networks_alias: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line del">-wireguard_docker_networks_default: []</span><span class="diff-line del">-wireguard_docker_networks_custom: []</span><span class="diff-line del">-wireguard_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + wireguard_docker_networks_default</span><span class="diff-line del">-                               + wireguard_docker_networks_custom }}&quot;</span><span class="diff-line add">+wireguard_role_docker_networks_alias: &quot;{{ wireguard_name }}&quot;</span><span class="diff-line add">+wireguard_role_docker_networks_default:</span><span class="diff-line add">+  - name: wg</span><span class="diff-line add">+    ipv4_address: &quot;10.42.42.42&quot;</span><span class="diff-line add">+    ipv6_address: &quot;{{ &#x27;fdcc:ad94:bacf:61a3::2a&#x27; if docker_ipv6 else omit }}&quot;</span><span class="diff-line add">+    gw_priority: 1</span><span class="diff-line add">+    driver_opts:</span><span class="diff-line add">+      com.docker.network.endpoint.ifname: eth0</span><span class="diff-line add">+wireguard_role_docker_networks_custom: []</span><span class="diff-line add">+wireguard_role_docker_networks: &quot;{{ (docker_networks_common | map(&#x27;combine&#x27;, {&#x27;driver_opts&#x27;: {&#x27;com.docker.network.endpoint.ifname&#x27;: &#x27;eth1&#x27;}}) | list)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Capabilities</span><span class="diff-line del">-wireguard_docker_capabilities_default:</span><span class="diff-line add">+wireguard_role_docker_capabilities_default:</span><span class="diff-line context">   - NET_ADMIN</span><span class="diff-line context">   - SYS_MODULE</span><span class="diff-line del">-wireguard_docker_capabilities_custom: []</span><span class="diff-line del">-wireguard_docker_capabilities: &quot;{{ wireguard_docker_capabilities_default</span><span class="diff-line del">-                                   + wireguard_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-wireguard_docker_security_opts_default: []</span><span class="diff-line del">-wireguard_docker_security_opts_custom: []</span><span class="diff-line del">-wireguard_docker_security_opts: &quot;{{ wireguard_docker_security_opts_default</span><span class="diff-line del">-                                    + wireguard_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+wireguard_role_docker_capabilities_custom: []</span><span class="diff-line add">+wireguard_role_docker_capabilities: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_default&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                        + lookup(&#x27;role_var&#x27;, &#x27;_docker_capabilities_custom&#x27;, role=&#x27;wireguard&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Sysctls</span><span class="diff-line del">-wireguard_docker_sysctls:</span><span class="diff-line add">+wireguard_role_docker_sysctls_ipv4:</span><span class="diff-line context">   net.ipv4.conf.all.src_valid_mark: &quot;1&quot;</span><span class="diff-line context">   net.ipv4.ip_forward: &quot;1&quot;</span><span class="diff-line add">+wireguard_role_docker_sysctls_ipv6:</span><span class="diff-line add">+  net.ipv6.conf.all.disable_ipv6: &quot;0&quot;</span><span class="diff-line add">+  net.ipv6.conf.all.forwarding: &quot;1&quot;</span><span class="diff-line add">+  net.ipv6.conf.default.forwarding: &quot;1&quot;</span><span class="diff-line add">+wireguard_role_docker_sysctls: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_sysctls_ipv4&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_sysctls_ipv6&#x27;, role=&#x27;wireguard&#x27;)</span><span class="diff-line add">+                                             if docker_ipv6</span><span class="diff-line add">+                                             else {}) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-wireguard_docker_restart_policy: unless-stopped</span><span class="diff-line add">+wireguard_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-wireguard_docker_state: started</span><span class="diff-line add">+wireguard_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-419">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wireguard/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -1,6 +1,6 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> # Title:            Sandbox: Wireguard                                   #</span><span class="diff-line del">-# Author(s):        owine                                                #</span><span class="diff-line add">+# Author(s):        owine, salty                                         #</span><span class="diff-line context"> # URL:              https://github.com/saltyorg/Sandbox                  #</span><span class="diff-line context"> # --                                                                     #</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line hunk">@@ -10,12 +10,26 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Check if wg-easy database exists</span><span class="diff-line add">+  ansible.builtin.stat:</span><span class="diff-line add">+    path: &quot;{{ wireguard_role_paths_location }}/wg-easy.db&quot;</span><span class="diff-line add">+  register: wireguard_db</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line add">+</span><span class="diff-line add">+- name: Create wg network</span><span class="diff-line add">+  community.docker.docker_network:</span><span class="diff-line add">+    name: wg</span><span class="diff-line add">+    state: present</span><span class="diff-line add">+    enable_ipv6: &quot;{{ true</span><span class="diff-line add">+                  if docker_ipv6</span><span class="diff-line add">+                  else false }}&quot;</span><span class="diff-line add">+    ipam_config: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ipam_config&#x27;, role=&#x27;wireguard&#x27;) | selectattr(&#x27;subnet&#x27;, &#x27;defined&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-420">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wizarr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,133 +17,85 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wizarr_paths_folder: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line del">-wizarr_paths_location: &quot;{{ server_appdata_path }}/{{ wizarr_paths_folder }}&quot;</span><span class="diff-line del">-wizarr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ wizarr_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ wizarr_paths_location }}/database&quot;</span><span class="diff-line del">-  - &quot;{{ wizarr_paths_location }}/wizard&quot;</span><span class="diff-line add">+wizarr_role_paths_folder: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line add">+wizarr_role_paths_location: &quot;{{ server_appdata_path }}/{{ wizarr_role_paths_folder }}&quot;</span><span class="diff-line add">+wizarr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ wizarr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wizarr_web_subdomain: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line del">-wizarr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-wizarr_web_port: &quot;5690&quot;</span><span class="diff-line del">-wizarr_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_subdomain&#x27;, default=wizarr_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_domain&#x27;, default=wizarr_web_domain)</span><span class="diff-line del">-                 if (lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_subdomain&#x27;, default=wizarr_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                 else lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_domain&#x27;, default=wizarr_web_domain)) }}&quot;</span><span class="diff-line add">+wizarr_role_web_subdomain: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line add">+wizarr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+wizarr_role_web_port: &quot;5690&quot;</span><span class="diff-line add">+wizarr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wizarr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wizarr&#x27;)</span><span class="diff-line add">+                      if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wizarr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                      else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wizarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wizarr_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_subdomain&#x27;, default=wizarr_web_subdomain) }}&quot;</span><span class="diff-line del">-wizarr_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_web_domain&#x27;, default=wizarr_web_domain) }}&quot;</span><span class="diff-line del">-wizarr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+wizarr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wizarr&#x27;) }}&quot;</span><span class="diff-line add">+wizarr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wizarr&#x27;) }}&quot;</span><span class="diff-line add">+wizarr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wizarr_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-wizarr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-wizarr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-wizarr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-wizarr_traefik_enabled: true</span><span class="diff-line del">-wizarr_traefik_api_enabled: true</span><span class="diff-line del">-wizarr_traefik_api_endpoint: &quot;PathPrefix(`/join`) || PathPrefix(`/j`) || PathPrefix(`/static`) || PathPrefix(`/setup`) || PathPrefix(`/wizard`) || PathPrefix(`/image-proxy`) || PathPrefix(`/cinema-posters`) || PathPrefix(`/invitation`)&quot;</span><span class="diff-line add">+wizarr_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+wizarr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+wizarr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+wizarr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+wizarr_role_traefik_enabled: true</span><span class="diff-line add">+wizarr_role_traefik_api_enabled: true</span><span class="diff-line add">+wizarr_role_traefik_api_endpoint: &quot;PathPrefix(`/join`) || PathPrefix(`/j`) || PathPrefix(`/static`) || PathPrefix(`/setup`) || PathPrefix(`/wizard`) || PathPrefix(`/image-proxy`) || PathPrefix(`/cinema-posters`) || PathPrefix(`/invitation`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-wizarr_docker_container: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line add">+wizarr_role_docker_container: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-wizarr_docker_image_pull: true</span><span class="diff-line del">-wizarr_docker_image_repo: &quot;ghcr.io/wizarrrr/wizarr&quot;</span><span class="diff-line del">-wizarr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-wizarr_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_image_repo&#x27;, default=wizarr_docker_image_repo)</span><span class="diff-line del">-                         + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_image_tag&#x27;, default=wizarr_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-wizarr_docker_ports_defaults: []</span><span class="diff-line del">-wizarr_docker_ports_custom: []</span><span class="diff-line del">-wizarr_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_ports_defaults&#x27;, default=wizarr_docker_ports_defaults)</span><span class="diff-line del">-                         + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_ports_custom&#x27;, default=wizarr_docker_ports_custom) }}&quot;</span><span class="diff-line add">+wizarr_role_docker_image_pull: true</span><span class="diff-line add">+wizarr_role_docker_image_repo: &quot;ghcr.io/wizarrrr/wizarr&quot;</span><span class="diff-line add">+wizarr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+wizarr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;wizarr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;wizarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-wizarr_docker_envs_default:</span><span class="diff-line add">+wizarr_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  DISABLE_BUILTIN_AUTH: &quot;{{ &#x27;true&#x27; if (wizarr_traefik_sso_middleware | length &gt; 0) else &#x27;false&#x27; }}&quot;</span><span class="diff-line del">-wizarr_docker_envs_custom: {}</span><span class="diff-line del">-wizarr_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_envs_default&#x27;, default=wizarr_docker_envs_default)</span><span class="diff-line del">-                        | combine(lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_envs_custom&#x27;, default=wizarr_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-wizarr_docker_commands_default: []</span><span class="diff-line del">-wizarr_docker_commands_custom: []</span><span class="diff-line del">-wizarr_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_commands_default&#x27;, default=wizarr_docker_commands_default)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_commands_custom&#x27;, default=wizarr_docker_commands_custom) }}&quot;</span><span class="diff-line add">+  DISABLE_BUILTIN_AUTH: &quot;{{ &#x27;true&#x27; if (lookup(&#x27;role_var&#x27;, &#x27;_traefik_sso_middleware&#x27;, role=&#x27;wizarr&#x27;) | length &gt; 0) else &#x27;false&#x27; }}&quot;</span><span class="diff-line add">+wizarr_role_docker_envs_custom: {}</span><span class="diff-line add">+wizarr_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;wizarr&#x27;)</span><span class="diff-line add">+                             | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;wizarr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-wizarr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ wizarr_paths_location }}/database:/data/database&quot;</span><span class="diff-line del">-  - &quot;{{ wizarr_paths_location }}/wizard:/data/wizard&quot;</span><span class="diff-line del">-wizarr_docker_volumes_custom: []</span><span class="diff-line del">-wizarr_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_volumes_default&#x27;, default=wizarr_docker_volumes_default)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_volumes_custom&#x27;, default=wizarr_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-wizarr_docker_devices_default: []</span><span class="diff-line del">-wizarr_docker_devices_custom: []</span><span class="diff-line del">-wizarr_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_devices_default&#x27;, default=wizarr_docker_devices_default)</span><span class="diff-line del">-                           + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_devices_custom&#x27;, default=wizarr_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-wizarr_docker_hosts_default: {}</span><span class="diff-line del">-wizarr_docker_hosts_custom: {}</span><span class="diff-line del">-wizarr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_hosts_default&#x27;, default=wizarr_docker_hosts_default))</span><span class="diff-line del">-                         | combine(lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_hosts_custom&#x27;, default=wizarr_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-wizarr_docker_labels_default: {}</span><span class="diff-line del">-wizarr_docker_labels_custom: {}</span><span class="diff-line del">-wizarr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_labels_default&#x27;, default=wizarr_docker_labels_default))</span><span class="diff-line del">-                          | combine(lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_labels_custom&#x27;, default=wizarr_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+wizarr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;wizarr&#x27;) }}:/data&quot;</span><span class="diff-line add">+wizarr_role_docker_volumes_custom: []</span><span class="diff-line add">+wizarr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;wizarr&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;wizarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-wizarr_docker_hostname: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line add">+wizarr_role_docker_hostname: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-wizarr_docker_networks_alias: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line del">-wizarr_docker_networks_default: []</span><span class="diff-line del">-wizarr_docker_networks_custom: []</span><span class="diff-line del">-wizarr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_networks_default&#x27;, default=wizarr_docker_networks_default)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_networks_custom&#x27;, default=wizarr_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-wizarr_docker_capabilities_default: []</span><span class="diff-line del">-wizarr_docker_capabilities_custom: []</span><span class="diff-line del">-wizarr_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_capabilities_default&#x27;, default=wizarr_docker_capabilities_default)</span><span class="diff-line del">-                                + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_capabilities_custom&#x27;, default=wizarr_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-wizarr_docker_security_opts_default: []</span><span class="diff-line del">-wizarr_docker_security_opts_custom: []</span><span class="diff-line del">-wizarr_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_security_opts_default&#x27;, default=wizarr_docker_security_opts_default)</span><span class="diff-line del">-                                 + lookup(&#x27;vars&#x27;, wizarr_name + &#x27;_docker_security_opts_default&#x27;, default=wizarr_docker_security_opts_default) }}&quot;</span><span class="diff-line add">+wizarr_role_docker_networks_alias: &quot;{{ wizarr_name }}&quot;</span><span class="diff-line add">+wizarr_role_docker_networks_default: []</span><span class="diff-line add">+wizarr_role_docker_networks_custom: []</span><span class="diff-line add">+wizarr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wizarr&#x27;)</span><span class="diff-line add">+                                 + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wizarr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-wizarr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+wizarr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-wizarr_docker_state: started</span><span class="diff-line add">+wizarr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-421">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wizarr/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-422">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wizarr/tasks/subtasks/migration.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -7,26 +7,26 @@</span><span class="diff-line context"> #                   GNU General Public License v3.0                     #</span><span class="diff-line context"> #########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line del">-- name: Migration | Check if `{{ wizarr_paths_location }}` exists</span><span class="diff-line add">+- name: Migration | Check if `{{ wizarr_role_paths_location }}` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ wizarr_paths_location }}&quot;</span><span class="diff-line add">+    path: &quot;{{ wizarr_role_paths_location }}&quot;</span><span class="diff-line context">   register: wizarr_role_paths_location_stat</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Migration | Check if `{{ wizarr_paths_location }}/database` exists</span><span class="diff-line add">+- name: Migration | Check if `{{ wizarr_role_paths_location }}/database` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ wizarr_paths_location }}/database&quot;</span><span class="diff-line add">+    path: &quot;{{ wizarr_role_paths_location }}/database&quot;</span><span class="diff-line context">   register: wizarr_role_paths_database_stat</span><span class="diff-line context"> </span><span class="diff-line del">-- name: Migration | Check if `{{ wizarr_paths_location }}/database.db` exists</span><span class="diff-line add">+- name: Migration | Check if `{{ wizarr_role_paths_location }}/database.db` exists</span><span class="diff-line context">   ansible.builtin.stat:</span><span class="diff-line del">-    path: &quot;{{ wizarr_paths_location }}/database&quot;</span><span class="diff-line add">+    path: &quot;{{ wizarr_role_paths_location }}/database&quot;</span><span class="diff-line context">   register: wizarr_role_paths_database_file_stat</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Migration | Backup old database directory</span><span class="diff-line context">   when: wizarr_role_paths_location_stat.stat.exists and wizarr_role_paths_database_file_stat.stat.exists and (not wizarr_role_paths_database_stat.stat.exists)</span><span class="diff-line context">   block:</span><span class="diff-line context">     - name: Migration | Check database version</span><span class="diff-line del">-      ansible.builtin.shell: sqlite3 -readonly &quot;{{ wizarr_paths_location }}/database.db&quot; &quot;SELECT value FROM settings WHERE key=&#x27;version&#x27;&quot;</span><span class="diff-line add">+      ansible.builtin.shell: sqlite3 -readonly &quot;{{ wizarr_role_paths_location }}/database.db&quot; &quot;SELECT value FROM settings WHERE key=&#x27;version&#x27;&quot;</span><span class="diff-line context">       register: wizarr_role_database_version</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Migration | Fail if database version is not 4.2.0</span><span class="diff-line hunk">@@ -36,8 +36,8 @@</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Migration | Migrate old user data to temp folder</span><span class="diff-line context">       migrate_folder:</span><span class="diff-line del">-        legacy_path: &quot;{{ wizarr_paths_location }}&quot;</span><span class="diff-line del">-        new_path: &quot;{{ wizarr_paths_location }}_backup&quot;</span><span class="diff-line add">+        legacy_path: &quot;{{ wizarr_role_paths_location }}&quot;</span><span class="diff-line add">+        new_path: &quot;{{ wizarr_role_paths_location }}_backup&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &#x27;0775&#x27;</span><span class="diff-line hunk">@@ -45,8 +45,8 @@</span><span class="diff-line context"> </span><span class="diff-line context">     - name: Migration | Migrate old user data to new location</span><span class="diff-line context">       migrate_folder:</span><span class="diff-line del">-        legacy_path: &quot;{{ wizarr_paths_location }}_backup&quot;</span><span class="diff-line del">-        new_path: &quot;{{ wizarr_paths_location }}/database&quot;</span><span class="diff-line add">+        legacy_path: &quot;{{ wizarr_role_paths_location }}_backup&quot;</span><span class="diff-line add">+        new_path: &quot;{{ wizarr_role_paths_location }}/database&quot;</span><span class="diff-line context">         owner: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         group: &quot;{{ user.name }}&quot;</span><span class="diff-line context">         mode: &#x27;0775&#x27;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-423">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wordpress/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,140 +17,95 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wordpress_paths_folder: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line del">-wordpress_paths_location: &quot;{{ server_appdata_path }}/{{ wordpress_paths_folder }}&quot;</span><span class="diff-line del">-wordpress_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ wordpress_paths_location }}&quot;</span><span class="diff-line del">-wordpress_paths_recursive: true</span><span class="diff-line add">+wordpress_role_paths_folder: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line add">+wordpress_role_paths_location: &quot;{{ server_appdata_path }}/{{ wordpress_role_paths_folder }}&quot;</span><span class="diff-line add">+wordpress_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ wordpress_role_paths_location }}&quot;</span><span class="diff-line add">+wordpress_role_paths_recursive: true</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wordpress_web_subdomain: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line del">-wordpress_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-wordpress_web_port: &quot;80&quot;</span><span class="diff-line del">-wordpress_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_subdomain&#x27;, default=wordpress_web_subdomain) + &#x27;.&#x27; + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_domain&#x27;, default=wordpress_web_domain)</span><span class="diff-line del">-                    if (lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_subdomain&#x27;, default=wordpress_web_subdomain) | length &gt; 0)</span><span class="diff-line del">-                    else lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_domain&#x27;, default=wordpress_web_domain)) }}&quot;</span><span class="diff-line add">+wordpress_role_web_subdomain: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line add">+wordpress_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+wordpress_role_web_port: &quot;80&quot;</span><span class="diff-line add">+wordpress_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wordpress&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wordpress&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wordpress&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wordpress&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wordpress_dns_record: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_subdomain&#x27;, default=wordpress_web_subdomain) }}&quot;</span><span class="diff-line del">-wordpress_dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_web_domain&#x27;, default=wordpress_web_domain) }}&quot;</span><span class="diff-line del">-wordpress_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+wordpress_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wordpress&#x27;) }}&quot;</span><span class="diff-line add">+wordpress_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wordpress&#x27;) }}&quot;</span><span class="diff-line add">+wordpress_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wordpress_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-wordpress_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-wordpress_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-wordpress_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-wordpress_traefik_enabled: true</span><span class="diff-line del">-wordpress_traefik_api_enabled: false</span><span class="diff-line del">-wordpress_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+wordpress_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+wordpress_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+wordpress_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+wordpress_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+wordpress_role_traefik_enabled: true</span><span class="diff-line add">+wordpress_role_traefik_api_enabled: false</span><span class="diff-line add">+wordpress_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-wordpress_docker_container: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line add">+wordpress_role_docker_container: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-wordpress_docker_image_pull: true</span><span class="diff-line del">-wordpress_docker_image_repo: &quot;wordpress&quot;</span><span class="diff-line del">-wordpress_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-wordpress_docker_image: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_image_repo&#x27;, default=wordpress_docker_image_repo)</span><span class="diff-line del">-                            + &#x27;:&#x27; + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_image_tag&#x27;, default=wordpress_docker_image_tag) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-wordpress_docker_ports_defaults: []</span><span class="diff-line del">-wordpress_docker_ports_custom: []</span><span class="diff-line del">-wordpress_docker_ports: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_ports_defaults&#x27;, default=wordpress_docker_ports_defaults)</span><span class="diff-line del">-                            + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_ports_custom&#x27;, default=wordpress_docker_ports_custom) }}&quot;</span><span class="diff-line add">+wordpress_role_docker_image_pull: true</span><span class="diff-line add">+wordpress_role_docker_image_repo: &quot;wordpress&quot;</span><span class="diff-line add">+wordpress_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+wordpress_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;wordpress&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;wordpress&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-wordpress_docker_envs_default:</span><span class="diff-line add">+wordpress_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   WORDPRESS_DB_HOST: &quot;mariadb:3306&quot;</span><span class="diff-line context">   WORDPRESS_DB_USER: &quot;root&quot;</span><span class="diff-line context">   WORDPRESS_DB_PASSWORD: &quot;password321&quot;</span><span class="diff-line context">   WORDPRESS_DB_NAME: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line del">-wordpress_docker_envs_custom: {}</span><span class="diff-line del">-wordpress_docker_envs: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_envs_default&#x27;, default=wordpress_docker_envs_default)</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_envs_custom&#x27;, default=wordpress_docker_envs_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-wordpress_docker_commands_default: []</span><span class="diff-line del">-wordpress_docker_commands_custom: []</span><span class="diff-line del">-wordpress_docker_commands: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_commands_default&#x27;, default=wordpress_docker_commands_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_commands_custom&#x27;, default=wordpress_docker_commands_custom) }}&quot;</span><span class="diff-line add">+wordpress_role_docker_envs_custom: {}</span><span class="diff-line add">+wordpress_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;wordpress&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;wordpress&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-wordpress_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ wordpress_paths_location }}:/var/www/html&quot;</span><span class="diff-line del">-wordpress_docker_volumes_custom: []</span><span class="diff-line del">-wordpress_docker_volumes: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_volumes_default&#x27;, default=wordpress_docker_volumes_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_volumes_custom&#x27;, default=wordpress_docker_volumes_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-wordpress_docker_devices_default: []</span><span class="diff-line del">-wordpress_docker_devices_custom: []</span><span class="diff-line del">-wordpress_docker_devices: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_devices_default&#x27;, default=wordpress_docker_devices_default)</span><span class="diff-line del">-                              + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_devices_custom&#x27;, default=wordpress_docker_devices_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-wordpress_docker_hosts_default: []</span><span class="diff-line del">-wordpress_docker_hosts_custom: []</span><span class="diff-line del">-wordpress_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_hosts_default&#x27;, default=wordpress_docker_hosts_default))</span><span class="diff-line del">-                            | combine(lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_hosts_custom&#x27;, default=wordpress_docker_hosts_custom)) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-wordpress_docker_labels_default: {}</span><span class="diff-line del">-wordpress_docker_labels_custom: {}</span><span class="diff-line del">-wordpress_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_labels_default&#x27;, default=wordpress_docker_labels_default))</span><span class="diff-line del">-                           | combine(lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_labels_custom&#x27;, default=wordpress_docker_labels_custom)) }}&quot;</span><span class="diff-line add">+wordpress_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;wordpress&#x27;) }}:/var/www/html&quot;</span><span class="diff-line add">+wordpress_role_docker_volumes_custom: []</span><span class="diff-line add">+wordpress_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;wordpress&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;wordpress&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-wordpress_docker_hostname: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line add">+wordpress_role_docker_hostname: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-wordpress_docker_networks_alias: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line del">-wordpress_docker_networks_default: []</span><span class="diff-line del">-wordpress_docker_networks_custom: []</span><span class="diff-line del">-wordpress_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_networks_default&#x27;, default=wordpress_docker_networks_default)</span><span class="diff-line del">-                               + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_networks_custom&#x27;, default=wordpress_docker_networks_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-wordpress_docker_capabilities_default: []</span><span class="diff-line del">-wordpress_docker_capabilities_custom: []</span><span class="diff-line del">-wordpress_docker_capabilities: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_capabilities_default&#x27;, default=wordpress_docker_capabilities_default)</span><span class="diff-line del">-                                   + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_capabilities_custom&#x27;, default=wordpress_docker_capabilities_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-wordpress_docker_security_opts_default: []</span><span class="diff-line del">-wordpress_docker_security_opts_custom: []</span><span class="diff-line del">-wordpress_docker_security_opts: &quot;{{ lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_security_opts_default&#x27;, default=wordpress_docker_security_opts_default)</span><span class="diff-line del">-                                    + lookup(&#x27;vars&#x27;, wordpress_name + &#x27;_docker_security_opts_custom&#x27;, default=wordpress_docker_security_opts_custom) }}&quot;</span><span class="diff-line add">+wordpress_role_docker_networks_alias: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line add">+wordpress_role_docker_networks_default: []</span><span class="diff-line add">+wordpress_role_docker_networks_custom: []</span><span class="diff-line add">+wordpress_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wordpress&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wordpress&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-wordpress_docker_restart_policy: unless-stopped</span><span class="diff-line add">+wordpress_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-wordpress_docker_state: started</span><span class="diff-line add">+wordpress_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # User</span><span class="diff-line del">-wordpress_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line add">+wordpress_role_docker_user: &quot;{{ uid }}:{{ gid }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-wordpress_depends_on: &quot;mariadb&quot;</span><span class="diff-line del">-wordpress_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-wordpress_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+wordpress_role_depends_on: &quot;mariadb&quot;</span><span class="diff-line add">+wordpress_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+wordpress_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-424">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wordpress/tasks/main2.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,9 +14,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -29,7 +29,7 @@</span><span class="diff-line context">     name: &quot;{{ wordpress_name }}&quot;</span><span class="diff-line context">     login_host: &quot;mariadb&quot;</span><span class="diff-line context">     login_user: &quot;root&quot;</span><span class="diff-line del">-    login_password: &quot;{{ mariadb_docker_env_password }}&quot;</span><span class="diff-line add">+    login_password: &quot;{{ mariadb_role_docker_env_password }}&quot;</span><span class="diff-line context">     state: present</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-425">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wrapperr/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,124 +17,75 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wrapperr_paths_folder: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line del">-wrapperr_paths_location: &quot;{{ server_appdata_path }}/{{ wrapperr_paths_folder }}&quot;</span><span class="diff-line del">-wrapperr_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ wrapperr_paths_location }}&quot;</span><span class="diff-line add">+wrapperr_role_paths_folder: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line add">+wrapperr_role_paths_location: &quot;{{ server_appdata_path }}/{{ wrapperr_role_paths_folder }}&quot;</span><span class="diff-line add">+wrapperr_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ wrapperr_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wrapperr_web_subdomain: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line del">-wrapperr_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-wrapperr_web_port: &quot;8282&quot;</span><span class="diff-line del">-wrapperr_web_url: &quot;{{ &#x27;https://&#x27; + (wrapperr_web_subdomain + &#x27;.&#x27; + wrapperr_web_domain</span><span class="diff-line del">-                   if (wrapperr_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else wrapperr_web_domain) }}&quot;</span><span class="diff-line add">+wrapperr_role_web_subdomain: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line add">+wrapperr_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+wrapperr_role_web_port: &quot;8282&quot;</span><span class="diff-line add">+wrapperr_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wrapperr&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wrapperr&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wrapperr&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wrapperr&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wrapperr_dns_record: &quot;{{ wrapperr_web_subdomain }}&quot;</span><span class="diff-line del">-wrapperr_dns_zone: &quot;{{ wrapperr_web_domain }}&quot;</span><span class="diff-line del">-wrapperr_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+wrapperr_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;wrapperr&#x27;) }}&quot;</span><span class="diff-line add">+wrapperr_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;wrapperr&#x27;) }}&quot;</span><span class="diff-line add">+wrapperr_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-wrapperr_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-wrapperr_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-wrapperr_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-wrapperr_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-wrapperr_traefik_enabled: true</span><span class="diff-line del">-wrapperr_traefik_api_enabled: false</span><span class="diff-line del">-wrapperr_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+wrapperr_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+wrapperr_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+wrapperr_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+wrapperr_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+wrapperr_role_traefik_enabled: true</span><span class="diff-line add">+wrapperr_role_traefik_api_enabled: false</span><span class="diff-line add">+wrapperr_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-wrapperr_docker_container: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_container: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-wrapperr_docker_image_pull: true</span><span class="diff-line del">-wrapperr_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-wrapperr_docker_image: &quot;aunefyren/wrapperr:{{ wrapperr_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-wrapperr_docker_ports_defaults: []</span><span class="diff-line del">-wrapperr_docker_ports_custom: []</span><span class="diff-line del">-wrapperr_docker_ports: &quot;{{ wrapperr_docker_ports_defaults</span><span class="diff-line del">-                           + wrapperr_docker_ports_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Envs</span><span class="diff-line del">-wrapperr_docker_envs_default: {}</span><span class="diff-line del">-wrapperr_docker_envs_custom: {}</span><span class="diff-line del">-wrapperr_docker_envs: &quot;{{ wrapperr_docker_envs_default</span><span class="diff-line del">-                          | combine(wrapperr_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-wrapperr_docker_commands_default: []</span><span class="diff-line del">-wrapperr_docker_commands_custom: []</span><span class="diff-line del">-wrapperr_docker_commands: &quot;{{ wrapperr_docker_commands_default</span><span class="diff-line del">-                              + wrapperr_docker_commands_custom }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_image_pull: true</span><span class="diff-line add">+wrapperr_role_docker_image_repo: &quot;aunefyren/wrapperr&quot;</span><span class="diff-line add">+wrapperr_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+wrapperr_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;wrapperr&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;wrapperr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-wrapperr_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ wrapperr_paths_location }}:/app/config&quot;</span><span class="diff-line del">-wrapperr_docker_volumes_custom: []</span><span class="diff-line del">-wrapperr_docker_volumes: &quot;{{ wrapperr_docker_volumes_default</span><span class="diff-line del">-                             + wrapperr_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-wrapperr_docker_devices_default: []</span><span class="diff-line del">-wrapperr_docker_devices_custom: []</span><span class="diff-line del">-wrapperr_docker_devices: &quot;{{ wrapperr_docker_devices_default</span><span class="diff-line del">-                             + wrapperr_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-wrapperr_docker_hosts_default: {}</span><span class="diff-line del">-wrapperr_docker_hosts_custom: {}</span><span class="diff-line del">-wrapperr_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                           | combine(wrapperr_docker_hosts_default)</span><span class="diff-line del">-                           | combine(wrapperr_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-wrapperr_docker_labels_default: {}</span><span class="diff-line del">-wrapperr_docker_labels_custom: {}</span><span class="diff-line del">-wrapperr_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                            | combine(wrapperr_docker_labels_default)</span><span class="diff-line del">-                            | combine(wrapperr_docker_labels_custom) }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;wrapperr&#x27;) }}:/app/config&quot;</span><span class="diff-line add">+wrapperr_role_docker_volumes_custom: []</span><span class="diff-line add">+wrapperr_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;wrapperr&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;wrapperr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-wrapperr_docker_hostname: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_hostname: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-wrapperr_docker_networks_alias: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line del">-wrapperr_docker_networks_default: []</span><span class="diff-line del">-wrapperr_docker_networks_custom: []</span><span class="diff-line del">-wrapperr_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                              + wrapperr_docker_networks_default</span><span class="diff-line del">-                              + wrapperr_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-wrapperr_docker_capabilities_default: []</span><span class="diff-line del">-wrapperr_docker_capabilities_custom: []</span><span class="diff-line del">-wrapperr_docker_capabilities: &quot;{{ wrapperr_docker_capabilities_default</span><span class="diff-line del">-                                  + wrapperr_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-wrapperr_docker_security_opts_default: []</span><span class="diff-line del">-wrapperr_docker_security_opts_custom: []</span><span class="diff-line del">-wrapperr_docker_security_opts: &quot;{{ wrapperr_docker_security_opts_default</span><span class="diff-line del">-                                   + wrapperr_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_networks_alias: &quot;{{ wrapperr_name }}&quot;</span><span class="diff-line add">+wrapperr_role_docker_networks_default: []</span><span class="diff-line add">+wrapperr_role_docker_networks_custom: []</span><span class="diff-line add">+wrapperr_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;wrapperr&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;wrapperr&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-wrapperr_docker_restart_policy: unless-stopped</span><span class="diff-line add">+wrapperr_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-wrapperr_docker_state: started</span><span class="diff-line add">+wrapperr_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-426">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/wrapperr/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,21 +10,15 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line del">-  ansible.builtin.file:</span><span class="diff-line del">-    path: &quot;{{ item }}&quot;</span><span class="diff-line del">-    state: directory</span><span class="diff-line del">-    owner: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-    group: &quot;{{ user.name }}&quot;</span><span class="diff-line del">-    mode: &quot;0777&quot;</span><span class="diff-line del">-  with_items: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_paths_folders_list&#x27;) }}&quot;</span><span class="diff-line add">+  ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/create_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-427">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/xbackbone/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,127 +17,84 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xbackbone_paths_folder: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line del">-xbackbone_paths_location: &quot;{{ server_appdata_path }}/{{ xbackbone_paths_folder }}&quot;</span><span class="diff-line del">-xbackbone_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ xbackbone_paths_location }}&quot;</span><span class="diff-line add">+xbackbone_role_paths_folder: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line add">+xbackbone_role_paths_location: &quot;{{ server_appdata_path }}/{{ xbackbone_role_paths_folder }}&quot;</span><span class="diff-line add">+xbackbone_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ xbackbone_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xbackbone_web_subdomain: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line del">-xbackbone_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-xbackbone_web_port: &quot;80&quot;</span><span class="diff-line del">-xbackbone_web_url: &quot;{{ &#x27;https://&#x27; + (xbackbone_web_subdomain + &#x27;.&#x27; + xbackbone_web_domain</span><span class="diff-line del">-                    if (xbackbone_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                    else xbackbone_web_domain) }}&quot;</span><span class="diff-line add">+xbackbone_role_web_subdomain: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line add">+xbackbone_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+xbackbone_role_web_port: &quot;80&quot;</span><span class="diff-line add">+xbackbone_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xbackbone&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xbackbone&#x27;)</span><span class="diff-line add">+                         if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xbackbone&#x27;) | length &gt; 0)</span><span class="diff-line add">+                         else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xbackbone&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xbackbone_dns_record: &quot;{{ xbackbone_web_subdomain }}&quot;</span><span class="diff-line del">-xbackbone_dns_zone: &quot;{{ xbackbone_web_domain }}&quot;</span><span class="diff-line del">-xbackbone_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+xbackbone_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xbackbone&#x27;) }}&quot;</span><span class="diff-line add">+xbackbone_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xbackbone&#x27;) }}&quot;</span><span class="diff-line add">+xbackbone_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xbackbone_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-xbackbone_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-xbackbone_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-xbackbone_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-xbackbone_traefik_enabled: true</span><span class="diff-line del">-xbackbone_traefik_api_enabled: false</span><span class="diff-line del">-xbackbone_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+xbackbone_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+xbackbone_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+xbackbone_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+xbackbone_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+xbackbone_role_traefik_enabled: true</span><span class="diff-line add">+xbackbone_role_traefik_api_enabled: false</span><span class="diff-line add">+xbackbone_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-xbackbone_docker_container: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_container: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-xbackbone_docker_image_pull: true</span><span class="diff-line del">-xbackbone_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-xbackbone_docker_image: &quot;lscr.io/linuxserver/xbackbone:{{ xbackbone_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-xbackbone_docker_ports_defaults: []</span><span class="diff-line del">-xbackbone_docker_ports_custom: []</span><span class="diff-line del">-xbackbone_docker_ports: &quot;{{ xbackbone_docker_ports_defaults</span><span class="diff-line del">-                            + xbackbone_docker_ports_custom }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_image_pull: true</span><span class="diff-line add">+xbackbone_role_docker_image_repo: &quot;lscr.io/linuxserver/xbackbone&quot;</span><span class="diff-line add">+xbackbone_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+xbackbone_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;xbackbone&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;xbackbone&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-xbackbone_docker_envs_default:</span><span class="diff-line add">+xbackbone_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-xbackbone_docker_envs_custom: {}</span><span class="diff-line del">-xbackbone_docker_envs: &quot;{{ xbackbone_docker_envs_default</span><span class="diff-line del">-                           | combine(xbackbone_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-xbackbone_docker_commands_default: []</span><span class="diff-line del">-xbackbone_docker_commands_custom: []</span><span class="diff-line del">-xbackbone_docker_commands: &quot;{{ xbackbone_docker_commands_default</span><span class="diff-line del">-                               + xbackbone_docker_commands_custom }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_envs_custom: {}</span><span class="diff-line add">+xbackbone_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;xbackbone&#x27;)</span><span class="diff-line add">+                                | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;xbackbone&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-xbackbone_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ xbackbone_paths_location }}:/config&quot;</span><span class="diff-line del">-xbackbone_docker_volumes_custom: []</span><span class="diff-line del">-xbackbone_docker_volumes: &quot;{{ xbackbone_docker_volumes_default</span><span class="diff-line del">-                              + xbackbone_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-xbackbone_docker_devices_default: []</span><span class="diff-line del">-xbackbone_docker_devices_custom: []</span><span class="diff-line del">-xbackbone_docker_devices: &quot;{{ xbackbone_docker_devices_default</span><span class="diff-line del">-                              + xbackbone_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-xbackbone_docker_hosts_default: {}</span><span class="diff-line del">-xbackbone_docker_hosts_custom: {}</span><span class="diff-line del">-xbackbone_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                            | combine(xbackbone_docker_hosts_default)</span><span class="diff-line del">-                            | combine(xbackbone_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-xbackbone_docker_labels_default: {}</span><span class="diff-line del">-xbackbone_docker_labels_custom: {}</span><span class="diff-line del">-xbackbone_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                             | combine(xbackbone_docker_labels_default)</span><span class="diff-line del">-                             | combine(xbackbone_docker_labels_custom) }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;xbackbone&#x27;) }}:/config&quot;</span><span class="diff-line add">+xbackbone_role_docker_volumes_custom: []</span><span class="diff-line add">+xbackbone_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;xbackbone&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;xbackbone&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-xbackbone_docker_hostname: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_hostname: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-xbackbone_docker_networks_alias: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line del">-xbackbone_docker_networks_default: []</span><span class="diff-line del">-xbackbone_docker_networks_custom: []</span><span class="diff-line del">-xbackbone_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                               + xbackbone_docker_networks_default</span><span class="diff-line del">-                               + xbackbone_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-xbackbone_docker_capabilities_default: []</span><span class="diff-line del">-xbackbone_docker_capabilities_custom: []</span><span class="diff-line del">-xbackbone_docker_capabilities: &quot;{{ xbackbone_docker_capabilities_default</span><span class="diff-line del">-                                   + xbackbone_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-xbackbone_docker_security_opts_default: []</span><span class="diff-line del">-xbackbone_docker_security_opts_custom: []</span><span class="diff-line del">-xbackbone_docker_security_opts: &quot;{{ xbackbone_docker_security_opts_default</span><span class="diff-line del">-                                    + xbackbone_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_networks_alias: &quot;{{ xbackbone_name }}&quot;</span><span class="diff-line add">+xbackbone_role_docker_networks_default: []</span><span class="diff-line add">+xbackbone_role_docker_networks_custom: []</span><span class="diff-line add">+xbackbone_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;xbackbone&#x27;)</span><span class="diff-line add">+                                    + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;xbackbone&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-xbackbone_docker_restart_policy: unless-stopped</span><span class="diff-line add">+xbackbone_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-xbackbone_docker_state: started</span><span class="diff-line add">+xbackbone_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-428">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/xbackbone/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-429">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/xteve/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,131 +17,88 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xteve_paths_folder: &quot;{{ xteve_name }}&quot;</span><span class="diff-line del">-xteve_paths_location: &quot;{{ server_appdata_path }}/{{ xteve_paths_folder }}&quot;</span><span class="diff-line del">-xteve_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ xteve_paths_location }}&quot;</span><span class="diff-line add">+xteve_role_paths_folder: &quot;{{ xteve_name }}&quot;</span><span class="diff-line add">+xteve_role_paths_location: &quot;{{ server_appdata_path }}/{{ xteve_role_paths_folder }}&quot;</span><span class="diff-line add">+xteve_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ xteve_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xteve_web_subdomain: &quot;{{ xteve_name }}&quot;</span><span class="diff-line del">-xteve_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-xteve_web_port: &quot;34400&quot;</span><span class="diff-line del">-xteve_web_url: &quot;{{ &#x27;https://&#x27; + (xteve_web_subdomain + &#x27;.&#x27; + xteve_web_domain</span><span class="diff-line del">-                if (xteve_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else xteve_web_domain) }}&quot;</span><span class="diff-line add">+xteve_role_web_subdomain: &quot;{{ xteve_name }}&quot;</span><span class="diff-line add">+xteve_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+xteve_role_web_port: &quot;34400&quot;</span><span class="diff-line add">+xteve_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xteve&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xteve&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xteve&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xteve&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xteve_dns_record: &quot;{{ xteve_web_subdomain }}&quot;</span><span class="diff-line del">-xteve_dns_zone: &quot;{{ xteve_web_domain }}&quot;</span><span class="diff-line del">-xteve_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+xteve_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;xteve&#x27;) }}&quot;</span><span class="diff-line add">+xteve_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;xteve&#x27;) }}&quot;</span><span class="diff-line add">+xteve_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-xteve_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-xteve_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-xteve_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-xteve_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-xteve_traefik_enabled: true</span><span class="diff-line del">-xteve_traefik_api_enabled: true</span><span class="diff-line del">-xteve_traefik_api_endpoint: &quot;PathPrefix(`/data_images`) || PathPrefix(`/api`)&quot;</span><span class="diff-line add">+xteve_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+xteve_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+xteve_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+xteve_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+xteve_role_traefik_enabled: true</span><span class="diff-line add">+xteve_role_traefik_api_enabled: true</span><span class="diff-line add">+xteve_role_traefik_api_endpoint: &quot;PathPrefix(`/data_images`) || PathPrefix(`/api`)&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-xteve_docker_container: &quot;{{ xteve_name }}&quot;</span><span class="diff-line add">+xteve_role_docker_container: &quot;{{ xteve_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-xteve_docker_image_pull: true</span><span class="diff-line del">-xteve_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-xteve_docker_image: &quot;dnsforge/xteve:{{ xteve_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-xteve_docker_ports_defaults: []</span><span class="diff-line del">-xteve_docker_ports_custom: []</span><span class="diff-line del">-xteve_docker_ports: &quot;{{ xteve_docker_ports_defaults</span><span class="diff-line del">-                        + xteve_docker_ports_custom }}&quot;</span><span class="diff-line add">+xteve_role_docker_image_pull: true</span><span class="diff-line add">+xteve_role_docker_image_repo: &quot;dnsforge/xteve&quot;</span><span class="diff-line add">+xteve_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+xteve_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;xteve&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;xteve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-xteve_docker_envs_default:</span><span class="diff-line add">+xteve_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   XTEVE_BRANCH: &quot;beta&quot;</span><span class="diff-line context">   XTEVE_UID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   XTEVE_GID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   XTEVE_API: &quot;1&quot;</span><span class="diff-line del">-xteve_docker_envs_custom: {}</span><span class="diff-line del">-xteve_docker_envs: &quot;{{ xteve_docker_envs_default</span><span class="diff-line del">-                       | combine(xteve_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-xteve_docker_commands_default: []</span><span class="diff-line del">-xteve_docker_commands_custom: []</span><span class="diff-line del">-xteve_docker_commands: &quot;{{ xteve_docker_commands_default</span><span class="diff-line del">-                           + xteve_docker_commands_custom }}&quot;</span><span class="diff-line add">+xteve_role_docker_envs_custom: {}</span><span class="diff-line add">+xteve_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;xteve&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;xteve&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-xteve_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ xteve_paths_location }}/app/config:/home/xteve/conf:rw&quot;</span><span class="diff-line del">-  - &quot;{{ xteve_paths_location }}/app/tmp:/tmp/xteve:rw&quot;</span><span class="diff-line del">-  - &quot;{{ xteve_paths_location }}/app/guide2go:/home/xteve/guide2go/conf:rw&quot;</span><span class="diff-line del">-xteve_docker_volumes_custom: []</span><span class="diff-line del">-xteve_docker_volumes: &quot;{{ xteve_docker_volumes_default</span><span class="diff-line del">-                          + xteve_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-xteve_docker_devices_default: []</span><span class="diff-line del">-xteve_docker_devices_custom: []</span><span class="diff-line del">-xteve_docker_devices: &quot;{{ xteve_docker_devices_default</span><span class="diff-line del">-                          + xteve_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-xteve_docker_hosts_default: {}</span><span class="diff-line del">-xteve_docker_hosts_custom: {}</span><span class="diff-line del">-xteve_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(xteve_docker_hosts_default)</span><span class="diff-line del">-                        | combine(xteve_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-xteve_docker_labels_default: {}</span><span class="diff-line del">-xteve_docker_labels_custom: {}</span><span class="diff-line del">-xteve_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(xteve_docker_labels_default)</span><span class="diff-line del">-                         | combine(xteve_docker_labels_custom) }}&quot;</span><span class="diff-line add">+xteve_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;xteve&#x27;) }}/app/config:/home/xteve/conf&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;xteve&#x27;) }}/app/tmp:/tmp/xteve&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;xteve&#x27;) }}/app/guide2go:/home/xteve/guide2go/conf&quot;</span><span class="diff-line add">+xteve_role_docker_volumes_custom: []</span><span class="diff-line add">+xteve_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;xteve&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;xteve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-xteve_docker_hostname: &quot;{{ xteve_name }}&quot;</span><span class="diff-line add">+xteve_role_docker_hostname: &quot;{{ xteve_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-xteve_docker_networks_alias: &quot;{{ xteve_name }}&quot;</span><span class="diff-line del">-xteve_docker_networks_default: []</span><span class="diff-line del">-xteve_docker_networks_custom: []</span><span class="diff-line del">-xteve_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + xteve_docker_networks_default</span><span class="diff-line del">-                           + xteve_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-xteve_docker_capabilities_default: []</span><span class="diff-line del">-xteve_docker_capabilities_custom: []</span><span class="diff-line del">-xteve_docker_capabilities: &quot;{{ xteve_docker_capabilities_default</span><span class="diff-line del">-                               + xteve_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-xteve_docker_security_opts_default: []</span><span class="diff-line del">-xteve_docker_security_opts_custom: []</span><span class="diff-line del">-xteve_docker_security_opts: &quot;{{ xteve_docker_security_opts_default</span><span class="diff-line del">-                                + xteve_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+xteve_role_docker_networks_alias: &quot;{{ xteve_name }}&quot;</span><span class="diff-line add">+xteve_role_docker_networks_default: []</span><span class="diff-line add">+xteve_role_docker_networks_custom: []</span><span class="diff-line add">+xteve_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;xteve&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;xteve&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-xteve_docker_restart_policy: unless-stopped</span><span class="diff-line add">+xteve_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-xteve_docker_state: started</span><span class="diff-line add">+xteve_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-430">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/xteve/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-431">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/yacht/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -8,10 +8,16 @@</span><span class="diff-line context"> ##########################################################################</span><span class="diff-line context"> ---</span><span class="diff-line context"> ################################</span><span class="diff-line add">+# Basics</span><span class="diff-line add">+################################</span><span class="diff-line add">+</span><span class="diff-line add">+yacht_name: yacht</span><span class="diff-line add">+</span><span class="diff-line add">+################################</span><span class="diff-line context"> # Docker Socket Proxy</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-yacht_docker_socket_proxy_envs:</span><span class="diff-line add">+yacht_role_docker_socket_proxy_envs:</span><span class="diff-line context">   CONTAINERS: &quot;1&quot;</span><span class="diff-line context">   POST: &quot;0&quot;</span><span class="diff-line context">   IMAGES: &quot;1&quot;</span><span class="diff-line hunk">@@ -19,147 +25,98 @@</span><span class="diff-line context">   NETWORKS: &quot;1&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Basics</span><span class="diff-line del">-################################</span><span class="diff-line del">-</span><span class="diff-line del">-yacht_name: yacht</span><span class="diff-line del">-</span><span class="diff-line del">-################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-yacht_paths_folder: &quot;{{ yacht_name }}&quot;</span><span class="diff-line del">-yacht_paths_location: &quot;{{ server_appdata_path }}/{{ yacht_paths_folder }}&quot;</span><span class="diff-line del">-yacht_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ yacht_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ yacht_paths_location }}/config&quot;</span><span class="diff-line del">-  - &quot;{{ yacht_paths_location }}/storage&quot;</span><span class="diff-line add">+yacht_role_paths_folder: &quot;{{ yacht_name }}&quot;</span><span class="diff-line add">+yacht_role_paths_location: &quot;{{ server_appdata_path }}/{{ yacht_role_paths_folder }}&quot;</span><span class="diff-line add">+yacht_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ yacht_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ yacht_role_paths_location }}/config&quot;</span><span class="diff-line add">+  - &quot;{{ yacht_role_paths_location }}/storage&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-yacht_web_subdomain: &quot;{{ yacht_name }}&quot;</span><span class="diff-line del">-yacht_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-yacht_web_port: &quot;8000&quot;</span><span class="diff-line del">-yacht_web_url: &quot;{{ &#x27;https://&#x27; + (yacht_web_subdomain + &#x27;.&#x27; + yacht_web_domain</span><span class="diff-line del">-                if (yacht_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                else yacht_web_domain) }}&quot;</span><span class="diff-line add">+yacht_role_web_subdomain: &quot;{{ yacht_name }}&quot;</span><span class="diff-line add">+yacht_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+yacht_role_web_port: &quot;8000&quot;</span><span class="diff-line add">+yacht_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;yacht&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;yacht&#x27;)</span><span class="diff-line add">+                     if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;yacht&#x27;) | length &gt; 0)</span><span class="diff-line add">+                     else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;yacht&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-yacht_dns_record: &quot;{{ yacht_web_subdomain }}&quot;</span><span class="diff-line del">-yacht_dns_zone: &quot;{{ yacht_web_domain }}&quot;</span><span class="diff-line del">-yacht_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+yacht_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;yacht&#x27;) }}&quot;</span><span class="diff-line add">+yacht_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;yacht&#x27;) }}&quot;</span><span class="diff-line add">+yacht_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-yacht_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-yacht_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-yacht_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-yacht_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-yacht_traefik_enabled: true</span><span class="diff-line del">-yacht_traefik_api_enabled: false</span><span class="diff-line del">-yacht_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+yacht_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+yacht_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+yacht_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+yacht_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+yacht_role_traefik_enabled: true</span><span class="diff-line add">+yacht_role_traefik_api_enabled: false</span><span class="diff-line add">+yacht_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-yacht_docker_container: &quot;{{ yacht_name }}&quot;</span><span class="diff-line add">+yacht_role_docker_container: &quot;{{ yacht_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-yacht_docker_image_pull: true</span><span class="diff-line del">-yacht_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-yacht_docker_image: &quot;selfhostedpro/yacht:{{ yacht_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-yacht_docker_ports_defaults: []</span><span class="diff-line del">-yacht_docker_ports_custom: []</span><span class="diff-line del">-yacht_docker_ports: &quot;{{ yacht_docker_ports_defaults</span><span class="diff-line del">-                        + yacht_docker_ports_custom }}&quot;</span><span class="diff-line add">+yacht_role_docker_image_pull: true</span><span class="diff-line add">+yacht_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+yacht_role_docker_image_repo: &quot;selfhostedpro/yacht&quot;</span><span class="diff-line add">+yacht_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;yacht&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;yacht&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-yacht_docker_envs_default:</span><span class="diff-line add">+yacht_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   ADMIN_EMAIL: &quot;{{ user.email }}&quot;</span><span class="diff-line context">   SECRET_KEY: &quot;{{ lookup(&#x27;password&#x27;, &#x27;/dev/null&#x27;, chars=[&#x27;ascii_lowercase&#x27;, &#x27;digits&#x27;], length=16) }}&quot;</span><span class="diff-line context">   DOCKER_HOST: &quot;tcp://{{ yacht_name }}-docker-socket-proxy:2375&quot;</span><span class="diff-line del">-yacht_docker_envs_custom: {}</span><span class="diff-line del">-yacht_docker_envs: &quot;{{ yacht_docker_envs_default</span><span class="diff-line del">-                       | combine(yacht_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-yacht_docker_commands_default: []</span><span class="diff-line del">-yacht_docker_commands_custom: []</span><span class="diff-line del">-yacht_docker_commands: &quot;{{ yacht_docker_commands_default</span><span class="diff-line del">-                           + yacht_docker_commands_custom }}&quot;</span><span class="diff-line add">+yacht_role_docker_envs_custom: {}</span><span class="diff-line add">+yacht_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;yacht&#x27;)</span><span class="diff-line add">+                            | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;yacht&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-yacht_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ yacht_paths_location }}/config:/config&quot;</span><span class="diff-line del">-  - &quot;{{ yacht_paths_location }}/storage:/storage&quot;</span><span class="diff-line del">-yacht_docker_volumes_custom: []</span><span class="diff-line del">-yacht_docker_volumes: &quot;{{ yacht_docker_volumes_default</span><span class="diff-line del">-                          + yacht_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-yacht_docker_devices_default: []</span><span class="diff-line del">-yacht_docker_devices_custom: []</span><span class="diff-line del">-yacht_docker_devices: &quot;{{ yacht_docker_devices_default</span><span class="diff-line del">-                          + yacht_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-yacht_docker_hosts_default: {}</span><span class="diff-line del">-yacht_docker_hosts_custom: {}</span><span class="diff-line del">-yacht_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                        | combine(yacht_docker_hosts_default)</span><span class="diff-line del">-                        | combine(yacht_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-yacht_docker_labels_default: {}</span><span class="diff-line del">-yacht_docker_labels_custom: {}</span><span class="diff-line del">-yacht_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                         | combine(yacht_docker_labels_default)</span><span class="diff-line del">-                         | combine(yacht_docker_labels_custom) }}&quot;</span><span class="diff-line add">+yacht_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;yacht&#x27;) }}/config:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;yacht&#x27;) }}/storage:/storage&quot;</span><span class="diff-line add">+yacht_role_docker_volumes_custom: []</span><span class="diff-line add">+yacht_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;yacht&#x27;)</span><span class="diff-line add">+                               + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;yacht&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-yacht_docker_hostname: &quot;{{ yacht_name }}&quot;</span><span class="diff-line add">+yacht_role_docker_hostname: &quot;{{ yacht_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-yacht_docker_networks_alias: &quot;{{ yacht_name }}&quot;</span><span class="diff-line del">-yacht_docker_networks_default: []</span><span class="diff-line del">-yacht_docker_networks_custom: []</span><span class="diff-line del">-yacht_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                           + yacht_docker_networks_default</span><span class="diff-line del">-                           + yacht_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-yacht_docker_capabilities_default: []</span><span class="diff-line del">-yacht_docker_capabilities_custom: []</span><span class="diff-line del">-yacht_docker_capabilities: &quot;{{ yacht_docker_capabilities_default</span><span class="diff-line del">-                               + yacht_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-yacht_docker_security_opts_default: []</span><span class="diff-line del">-yacht_docker_security_opts_custom: []</span><span class="diff-line del">-yacht_docker_security_opts: &quot;{{ yacht_docker_security_opts_default</span><span class="diff-line del">-                                + yacht_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+yacht_role_docker_networks_alias: &quot;{{ yacht_name }}&quot;</span><span class="diff-line add">+yacht_role_docker_networks_default: []</span><span class="diff-line add">+yacht_role_docker_networks_custom: []</span><span class="diff-line add">+yacht_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;yacht&#x27;)</span><span class="diff-line add">+                                + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;yacht&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-yacht_docker_restart_policy: unless-stopped</span><span class="diff-line add">+yacht_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-yacht_docker_state: started</span><span class="diff-line add">+yacht_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-yacht_depends_on: &quot;{{ yacht_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-yacht_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-yacht_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+yacht_role_depends_on: &quot;{{ yacht_name }}-docker-socket-proxy&quot;</span><span class="diff-line add">+yacht_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+yacht_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-432">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/yacht/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -12,14 +12,14 @@</span><span class="diff-line context">     name: docker_socket_proxy</span><span class="diff-line context">   vars:</span><span class="diff-line context">     docker_socket_proxy_name: &quot;{{ yacht_name }}-docker-socket-proxy&quot;</span><span class="diff-line del">-    docker_socket_proxy_docker_envs: &quot;{{ yacht_docker_socket_proxy_envs }}&quot;</span><span class="diff-line add">+    docker_socket_proxy_role_docker_envs_custom: &quot;{{ yacht_role_docker_socket_proxy_envs }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-433">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/your_spotify/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -14,144 +14,88 @@</span><span class="diff-line context"> your_spotify_name: your-spotify</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line del">-# Lookups</span><span class="diff-line add">+# Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-your_spotify_settings_set: &quot;{{ (your_spotify is defined) and</span><span class="diff-line del">-                               (your_spotify is not none) and</span><span class="diff-line del">-                               (your_spotify | trim | length &gt; 0) and</span><span class="diff-line del">-                               (your_spotify.public_key is defined) and</span><span class="diff-line del">-                               (your_spotify.public_key is not none) and</span><span class="diff-line del">-                               (your_spotify.public_key | trim | length &gt; 0) and</span><span class="diff-line del">-                               (your_spotify.secret_key is defined) and</span><span class="diff-line del">-                               (your_spotify.secret_key is not none) and</span><span class="diff-line del">-                               (your_spotify.secret_key | trim | length &gt; 0) }}&quot;</span><span class="diff-line add">+your_spotify_role_public_key: &quot;&quot;</span><span class="diff-line add">+your_spotify_role_secret_key: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-your_spotify_web_subdomain: &quot;spotify&quot;</span><span class="diff-line del">-your_spotify_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-your_spotify_web_port: &quot;80&quot;</span><span class="diff-line del">-your_spotify_web_url: &quot;{{ &#x27;https://&#x27; + (your_spotify_web_subdomain + &#x27;.&#x27; + your_spotify_web_domain</span><span class="diff-line del">-                       if (your_spotify_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                       else your_spotify_web_domain) }}&quot;</span><span class="diff-line add">+your_spotify_role_web_subdomain: &quot;spotify&quot;</span><span class="diff-line add">+your_spotify_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+your_spotify_role_web_port: &quot;80&quot;</span><span class="diff-line add">+your_spotify_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;your_spotify&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;your_spotify&#x27;)</span><span class="diff-line add">+                            if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;your_spotify&#x27;) | length &gt; 0)</span><span class="diff-line add">+                            else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;your_spotify&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-your_spotify_dns_record: &quot;{{ your_spotify_web_subdomain }}&quot;</span><span class="diff-line del">-your_spotify_dns_zone: &quot;{{ your_spotify_web_domain }}&quot;</span><span class="diff-line del">-your_spotify_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+your_spotify_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line add">+your_spotify_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line add">+your_spotify_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-your_spotify_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-your_spotify_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-your_spotify_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-your_spotify_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-your_spotify_traefik_enabled: true</span><span class="diff-line del">-your_spotify_traefik_api_enabled: false</span><span class="diff-line del">-your_spotify_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+your_spotify_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+your_spotify_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+your_spotify_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+your_spotify_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+your_spotify_role_traefik_enabled: true</span><span class="diff-line add">+your_spotify_role_traefik_api_enabled: false</span><span class="diff-line add">+your_spotify_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-your_spotify_docker_container: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_container: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-your_spotify_docker_image_pull: true</span><span class="diff-line del">-your_spotify_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-your_spotify_docker_image: &quot;lscr.io/linuxserver/your_spotify:{{ your_spotify_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-your_spotify_docker_ports_defaults: []</span><span class="diff-line del">-your_spotify_docker_ports_custom: []</span><span class="diff-line del">-your_spotify_docker_ports: &quot;{{ your_spotify_docker_ports_defaults</span><span class="diff-line del">-                               + your_spotify_docker_ports_custom }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_image_pull: true</span><span class="diff-line add">+your_spotify_role_docker_image_repo: &quot;lscr.io/linuxserver/your_spotify&quot;</span><span class="diff-line add">+your_spotify_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+your_spotify_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;your_spotify&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-your_spotify_docker_envs_default:</span><span class="diff-line add">+your_spotify_role_docker_envs_default:</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line del">-  APP_URL: &quot;{{ your_spotify_web_url }}&quot;</span><span class="diff-line del">-  SPOTIFY_PUBLIC: &quot;{{ your_spotify.public_key }}&quot;</span><span class="diff-line del">-  SPOTIFY_SECRET: &quot;{{ your_spotify.secret_key }}&quot;</span><span class="diff-line del">-  CORS: &quot;{{ your_spotify_web_url + &#x27;:443&#x27; }}&quot;</span><span class="diff-line add">+  APP_URL: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line add">+  SPOTIFY_PUBLIC: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_public_key&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line add">+  SPOTIFY_SECRET: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_secret_key&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line add">+  CORS: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_url&#x27;, role=&#x27;your_spotify&#x27;) + &#x27;:443&#x27; }}&quot;</span><span class="diff-line context">   MONGO_ENDPOINT: &quot;mongodb://your-spotify-db:27017/your_spotify&quot;</span><span class="diff-line del">-your_spotify_docker_envs_custom: {}</span><span class="diff-line del">-your_spotify_docker_envs: &quot;{{ your_spotify_docker_envs_default</span><span class="diff-line del">-                              | combine(your_spotify_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-your_spotify_docker_commands_default: []</span><span class="diff-line del">-your_spotify_docker_commands_custom: []</span><span class="diff-line del">-your_spotify_docker_commands: &quot;{{ your_spotify_docker_commands_default</span><span class="diff-line del">-                                  + your_spotify_docker_commands_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Volumes</span><span class="diff-line del">-your_spotify_docker_volumes_default: []</span><span class="diff-line del">-your_spotify_docker_volumes_custom: []</span><span class="diff-line del">-your_spotify_docker_volumes: &quot;{{ your_spotify_docker_volumes_default</span><span class="diff-line del">-                                 + your_spotify_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-your_spotify_docker_devices_default: []</span><span class="diff-line del">-your_spotify_docker_devices_custom: []</span><span class="diff-line del">-your_spotify_docker_devices: &quot;{{ your_spotify_docker_devices_default</span><span class="diff-line del">-                                 + your_spotify_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-your_spotify_docker_hosts_default: {}</span><span class="diff-line del">-your_spotify_docker_hosts_custom: {}</span><span class="diff-line del">-your_spotify_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                               | combine(your_spotify_docker_hosts_default)</span><span class="diff-line del">-                               | combine(your_spotify_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-your_spotify_docker_labels_default: {}</span><span class="diff-line del">-your_spotify_docker_labels_custom: {}</span><span class="diff-line del">-your_spotify_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                                | combine(your_spotify_docker_labels_default)</span><span class="diff-line del">-                                | combine(your_spotify_docker_labels_custom) }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_envs_custom: {}</span><span class="diff-line add">+your_spotify_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;your_spotify&#x27;)</span><span class="diff-line add">+                                   | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;your_spotify&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-your_spotify_docker_hostname: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_hostname: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-your_spotify_docker_networks_alias: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line del">-your_spotify_docker_networks_default: []</span><span class="diff-line del">-your_spotify_docker_networks_custom: []</span><span class="diff-line del">-your_spotify_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                  + your_spotify_docker_networks_default</span><span class="diff-line del">-                                  + your_spotify_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-your_spotify_docker_capabilities_default: []</span><span class="diff-line del">-your_spotify_docker_capabilities_custom: []</span><span class="diff-line del">-your_spotify_docker_capabilities: &quot;{{ your_spotify_docker_capabilities_default</span><span class="diff-line del">-                                      + your_spotify_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-your_spotify_docker_security_opts_default: []</span><span class="diff-line del">-your_spotify_docker_security_opts_custom: []</span><span class="diff-line del">-your_spotify_docker_security_opts: &quot;{{ your_spotify_docker_security_opts_default</span><span class="diff-line del">-                                       + your_spotify_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_networks_alias: &quot;{{ your_spotify_name }}&quot;</span><span class="diff-line add">+your_spotify_role_docker_networks_default: []</span><span class="diff-line add">+your_spotify_role_docker_networks_custom: []</span><span class="diff-line add">+your_spotify_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;your_spotify&#x27;)</span><span class="diff-line add">+                                       + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;your_spotify&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-your_spotify_docker_restart_policy: unless-stopped</span><span class="diff-line add">+your_spotify_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-your_spotify_docker_state: started</span><span class="diff-line add">+your_spotify_role_docker_state: started</span><span class="diff-line context"> </span><span class="diff-line context"> # Dependencies</span><span class="diff-line del">-your_spotify_depends_on: &quot;your-spotify-db&quot;</span><span class="diff-line del">-your_spotify_depends_on_delay: &quot;0&quot;</span><span class="diff-line del">-your_spotify_depends_on_healthchecks: &quot;false&quot;</span><span class="diff-line add">+your_spotify_role_depends_on: &quot;your-spotify-db&quot;</span><span class="diff-line add">+your_spotify_role_depends_on_delay: &quot;0&quot;</span><span class="diff-line add">+your_spotify_role_depends_on_healthchecks: &quot;false&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-434">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/your_spotify/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -9,15 +9,15 @@</span><span class="diff-line context"> ---</span><span class="diff-line context"> - name: Fail if settings.yml values are empty</span><span class="diff-line context">   ansible.builtin.fail:</span><span class="diff-line del">-    msg: &quot;You must configure &#x27;settings.yml&#x27; with public and secret keys.&quot;</span><span class="diff-line del">-  when: (not continuous_integration) and (not your_spotify_settings_set)</span><span class="diff-line add">+    msg: &quot;You must configure your_spotify_role_public_key and your_spotify_role_secret_key using the inventory&quot;</span><span class="diff-line add">+  when: (not continuous_integration) and (lookup(&#x27;role_var&#x27;, &#x27;_public_key&#x27;, role=&#x27;your_spotify&#x27;) | length == 0) and (lookup(&#x27;role_var&#x27;, &#x27;_secret_key&#x27;, role=&#x27;your_spotify&#x27;) | length == 0)</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove old Database Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line hunk">@@ -29,7 +29,7 @@</span><span class="diff-line context">     name: mongodb</span><span class="diff-line context">   vars:</span><span class="diff-line context">     mongodb_instances: [&quot;your-spotify-db&quot;]</span><span class="diff-line del">-    mongodb_paths_location: &quot;{{ server_appdata_path }}/{{ your_spotify_name }}&quot;</span><span class="diff-line add">+    mongodb_role_paths_location: &quot;{{ server_appdata_path }}/{{ your_spotify_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-435">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/ytdl_sub/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,152 +17,105 @@</span><span class="diff-line context"> # Settings</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ytdl_sub_cron_schedule: &quot;0 */6 * * *&quot;</span><span class="diff-line del">-ytdl_sub_cron_on_start: &quot;true&quot;</span><span class="diff-line del">-ytdl_sub_image_type: &quot;headless&quot;</span><span class="diff-line add">+ytdl_sub_role_cron_schedule: &quot;0 */6 * * *&quot;</span><span class="diff-line add">+ytdl_sub_role_cron_on_start: &quot;true&quot;</span><span class="diff-line add">+ytdl_sub_role_image_type: &quot;headless&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ytdl_sub_paths_folder: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line del">-ytdl_sub_paths_location: &quot;{{ server_appdata_path }}/{{ ytdl_sub_paths_folder }}&quot;</span><span class="diff-line del">-ytdl_sub_download_folder: &quot;/mnt/unionfs/Media/Youtube/{{ ytdl_sub_name }}&quot;</span><span class="diff-line del">-ytdl_sub_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_paths_location }}&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/tv_shows&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/movies&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/music_videos&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/music&quot;</span><span class="diff-line add">+ytdl_sub_role_paths_folder: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_paths_location: &quot;{{ server_appdata_path }}/{{ ytdl_sub_role_paths_folder }}&quot;</span><span class="diff-line add">+ytdl_sub_role_paths_download_folder: &quot;/mnt/unionfs/Media/Youtube/{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_location }}&quot;</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_download_folder }}&quot;</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_download_folder }}/tv_shows&quot;</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_download_folder }}/movies&quot;</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_download_folder }}/music_videos&quot;</span><span class="diff-line add">+  - &quot;{{ ytdl_sub_role_paths_download_folder }}/music&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ytdl_sub_web_subdomain: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line del">-ytdl_sub_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-ytdl_sub_web_port: &quot;8080&quot;</span><span class="diff-line del">-ytdl_sub_web_url: &quot;{{ &#x27;https://&#x27; + (ytdl_sub_web_subdomain + &#x27;.&#x27; + ytdl_sub_web_domain</span><span class="diff-line del">-                   if (ytdl_sub_web_subdomain | length &gt; 0)</span><span class="diff-line del">-                   else ytdl_sub_web_domain) }}&quot;</span><span class="diff-line add">+ytdl_sub_role_web_subdomain: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+ytdl_sub_role_web_port: &quot;8080&quot;</span><span class="diff-line add">+ytdl_sub_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ytdl_sub&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ytdl_sub&#x27;)</span><span class="diff-line add">+                        if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ytdl_sub&#x27;) | length &gt; 0)</span><span class="diff-line add">+                        else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ytdl_sub&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ytdl_sub_dns_record: &quot;{{ ytdl_sub_web_subdomain }}&quot;</span><span class="diff-line del">-ytdl_sub_dns_zone: &quot;{{ ytdl_sub_web_domain }}&quot;</span><span class="diff-line del">-ytdl_sub_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+ytdl_sub_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line add">+ytdl_sub_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line add">+ytdl_sub_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-ytdl_sub_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line del">-ytdl_sub_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-ytdl_sub_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-ytdl_sub_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-ytdl_sub_traefik_enabled: true</span><span class="diff-line del">-ytdl_sub_traefik_api_enabled: false</span><span class="diff-line del">-ytdl_sub_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+ytdl_sub_role_traefik_sso_middleware: &quot;{{ traefik_default_sso_middleware }}&quot;</span><span class="diff-line add">+ytdl_sub_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+ytdl_sub_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+ytdl_sub_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+ytdl_sub_role_traefik_enabled: true</span><span class="diff-line add">+ytdl_sub_role_traefik_api_enabled: false</span><span class="diff-line add">+ytdl_sub_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-ytdl_sub_docker_container: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_container: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-ytdl_sub_docker_image_pull: true</span><span class="diff-line del">-ytdl_sub_docker_image_repo: &quot;{{ &#x27;ghcr.io/jmbannon/ytdl-sub-gui&#x27; if ytdl_sub_image_type == &#x27;gui&#x27; else &#x27;ghcr.io/jmbannon/ytdl-sub&#x27; }}&quot;</span><span class="diff-line del">-ytdl_sub_docker_image_tag: &quot;{{ &#x27;latest&#x27; if ytdl_sub_image_type == &#x27;gui&#x27; else &#x27;ubuntu-latest&#x27; }}&quot;</span><span class="diff-line del">-ytdl_sub_docker_image: &quot;{{ ytdl_sub_docker_image_repo }}:{{ ytdl_sub_docker_image_tag }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Ports</span><span class="diff-line del">-ytdl_sub_docker_ports_defaults: []</span><span class="diff-line del">-ytdl_sub_docker_ports_custom: []</span><span class="diff-line del">-ytdl_sub_docker_ports: &quot;{{ ytdl_sub_docker_ports_defaults</span><span class="diff-line del">-                             + ytdl_sub_docker_ports_custom }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_image_pull: true</span><span class="diff-line add">+ytdl_sub_role_docker_image_repo: &quot;{{ &#x27;ghcr.io/jmbannon/ytdl-sub-gui&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_image_type&#x27;, role=&#x27;ytdl_sub&#x27;) == &#x27;gui&#x27; else &#x27;ghcr.io/jmbannon/ytdl-sub&#x27; }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_image_tag: &quot;{{ &#x27;latest&#x27; if lookup(&#x27;role_var&#x27;, &#x27;_image_type&#x27;, role=&#x27;ytdl_sub&#x27;) == &#x27;gui&#x27; else &#x27;ubuntu-latest&#x27; }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;ytdl_sub&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-ytdl_sub_docker_envs_default:</span><span class="diff-line add">+ytdl_sub_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-  CRON_SCHEDULE: &quot;{{ ytdl_sub_cron_schedule }}&quot;</span><span class="diff-line del">-  CRON_RUN_ON_START: &quot;{{ ytdl_sub_cron_on_start }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-ytdl_sub_docker_envs_custom: []</span><span class="diff-line del">-ytdl_sub_docker_envs: &quot;{{ ytdl_sub_docker_envs_default</span><span class="diff-line del">-                            | combine(ytdl_sub_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-ytdl_sub_docker_commands_default: []</span><span class="diff-line del">-ytdl_sub_docker_commands_custom: []</span><span class="diff-line del">-ytdl_sub_docker_commands: &quot;{{ ytdl_sub_docker_commands_default</span><span class="diff-line del">-                                + ytdl_sub_docker_commands_custom }}&quot;</span><span class="diff-line add">+  CRON_SCHEDULE: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_cron_schedule&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line add">+  CRON_RUN_ON_START: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_cron_on_start&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_envs_custom: {}</span><span class="diff-line add">+ytdl_sub_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;ytdl_sub&#x27;)</span><span class="diff-line add">+                               | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;ytdl_sub&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-ytdl_sub_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_paths_location }}:/config&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}:/ytdl_sub&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/tv_shows:/tv_shows&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/movies:/movies&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/music_videos:/music_videos&quot;</span><span class="diff-line del">-  - &quot;{{ ytdl_sub_download_folder }}/music:/music&quot;</span><span class="diff-line del">-ytdl_sub_docker_volumes_custom: []</span><span class="diff-line del">-</span><span class="diff-line del">-ytdl_sub_docker_volumes: &quot;{{ ytdl_sub_docker_volumes_default</span><span class="diff-line del">-                               + ytdl_sub_docker_volumes_custom</span><span class="diff-line del">-                               + docker_volumes_downloads_common }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-ytdl_sub_docker_devices_default: []</span><span class="diff-line del">-ytdl_sub_docker_devices_custom: []</span><span class="diff-line del">-ytdl_sub_docker_devices: &quot;{{ ytdl_sub_docker_devices_default</span><span class="diff-line del">-                               + ytdl_sub_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-ytdl_sub_docker_hosts_default: []</span><span class="diff-line del">-ytdl_sub_docker_hosts_custom: []</span><span class="diff-line del">-ytdl_sub_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                             | combine(ytdl_sub_docker_hosts_default)</span><span class="diff-line del">-                             | combine(ytdl_sub_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-ytdl_sub_docker_labels_default: {}</span><span class="diff-line del">-ytdl_sub_docker_labels_custom: {}</span><span class="diff-line del">-ytdl_sub_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                              | combine(ytdl_sub_docker_labels_default)</span><span class="diff-line del">-                              | combine(ytdl_sub_docker_labels_custom) }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;ytdl_sub&#x27;) }}:/config&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_download_folder&#x27;, role=&#x27;ytdl_sub&#x27;) }}:/ytdl_sub&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_download_folder&#x27;, role=&#x27;ytdl_sub&#x27;) }}/tv_shows:/tv_shows&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_download_folder&#x27;, role=&#x27;ytdl_sub&#x27;) }}/movies:/movies&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_download_folder&#x27;, role=&#x27;ytdl_sub&#x27;) }}/music_videos:/music_videos&quot;</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_download_folder&#x27;, role=&#x27;ytdl_sub&#x27;) }}/music:/music&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_volumes_custom: []</span><span class="diff-line add">+ytdl_sub_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;ytdl_sub&#x27;)</span><span class="diff-line add">+                                  + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-ytdl_sub_docker_hostname: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_hostname: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-ytdl_sub_docker_networks_alias: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line del">-ytdl_sub_docker_networks_default: []</span><span class="diff-line del">-ytdl_sub_docker_networks_custom: []</span><span class="diff-line del">-ytdl_sub_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                                + ytdl_sub_docker_networks_default</span><span class="diff-line del">-                                + ytdl_sub_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-ytdl_sub_docker_capabilities_default: []</span><span class="diff-line del">-ytdl_sub_docker_capabilities_custom: []</span><span class="diff-line del">-ytdl_sub_docker_capabilities: &quot;{{ ytdl_sub_docker_capabilities_default</span><span class="diff-line del">-                                    + ytdl_sub_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-ytdl_sub_docker_security_opts_default: []</span><span class="diff-line del">-ytdl_sub_docker_security_opts_custom: []</span><span class="diff-line del">-ytdl_sub_docker_security_opts: &quot;{{ ytdl_sub_docker_security_opts_default</span><span class="diff-line del">-                                     + ytdl_sub_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_networks_alias: &quot;{{ ytdl_sub_name }}&quot;</span><span class="diff-line add">+ytdl_sub_role_docker_networks_default: []</span><span class="diff-line add">+ytdl_sub_role_docker_networks_custom: []</span><span class="diff-line add">+ytdl_sub_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;ytdl_sub&#x27;)</span><span class="diff-line add">+                                   + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;ytdl_sub&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-ytdl_sub_docker_restart_policy: unless-stopped</span><span class="diff-line add">+ytdl_sub_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-ytdl_sub_docker_state: started</span><span class="diff-line add">+ytdl_sub_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-436">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/ytdl_sub/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,17 +10,17 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ ytdl_sub_dns_record }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ ytdl_sub_dns_zone }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ ytdl_sub_dns_proxy }}&quot;</span><span class="diff-line del">-  when: ytdl_sub_image_type == &#x27;gui&#x27;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+  when: lookup(&#x27;role_var&#x27;, &#x27;_image_type&#x27;, role=&#x27;ytdl_sub&#x27;) == &#x27;gui&#x27;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Docker Devices Task</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/set_docker_devices_variable.yml&quot;</span><span class="diff-line del">-  when: gpu.intel or use_nvidia</span><span class="diff-line add">+  when: use_intel or use_nvidia</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Create directories</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/directories/create_directories.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-437">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/znc/defaults/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -17,129 +17,92 @@</span><span class="diff-line context"> # Paths</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-znc_paths_folder: &quot;{{ znc_name }}&quot;</span><span class="diff-line del">-znc_paths_location: &quot;{{ server_appdata_path }}/{{ znc_paths_folder }}&quot;</span><span class="diff-line del">-znc_paths_folders_list:</span><span class="diff-line del">-  - &quot;{{ znc_paths_location }}&quot;</span><span class="diff-line add">+znc_role_paths_folder: &quot;{{ znc_name }}&quot;</span><span class="diff-line add">+znc_role_paths_location: &quot;{{ server_appdata_path }}/{{ znc_role_paths_folder }}&quot;</span><span class="diff-line add">+znc_role_paths_folders_list:</span><span class="diff-line add">+  - &quot;{{ znc_role_paths_location }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Web</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-znc_web_subdomain: &quot;{{ znc_name }}&quot;</span><span class="diff-line del">-znc_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line del">-znc_web_port: &quot;6501&quot;</span><span class="diff-line del">-znc_web_url: &quot;{{ &#x27;https://&#x27; + (znc_web_subdomain + &#x27;.&#x27; + znc_web_domain</span><span class="diff-line del">-              if (znc_web_subdomain | length &gt; 0)</span><span class="diff-line del">-              else znc_web_domain) }}&quot;</span><span class="diff-line add">+znc_role_web_subdomain: &quot;{{ znc_name }}&quot;</span><span class="diff-line add">+znc_role_web_domain: &quot;{{ user.domain }}&quot;</span><span class="diff-line add">+znc_role_web_port: &quot;6501&quot;</span><span class="diff-line add">+znc_role_web_url: &quot;{{ &#x27;https://&#x27; + (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;znc&#x27;) + &#x27;.&#x27; + lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;znc&#x27;)</span><span class="diff-line add">+                   if (lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;znc&#x27;) | length &gt; 0)</span><span class="diff-line add">+                   else lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;znc&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # DNS</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-znc_dns_record: &quot;{{ znc_web_subdomain }}&quot;</span><span class="diff-line del">-znc_dns_zone: &quot;{{ znc_web_domain }}&quot;</span><span class="diff-line del">-znc_dns_proxy: &quot;{{ dns.proxied }}&quot;</span><span class="diff-line add">+znc_role_dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_subdomain&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line add">+znc_role_dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_domain&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line add">+znc_role_dns_proxy: &quot;{{ dns_proxied }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Traefik</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line del">-znc_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line del">-znc_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line del">-znc_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line del">-znc_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line del">-znc_traefik_enabled: true</span><span class="diff-line del">-znc_traefik_api_enabled: false</span><span class="diff-line del">-znc_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line add">+znc_role_traefik_sso_middleware: &quot;&quot;</span><span class="diff-line add">+znc_role_traefik_middleware_default: &quot;{{ traefik_default_middleware }}&quot;</span><span class="diff-line add">+znc_role_traefik_middleware_custom: &quot;&quot;</span><span class="diff-line add">+znc_role_traefik_certresolver: &quot;{{ traefik_default_certresolver }}&quot;</span><span class="diff-line add">+znc_role_traefik_enabled: true</span><span class="diff-line add">+znc_role_traefik_api_enabled: false</span><span class="diff-line add">+znc_role_traefik_api_endpoint: &quot;&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> ################################</span><span class="diff-line context"> # Docker</span><span class="diff-line context"> ################################</span><span class="diff-line context"> </span><span class="diff-line context"> # Container</span><span class="diff-line del">-znc_docker_container: &quot;{{ znc_name }}&quot;</span><span class="diff-line add">+znc_role_docker_container: &quot;{{ znc_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Image</span><span class="diff-line del">-znc_docker_image_pull: true</span><span class="diff-line del">-znc_docker_image_tag: &quot;latest&quot;</span><span class="diff-line del">-znc_docker_image: &quot;lscr.io/linuxserver/znc:{{ znc_docker_image_tag }}&quot;</span><span class="diff-line add">+znc_role_docker_image_pull: true</span><span class="diff-line add">+znc_role_docker_image_repo: &quot;lscr.io/linuxserver/znc&quot;</span><span class="diff-line add">+znc_role_docker_image_tag: &quot;latest&quot;</span><span class="diff-line add">+znc_role_docker_image: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_repo&#x27;, role=&#x27;znc&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_image_tag&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Ports</span><span class="diff-line del">-znc_docker_ports_defaults:</span><span class="diff-line del">-  - &quot;{{ znc_web_port }}:{{ znc_web_port }}&quot;</span><span class="diff-line add">+znc_role_docker_ports_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;znc&#x27;) }}:{{ lookup(&#x27;role_var&#x27;, &#x27;_web_port&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line context">   - &quot;6502:6502&quot;</span><span class="diff-line del">-znc_docker_ports_custom: []</span><span class="diff-line del">-znc_docker_ports: &quot;{{ znc_docker_ports_defaults</span><span class="diff-line del">-                      + znc_docker_ports_custom }}&quot;</span><span class="diff-line add">+znc_role_docker_ports_custom: []</span><span class="diff-line add">+znc_role_docker_ports: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_default&#x27;, role=&#x27;znc&#x27;)</span><span class="diff-line add">+                           + lookup(&#x27;role_var&#x27;, &#x27;_docker_ports_custom&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Envs</span><span class="diff-line del">-znc_docker_envs_default:</span><span class="diff-line add">+znc_role_docker_envs_default:</span><span class="diff-line context">   PUID: &quot;{{ uid }}&quot;</span><span class="diff-line context">   PGID: &quot;{{ gid }}&quot;</span><span class="diff-line context">   TZ: &quot;{{ tz }}&quot;</span><span class="diff-line del">-znc_docker_envs_custom: {}</span><span class="diff-line del">-znc_docker_envs: &quot;{{ znc_docker_envs_default</span><span class="diff-line del">-                     | combine(znc_docker_envs_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Commands</span><span class="diff-line del">-znc_docker_commands_default: []</span><span class="diff-line del">-znc_docker_commands_custom: []</span><span class="diff-line del">-znc_docker_commands: &quot;{{ znc_docker_commands_default</span><span class="diff-line del">-                         + znc_docker_commands_custom }}&quot;</span><span class="diff-line add">+znc_role_docker_envs_custom: {}</span><span class="diff-line add">+znc_role_docker_envs: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_default&#x27;, role=&#x27;znc&#x27;)</span><span class="diff-line add">+                          | combine(lookup(&#x27;role_var&#x27;, &#x27;_docker_envs_custom&#x27;, role=&#x27;znc&#x27;)) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Volumes</span><span class="diff-line del">-znc_docker_volumes_default:</span><span class="diff-line del">-  - &quot;{{ znc_paths_location }}:/config&quot;</span><span class="diff-line del">-znc_docker_volumes_custom: []</span><span class="diff-line del">-znc_docker_volumes: &quot;{{ znc_docker_volumes_default</span><span class="diff-line del">-                        + znc_docker_volumes_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Devices</span><span class="diff-line del">-znc_docker_devices_default: []</span><span class="diff-line del">-znc_docker_devices_custom: []</span><span class="diff-line del">-znc_docker_devices: &quot;{{ znc_docker_devices_default</span><span class="diff-line del">-                        + znc_docker_devices_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Hosts</span><span class="diff-line del">-znc_docker_hosts_default: {}</span><span class="diff-line del">-znc_docker_hosts_custom: {}</span><span class="diff-line del">-znc_docker_hosts: &quot;{{ docker_hosts_common</span><span class="diff-line del">-                      | combine(znc_docker_hosts_default)</span><span class="diff-line del">-                      | combine(znc_docker_hosts_custom) }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Labels</span><span class="diff-line del">-znc_docker_labels_default: {}</span><span class="diff-line del">-znc_docker_labels_custom: {}</span><span class="diff-line del">-znc_docker_labels: &quot;{{ docker_labels_common</span><span class="diff-line del">-                       | combine(znc_docker_labels_default)</span><span class="diff-line del">-                       | combine(znc_docker_labels_custom) }}&quot;</span><span class="diff-line add">+znc_role_docker_volumes_default:</span><span class="diff-line add">+  - &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_paths_location&#x27;, role=&#x27;znc&#x27;) }}:/config&quot;</span><span class="diff-line add">+znc_role_docker_volumes_custom: []</span><span class="diff-line add">+znc_role_docker_volumes: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_default&#x27;, role=&#x27;znc&#x27;)</span><span class="diff-line add">+                             + lookup(&#x27;role_var&#x27;, &#x27;_docker_volumes_custom&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Hostname</span><span class="diff-line del">-znc_docker_hostname: &quot;{{ znc_name }}&quot;</span><span class="diff-line add">+znc_role_docker_hostname: &quot;{{ znc_name }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Networks</span><span class="diff-line del">-znc_docker_networks_alias: &quot;{{ znc_name }}&quot;</span><span class="diff-line del">-znc_docker_networks_default: []</span><span class="diff-line del">-znc_docker_networks_custom: []</span><span class="diff-line del">-znc_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line del">-                         + znc_docker_networks_default</span><span class="diff-line del">-                         + znc_docker_networks_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Capabilities</span><span class="diff-line del">-znc_docker_capabilities_default: []</span><span class="diff-line del">-znc_docker_capabilities_custom: []</span><span class="diff-line del">-znc_docker_capabilities: &quot;{{ znc_docker_capabilities_default</span><span class="diff-line del">-                             + znc_docker_capabilities_custom }}&quot;</span><span class="diff-line del">-</span><span class="diff-line del">-# Security Opts</span><span class="diff-line del">-znc_docker_security_opts_default: []</span><span class="diff-line del">-znc_docker_security_opts_custom: []</span><span class="diff-line del">-znc_docker_security_opts: &quot;{{ znc_docker_security_opts_default</span><span class="diff-line del">-                              + znc_docker_security_opts_custom }}&quot;</span><span class="diff-line add">+znc_role_docker_networks_alias: &quot;{{ znc_name }}&quot;</span><span class="diff-line add">+znc_role_docker_networks_default: []</span><span class="diff-line add">+znc_role_docker_networks_custom: []</span><span class="diff-line add">+znc_role_docker_networks: &quot;{{ docker_networks_common</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_default&#x27;, role=&#x27;znc&#x27;)</span><span class="diff-line add">+                              + lookup(&#x27;role_var&#x27;, &#x27;_docker_networks_custom&#x27;, role=&#x27;znc&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> # Restart Policy</span><span class="diff-line del">-znc_docker_restart_policy: unless-stopped</span><span class="diff-line add">+znc_role_docker_restart_policy: unless-stopped</span><span class="diff-line context"> </span><span class="diff-line context"> # State</span><span class="diff-line del">-znc_docker_state: started</span><span class="diff-line add">+znc_role_docker_state: started</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-438">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>roles/znc/tasks/main.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -10,9 +10,9 @@</span><span class="diff-line context"> - name: Add DNS record</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/dns/tasker.yml&quot;</span><span class="diff-line context">   vars:</span><span class="diff-line del">-    dns_record: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line del">-    dns_zone: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line del">-    dns_proxy: &quot;{{ lookup(&#x27;vars&#x27;, role_name + &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line add">+    dns_record: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_record&#x27;) }}&quot;</span><span class="diff-line add">+    dns_zone: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_zone&#x27;) }}&quot;</span><span class="diff-line add">+    dns_proxy: &quot;{{ lookup(&#x27;role_var&#x27;, &#x27;_dns_proxy&#x27;) }}&quot;</span><span class="diff-line context"> </span><span class="diff-line context"> - name: Remove existing Docker container</span><span class="diff-line context">   ansible.builtin.include_tasks: &quot;{{ resources_tasks_path }}/docker/remove_docker_container.yml&quot;</span></pre></div>
            </section>
            <section class="file-section collapsed" id="file-439">
                <div class="file-header">
                    <span class="badge modified">modified</span>
                    <h3>sandbox.yml</h3>
                    <button class="collapse-btn" onclick="this.closest('.file-section').classList.toggle('collapsed')">Toggle</button>
                </div>
                <div class="diff-content"><pre><span class="diff-line hunk">@@ -4,7 +4,6 @@</span><span class="diff-line context">     ansible.builtin.setup:</span><span class="diff-line context">       fact_path: &quot;/srv/git/saltbox/ansible_facts.d&quot;</span><span class="diff-line context">   vars_files:</span><span class="diff-line del">-    - [&#x27;settings.yml&#x27;, &#x27;defaults/settings.yml.default&#x27;]</span><span class="diff-line context">     - [&#x27;/srv/git/saltbox/accounts.yml&#x27;, &#x27;/srv/git/saltbox/defaults/accounts.yml.default&#x27;]</span><span class="diff-line context">     - [&#x27;/srv/git/saltbox/settings.yml&#x27;, &#x27;/srv/git/saltbox/defaults/settings.yml.default&#x27;]</span><span class="diff-line context">     - [&#x27;/srv/git/saltbox/adv_settings.yml&#x27;, &#x27;/srv/git/saltbox/defaults/adv_settings.yml.default&#x27;]</span><span class="diff-line hunk">@@ -12,7 +11,6 @@</span><span class="diff-line context">   roles:</span><span class="diff-line context">     # Reqs</span><span class="diff-line context">     - { role: user_check, tags: [&#x27;always&#x27;] }</span><span class="diff-line del">-    - { role: settings, tags: [&#x27;settings&#x27;] }</span><span class="diff-line context">     - { role: pre_tasks, tags: [&#x27;always&#x27;, &#x27;pre-tasks&#x27;] }</span><span class="diff-line context">     - { role: sanity_check, tags: [&#x27;always&#x27;, &#x27;sanity-check&#x27;] }</span><span class="diff-line context">     # Apps Start</span><span class="diff-line hunk">@@ -22,14 +20,11 @@</span><span class="diff-line context">     - { role: adminer, tags: [&#x27;adminer&#x27;] }</span><span class="diff-line context">     - { role: airdcpp, tags: [&#x27;airdcpp&#x27;] }</span><span class="diff-line context">     - { role: airsonic, tags: [&#x27;airsonic&#x27;] }</span><span class="diff-line del">-    - { role: alternatrr, tags: [&#x27;alternatrr&#x27;] }</span><span class="diff-line context">     - { role: apprise, tags: [&#x27;apprise&#x27;] }</span><span class="diff-line context">     - { role: archivebox, tags: [&#x27;archivebox&#x27;] }</span><span class="diff-line del">-    - { role: aria2_ng, tags: [&#x27;aria2-ng&#x27;] }</span><span class="diff-line context">     - { role: audiobookshelf, tags: [&#x27;audiobookshelf&#x27;] }</span><span class="diff-line context">     - { role: barcodebuddy, tags: [&#x27;barcodebuddy&#x27;] }</span><span class="diff-line context">     - { role: beets, tags: [&#x27;beets&#x27;] }</span><span class="diff-line del">-    - { role: booksonic, tags: [&#x27;booksonic&#x27;] }</span><span class="diff-line context">     - { role: bookstack, tags: [&#x27;bookstack&#x27;] }</span><span class="diff-line context">     - { role: calibre, tags: [&#x27;calibre&#x27;] }</span><span class="diff-line context">     - { role: calibre_web, tags: [&#x27;calibre-web&#x27;] }</span><span class="diff-line hunk">@@ -39,7 +34,6 @@</span><span class="diff-line context">     - { role: cockpit, tags: [&#x27;cockpit&#x27;] }</span><span class="diff-line context">     - { role: codex, tags: [&#x27;codex&#x27;] }</span><span class="diff-line context">     - { role: code_server, tags: [&#x27;code-server&#x27;] }</span><span class="diff-line del">-    - { role: comicstreamer, tags: [&#x27;comicstreamer&#x27;] }</span><span class="diff-line context">     - { role: comixed, tags: [&#x27;comixed&#x27;] }</span><span class="diff-line context">     - { role: crafty, tags: [&#x27;crafty&#x27;] }</span><span class="diff-line context">     - { role: dashdot, tags: [&#x27;dashdot&#x27;] }</span><span class="diff-line hunk">@@ -48,7 +42,6 @@</span><span class="diff-line context">     - { role: delugevpn, tags: [&#x27;delugevpn&#x27;] }</span><span class="diff-line context">     - { role: discoflix, tags: [&#x27;discoflix&#x27;] }</span><span class="diff-line context">     - { role: dockwatch, tags: [&#x27;dockwatch&#x27;] }</span><span class="diff-line del">-    - { role: docspell, tags: [&#x27;docspell&#x27;] }</span><span class="diff-line context">     - { role: doplarr, tags: [&#x27;doplarr&#x27;] }</span><span class="diff-line context">     - { role: duplicati, tags: [&#x27;duplicati&#x27;] }</span><span class="diff-line context">     - { role: elasticsearch, tags: [&#x27;elasticsearch&#x27;] }</span><span class="diff-line hunk">@@ -71,7 +64,6 @@</span><span class="diff-line context">     - { role: goaccess, tags: [&#x27;goaccess&#x27;] }</span><span class="diff-line context">     - { role: gitea, tags: [&#x27;gitea&#x27;] }</span><span class="diff-line context">     - { role: glances_web, tags: [&#x27;glances-web&#x27;] }</span><span class="diff-line del">-    - { role: goplaxt, tags: [&#x27;goplaxt&#x27;] }</span><span class="diff-line context">     - { role: gotenberg, tags: [&#x27;gotenberg&#x27;] }</span><span class="diff-line context">     - { role: gotify, tags: [&#x27;gotify&#x27;] }</span><span class="diff-line context">     - { role: grocy, tags: [&#x27;grocy&#x27;] }</span><span class="diff-line hunk">@@ -81,6 +73,7 @@</span><span class="diff-line context">     - { role: heimdall, tags: [&#x27;heimdall&#x27;] }</span><span class="diff-line context">     - { role: hoarder, tags: [&#x27;hoarder&#x27;] }</span><span class="diff-line context">     - { role: homarr, tags: [&#x27;homarr&#x27;] }</span><span class="diff-line add">+    - { role: homarr_legacy, tags: [&#x27;homarr-legacy&#x27;] }</span><span class="diff-line context">     - { role: homeassistant, tags: [&#x27;homeassistant&#x27;] }</span><span class="diff-line context">     - { role: homebox, tags: [&#x27;homebox&#x27;] }</span><span class="diff-line context">     - { role: homepage, tags: [&#x27;homepage&#x27;] }</span><span class="diff-line hunk">@@ -106,7 +99,6 @@</span><span class="diff-line context">     - { role: linkding, tags: [&#x27;linkding&#x27;] }</span><span class="diff-line context">     - { role: linkwarden, tags: [&#x27;linkwarden&#x27;] }</span><span class="diff-line context">     - { role: makemkv, tags: [&#x27;makemkv&#x27;] }</span><span class="diff-line del">-    - { role: maybe_finance, tags: [&#x27;maybe-finance&#x27;] }</span><span class="diff-line context">     - { role: mealie, tags: [&#x27;mealie&#x27;] }</span><span class="diff-line context">     - { role: medusa, tags: [&#x27;medusa&#x27;] }</span><span class="diff-line context">     - { role: meilisearch, tags: [&#x27;meilisearch&#x27;] }</span><span class="diff-line hunk">@@ -149,7 +141,6 @@</span><span class="diff-line context">     - { role: qbit_manage, tags: [&#x27;qbit-manage&#x27;] }</span><span class="diff-line context">     - { role: qbittorrentvpn, tags: [&#x27;qbittorrentvpn&#x27;] }</span><span class="diff-line context">     - { role: qui, tags: [&#x27;qui&#x27;] }</span><span class="diff-line del">-    - { role: rdtclient, tags: [&#x27;rdtclient&#x27;] }</span><span class="diff-line context">     - { role: recyclarr, tags: [&#x27;recyclarr&#x27;] }</span><span class="diff-line context">     - { role: reposilite, tags: [&#x27;reposilite&#x27;] }</span><span class="diff-line context">     - { role: requestrr, tags: [&#x27;requestrr&#x27;] }</span><span class="diff-line hunk">@@ -158,7 +149,6 @@</span><span class="diff-line context">     - { role: rocketchat, tags: [&#x27;rocketchat&#x27;] }</span><span class="diff-line context">     - { role: sabthrottle, tags: [&#x27;sabthrottle&#x27;] }</span><span class="diff-line context">     - { role: semaphoreui, tags: [&#x27;semaphoreui&#x27;] }</span><span class="diff-line del">-    - { role: solr, tags: [&#x27;solr&#x27;] }</span><span class="diff-line context">     - { role: speedtest, tags: [&#x27;speedtest&#x27;] }</span><span class="diff-line context">     - { role: sqlitebrowser, tags: [&#x27;sqlitebrowser&#x27;] }</span><span class="diff-line context">     - { role: sshwifty, tags: [&#x27;sshwifty&#x27;] }</span><span class="diff-line hunk">@@ -169,13 +159,13 @@</span><span class="diff-line context">     - { role: tauticord, tags: [&#x27;tauticord&#x27;] }</span><span class="diff-line context">     - { role: tdarr, tags: [&#x27;tdarr&#x27;] }</span><span class="diff-line context">     - { role: tdarr_node, tags: [&#x27;tdarr-node&#x27;] }</span><span class="diff-line del">-    - { role: teamspeak, tags: [&#x27;teamspeak&#x27;] }</span><span class="diff-line context">     - { role: telegraf, tags: [&#x27;telegraf&#x27;] }</span><span class="diff-line context">     - { role: teslamate, tags: [&#x27;teslamate&#x27;] }</span><span class="diff-line context">     - { role: thelounge, tags: [&#x27;thelounge&#x27;] }</span><span class="diff-line context">     - { role: threadfin, tags: [&#x27;threadfin&#x27;] }</span><span class="diff-line context">     - { role: tika, tags: [&#x27;tika&#x27;] }</span><span class="diff-line context">     - { role: tqm, tags: [&#x27;tqm&#x27;] }</span><span class="diff-line add">+    - { role: traccar, tags: [&#x27;traccar&#x27;] }</span><span class="diff-line context">     - { role: trackarr, tags: [&#x27;trackarr&#x27;] }</span><span class="diff-line context">     - { role: traefik_robotstxt, tags: [&#x27;traefik-robotstxt&#x27;] }</span><span class="diff-line context">     - { role: transmission, tags: [&#x27;transmission&#x27;] }</span><span class="diff-line hunk">@@ -191,7 +181,6 @@</span><span class="diff-line context">     - { role: vaultwarden, tags: [&#x27;vaultwarden&#x27;] }</span><span class="diff-line context">     - { role: vnstat, tags: [&#x27;vnstat&#x27;] }</span><span class="diff-line context">     - { role: watchstate, tags: [&#x27;watchstate&#x27;] }</span><span class="diff-line del">-    - { role: watchtower, tags: [&#x27;watchtower&#x27;] }</span><span class="diff-line context">     - { role: wikijs, tags: [&#x27;wikijs&#x27;] }</span><span class="diff-line context">     - { role: wireguard, tags: [&#x27;wireguard&#x27;] }</span><span class="diff-line context">     - { role: wizarr, tags: [&#x27;wizarr&#x27;] }</span></pre></div>
            </section>
        </main>
        
        <footer>
            <p>Generated by branch-diff.py</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.file-section').forEach(s => s.classList.add('collapsed'));
            }
        });
    </script>
</body>
</html>